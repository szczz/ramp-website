"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[7610,8089],{45996:function(e,t,n){n.d(t,{a:function(){return a},n:function(){return o}});var i=n(98503);class o{constructor(e,t){this.min=e,this.max=t,this.range=t-e}normalize(e,t=0,n=!1){return r(this.range,this.min,this.max,e,t,n)}clamp(e,t=0){return(0,i.aP)(e-t,this.min,this.max)+t}monotonic(e,t,n){return e<t?t:t+s(this.range,e-t,n)}minimalMonotonic(e,t,n){return r(this.range,e,e+this.range,t,n)}center(e,t,n){return t=this.monotonic(e,t,n),this.normalize((e+t)/2,n)}diff(e,t,n){return this.monotonic(e,t,n)-e}shortestSignedDiff(e,t){e=this.normalize(e);const n=(t=this.normalize(t))-e,i=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e);return Math.abs(n)<Math.abs(i)?n:i}contains(e,t,n){return t=this.minimalMonotonic(e,t),(n=this.minimalMonotonic(e,n))>e&&n<t}}function r(e,t,n,i,o=0,r=!1){return(i-=o)<t?i+=s(e,t-i):i>n&&(i-=s(e,i-n)),r&&i===n&&(i=t),i+o}function s(e,t,n=0){return Math.ceil((t-n)/e)*e+n}const a=new o(0,360)},98089:function(e,t,n){n.r(t),n.d(t,{F:function(){return V},a:function(){return d},i:function(){return S},n:function(){return b},p:function(){return s},y:function(){return M}});var i,o=n(98503),r=n(22555);let s=i=class extends o.v{constructor(e){super(e),this.name=null,this.code=null}clone(){return new i({name:this.name,code:this.code})}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],s.prototype,"name",void 0),(0,o.k)([(0,o.o)({type:[String,Number],json:{write:!0}})],s.prototype,"code",void 0),s=i=(0,o.k)([(0,o.A)("esri.layers.support.CodedValue")],s);const a=new o.ax({inherited:"inherited",codedValue:"coded-value",range:"range"});let l=class extends o.v{constructor(e){super(e),this.name=null,this.type=null}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],l.prototype,"name",void 0),(0,o.k)([(0,o.bk)(a)],l.prototype,"type",void 0),l=(0,o.k)([(0,o.A)("esri.layers.support.Domain")],l);const u=l;var c;let p=c=class extends u{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const n=String(e);this.codedValues.some((e=>(String(e.code)===n&&(t=e.name),!!t)))}return t}clone(){return new c({codedValues:(0,o.f)(this.codedValues),name:this.name})}};(0,o.k)([(0,o.o)({type:[s],json:{write:!0}})],p.prototype,"codedValues",void 0),(0,o.k)([(0,o.bk)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=c=(0,o.k)([(0,o.A)("esri.layers.support.CodedValueDomain")],p);const d=p;var h;let y=h=class extends u{constructor(e){super(e),this.type="inherited"}clone(){return new h}};(0,o.k)([(0,o.bk)({inherited:"inherited"})],y.prototype,"type",void 0),y=h=(0,o.k)([(0,o.A)("esri.layers.support.InheritedDomain")],y);const m=y;var f;let v=f=class extends u{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new f({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,o.k)([(0,o.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,n){t[n]=[this.minValue||0,e]}}}})],v.prototype,"maxValue",void 0),(0,o.k)([(0,o.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,n){t[n]=[e,this.maxValue||0]}}}})],v.prototype,"minValue",void 0),(0,o.k)([(0,o.bk)({range:"range"})],v.prototype,"type",void 0),v=f=(0,o.k)([(0,o.A)("esri.layers.support.RangeDomain")],v);const g=v,b={key:"type",base:u,typeMap:{range:g,"coded-value":d,inherited:m}};function S(e){if(!e?.type)return null;switch(e.type){case"range":return g.fromJSON(e);case"codedValue":return d.fromJSON(e);case"inherited":return m.fromJSON(e)}return null}var x;const w=new o.ax({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let k=x=class extends o.v{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?.value??null}readValueType(e,{description:t}){let n=null;try{n=t?JSON.parse(t):null}catch{}return n?w.fromJSON(n.fieldValueType):null}clone(){return new x({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],k.prototype,"alias",void 0),(0,o.k)([(0,o.o)({type:[String,Number],json:{write:{allowNull:!0}}})],k.prototype,"defaultValue",void 0),(0,o.k)([(0,o.o)()],k.prototype,"description",void 0),(0,o.k)([(0,o.u)("description")],k.prototype,"readDescription",null),(0,o.k)([(0,o.o)({types:b,json:{read:{reader:S},write:!0}})],k.prototype,"domain",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],k.prototype,"editable",void 0),(0,o.k)([(0,o.o)({type:o.bp,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],k.prototype,"length",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],k.prototype,"name",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],k.prototype,"nullable",void 0),(0,o.k)([(0,o.bk)(r.i)],k.prototype,"type",void 0),(0,o.k)([(0,o.o)()],k.prototype,"valueType",void 0),(0,o.k)([(0,o.u)("valueType",["description"])],k.prototype,"readValueType",null),(0,o.k)([(0,o.o)({type:Boolean,json:{read:!1}})],k.prototype,"visible",void 0),k=x=(0,o.k)([(0,o.A)("esri.layers.support.Field")],k);const M=k,V=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}))},36879:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(98503),o=n(6435);function r(e){return"timeZone"in e}function s(e){return"timeZone"in e}function a(e){return"dateFieldsTimeZone"in e}const l=new Map;class u{static fromJSON(e){return new u(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new u(e.fields??[],h(e))}static fromLayerJSON(e){return new u(e.fields??[],h(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const n=[];for(const o of this.fields){const e=o?.name,t=p(e);if(e&&t){const r=c(e);this._fieldsMap.set(e,o),this._fieldsMap.set(r,o),this._normalizedFieldsMap.set(t,o),n.push(`${r}:${o.type}:${this._timeZoneByFieldName?.get(e)}`),(0,i.ag)(o)?(this.dateFields.push(o),this._dateFieldsSet.add(o)):(0,i.ah)(o)&&(this._numericFieldsSet.add(o),this.numericFields.push(o)),(0,i.ai)(o)||(0,i.aj)(o)||(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable)}}n.sort(),this.uid=n.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,i.ai)(e)||(0,i.aj)(e)||e.nullable||void 0!==(0,i.ak)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(c(e))??this._normalizedFieldsMap.get(p(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(i.n.getLogger("esri.layers.support.FieldsIndex").error(new i.s("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),i.al):d.has(t.type)?i.am:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===i.am?o.t.instance:t===i.al?i.an.utcInstance:(0,i.ao)(l,t,(()=>i.a6.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,i.ap)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,i.aq)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function c(e){return e.trim().toLowerCase()}function p(e){return(0,i.ar)(e)?.toLowerCase()??""}const d=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function h(e){const t=new Map;if(!e.fields)return t;const n=!0===e.datesInUnknownTimezone,{timeInfo:o,editFieldsInfo:l}=e,u=(o?"startField"in o?o.startField:o.startTimeField:"")??"",p=(o?"endField"in o?o.endField:o.endTimeField:"")??"",h=a(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,i.as)(e.dateFieldsTimeReference):null,y=l?r(l)?l.timeZone??h:l.dateFieldsTimeReference?(0,i.as)(l.dateFieldsTimeReference):h??i.al:null,m=o?s(o)?o.timeZone??h:o.timeReference?(0,i.as)(o.timeReference):h:null,f=new Map([[c(l?.creationDateField??""),y],[c(l?.editDateField??""),y],[c(u),m],[c(p),m]]);for(const{name:r,type:s}of e.fields)if(d.has(s))t.set(r,i.am);else if("date"!==s&&"esriFieldTypeDate"!==s)t.set(r,null);else if(n)t.set(r,i.am);else{const e=f.get(c(r??""))??h;t.set(r,e)}return t}},83424:function(e,t,n){n.d(t,{t:function(){return o}});var i=n(98503);const o=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&r(e,t.effectiveScaleRange);const n=this._get("effectiveScaleRange");return n&&n.minScale===e.minScale&&n.maxScale===e.maxScale?n:e}};return(0,i.k)([(0,i.o)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,i.k)([(0,i.o)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,i.k)([(0,i.o)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,i.k)([(0,i.A)("esri.layers.mixins.ScaleRangeLayer")],t),t};function r(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}},75863:function(e,t,n){n.d(t,{d:function(){return c},e:function(){return r},l:function(){return a}});var i=n(98503),o=n(50257);const r=(0,i.g)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let s=class extends((0,i.a_)(i.v)){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return(0,o.m)(this.value,this.unit,"milliseconds")}};(0,i.k)([(0,i.bk)(r,{nonNullable:!0})],s.prototype,"unit",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0},nonNullable:!0})],s.prototype,"value",void 0),s=(0,i.k)([(0,i.A)("esri.time.TimeInterval")],s);const a=s;function l(e,t){return a.fromJSON({value:e,unit:t})}let u=class extends((0,i.a_)(i.v)){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?o.p.fromArray(t.timeExtent):null}writeFullTimeExtent(e,t){null!=e?.start&&null!=e.end?t.timeExtent=e.toArray():t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?l(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?l(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}writeInterval(e,t){t.timeInterval=e?.toJSON().value??null,t.timeIntervalUnits=e?.toJSON().unit??null}};(0,i.k)([(0,i.o)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],u.prototype,"cumulative",void 0),(0,i.k)([(0,i.o)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"endField",void 0),(0,i.k)([(0,i.o)({type:o.p,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"fullTimeExtent",void 0),(0,i.k)([(0,i.u)("fullTimeExtent",["timeExtent"])],u.prototype,"readFullTimeExtent",null),(0,i.k)([(0,i.q)("fullTimeExtent")],u.prototype,"writeFullTimeExtent",null),(0,i.k)([(0,i.o)({type:Boolean,json:{write:!0}})],u.prototype,"hasLiveData",void 0),(0,i.k)([(0,i.o)({type:a,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"interval",void 0),(0,i.k)([(0,i.u)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],u.prototype,"readInterval",null),(0,i.k)([(0,i.q)("interval")],u.prototype,"writeInterval",null),(0,i.k)([(0,i.o)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],u.prototype,"startField",void 0),(0,i.k)([(0,i.o)((0,i.bo)("timeReference",!0))],u.prototype,"timeZone",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],u.prototype,"trackIdField",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],u.prototype,"useTime",void 0),(0,i.k)([(0,i.o)({type:[Date],json:{read:!1}})],u.prototype,"stops",void 0),u=(0,i.k)([(0,i.A)("esri.layers.support.TimeInfo")],u);const c=u},6435:function(e,t,n){n.d(t,{i:function(){return s},r:function(){return r},t:function(){return o}});var i=n(98503);class o{}function r(e){return e instanceof i.a7?e===o.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return r(e)?o.instance:e}o.instance=new i.a6("Etc/UTC")},27610:function(e,t,n){n.r(t),n.d(t,{default:function(){return je}});var i=n(98503),o=n(88012),r=n(92157),s=n(28252),a=n(18696),l=n(36313),u=n(99907),c=n(20784),p=n(50293),d=n(83424),h=n(47100),y=n(5948),m=n(20014),f=n(98089),v=n(36879),g=n(75863),b=n(45996),S=n(74967),x=n(66363),w=n(6256),k=n(25209),M=n(50257),V=n(43338);const j=(0,i.aA)(),T=(0,w.e)(),F=(0,w.e)(),N=(0,w.e)(),I=(0,i.cp)(0,0,1),z=(0,i.cp)(0,1,0),A=(0,i.cp)(1,0,0);function _(e){(0,r.s)(j,e),(0,r.A)(j,j);const t=Math.atan2(j[1],j[0]),n=(0,x.b)((0,w.e)(),I,-t);(0,r.Q)(j,j,n);const i=-1*Math.atan2(j[2],j[0]);return[(0,k.c)(t)+270,(0,k.c)(i)+90]}function q(e,t){return(0,x.b)(F,I,(0,k.u)(e-270)),(0,x.b)(N,z,(0,k.u)(t-90)),(0,x.x)(T,F,N),(0,r.s)(j,A),(0,r.Q)(j,j,T),(0,r.A)(j,j),[j[0],j[1],j[2]]}let R=class extends((0,i.a_)(i.v)){constructor(e){super(e),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(e),0,!0)}set orientation(e){const t=q(e,this.tilt);this._set("normal",t),this._set("orientation",e)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(t),0,!0)}set tilt(e){const t=q(this.orientation,e);this._set("normal",t),this._set("tilt",e)}};(0,i.k)([(0,i.o)({type:Boolean,json:{write:!0}})],R.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],R.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,i.by)((e=>b.a.normalize((0,i.f$)(e),0,!0)))],R.prototype,"orientation",null),(0,i.k)([(0,i.o)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,i.by)((e=>b.a.normalize((0,i.f$)(e),0,!0)))],R.prototype,"tilt",null),(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],R.prototype,"normal",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],R.prototype,"point",void 0),R=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelSlice")],R);const D=R;let P=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(e),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(t),0,!0)}};(0,i.k)([(0,i.o)({type:Boolean,json:{default:!0,write:!0}})],P.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:String,json:{origins:{service:{read:i.dj}},write:{enabled:!0,isRequired:!0}}}),(0,S.j)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],P.prototype,"href",void 0),(0,i.k)([(0,i.o)({type:i.bp,json:{write:{enabled:!0,isRequired:!0}}})],P.prototype,"id",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],P.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],P.prototype,"orientation",null),(0,i.k)([(0,i.o)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],P.prototype,"tilt",null),(0,i.k)([(0,i.o)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],P.prototype,"normal",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],P.prototype,"point",void 0),(0,i.k)([(0,i.o)({type:[i.bp],json:{write:{enabled:!0,isRequired:!0}}})],P.prototype,"sizeInPixel",void 0),(0,i.k)([(0,i.o)({type:[D],json:{write:!0}})],P.prototype,"slices",void 0),(0,i.k)([(0,i.o)({type:i.bp,json:{default:0,write:!0}})],P.prototype,"timeId",void 0),(0,i.k)([(0,i.o)({type:i.bp,json:{write:{enabled:!0,isRequired:!0}}})],P.prototype,"variableId",void 0),P=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelSection")],P);const L=P;let O=class extends i.v{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,i.k)([(0,i.o)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],O.prototype,"diffuseFactor",void 0),(0,i.k)([(0,i.o)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],O.prototype,"specularFactor",void 0),O=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelSimpleShading")],O);const E=O;let B=class extends i.v{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,i.k)([(0,i.o)({type:["discrete","continuous"],json:{write:!0}})],B.prototype,"continuity",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{write:!0}})],B.prototype,"hasNoData",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],B.prototype,"noData",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],B.prototype,"offset",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],B.prototype,"scale",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],B.prototype,"type",void 0),B=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelFormat")],B);const C=B;let $=class extends i.v{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],$.prototype,"id",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],$.prototype,"description",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],$.prototype,"name",void 0),(0,i.k)([(0,i.o)({type:C,json:{write:!0}})],$.prototype,"originalFormat",void 0),(0,i.k)([(0,i.o)({type:C,json:{write:{enabled:!0,isRequired:!0}}})],$.prototype,"renderingFormat",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],$.prototype,"unit",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],$.prototype,"volumeId",void 0),(0,i.k)([(0,i.o)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],$.prototype,"type",void 0),$=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelVariable")],$);const U=$;let Z=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.color=i.aC.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,i.k)([(0,i.o)({type:i.aC,json:{type:[i.bp],write:{enabled:!0,isRequired:!0}}})],Z.prototype,"color",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Z.prototype,"value",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{default:!0,write:!0}})],Z.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],Z.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{default:!1,write:!0}})],Z.prototype,"colorLocked",void 0),Z=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelIsosurface")],Z);const J=Z;let W=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,i.k)([(0,i.o)({type:i.aC,json:{type:[i.bp],write:{enabled:!0,isRequired:!0}}})],W.prototype,"color",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],W.prototype,"position",void 0),W=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelColorStop")],W);const Y=W;let X=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,i.k)([(0,i.o)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],X.prototype,"opacity",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],X.prototype,"position",void 0),X=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelOpacityStop")],X);const G=X;let K=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,i.k)([(0,i.o)({type:Boolean,json:{default:!1,write:!0}})],K.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],K.prototype,"range",void 0),K=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelRangeFilter")],K);const Q=K;var H;(function(e){e[e.Color=1]="Color",e[e.Alpha=2]="Alpha",e[e.Both=3]="Both"})(H||(H={}));let ee=class extends((0,i.a_)(i.v)){constructor(e){super(e),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(i.V.ofType(Y)),this.opacityStops=new(i.V.ofType(G))}set colorStops(e){this._set("colorStops",(0,i.cW)(e,this._get("colorStops"),i.V.ofType(Y)))}set opacityStops(e){this._set("opacityStops",(0,i.cW)(e,this._get("opacityStops"),i.V.ofType(G)))}getPreviousNext(e,t,n){let i=e;for(;--i>0&&t[i].type!==n&&t[i].type!==H.Both;);let o=e;const r=t.length;for(;++o<r&&t[o].type!==n&&t[o].type!==H.Both;);return[i,o]}get rasterizedTransferFunction(){const e=[];if(this.colorStops.length<2)return e;const t=[],n=[],o=1e-5;for(const i of this.colorStops){if(!i.color)return e;n.push({color:{r:i.color.r,g:i.color.g,b:i.color.b,a:Math.round(255*(1-i.color.a))},position:i.position,type:H.Color})}if(0===this.opacityStops.length)for(const i of n)t.push({color:i.color,position:i.position});else{for(const t of this.opacityStops){const e=(0,i.aP)(t.position,0,1),r=Math.round(255*(0,i.aP)(1-t.opacity,0,1));let s=!1;for(const t of n)if(t.type===H.Color&&Math.abs(t.position-e)<o){t.color.a=r,t.type=H.Both,s=!0;break}s||n.push({color:{r:0,g:0,b:0,a:r},position:t.position,type:H.Alpha})}n.sort(((e,t)=>e.position<t.position?-1:1));const e=n.length;for(let t=0;t<e;++t){const o=n[t];if(o.type!==H.Both)if(o.type===H.Color){const[r,s]=this.getPreviousNext(t,n,H.Alpha);if(-1!==r&&s!==e){const e=(o.position-n[r].position)/(n[s].position-n[r].position);o.color.a=Math.round((0,i.iK)(n[r].color.a,n[s].color.a,e))}else o.color.a=-1!==r?n[r].color.a:n[s].color.a}else{const[r,s]=this.getPreviousNext(t,n,H.Color);if(-1!==r&&s!==e){const e=(o.position-n[r].position)/(n[s].position-n[r].position),t=n[r].color,a=n[s].color;ne.forEach((n=>{o.color[n]=Math.round((0,i.iK)(t[n],a[n],e))}))}else-1!==r?ne.forEach((e=>{o.color[e]=n[r].color[e]})):ne.forEach((e=>{o.color[e]=n[s].color[e]}))}}for(const i of n)t.push({color:i.color,position:i.position})}t[0].position=0,t[t.length-1].position=1;let r=0,s=1;for(let a=0;a<this._colorMapSize;++a){const n=a/this._colorMapSize;for(;n>t[s].position;)r=s++;const o=(n-t[r].position)/(t[s].position-t[r].position),l=t[r].color,u=t[s].color,c=new i.aC;ne.forEach((e=>{c[e]=Math.round((0,i.iK)(l[e],u[e],o))})),c.a=(0,i.aP)(1-(0,i.iK)(l.a,u.a,o)/255,0,1),e.push(c)}return e}getColorForContinuousDataValue(e,t){const n=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||n.length<256)return null;let o=this.stretchRange[0],r=this.stretchRange[1];if(o>r){const e=o;o=r,r=e}e=(0,i.aP)(e,o,r);const s=n[Math.round((e-o)/(r-o)*(this._colorMapSize-1))].clone();return t||(s.a=1),s}};(0,i.k)([(0,i.o)({type:["linear","nearest"],json:{write:!0}})],ee.prototype,"interpolation",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],ee.prototype,"stretchRange",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(Y),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],ee.prototype,"colorStops",null),(0,i.k)([(0,i.o)({type:i.V.ofType(G),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],ee.prototype,"opacityStops",null),(0,i.k)([(0,i.o)({type:Q,json:{write:!0}})],ee.prototype,"rangeFilter",void 0),(0,i.k)([(0,i.o)({type:[i.aC],clonable:!1,json:{read:!1}})],ee.prototype,"rasterizedTransferFunction",null),ee=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelTransferFunctionStyle")],ee);const te=ee,ne=["r","g","b"];let ie=class extends((0,i.a_)(i.v)){constructor(){super(...arguments),this.color=i.aC.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,i.k)([(0,i.o)({type:i.aC,json:{type:[i.bp],write:{enabled:!0,isRequired:!0}}})],ie.prototype,"color",void 0),(0,i.k)([(0,i.o)({type:i.bp,json:{write:{enabled:!0,isRequired:!0}}})],ie.prototype,"value",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{default:!0,write:!0}})],ie.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],ie.prototype,"label",void 0),ie=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelUniqueValue")],ie);const oe=ie;var re;let se=re=class extends i.v{constructor(e){super(e),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(i.V.ofType(oe)),this.isosurfaces=new(i.V.ofType(J))}clone(){return new re({variableId:this.variableId,label:this.label,transferFunction:(0,i.f)(this.transferFunction),uniqueValues:(0,i.f)(this.uniqueValues),isosurfaces:(0,i.f)(this.isosurfaces)})}};(0,i.k)([(0,i.o)({type:i.bp,json:{write:{enabled:!0,isRequired:!0}}})],se.prototype,"variableId",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],se.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:te,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],se.prototype,"transferFunction",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(oe),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],se.prototype,"uniqueValues",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(J),json:{write:{enabled:!0,overridePolicy(){const e=!this.uniqueValues||this.uniqueValues.length<1,t=!!this.isosurfaces&&this.isosurfaces.length>0;return{enabled:e&&t}}}}})],se.prototype,"isosurfaces",void 0),se=re=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelVariableStyle")],se);const ae=se;function le(e){const t=/^(days?|hours?|minutes?|seconds?|d|h|m|s) since (\d{1,4})-(\d{1,2})-(\d{1,2})[ |T](\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[\s|Z]?(([+|\-|\s?])(\d{1,2}):(\d{1,2}))?$/i.exec(e);if(null==t)return{didParse:!1};const[,n,i,o,r,s,a,l,u,c,p,d,h]=t;let y="seconds";const m=n.charAt(0).toLowerCase();"d"===m?y="days":"h"===m?y="hours":"m"===m&&(y="minutes");const f=parseInt(i,10);if(Number.isNaN(f))return{didParse:!1};const v=parseInt(o,10);if(Number.isNaN(v)||v<1||v>12)return{didParse:!1};const g=parseInt(r,10);if(Number.isNaN(g)||g<1||g>31)return{didParse:!1};if(2===v){const e=f%4==0&&(f%100!=0||f%400==0);if(e&&g>29||!e&&g>28)return{didParse:!1}}else if((4===v||6===v||9===v||11===v)&&g>30)return{didParse:!1};const b=parseInt(s,10);if(Number.isNaN(b)||b<0||b>23)return{didParse:!1};const S=parseInt(a,10);if(Number.isNaN(S)||S<0||S>59)return{didParse:!1};const x=parseInt(l,10);if(Number.isNaN(x)||x<0||x>59)return{didParse:!1};let w=1,k=0,M=0;if(p&&(w="-"===p?-1:1),d){if(k=parseInt(d,10),Number.isNaN(k)||k<0)return{didParse:!1};if(0!==k){const e=w*k;if(e<-12||e>14)return{didParse:!1}}}if(h&&(M=parseInt(h,10),Number.isNaN(M)||M<0||M>59))return{didParse:!1};const V=`${f}`.padStart(4,"0"),j=`${v}`.padStart(2,"0"),T=`${g}`.padStart(2,"0"),F=`${b}`.padStart(2,"0"),N=`${S}`.padStart(2,"0"),I=`${x}`.padStart(2,"0");let z="Z";return 0===k&&0===M||(z=w>0?"+":"-",z+=`${k}`.padStart(2,"0"),z+=":",z+=`${M}`.padStart(2,"0")),{didParse:!0,unit:y,reference:new Date(`${V}-${j}-${T}T${F}:${N}:${I}.000${z}`)}}let ue=class extends i.v{constructor(){super(...arguments),this.values=null}};(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],ue.prototype,"values",void 0),ue=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelIrregularSpacing")],ue);const ce=ue;let pe=class extends i.v{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],pe.prototype,"scale",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],pe.prototype,"offset",void 0),pe=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelRegularSpacing")],pe);const de=pe;let he=class extends i.v{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(this.irregularSpacing?.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,i.k)([(0,i.o)({type:ce,json:{write:!0}})],he.prototype,"irregularSpacing",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{write:!0}})],he.prototype,"isPositiveUp",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{write:!0}})],he.prototype,"isWrappedDateLine",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],he.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],he.prototype,"name",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],he.prototype,"quantity",void 0),(0,i.k)([(0,i.o)({type:de,json:{write:!0}})],he.prototype,"regularSpacing",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],he.prototype,"size",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],he.prototype,"unit",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{read:!1}})],he.prototype,"isRegular",null),he=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelDimension")],he);const ye=he;let me=class extends i.v{constructor(e){super(e),this.id=0,this.dimensions=null,this.spatialReference=i.B.WGS84}get zDimension(){if(!this.dimensions||!Array.isArray(this.dimensions)||4!==this.dimensions.length)return-1;for(let e=2;e<4;++e)if(this.dimensions[e].size>0)return e;return-1}get isValid(){return!!this.dimensions&&!!Array.isArray(this.dimensions)&&4===this.dimensions.length&&!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&!(-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),t=this.dimensions[1].getRange(),n=this.dimensions[2],i=n.isRegular?n.getRange():[0,n.size];return[e[0],t[0],i[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const e=this.dimensions[0].getRange(),t=this.dimensions[1].getRange(),n=this.dimensions[2],i=n.isRegular?n.getRange():[0,n.size],o=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let r=0;r<3;++r)o[r]<2?o[r]=1:o[r]-=1;return n.isRegular&&!n.isPositiveUp&&(o[2]*=-1),[(e[1]-e[0])/o[0],(t[1]-t[0])/o[1],(i[1]-i[0])/o[2]]}get volumeType(){if(this.isValid){const e=this.dimensions[2].size>0;let t=this.dimensions[3].size>0;if(t){const e=this.dimensions[3];t="time"===e.quantity,t&&null!==e.unit&&(t=le(e.unit).didParse)}if(!e&&t)return"xyt";if(e&&t)return"xyzt"}return"xyz"}get sizeInVoxels(){if(!this.isValid)return[0,0,0];const e=this.zDimension;return[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[e].size]}get timeStops(){if("xyzt"!==this.volumeType)return[];const e=this.dimensions[3],t=[],n=le(e.unit);if(n.didParse)if(e.isRegular){const i=e.regularSpacing?.offset??0,o=e.regularSpacing?.scale||1;for(let r=0;r<e.size;++r){const e=i+o*r;t.push((0,M.i)(n.reference,e,n.unit))}}else if(Array.isArray(e.irregularSpacing?.values)&&e.irregularSpacing.values.length>0)for(let i=0;i<e.irregularSpacing.values.length;++i){const o=e.irregularSpacing.values[i];t.push((0,M.i)(n.reference,o,n.unit))}return t}computeVoxelSpaceLocation(e){if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return i.n.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,i.bh)(this.spatialReference,e.spatialReference))return i.n.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const t=(0,i.cp)(e.x,e.y,e.z??0);(0,r.c)(t,t,this.originInLayerSpace3D),(0,r.i)(t,t,this.voxelSizeInLayerSpaceSigned);const n=this.dimensions[this.zDimension];if(!n.isRegular&&Array.isArray(n.irregularSpacing?.values)&&n.irregularSpacing.values.length>1){const i=e.z??0,o=n.irregularSpacing.values,r=n.isPositiveUp?1:-1,s=o.reduce(((e,t)=>Math.abs(r*t-i)<Math.abs(r*e-i)?t:e));for(let e=0;e<o.length;++e)if(o[e]===s){t[2]=e;break}}return[t[0],t[1],t[2]]}computeLayerSpaceLocation(e){if(!this.isValid)return new i.bv({x:0,y:0,spatialReference:this.spatialReference});const t=(0,i.e$)(e);if((0,r.e)(t,t,this.voxelSizeInLayerSpaceSigned),(0,r.u)(t,t,this.originInLayerSpace3D),"xyt"===this.volumeType)return new i.bv({x:t[0],y:t[1],spatialReference:this.spatialReference});const n=this.dimensions[this.zDimension];return n.isRegular||Array.isArray(n.irregularSpacing?.values)&&(e[2]<0?t[2]=n.irregularSpacing.values[0]:e[2]<n.irregularSpacing.values.length?t[2]=n.irregularSpacing.values[e[2]]:t[2]=n.irregularSpacing.values[n.irregularSpacing.values.length-1],n.isPositiveUp||(t[2]*=-1)),new i.bv({x:t[0],y:t[1],z:t[2],spatialReference:this.spatialReference})}};(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],me.prototype,"id",void 0),(0,i.k)([(0,i.o)({type:[ye],json:{write:{enabled:!0,isRequired:!0}}})],me.prototype,"dimensions",void 0),(0,i.k)([(0,i.o)({type:i.B,json:{read:{enabled:!1}}})],me.prototype,"spatialReference",void 0),(0,i.k)([(0,i.o)({type:Number,json:{read:!1}})],me.prototype,"zDimension",null),(0,i.k)([(0,i.o)({type:[Boolean],json:{read:!1}})],me.prototype,"isValid",null),(0,i.k)([(0,i.o)({type:[Number],json:{read:!1}})],me.prototype,"originInLayerSpace3D",null),(0,i.k)([(0,i.o)({type:[Number],json:{read:!1}})],me.prototype,"voxelSizeInLayerSpaceSigned",null),(0,i.k)([(0,i.o)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],me.prototype,"volumeType",null),(0,i.k)([(0,i.o)({type:[Number],json:{read:!1}})],me.prototype,"sizeInVoxels",null),(0,i.k)([(0,i.o)({type:[Date],json:{read:!1,write:!1}})],me.prototype,"timeStops",null),me=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelVolume")],me);const fe=me;var ve;let ge=ve=class extends i.v{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const e=new ve;return e.apronWidth===this.apronWidth&&e.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],ge.prototype,"apronWidth",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],ge.prototype,"brickSize",void 0),(0,i.k)([(0,i.o)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],ge.prototype,"maxLodLevel",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],ge.prototype,"nodeSize",void 0),ge=ve=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelVolumeIndex")],ge);const be=ge;let Se=class extends((0,i.a_)(i.v)){constructor(e){super(e),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(e),0,!0)}set orientation(e){const t=q(e,this.tilt);this._set("normal",t),this._set("orientation",e)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[e,t]=_(this.normal);return b.a.normalize((0,i.f$)(t),0,!0)}set tilt(e){const t=q(this.orientation,e);this._set("normal",t),this._set("tilt",e)}};(0,i.k)([(0,i.o)({type:Boolean,json:{default:!0,write:!0}})],Se.prototype,"enabled",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],Se.prototype,"label",void 0),(0,i.k)([(0,i.o)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,i.by)((e=>b.a.normalize((0,i.f$)(e),0,!0)))],Se.prototype,"orientation",null),(0,i.k)([(0,i.o)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,i.by)((e=>b.a.normalize((0,i.f$)(e),0,!0)))],Se.prototype,"tilt",null),(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],Se.prototype,"normal",void 0),(0,i.k)([(0,i.o)({type:[Number],json:{write:!0}})],Se.prototype,"point",void 0),Se=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelDynamicSection")],Se);const xe=Se;var we;let ke=we=class extends i.v{constructor(e){super(e),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(i.V.ofType(D)),this.dynamicSections=new(i.V.ofType(xe))}set slices(e){this._set("slices",(0,i.cW)(e,this._get("slices"),i.V.ofType(D)))}set dynamicSections(e){this._set("dynamicSections",(0,i.cW)(e,this._get("dynamicSections"),i.V.ofType(xe)))}clone(){return new we({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,i.f)(this.slices),dynamicSections:(0,i.f)(this.dynamicSections)})}};(0,i.k)([(0,i.o)({type:i.bp,json:{write:{enabled:!0,isRequired:!0}}})],ke.prototype,"volumeId",void 0),(0,i.k)([(0,i.o)({type:Number,json:{default:1,write:!0}})],ke.prototype,"verticalExaggeration",void 0),(0,i.k)([(0,i.o)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],ke.prototype,"exaggerationMode",void 0),(0,i.k)([(0,i.o)({type:Number,json:{default:0,write:!0}})],ke.prototype,"verticalOffset",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(D),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],ke.prototype,"slices",null),(0,i.k)([(0,i.o)({type:i.V.ofType(xe),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],ke.prototype,"dynamicSections",null),ke=we=(0,i.k)([(0,i.A)("esri.layers.voxel.VoxelVolumeStyle")],ke);const Me=ke;let Ve=class extends((0,h.R)((0,l.l)((0,c.b)((0,p.j)((0,d.t)((0,o.S)((0,u.e)((0,a.i)(s.f))))))))){constructor(e){super(e),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new E,this.opacity=1,this.variables=new i.V,this.volumes=new i.V,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!1,this.popupTemplate=null,this.test=null,this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0,this.volumeStyles=new(i.V.ofType(Me)),this.variableStyles=new(i.V.ofType(ae)),this.sections=new(i.V.ofType(L))}normalizeCtorArgs(e){return e?.constantUpscaling&&(this.test={constantUpscaling:!0},delete e.constantUpscaling),e}set url(e){this._set("url",(0,y.y)(e,i.n.getLogger(this)))}load(e){const t=null!=e?e.signal:null,n=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(i.G).then((()=>this._fetchService(t))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(n),Promise.resolve(this)}read(e,t){super.read(e,t),"service"===t?.origin&&this.version.major<=3&&this.version.minor<=0&&!this.getAtOrigin("popupTemplate","service")&&this.setAtOrigin("popupTemplate",this.createPopupTemplate(),"service");for(const n of this.volumes)n.spatialReference=this.spatialReference}readVersion(e,t){return super.parseVersionString(e)}validateLayer(e){if(e.layerType&&e.layerType!==this.operationalLayerType)throw new i.s("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new i.s("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new i.s("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(e,t,n){if(null!=e&&"object"==typeof e){const o=i.au.fromJSON(e,n);if(0===o.zmin&&0===o.zmax&&Array.isArray(t.volumes)){const e=fe.fromJSON(t.volumes[0]);if(e.isValid&&"xyt"!==e.volumeType){const t=e.dimensions[2];if(t.isRegular){let e=t.regularSpacing.offset,n=t.regularSpacing.offset+t.regularSpacing.scale*(t.size-1);if(e>n){const t=e;e=n,n=t}o.zmin=e,o.zmax=n}}}return o}return null}get fields(){const e=[new f.y({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"}),new f.y({name:"Voxel.CurrentVariable",alias:"Current Variable",domain:null,editable:!1,length:128,type:"string"})];for(const n of this.variables){const t=new f.y({name:n.name,alias:n.description,domain:null,editable:!1,length:128,type:"discrete"===n.renderingFormat.continuity?"string":"double"});e.push(t)}const t=this.getVolume(null);if(null!=t){if("xyzt"===t.volumeType||"xyt"===t.volumeType){const t=new f.y({name:"Voxel.LocalTime",alias:"Local Time",domain:null,editable:!1,length:256,type:"date"});e.push(t);const n=new f.y({name:"Voxel.SourceTime",alias:"Source Time",domain:null,editable:!1,length:256,type:"string"});e.push(n)}if("xyt"!==t.volumeType){const t=new f.y({name:"Voxel.Depth",alias:"Depth",domain:null,editable:!1,length:128,type:"double"});e.push(t)}}return e}get fieldsIndex(){return this.loaded?new v.Z(this.fields):null}getField(e){return this.fieldsIndex?.get(e)}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.fields;return(0,V.p)({fields:t,title:"{Voxel.Position}"},e)}getConfiguration(){const e={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:this.index?.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return e.index&&this.index?.isValid()?JSON.stringify(e):""}getVariableStyle(e){let t=-1;if(t=e??this.currentVariableId,!this.variableStyles||-1===t)return null;const n=this.variableStyles.findIndex((e=>e.variableId===t));return n<0?null:this.variableStyles.at(n)}getVariable(e){let t=-1;if(t=e??this.currentVariableId,!this.variables||-1===t)return null;const n=this.variables.findIndex((e=>e.id===t));return n<0?null:this.variables.at(n)}getVolume(e){const t=this.getVariable(e);return null!=t?this.volumes.find((({id:e})=>e===t.volumeId)):null}get timeInfo(){const e=this.getVolume(null);if("xyzt"!==e?.volumeType)return null;const t=e.timeStops;if(!t?.length)return null;const n=new M.p({start:t[0],end:t.at(-1)});return new g.d({fullTimeExtent:n,stops:t})}getVolumeStyle(e){const t=this.getVariable(e);return null!=t?this.volumeStyles.find((({volumeId:e})=>e===t.volumeId)):null}getColorForContinuousDataValue(e,t,n){const i=this.getVariable(e);if(null==i||"continuous"!==i.renderingFormat?.continuity||!this.variableStyles)return null;const o=this.variableStyles.findIndex((t=>t.variableId===e));if(o<0)return null;const r=this.variableStyles.at(o);return r?.transferFunction?r.transferFunction.getColorForContinuousDataValue(t,n):null}getSections(){const e=[];for(const t of this.sections)e.push(new L({enabled:t.enabled,href:t.href,id:t.id,label:t.label,normal:t.normal,point:t.point,sizeInPixel:t.sizeInPixel,slices:t.slices,timeId:t.timeId,variableId:t.variableId}));return e}getVariableStyles(){const e=[];for(const t of this.variableStyles){const n=this._getVariable(t);if(null!=n){const o=t.clone();o.isosurfaces.length>4&&(o.isosurfaces=o.isosurfaces.slice(0,3),i.n.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const e of o.isosurfaces)if(!e.colorLocked){const t=this.getColorForContinuousDataValue(o.variableId,e.value,!1);null===t||t.equals(e.color)||(e.color=t)}if("continuous"===n.renderingFormat.continuity)(null===o.transferFunction||o.transferFunction.colorStops.length<2)&&i.n.getLogger(this).error(`VoxelVariableStyle for variable ${n.id} is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.`),null!==o.transferFunction&&(Array.isArray(o.transferFunction.stretchRange)&&2===o.transferFunction.stretchRange.length||(i.n.getLogger(this).error(`VoxelVariableStyle for variable ${n.id} is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].`),o.transferFunction.stretchRange=[0,1],o.transferFunction.colorStops.removeAll()));else if("discrete"===n.renderingFormat.continuity)if(0===t.uniqueValues.length)i.n.getLogger(this).error(`VoxelVariableStyle for variable ${n.id} is invalid. Unique values are required for discrete Voxel Layer variables.`);else for(const e of t.uniqueValues)null!==e.label&&void 0!==e.label||null===e.value||void 0===e.value||(e.label=e.value.toString());e.push(o)}else i.n.getLogger(this).error(`VoxelVariable ID=${t.variableId} doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored.`)}return e}getVolumeStyles(){const e=[];for(const t of this.volumeStyles){const n=this._getVolumeFromVolumeId(t.volumeId);if(null!=n){const i=t.clone();for(const e of i.slices)this._isPlaneValid(e,[0,1,n.zDimension],n.dimensions)||(e.enabled=!1,e.label="invalid");for(const e of i.dynamicSections)this._isPlaneValid(e,[0,1,n.zDimension],n.dimensions)||(e.enabled=!1,e.label="invalid");e.push(i)}else i.n.getLogger(this).error(`VoxelVolume ID=${t.volumeId} doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored.`)}return e}_getVariable(e){const t=e.variableId;for(const n of this.variables)if(n.id===t)return n;return null}_getVolumeFromVolumeId(e){for(const t of this.volumes)if(t.id===e)return t;return null}_isPlaneValid(e,t,n){if(!e.point||!Array.isArray(e.point)||3!==e.point.length||!e.normal||!Array.isArray(e.normal)||3!==e.normal.length)return!1;const o=(0,i.cp)(e.normal[0],e.normal[1],e.normal[2]);return(0,r.A)(o,o),!(Math.abs(o[0])+Math.abs(o[1])+Math.abs(o[2])<1e-6)&&(e.normal[0]=o[0],e.normal[1]=o[1],e.normal[2]=o[2],!0)}};(0,i.k)([(0,i.o)({type:["Voxel"]})],Ve.prototype,"operationalLayerType",void 0),(0,i.k)([(0,i.o)(m.d)],Ve.prototype,"legendEnabled",void 0),(0,i.k)([(0,i.o)({json:{write:!0}})],Ve.prototype,"title",void 0),(0,i.k)([(0,i.o)(m.y)],Ve.prototype,"url",null),(0,i.k)([(0,i.o)({type:i.V.ofType(L),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],Ve.prototype,"sections",void 0),(0,i.k)([(0,i.o)({type:i.bp,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],Ve.prototype,"currentVariableId",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(Me),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],Ve.prototype,"volumeStyles",void 0),(0,i.k)([(0,i.o)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],Ve.prototype,"renderMode",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(ae),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],Ve.prototype,"variableStyles",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],Ve.prototype,"enableSlices",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],Ve.prototype,"enableSections",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],Ve.prototype,"enableDynamicSections",void 0),(0,i.k)([(0,i.o)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],Ve.prototype,"enableIsosurfaces",void 0),(0,i.k)([(0,i.o)({type:E,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],Ve.prototype,"shading",void 0),(0,i.k)([(0,i.o)({type:["show","hide"]})],Ve.prototype,"listMode",void 0),(0,i.k)([(0,i.o)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ve.prototype,"opacity",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(U)})],Ve.prototype,"variables",void 0),(0,i.k)([(0,i.o)({type:i.V.ofType(fe)})],Ve.prototype,"volumes",void 0),(0,i.k)([(0,i.o)({type:be})],Ve.prototype,"index",void 0),(0,i.k)([(0,i.o)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],Ve.prototype,"minScale",void 0),(0,i.k)([(0,i.o)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],Ve.prototype,"maxScale",void 0),(0,i.k)([(0,i.o)({json:{read:!1},readOnly:!0})],Ve.prototype,"type",void 0),(0,i.k)([(0,i.o)({readOnly:!0,json:{name:"serviceVersion"}})],Ve.prototype,"version",void 0),(0,i.k)([(0,i.u)("service","version")],Ve.prototype,"readVersion",null),(0,i.k)([(0,i.o)({type:i.au})],Ve.prototype,"fullExtent",void 0),(0,i.k)([(0,i.u)("service","fullExtent",["fullExtent"])],Ve.prototype,"readFullExtent",null),(0,i.k)([(0,i.o)({readOnly:!0,clonable:!1,json:{read:!1}})],Ve.prototype,"fields",null),(0,i.k)([(0,i.o)({readOnly:!0})],Ve.prototype,"fieldsIndex",null),(0,i.k)([(0,i.o)({type:Boolean,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,ignoreOrigin:!0,writer(e,t,n){t[n]=!e}},origins:{"portal-item":{default:!0},"web-scene":{default:!0}}}})],Ve.prototype,"popupEnabled",void 0),(0,i.k)([(0,i.o)({type:i.b4,json:{name:"popupInfo",write:!0}})],Ve.prototype,"popupTemplate",void 0),(0,i.k)([(0,i.o)({readOnly:!0,json:{read:!1}})],Ve.prototype,"defaultPopupTemplate",null),(0,i.k)([(0,i.o)({type:g.d,readOnly:!0,json:{read:!1}})],Ve.prototype,"timeInfo",null),(0,i.k)([(0,i.o)({type:M.p,json:{read:!1}})],Ve.prototype,"timeExtent",void 0),(0,i.k)([(0,i.o)({type:g.l,json:{read:!1}})],Ve.prototype,"timeOffset",void 0),(0,i.k)([(0,i.o)({type:Boolean,nonNullable:!0,json:{origins:{"web-scene":{name:"timeAnimation",write:!0},service:{read:!1}}}})],Ve.prototype,"useViewTime",void 0),Ve=(0,i.k)([(0,i.A)("esri.layers.VoxelLayer")],Ve);const je=Ve},25209:function(e,t,n){n.d(t,{c:function(){return c},e:function(){return o},o:function(){return s},u:function(){return u}});let i=1e-6;function o(){return i}function r(e){i=e}const s=Math.random,a=Math.PI/180,l=180/Math.PI;function u(e){return e*a}function c(e){return e*l}function p(e,t){return Math.abs(e-t)<=i*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:s,equals:p,getEpsilon:o,setEpsilon:r,toDegree:c,toRadian:u},Symbol.toStringTag,{value:"Module"}))},22555:function(e,t,n){n.d(t,{i:function(){return o}});var i=n(98503);const o=new i.ax({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},10769:function(e,t,n){function i(){return[1,0,0,0,1,0,0,0,1]}function o(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function r(e,t,n,i,o,r,s,a,l){return[e,t,n,i,o,r,s,a,l]}function s(e,t){return new Float64Array(e,t,9)}n.d(t,{e:function(){return i},o:function(){return a},t:function(){return r}});const a=i();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:a,clone:o,create:i,createView:s,fromValues:r},Symbol.toStringTag,{value:"Module"}))},43338:function(e,t,n){n.d(t,{c:function(){return r},p:function(){return o}});var i=n(98503);function o({displayField:e,editFieldsInfo:t,fields:n,objectIdField:o,title:r},s){if(!n)return null;const a=u({editFieldsInfo:t,fields:n,objectIdField:o},s);if(!a.length)return null;const l=d({titleBase:r,fields:n,displayField:e}),c=p();return new i.b4({title:l,content:c,fieldInfos:a})}function r(e){const{title:t,graphic:n}=e??{},{attributes:i,sourceLayer:o}=n??{},r=o&&"displayField"in o?o.displayField:null,s=r?i?.[r]:null,a=n?.getObjectId()?.toString();return t||s||a||""}const s=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,i.bc)(e,t);function a({fields:e,ignoreFieldTypes:t,sortDisabled:n}){const i=e;return t&&(e=e.filter((e=>!t.includes(e.type)))),e===i&&(e=e.slice()),!0!==n&&e.sort(l),e}function l(e,t){return"oid"===e.type?-1:"oid"===t.type?1:h(e)?-1:h(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function u(e,t){const n=t?.visibleFieldNames;return a({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||y,sortDisabled:t?.sortDisabled}).map((t=>new i.b5({fieldName:t.name,isEditable:(0,i.b6)(t,e),label:t.alias,format:c(t),visible:s(t,{...e,visibleFieldNames:n})})))}function c(e){switch(e.type){case"small-integer":case"integer":case"single":return new i.b8({digitSeparator:!0,places:0});case"double":return new i.b8({digitSeparator:!0,places:2});case"string":return(0,i.b7)(e.name)?new i.b8({digitSeparator:!0,places:0}):void 0;default:return}}function p(){return[new i.b9,new i.ba]}function d(e){const t=(0,i.bb)(e),{titleBase:n}=e;return t?`${n}: {${t.trim()}}`:n??""}function h(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===e.alias?.toLowerCase()}const y=["geometry","blob","raster","guid","xml"]},66363:function(e,t,n){n.d(t,{L:function(){return b},N:function(){return D},O:function(){return S},R:function(){return L},T:function(){return w},X:function(){return V},b:function(){return c},v:function(){return p},x:function(){return d}});var i=n(10769),o=n(6256),r=n(98503),s=n(25209),a=n(92157),l=n(90211);function u(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function c(e,t,n){n*=.5;const i=Math.sin(n);return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=Math.cos(n),e}function p(e,t){const n=2*Math.acos(t[3]),i=Math.sin(n/2);return i>(0,s.e)()?(e[0]=t[0]/i,e[1]=t[1]/i,e[2]=t[2]/i):(e[0]=1,e[1]=0,e[2]=0),n}function d(e,t,n){const i=t[0],o=t[1],r=t[2],s=t[3],a=n[0],l=n[1],u=n[2],c=n[3];return e[0]=i*c+s*a+o*u-r*l,e[1]=o*c+s*l+r*a-i*u,e[2]=r*c+s*u+i*l-o*a,e[3]=s*c-i*a-o*l-r*u,e}function h(e,t,n){n*=.5;const i=t[0],o=t[1],r=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+s*a,e[1]=o*l+r*a,e[2]=r*l-o*a,e[3]=s*l-i*a,e}function y(e,t,n){n*=.5;const i=t[0],o=t[1],r=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l-r*a,e[1]=o*l+s*a,e[2]=r*l+i*a,e[3]=s*l-o*a,e}function m(e,t,n){n*=.5;const i=t[0],o=t[1],r=t[2],s=t[3],a=Math.sin(n),l=Math.cos(n);return e[0]=i*l+o*a,e[1]=o*l-i*a,e[2]=r*l+s*a,e[3]=s*l-r*a,e}function f(e,t){const n=t[0],i=t[1],o=t[2];return e[0]=n,e[1]=i,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-i*i-o*o)),e}function v(e,t,n,i){const o=t[0],r=t[1],a=t[2],l=t[3];let u,c,p,d,h,y=n[0],m=n[1],f=n[2],v=n[3];return c=o*y+r*m+a*f+l*v,c<0&&(c=-c,y=-y,m=-m,f=-f,v=-v),1-c>(0,s.e)()?(u=Math.acos(c),p=Math.sin(u),d=Math.sin((1-i)*u)/p,h=Math.sin(i*u)/p):(d=1-i,h=i),e[0]=d*o+h*y,e[1]=d*r+h*m,e[2]=d*a+h*f,e[3]=d*l+h*v,e}function g(e){const t=s.o,n=t(),i=t(),o=t(),r=Math.sqrt(1-n),a=Math.sqrt(n);return e[0]=r*Math.sin(2*Math.PI*i),e[1]=r*Math.cos(2*Math.PI*i),e[2]=a*Math.sin(2*Math.PI*o),e[3]=a*Math.cos(2*Math.PI*o),e}function b(e,t){const n=t[0],i=t[1],o=t[2],r=t[3],s=n*n+i*i+o*o+r*r,a=s?1/s:0;return e[0]=-n*a,e[1]=-i*a,e[2]=-o*a,e[3]=r*a,e}function S(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function x(e,t){const n=t[0]+t[4]+t[8];let i;if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);const o=(n+1)%3,r=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*o+o]-t[3*r+r]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*o+r]-t[3*r+o])*i,e[o]=(t[3*o+n]+t[3*n+o])*i,e[r]=(t[3*r+n]+t[3*n+r])*i}return e}function w(e,t,n,i){const o=.5*Math.PI/180;t*=o,n*=o,i*=o;const r=Math.sin(t),s=Math.cos(t),a=Math.sin(n),l=Math.cos(n),u=Math.sin(i),c=Math.cos(i);return e[0]=r*l*c-s*a*u,e[1]=s*a*c+r*l*u,e[2]=s*l*u-r*a*c,e[3]=s*l*c+r*a*u,e}function k(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}const M=l.a,V=l.s,j=l.o,T=d,F=l.m,N=l.j,I=l._,z=l.q,A=z,_=l.p,q=_,R=l.y,D=l.E,P=l.L;function L(e,t,n){const i=(0,a.P)(t,n);return i<-.999999?((0,a._)(O,E,t),(0,a.Y)(O)<1e-6&&(0,a._)(O,B,t),(0,a.A)(O,O),c(e,O,Math.PI),e):i>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a._)(O,t,n),e[0]=O[0],e[1]=O[1],e[2]=O[2],e[3]=1+i,R(e,e))}const O=(0,r.aA)(),E=(0,r.cp)(1,0,0),B=(0,r.cp)(0,1,0);function C(e,t,n,i,o,r){return v($,t,o,r),v(U,n,i,r),v(e,$,U,2*r*(1-r)),e}const $=(0,o.e)(),U=(0,o.e)();function Z(e,t,n,i){const o=J;return o[0]=n[0],o[3]=n[1],o[6]=n[2],o[1]=i[0],o[4]=i[1],o[7]=i[2],o[2]=-t[0],o[5]=-t[1],o[8]=-t[2],R(e,x(e,o))}const J=(0,i.e)();Object.freeze(Object.defineProperty({__proto__:null,add:j,calculateW:f,conjugate:S,copy:M,dot:N,equals:P,exactEquals:D,fromEuler:w,fromMat3:x,getAxisAngle:p,identity:u,invert:b,len:A,length:z,lerp:I,mul:T,multiply:d,normalize:R,random:g,rotateX:h,rotateY:y,rotateZ:m,rotationTo:L,scale:F,set:V,setAxes:Z,setAxisAngle:c,slerp:v,sqlerp:C,sqrLen:q,squaredLength:_,str:k},Symbol.toStringTag,{value:"Module"}))},6256:function(e,t,n){function i(){return[0,0,0,1]}function o(e){return[e[0],e[1],e[2],e[3]]}function r(e,t,n,i){return[e,t,n,i]}n.d(t,{e:function(){return i},r:function(){return s},t:function(){return o}});const s=i();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:i,fromValues:r},Symbol.toStringTag,{value:"Module"}))},92157:function(e,t,n){n.d(t,{A:function(){return T},E:function(){return R},H:function(){return Z},I:function(){return z},J:function(){return J},K:function(){return W},N:function(){return D},P:function(){return F},Q:function(){return P},R:function(){return Y},W:function(){return K},X:function(){return Q},Y:function(){return H},Z:function(){return ee},_:function(){return N},c:function(){return u},d:function(){return v},e:function(){return c},f:function(){return y},g:function(){return S},i:function(){return p},j:function(){return M},l:function(){return f},m:function(){return m},o:function(){return a},p:function(){return w},q:function(){return x},r:function(){return r},s:function(){return s},u:function(){return l},v:function(){return k},w:function(){return E},y:function(){return V},z:function(){return j}});var i=n(98503),o=n(25209);function r(e){const t=e[0],n=e[1],i=e[2];return Math.sqrt(t*t+n*n+i*i)}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function u(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function c(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function p(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function d(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function h(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function y(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function m(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function f(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function v(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function g(e,t=0,n=1){return e[0]=Math.min(Math.max(e[0],t),n),e[1]=Math.min(Math.max(e[1],t),n),e[2]=Math.min(Math.max(e[2],t),n),e}function b(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function S(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function x(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function w(e,t){const n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+i*i+o*o)}function k(e,t){const n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2];return n*n+i*i+o*o}function M(e){const t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i}function V(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function j(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function T(e,t){const n=t[0],i=t[1],o=t[2];let r=n*n+i*i+o*o;return r>0&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r),e}function F(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function N(e,t,n){const i=t[0],o=t[1],r=t[2],s=n[0],a=n[1],l=n[2];return e[0]=o*l-r*a,e[1]=r*s-i*l,e[2]=i*a-o*s,e}function I(e,t,n){const i=t[0],o=t[1],r=t[2],s=n[0],a=n[1],l=n[2],u=o*l-r*a,c=r*s-i*l,p=i*a-o*s,d=Math.sqrt(u*u+c*c+p*p);return e[0]=u/d,e[1]=c/d,e[2]=p/d,e}function z(e,t,n,i){const o=t[0],r=t[1],s=t[2];return e[0]=o+i*(n[0]-o),e[1]=r+i*(n[1]-r),e[2]=s+i*(n[2]-s),e}function A(e,t,n,i,o,r){const s=r*r,a=s*(2*r-3)+1,l=s*(r-2)+r,u=s*(r-1),c=s*(3-2*r);return e[0]=t[0]*a+n[0]*l+i[0]*u+o[0]*c,e[1]=t[1]*a+n[1]*l+i[1]*u+o[1]*c,e[2]=t[2]*a+n[2]*l+i[2]*u+o[2]*c,e}function _(e,t,n,i,o,r){const s=1-r,a=s*s,l=r*r,u=a*s,c=3*r*a,p=3*l*s,d=l*r;return e[0]=t[0]*u+n[0]*c+i[0]*p+o[0]*d,e[1]=t[1]*u+n[1]*c+i[1]*p+o[1]*d,e[2]=t[2]*u+n[2]*c+i[2]*p+o[2]*d,e}function q(e,t=1){const n=o.o,i=2*n()*Math.PI,r=2*n()-1,s=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(i)*s,e[1]=Math.sin(i)*s,e[2]=r*t,e}function R(e,t,n){const i=t[0],o=t[1],r=t[2];return e[0]=n[0]*i+n[4]*o+n[8]*r+n[12],e[1]=n[1]*i+n[5]*o+n[9]*r+n[13],e[2]=n[2]*i+n[6]*o+n[10]*r+n[14],e}function D(e,t,n){const i=t[0],o=t[1],r=t[2];return e[0]=i*n[0]+o*n[3]+r*n[6],e[1]=i*n[1]+o*n[4]+r*n[7],e[2]=i*n[2]+o*n[5]+r*n[8],e}function P(e,t,n){const i=n[0],o=n[1],r=n[2],s=n[3],a=t[0],l=t[1],u=t[2],c=o*u-r*l,p=r*a-i*u,d=i*l-o*a,h=o*d-r*p,y=r*c-i*d,m=i*p-o*c,f=2*s;return e[0]=a+c*f+2*h,e[1]=l+p*f+2*y,e[2]=u+d*f+2*m,e}function L(e,t,n,i){const o=[],r=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],r[0]=o[0],r[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),r[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function O(e,t,n,i){const o=[],r=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],r[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),r[1]=o[1],r[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function E(e,t,n,i){const o=[],r=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],r[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),r[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),r[2]=o[2],e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}function B(e,t){T(C,e),T($,t);const n=F(C,$);return n>1?0:n<-1?Math.PI:Math.acos(n)}const C=(0,i.aA)(),$=(0,i.aA)();function U(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Z(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function J(e,t){if(e===t)return!0;const n=e[0],i=e[1],r=e[2],s=t[0],a=t[1],l=t[2],u=(0,o.e)();return Math.abs(n-s)<=u*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-a)<=u*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(r-l)<=u*Math.max(1,Math.abs(r),Math.abs(l))}function W(e,t,n){const i=n[0]-t[0],o=n[1]-t[1],r=n[2]-t[2];let s=i*i+o*o+r*r;return s>0?(s=1/Math.sqrt(s),e[0]=i*s,e[1]=o*s,e[2]=r*s,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Y=u,X=c,G=p,K=w,Q=k,H=r,ee=M;Object.freeze(Object.defineProperty({__proto__:null,abs:y,add:l,angle:B,bezier:_,ceil:d,clamp:g,copy:s,cross:N,crossAndNormalize:I,direction:W,dist:K,distance:w,div:G,divide:p,dot:F,equals:J,exactEquals:Z,floor:h,hermite:A,inverse:j,len:H,length:r,lerp:z,max:v,min:f,mul:X,multiply:c,negate:V,normalize:T,random:q,rotateX:L,rotateY:O,rotateZ:E,round:b,scale:S,scaleAndAdd:x,set:a,sign:m,sqrDist:Q,sqrLen:ee,squaredDistance:k,squaredLength:M,str:U,sub:Y,subtract:u,transformMat3:D,transformMat4:R,transformQuat:P},Symbol.toStringTag,{value:"Module"}))},90211:function(e,t,n){n.d(t,{E:function(){return z},L:function(){return A},_:function(){return j},a:function(){return o},j:function(){return V},m:function(){return f},o:function(){return a},p:function(){return x},q:function(){return S},s:function(){return s},x:function(){return b},y:function(){return M},z:function(){return F}});var i=n(25209);function o(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function r(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(e,t,n,i,o){return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e}function a(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function l(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function u(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function c(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function p(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function d(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function h(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function y(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function m(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function f(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function v(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e[3]=t[3]+n[3]*i,e}function g(e,t){const n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],r=t[3]-e[3];return Math.sqrt(n*n+i*i+o*o+r*r)}function b(e,t){const n=t[0]-e[0],i=t[1]-e[1],o=t[2]-e[2],r=t[3]-e[3];return n*n+i*i+o*o+r*r}function S(e){const t=e[0],n=e[1],i=e[2],o=e[3];return Math.sqrt(t*t+n*n+i*i+o*o)}function x(e){const t=e[0],n=e[1],i=e[2],o=e[3];return t*t+n*n+i*i+o*o}function w(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function k(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function M(e,t){const n=t[0],i=t[1],o=t[2],r=t[3];let s=n*n+i*i+o*o+r*r;return s>0&&(s=1/Math.sqrt(s),e[0]=n*s,e[1]=i*s,e[2]=o*s,e[3]=r*s),e}function V(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function j(e,t,n,i){const o=t[0],r=t[1],s=t[2],a=t[3];return e[0]=o+i*(n[0]-o),e[1]=r+i*(n[1]-r),e[2]=s+i*(n[2]-s),e[3]=a+i*(n[3]-a),e}function T(e,t=1){const n=i.o;let o,r,s,a,l,u;do{o=2*n()-1,r=2*n()-1,l=o*o+r*r}while(l>=1);do{s=2*n()-1,a=2*n()-1,u=s*s+a*a}while(u>=1);const c=Math.sqrt((1-l)/u);return e[0]=t*o,e[1]=t*r,e[2]=t*s*c,e[3]=t*a*c,e}function F(e,t,n){const i=t[0],o=t[1],r=t[2],s=t[3];return e[0]=n[0]*i+n[4]*o+n[8]*r+n[12]*s,e[1]=n[1]*i+n[5]*o+n[9]*r+n[13]*s,e[2]=n[2]*i+n[6]*o+n[10]*r+n[14]*s,e[3]=n[3]*i+n[7]*o+n[11]*r+n[15]*s,e}function N(e,t,n){const i=t[0],o=t[1],r=t[2],s=n[0],a=n[1],l=n[2],u=n[3],c=u*i+a*r-l*o,p=u*o+l*i-s*r,d=u*r+s*o-a*i,h=-s*i-a*o-l*r;return e[0]=c*u+h*-s+p*-l-d*-a,e[1]=p*u+h*-a+d*-s-c*-l,e[2]=d*u+h*-l+c*-a-p*-s,e[3]=t[3],e}function I(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function z(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function A(e,t){const n=e[0],o=e[1],r=e[2],s=e[3],a=t[0],l=t[1],u=t[2],c=t[3],p=(0,i.e)();return Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-l)<=p*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-c)<=p*Math.max(1,Math.abs(s),Math.abs(c))}const _=l,q=u,R=c,D=g,P=b,L=S,O=x;Object.freeze(Object.defineProperty({__proto__:null,add:a,ceil:p,copy:o,copyVec3:r,dist:D,distance:g,div:R,divide:c,dot:V,equals:A,exactEquals:z,floor:d,inverse:k,len:L,length:S,lerp:j,max:y,min:h,mul:q,multiply:u,negate:w,normalize:M,random:T,round:m,scale:f,scaleAndAdd:v,set:s,sqrDist:P,sqrLen:O,squaredDistance:b,squaredLength:x,str:I,sub:_,subtract:l,transformMat4:F,transformQuat:N},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=7610.882153b0.js.map