"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3111],{8460:function(t,n,e){e.d(n,{H:function(){return _},L:function(){return T},N:function(){return m},Y:function(){return ot}});var r,o,i=e(98503),s=e(92157),u=e(31178),c=e(74362),a=e(90211),h=e(83448),f=e(8082),l=e(93942);function d(t){return t?{ray:(0,u.b)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,u.b)(),c0:0,c1:Number.MAX_VALUE}}function _(t){return t?[(0,f.M)(t[0]),(0,f.M)(t[1]),(0,f.M)(t[2]),(0,f.M)(t[3]),(0,f.M)(t[4]),(0,f.M)(t[5])]:[(0,f.M)(),(0,f.M)(),(0,f.M)(),(0,f.M)(),(0,f.M)(),(0,f.M)()]}function M(){return[(0,i.aA)(),(0,i.aA)(),(0,i.aA)(),(0,i.aA)(),(0,i.aA)(),(0,i.aA)(),(0,i.aA)(),(0,i.aA)()]}function m(t,n){for(let e=0;e<p;e++)(0,f.h)(t[e],n[e]);return t}function T(t,n,e,r=E){const o=(0,c.c)(f.a.get(),n,t);(0,c.h)(o,o);for(let i=0;i<O;++i){const t=(0,a.z)(f.r.get(),A[i],o);(0,s.o)(r[i],t[0]/t[3],t[1]/t[3],t[2]/t[3])}b(e,r)}function b(t,n){(0,f.p)(n[o.FAR_BOTTOM_LEFT],n[o.NEAR_BOTTOM_LEFT],n[o.NEAR_TOP_LEFT],t[r.LEFT]),(0,f.p)(n[o.NEAR_BOTTOM_RIGHT],n[o.FAR_BOTTOM_RIGHT],n[o.FAR_TOP_RIGHT],t[r.RIGHT]),(0,f.p)(n[o.FAR_BOTTOM_LEFT],n[o.FAR_BOTTOM_RIGHT],n[o.NEAR_BOTTOM_RIGHT],t[r.BOTTOM]),(0,f.p)(n[o.NEAR_TOP_LEFT],n[o.NEAR_TOP_RIGHT],n[o.FAR_TOP_RIGHT],t[r.TOP]),(0,f.p)(n[o.NEAR_BOTTOM_LEFT],n[o.NEAR_BOTTOM_RIGHT],n[o.NEAR_TOP_RIGHT],t[r.NEAR]),(0,f.p)(n[o.FAR_BOTTOM_RIGHT],n[o.FAR_BOTTOM_LEFT],n[o.FAR_TOP_LEFT],t[r.FAR])}function g(t,n){for(let e=0;e<p;e++){const r=t[e];if(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]>=n[3])return!1}return!0}new u.s((()=>d())),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.TOP=3]="TOP",t[t.NEAR=4]="NEAR",t[t.FAR=5]="FAR"}(r||(r={})),function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(o||(o={})),o.FAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_RIGHT,o.NEAR_BOTTOM_LEFT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_BOTTOM_RIGHT,o.NEAR_TOP_RIGHT,o.NEAR_TOP_LEFT,o.FAR_BOTTOM_RIGHT,o.FAR_BOTTOM_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_RIGHT,o.NEAR_BOTTOM_RIGHT,o.FAR_BOTTOM_RIGHT,o.FAR_TOP_RIGHT,o.NEAR_TOP_RIGHT,o.FAR_BOTTOM_LEFT,o.NEAR_BOTTOM_LEFT,o.NEAR_TOP_LEFT,o.FAR_TOP_LEFT,o.FAR_TOP_LEFT,o.NEAR_TOP_LEFT,o.NEAR_TOP_RIGHT,o.FAR_TOP_RIGHT;const p=6,O=8,A=[(0,h.r)(-1,-1,-1,1),(0,h.r)(1,-1,-1,1),(0,h.r)(1,1,-1,1),(0,h.r)(-1,1,-1,1),(0,h.r)(-1,-1,1,1),(0,h.r)(1,-1,1,1),(0,h.r)(1,1,1,1),(0,h.r)(-1,1,1,1)];new u.s(d);const E=M();class R{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,n){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new I,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}destroy(){this._degenerateObjects.clear(),I.clearPool(),V[0]=null,Q.prune(),et.prune()}add(t,n=t.length){this._objectCount+=n,this._grow(t,n);const e=I.acquire();for(let r=0;r<n;r++){const n=t[r];this._isDegenerate(n)?this._degenerateObjects.add(n):(e.init(this._root),this._add(n,e))}I.release(e)}remove(t,n=null){this._objectCount-=t.length;const e=I.acquire();for(const r of t){const t=n??(0,u.a)(this.objectToBoundingSphere(r),W);H(t[3])?(e.init(this._root),P(r,t,e)):this._degenerateObjects.delete(r)}I.release(e),this._shrink()}update(t,n){if(!H(n[3])&&this._isDegenerate(t))return;const e=k(t);this.remove(e,n),this.add(e)}forEachAlongRay(t,n,e){const r=(0,u.k)(t,n);N(this._root,(t=>{if(!x(r,t))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,n,e,r){const o=(0,u.k)(t,n);N(this._root,(t=>{if(!j(o,t,r))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),!0}))}forEach(t){N(this._root,(n=>{const e=n.node;return e.terminals.forAll(t),null!==e.residents&&e.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,n,e,r=()=>!0,o=1/0){let i=1/0,c=1/0,a=null;const h=C(t,n),f=s=>{if(--o,!r(s))return;const h=this.objectToBoundingSphere(s);if(!g(e,h))return;const f=q(t,n,(0,u.U)(h)),l=f-h[3],d=f+h[3];l<i&&(i=l,c=d,a=s)};return S(this._root,(r=>{if(o<=0||!g(e,r.bounds)||((0,s.g)(Y,h,r.halfSize),(0,s.u)(Y,Y,(0,u.U)(r.bounds)),q(t,n,Y)>c))return!1;const i=r.node;return i.terminals.forAll((t=>f(t))),null!==i.residents&&i.residents.forAll((t=>f(t))),!0}),t,n),a}forEachInDepthRange(t,n,e,r,o,i,c){let a=-1/0,h=1/0;const f={setRange:t=>{e===R.DepthOrder.FRONT_TO_BACK?(a=Math.max(a,t.near),h=Math.min(h,t.far)):(a=Math.max(a,-t.far),h=Math.min(h,-t.near))}};f.setRange(r);const l=q(n,e,t),d=C(n,e),_=C(n,-e),M=t=>{if(!c(t))return;const r=this.objectToBoundingSphere(t),s=(0,u.U)(r),d=q(n,e,s)-l,_=d-r[3],M=d+r[3];_>h||M<a||!g(i,r)||o(t,f)};S(this._root,(t=>{if(!g(i,t.bounds)||((0,s.g)(Y,d,t.halfSize),(0,s.u)(Y,Y,(0,u.U)(t.bounds)),q(n,e,Y)-l>h)||((0,s.g)(Y,_,t.halfSize),(0,s.u)(Y,Y,(0,u.U)(t.bounds)),q(n,e,Y)-l<a))return!1;const r=t.node;return r.terminals.forAll((t=>M(t))),null!==r.residents&&r.residents.forAll((t=>M(t))),!0}),n,e)}forEachNode(t){N(this._root,(n=>t(n.node,n.bounds,n.halfSize,n.depth)))}forEachNeighbor(t,n){const e=(0,u.N)(n),r=(0,u.U)(n),o=n=>{const o=this.objectToBoundingSphere(n),i=(0,u.N)(o),c=e+i;return!((0,s.v)((0,u.U)(o),r)-c*c<=0)||t(n)};let i=!0;const c=t=>{i&&(i=o(t))};N(this._root,(t=>{const n=(0,u.N)(t.bounds),o=e+n;if((0,s.v)((0,u.U)(t.bounds),r)-o*o>0)return!1;const a=t.node;return a.terminals.forAll(c),i&&null!==a.residents&&a.residents.forAll(c),i})),i&&this.forEachDegenerateObject(c)}_intersectsObject(t,n){const e=this.objectToBoundingSphere(n);return!(e[3]>0)||(0,u.H)(e,t)}_intersectsObjectWithOffset(t,n,e){const r=this.objectToBoundingSphere(n);return!(r[3]>0)||(0,u.H)(e.applyToBoundingSphere(r),t)}_add(t,n){n.advanceTo(this.objectToBoundingSphere(t))?n.node.terminals.push(t):(n.node.residents.push(t),n.node.residents.length>this._maximumObjectsPerNode&&n.depth<this._maximumDepth&&this._split(n))}_split(t){const n=t.node.residents;t.node.residents=null;for(let e=0;e<n.length;e++){const r=I.acquire().init(t);this._add(n.at(e),r),I.release(r)}}_grow(t,n){if(0!==n&&(y(t,n,(t=>this.objectToBoundingSphere(t)),Z),H(Z[3])&&!this._fitsInsideTree(Z)))if(v(this._root.node))(0,u.a)(Z,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(Z);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(Z,t):this._growRootAsSubNode(t),I.release(t)}}_rebuildTree(t,n){(0,s.s)((0,u.U)($),(0,u.U)(n.bounds)),$[3]=n.halfSize,y([t,$],2,(t=>t),tt);const e=I.acquire().init(this._root);this._root.initFrom(null,tt,tt[3]),this._root.increaseHalfSize(1.25),N(e,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),I.release(e)}_placingRootViolatesMaxDepth(t){const n=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let e=0;return N(this._root,(t=>(e=Math.max(e,t.depth),e+n<=this._maximumDepth))),e+n>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const n=t[3],e=t;let r=-1/0;const o=this._root.bounds,i=this._root.halfSize;for(let u=0;u<3;u++){const t=o[u]-i-(e[u]-n),s=e[u]+n-(o[u]+i),c=Math.max(0,Math.ceil(t/(2*i))),a=Math.max(0,Math.ceil(s/(2*i)))+1,h=2**Math.ceil(Math.log(c+a)*Math.LOG2E);r=Math.max(r,h),nt[u].min=c,nt[u].max=a}for(let u=0;u<3;u++){let t=nt[u].min,n=nt[u].max;const e=(r-(t+n))/2;t+=Math.ceil(e),n+=Math.floor(e);const s=o[u]-i-t*i*2;X[u]=s+(n+t)*i}const s=r*i;return X[3]=s*U,I.acquire().initFrom(null,X,s,0)}_growRootAsSubNode(t){const n=this._root.node;(0,s.s)((0,u.U)(Z),(0,u.U)(this._root.bounds)),Z[3]=this._root.halfSize,this._root.init(t),t.advanceTo(Z,null,!0),t.node.children=n.children,t.node.residents=n.residents,t.node.terminals=n.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const n=this._root.node.children;let e=0,r=0;for(;r<n.length&&null==t;)e=r++,t=n[e];for(;r<n.length;)if(n[r++])return-1;return e}_isDegenerate(t){return!H(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const n=this._root.bounds,e=this._root.halfSize;return t[3]<=e&&t[0]>=n[0]-e&&t[0]<=n[0]+e&&t[1]>=n[1]-e&&t[1]<=n[1]+e&&t[2]>=n[2]-e&&t[2]<=n[2]+e}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:n,_objectCount:e}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:n,objectCount:e,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(t){const n=t.children.map((t=>t?this._nodeToJSON(t):null)),e=t.residents?.map((t=>this.objectToBoundingSphere(t))),r=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:n,residents:e,terminals:r}}static fromJSON(t){const n=new R((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return n._objectCount=t.objectCount,n._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),n}}class I{constructor(){this.bounds=(0,u.E)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,n,e,r=this.depth){return this.node=t??I.createEmptyNode(),n&&(0,u.a)(n,this.bounds),this.halfSize=e,this.depth=r,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*U}advance(t){let n=this.node.children[t];n||(n=I.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;const e=z[t];return this.bounds[0]+=e[0]*this.halfSize,this.bounds[1]+=e[1]*this.halfSize,this.bounds[2]+=e[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,n,e=!1){for(;;){if(this.isTerminalFor(t))return n&&n(this,-1),!0;if(this.isLeaf()){if(!e)return n&&n(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);n&&n(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const n=this.bounds;return(n[0]<t[0]?1:0)+(n[1]<t[1]?2:0)+(n[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new i.bX({shrink:!0}),residents:new i.bX({shrink:!0})}}static acquire(){return I._pool.acquire()}static release(t){I._pool.release(t)}static clearPool(){I._pool.prune()}}function N(t,n){let e=I.acquire().init(t);const r=[e];for(;0!==r.length;){if(e=r.pop(),n(e)&&!e.isLeaf())for(let t=0;t<e.node.children.length;t++)e.node.children[t]&&r.push(I.acquire().init(e).advance(t));I.release(e)}}function S(t,n,e,r=R.DepthOrder.FRONT_TO_BACK){let o=I.acquire().init(t);const i=[o];for(w(e,r,rt);0!==i.length;){if(o=i.pop(),n(o)&&!o.isLeaf())for(let t=7;t>=0;--t){const n=rt[t];o.node.children[n]&&i.push(I.acquire().init(o).advance(n))}I.release(o)}}function P(t,n,e){Q.clear();const r=e.advanceTo(n,((t,n)=>{Q.push(t.node),Q.push(n)}))?e.node.terminals:e.node.residents;if(r.removeUnordered(t),0===r.length)for(let o=Q.length-2;o>=0&&F(Q.data[o],Q.data[o+1]);o-=2);}function F(t,n){return n>=0&&(t.children[n]=null),!!v(t)&&(null===t.residents&&(t.residents=new i.bX({shrink:!0})),!0)}function x(t,n){return D((0,u.U)(n.bounds),2*-n.halfSize,J),D((0,u.U)(n.bounds),2*n.halfSize,K),(0,l.i)(t.origin,t.direction,J,K)}function j(t,n,e){return D((0,u.U)(n.bounds),2*-n.halfSize,J),D((0,u.U)(n.bounds),2*n.halfSize,K),e.applyToMinMax(J,K),(0,l.i)(t.origin,t.direction,J,K)}function v(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let n=0;n<t.children.length;n++)if(t.children[n])return!1;return!0}function B(t,n){t[0]=Math.min(t[0],n[0]-n[3]),t[1]=Math.min(t[1],n[1]-n[3]),t[2]=Math.min(t[2],n[2]-n[3])}function L(t,n){t[0]=Math.max(t[0],n[0]+n[3]),t[1]=Math.max(t[1],n[1]+n[3]),t[2]=Math.max(t[2],n[2]+n[3])}function D(t,n,e){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function y(t,n,e,r){if(1===n){const n=e(t[0]);(0,u.a)(n,r)}else{J[0]=1/0,J[1]=1/0,J[2]=1/0,K[0]=-1/0,K[1]=-1/0,K[2]=-1/0;for(let r=0;r<n;r++){const n=e(t[r]);H(n[3])&&(B(J,n),L(K,n))}(0,s.I)((0,u.U)(r),J,K,.5),r[3]=Math.max(K[0]-J[0],K[1]-J[1],K[2]-J[2])/2}}function w(t,n,e){if(!et.length)for(let r=0;r<8;++r)et.push({index:0,distance:0});for(let r=0;r<8;++r){const e=z[r];et.data[r].index=r,et.data[r].distance=q(t,n,e)}et.sort(((t,n)=>t.distance-n.distance));for(let r=0;r<8;++r)e[r]=et.data[r].index}function C(t,n){let e,r=1/0;for(let o=0;o<8;++o){const i=q(t,n,G[o]);i<r&&(r=i,e=G[o])}return e}function q(t,n,e){return n*(t[0]*e[0]+t[1]*e[1]+t[2]*e[2])}function H(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}I._pool=new i.aB(I),function(t){var n;(n=t.DepthOrder||(t.DepthOrder={}))[n.FRONT_TO_BACK=1]="FRONT_TO_BACK",n[n.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(R||(R={}));const z=[(0,i.cp)(-1,-1,-1),(0,i.cp)(1,-1,-1),(0,i.cp)(-1,1,-1),(0,i.cp)(1,1,-1),(0,i.cp)(-1,-1,1),(0,i.cp)(1,-1,1),(0,i.cp)(-1,1,1),(0,i.cp)(1,1,1)],G=[(0,i.cp)(-1,-1,-1),(0,i.cp)(-1,-1,1),(0,i.cp)(-1,1,-1),(0,i.cp)(-1,1,1),(0,i.cp)(1,-1,-1),(0,i.cp)(1,-1,1),(0,i.cp)(1,1,-1),(0,i.cp)(1,1,1)],U=Math.sqrt(3),V=[null];function k(t){return V[0]=t,V}const X=(0,u.E)(),Y=(0,i.aA)(),J=(0,i.aA)(),K=(0,i.aA)(),Q=new i.bX,W=(0,u.E)(),Z=(0,u.E)(),$=(0,u.E)(),tt=(0,u.E)(),nt=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],et=new i.bX,rt=[0,0,0,0,0,0,0,0],ot=R},83111:function(t,n,e){e.r(n),e.d(n,{default:function(){return l}});var r=e(98503),o=e(92157),i=e(84517),s=e(31178),u=e(8460),c=e(10615);const a=1e3;function h(t,n,e){const r=(0,s.E)(),i=(0,s.U)(r);return(0,o.q)(i,i,t,.5),(0,o.q)(i,i,n,.5),r[3]=(0,o.p)(i,t),(0,o.u)(i,i,e),r}let f=class{constructor(){this._idToComponent=new Map,this._components=new u.Y((t=>t.bounds)),this._edges=new u.Y((t=>t.bounds)),this._tmpLineSegment=(0,i.v)(),this._tmpP1=(0,r.aA)(),this._tmpP2=(0,r.aA)(),this._tmpP3=(0,r.aA)(),this.remoteClient=null}async fetchCandidates(t,n){await Promise.resolve(),(0,r.D)(n),await this._ensureEdgeLocations(t,n);const e=[];return this._edges.forEachNeighbor((n=>(this._addCandidates(t,n,e),e.length<a)),t.bounds),{result:{candidates:e}}}async _ensureEdgeLocations(t,n){const e=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:n,uid:r}=t;e.push({id:n,uid:r})}return!0}),t.bounds),!e.length)return;const r={components:e},o=await this.remoteClient.invoke("fetchAllEdgeLocations",r,n??{});for(const i of o.components)this._setFetchEdgeLocations(i)}async add(t){const n=new _(t.id,t.bounds);return this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}}async remove(t){const n=this._idToComponent.get(t.id);if(n){const t=[];this._edges.forEachNeighbor((e=>(e.component===n&&t.push(e),!0)),n.bounds),this._edges.remove(t),this._components.remove([n]),this._idToComponent.delete(n.id)}return{result:{}}}_setFetchEdgeLocations(t){const n=this._idToComponent.get(t.id);if(null==n||t.uid!==n.uid)return;const e=c.m.createView(t.locations),o=new Array(e.count),i=(0,r.aA)(),s=(0,r.aA)();for(let r=0;r<e.count;r++){e.position0.getVec(r,i),e.position1.getVec(r,s);const u=h(i,s,t.origin),c=new M(n,r,u);o[r]=c}this._edges.add(o);const{objectIds:u,origin:a}=t;n.info={locations:e,objectIds:u,origin:a}}_addCandidates(t,n,e){const{info:r}=n.component,{origin:i,objectIds:s}=r,u=r.locations,c=u.position0.getVec(n.index,this._tmpP1),a=u.position1.getVec(n.index,this._tmpP2);(0,o.u)(c,c,i),(0,o.u)(a,a,i);const h=s[u.componentIndex.get(n.index)];this._addEdgeCandidate(t,h,c,a,e),d(t,h,c,e),d(t,h,a,e)}_addEdgeCandidate(t,n,e,u,c){if(!t.returnEdge)return;const a=(0,s.U)(t.bounds),h=(0,i.b)(e,u,this._tmpLineSegment),f=(0,i.j)(h,a,this._tmpP3);(0,s.i)(t.bounds,f)&&c.push({type:"edge",objectId:n,target:(0,r.cv)(f),distance:(0,o.p)(a,f),start:(0,r.cv)(e),end:(0,r.cv)(u)})}};f=(0,r.k)([(0,r.A)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],f);const l=f;function d(t,n,e,i){if(!t.returnVertex||!(0,s.i)(t.bounds,e))return;const u=(0,s.U)(t.bounds);i.push({type:"vertex",objectId:n,target:(0,r.cv)(e),distance:(0,o.p)(u,e)})}class _{constructor(t,n){this.id=t,this.bounds=n,this.info=null,this.uid=++_.uid}}_.uid=0;class M{constructor(t,n,e){this.component=t,this.index=n,this.bounds=e}}},84517:function(t,n,e){e.d(n,{A:function(){return f},M:function(){return a},b:function(){return c},j:function(){return h},v:function(){return u}});var r=e(98503),o=e(31178),i=e(92157),s=e(8082);function u(t){return t?{origin:(0,r.cv)(t.origin),vector:(0,r.cv)(t.vector)}:{origin:(0,r.aA)(),vector:(0,r.aA)()}}function c(t,n,e=u()){return(0,i.s)(e.origin,t),(0,i.c)(e.vector,n,t),e}function a(t,n){const e=(0,i.c)(s.c.get(),n,t.origin),o=(0,i.P)(t.vector,e),u=(0,i.P)(t.vector,t.vector),c=(0,r.aP)(o/u,0,1),a=(0,i.c)(s.c.get(),(0,i.g)(s.c.get(),t.vector,c),e);return(0,i.P)(a,a)}function h(t,n,e){return f(t,n,0,1,e)}function f(t,n,e,o,u){const{vector:c,origin:a}=t,h=(0,i.c)(s.c.get(),n,a),f=(0,i.P)(c,h)/(0,i.j)(c);return(0,i.g)(u,c,(0,r.aP)(f,e,o)),(0,i.u)(u,u,t.origin)}new o.s((()=>u()))},69852:function(t,n,e){e.d(n,{M:function(){return d},b:function(){return m},c:function(){return h},f:function(){return M},h:function(){return _},i:function(){return l},j:function(){return E},l:function(){return T},m:function(){return b},n:function(){return o},o:function(){return u},p:function(){return O},r:function(){return s},s:function(){return a},u:function(){return c}});var r=e(25209);function o(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function i(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function s(t,n,e,r,o,i,s,u,c,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=u,t[7]=c,t[8]=a,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(t,n){if(t===n){const e=n[1],r=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function a(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=n[4],u=n[5],c=n[6],a=n[7],h=n[8],f=h*s-u*a,l=-h*i+u*c,d=a*i-s*c;let _=e*f+r*l+o*d;return _?(_=1/_,t[0]=f*_,t[1]=(-h*r+o*a)*_,t[2]=(u*r-o*s)*_,t[3]=l*_,t[4]=(h*e-o*c)*_,t[5]=(-u*e+o*i)*_,t[6]=d*_,t[7]=(-a*e+r*c)*_,t[8]=(s*e-r*i)*_,t):null}function h(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=n[4],u=n[5],c=n[6],a=n[7],h=n[8];return t[0]=s*h-u*a,t[1]=o*a-r*h,t[2]=r*u-o*s,t[3]=u*c-i*h,t[4]=e*h-o*c,t[5]=o*i-e*u,t[6]=i*a-s*c,t[7]=r*c-e*a,t[8]=e*s-r*i,t}function f(t){const n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],a=t[8];return n*(a*i-s*c)+e*(-a*o+s*u)+r*(c*o-i*u)}function l(t,n,e){const r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],a=n[6],h=n[7],f=n[8],l=e[0],d=e[1],_=e[2],M=e[3],m=e[4],T=e[5],b=e[6],g=e[7],p=e[8];return t[0]=l*r+d*s+_*a,t[1]=l*o+d*u+_*h,t[2]=l*i+d*c+_*f,t[3]=M*r+m*s+T*a,t[4]=M*o+m*u+T*h,t[5]=M*i+m*c+T*f,t[6]=b*r+g*s+p*a,t[7]=b*o+g*u+p*h,t[8]=b*i+g*c+p*f,t}function d(t,n,e){const r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],a=n[6],h=n[7],f=n[8],l=e[0],d=e[1];return t[0]=r,t[1]=o,t[2]=i,t[3]=s,t[4]=u,t[5]=c,t[6]=l*r+d*s+a,t[7]=l*o+d*u+h,t[8]=l*i+d*c+f,t}function _(t,n,e){const r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],a=n[6],h=n[7],f=n[8],l=Math.sin(e),d=Math.cos(e);return t[0]=d*r+l*s,t[1]=d*o+l*u,t[2]=d*i+l*c,t[3]=d*s-l*r,t[4]=d*u-l*o,t[5]=d*c-l*i,t[6]=a,t[7]=h,t[8]=f,t}function M(t,n,e){const r=e[0],o=e[1],i=e[2];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=i*n[6],t[7]=i*n[7],t[8]=i*n[8],t}function m(t,n,e){const r=e[0],o=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t}function T(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function b(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function g(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function p(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function O(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=e+e,u=r+r,c=o+o,a=e*s,h=r*s,f=r*u,l=o*s,d=o*u,_=o*c,M=i*s,m=i*u,T=i*c;return t[0]=1-f-_,t[3]=h-T,t[6]=l+m,t[1]=h+T,t[4]=1-a-_,t[7]=d-M,t[2]=l-m,t[5]=d+M,t[8]=1-a-f,t}function A(t,n){const e=n[0],r=n[1],o=n[2],i=n[4],s=n[5],u=n[6],c=n[8],a=n[9],h=n[10],f=h*s-u*a,l=-h*i+u*c,d=a*i-s*c,_=e*f+r*l+o*d;if(!_)return null;const M=1/_;return t[0]=f*M,t[1]=(-h*r+o*a)*M,t[2]=(u*r-o*s)*M,t[3]=l*M,t[4]=(h*e-o*c)*M,t[5]=(-u*e+o*i)*M,t[6]=d*M,t[7]=(-a*e+r*c)*M,t[8]=(s*e-r*i)*M,t}function E(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=n[4],u=n[5],c=n[6],a=n[7],h=n[8],f=n[9],l=n[10],d=n[11],_=n[12],M=n[13],m=n[14],T=n[15],b=e*u-r*s,g=e*c-o*s,p=e*a-i*s,O=r*c-o*u,A=r*a-i*u,E=o*a-i*c,R=h*M-f*_,I=h*m-l*_,N=h*T-d*_,S=f*m-l*M,P=f*T-d*M,F=l*T-d*m;let x=b*F-g*P+p*S+O*N-A*I+E*R;return x?(x=1/x,t[0]=(u*F-c*P+a*S)*x,t[1]=(c*N-s*F-a*I)*x,t[2]=(s*P-u*N+a*R)*x,t[3]=(o*P-r*F-i*S)*x,t[4]=(e*F-o*N+i*I)*x,t[5]=(r*N-e*P-i*R)*x,t[6]=(M*E-m*A+T*O)*x,t[7]=(m*p-_*E-T*g)*x,t[8]=(_*A-M*p+T*b)*x,t):null}function R(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function I(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function N(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function S(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t}function P(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}function F(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t}function x(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t}function j(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function v(t,n){const e=t[0],o=t[1],i=t[2],s=t[3],u=t[4],c=t[5],a=t[6],h=t[7],f=t[8],l=n[0],d=n[1],_=n[2],M=n[3],m=n[4],T=n[5],b=n[6],g=n[7],p=n[8],O=(0,r.e)();return Math.abs(e-l)<=O*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-d)<=O*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-_)<=O*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(s-M)<=O*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(u-m)<=O*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-T)<=O*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(a-b)<=O*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(h-g)<=O*Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(f-p)<=O*Math.max(1,Math.abs(f),Math.abs(p))}function B(t){const n=(0,r.e)(),e=t[0],o=t[1],i=t[2],s=t[3],u=t[4],c=t[5],a=t[6],h=t[7],f=t[8];return Math.abs(1-(e*e+s*s+a*a))<=n&&Math.abs(1-(o*o+u*u+h*h))<=n&&Math.abs(1-(i*i+c*c+f*f))<=n}const L=l,D=P;Object.freeze(Object.defineProperty({__proto__:null,add:S,adjoint:h,copy:i,determinant:f,equals:v,exactEquals:j,frob:N,fromMat2d:p,fromMat4:o,fromQuat:O,fromRotation:b,fromScaling:g,fromTranslation:T,identity:u,invert:a,isOrthoNormal:B,mul:L,multiply:l,multiplyScalar:F,multiplyScalarAndAdd:x,normalFromMat4:E,normalFromMat4Legacy:A,projection:R,rotate:_,scale:M,scaleByVec2:m,set:s,str:I,sub:D,subtract:P,translate:d,transpose:c},Symbol.toStringTag,{value:"Module"}))},10769:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function i(t,n,e,r,o,i,s,u,c){return[t,n,e,r,o,i,s,u,c]}function s(t,n){return new Float64Array(t,n,9)}e.d(n,{e:function(){return r},o:function(){return u},t:function(){return i}});const u=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:r,createView:s,fromValues:i},Symbol.toStringTag,{value:"Module"}))},74362:function(t,n,e){e.d(n,{A:function(){return D},B:function(){return Y},C:function(){return J},D:function(){return B},G:function(){return K},H:function(){return Q},I:function(){return F},O:function(){return x},P:function(){return v},X:function(){return q},b:function(){return m},c:function(){return d},f:function(){return M},g:function(){return E},h:function(){return h},i:function(){return _},j:function(){return j},n:function(){return i},o:function(){return u},p:function(){return A},q:function(){return p},r:function(){return s},s:function(){return c}});var r=e(98503),o=e(25209);function i(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function s(t,n,e,r,o,i,s,u,c,a,h,f,l,d,_,M,m){return t[0]=n,t[1]=e,t[2]=r,t[3]=o,t[4]=i,t[5]=s,t[6]=u,t[7]=c,t[8]=a,t[9]=h,t[10]=f,t[11]=l,t[12]=d,t[13]=_,t[14]=M,t[15]=m,t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function c(t,n){if(t===n){const e=n[1],r=n[2],o=n[3],i=n[6],s=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=i,t[11]=n[14],t[12]=o,t[13]=s,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function a(t,n){return h(t,n)||u(t),t}function h(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=n[4],u=n[5],c=n[6],a=n[7],h=n[8],f=n[9],l=n[10],d=n[11],_=n[12],M=n[13],m=n[14],T=n[15],b=e*u-r*s,g=e*c-o*s,p=e*a-i*s,O=r*c-o*u,A=r*a-i*u,E=o*a-i*c,R=h*M-f*_,I=h*m-l*_,N=h*T-d*_,S=f*m-l*M,P=f*T-d*M,F=l*T-d*m;let x=b*F-g*P+p*S+O*N-A*I+E*R;return x?(x=1/x,t[0]=(u*F-c*P+a*S)*x,t[1]=(o*P-r*F-i*S)*x,t[2]=(M*E-m*A+T*O)*x,t[3]=(l*A-f*E-d*O)*x,t[4]=(c*N-s*F-a*I)*x,t[5]=(e*F-o*N+i*I)*x,t[6]=(m*p-_*E-T*g)*x,t[7]=(h*E-l*p+d*g)*x,t[8]=(s*P-u*N+a*R)*x,t[9]=(r*N-e*P-i*R)*x,t[10]=(_*A-M*p+T*b)*x,t[11]=(f*p-h*A-d*b)*x,t[12]=(u*I-s*S-c*R)*x,t[13]=(e*S-r*I+o*R)*x,t[14]=(M*g-_*O-m*b)*x,t[15]=(h*O-f*g+l*b)*x,t):null}function f(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=n[4],u=n[5],c=n[6],a=n[7],h=n[8],f=n[9],l=n[10],d=n[11],_=n[12],M=n[13],m=n[14],T=n[15];return t[0]=u*(l*T-d*m)-f*(c*T-a*m)+M*(c*d-a*l),t[1]=-(r*(l*T-d*m)-f*(o*T-i*m)+M*(o*d-i*l)),t[2]=r*(c*T-a*m)-u*(o*T-i*m)+M*(o*a-i*c),t[3]=-(r*(c*d-a*l)-u*(o*d-i*l)+f*(o*a-i*c)),t[4]=-(s*(l*T-d*m)-h*(c*T-a*m)+_*(c*d-a*l)),t[5]=e*(l*T-d*m)-h*(o*T-i*m)+_*(o*d-i*l),t[6]=-(e*(c*T-a*m)-s*(o*T-i*m)+_*(o*a-i*c)),t[7]=e*(c*d-a*l)-s*(o*d-i*l)+h*(o*a-i*c),t[8]=s*(f*T-d*M)-h*(u*T-a*M)+_*(u*d-a*f),t[9]=-(e*(f*T-d*M)-h*(r*T-i*M)+_*(r*d-i*f)),t[10]=e*(u*T-a*M)-s*(r*T-i*M)+_*(r*a-i*u),t[11]=-(e*(u*d-a*f)-s*(r*d-i*f)+h*(r*a-i*u)),t[12]=-(s*(f*m-l*M)-h*(u*m-c*M)+_*(u*l-c*f)),t[13]=e*(f*m-l*M)-h*(r*m-o*M)+_*(r*l-o*f),t[14]=-(e*(u*m-c*M)-s*(r*m-o*M)+_*(r*c-o*u)),t[15]=e*(u*l-c*f)-s*(r*l-o*f)+h*(r*c-o*u),t}function l(t){const n=t[0],e=t[1],r=t[2],o=t[3],i=t[4],s=t[5],u=t[6],c=t[7],a=t[8],h=t[9],f=t[10],l=t[11],d=t[12],_=t[13],M=t[14],m=t[15];return(n*s-e*i)*(f*m-l*M)-(n*u-r*i)*(h*m-l*_)+(n*c-o*i)*(h*M-f*_)+(e*u-r*s)*(a*m-l*d)-(e*c-o*s)*(a*M-f*d)+(r*c-o*u)*(a*_-h*d)}function d(t,n,e){const r=n[0],o=n[1],i=n[2],s=n[3],u=n[4],c=n[5],a=n[6],h=n[7],f=n[8],l=n[9],d=n[10],_=n[11],M=n[12],m=n[13],T=n[14],b=n[15];let g=e[0],p=e[1],O=e[2],A=e[3];return t[0]=g*r+p*u+O*f+A*M,t[1]=g*o+p*c+O*l+A*m,t[2]=g*i+p*a+O*d+A*T,t[3]=g*s+p*h+O*_+A*b,g=e[4],p=e[5],O=e[6],A=e[7],t[4]=g*r+p*u+O*f+A*M,t[5]=g*o+p*c+O*l+A*m,t[6]=g*i+p*a+O*d+A*T,t[7]=g*s+p*h+O*_+A*b,g=e[8],p=e[9],O=e[10],A=e[11],t[8]=g*r+p*u+O*f+A*M,t[9]=g*o+p*c+O*l+A*m,t[10]=g*i+p*a+O*d+A*T,t[11]=g*s+p*h+O*_+A*b,g=e[12],p=e[13],O=e[14],A=e[15],t[12]=g*r+p*u+O*f+A*M,t[13]=g*o+p*c+O*l+A*m,t[14]=g*i+p*a+O*d+A*T,t[15]=g*s+p*h+O*_+A*b,t}function _(t,n,e){const r=e[0],o=e[1],i=e[2];if(n===t)t[12]=n[0]*r+n[4]*o+n[8]*i+n[12],t[13]=n[1]*r+n[5]*o+n[9]*i+n[13],t[14]=n[2]*r+n[6]*o+n[10]*i+n[14],t[15]=n[3]*r+n[7]*o+n[11]*i+n[15];else{const e=n[0],s=n[1],u=n[2],c=n[3],a=n[4],h=n[5],f=n[6],l=n[7],d=n[8],_=n[9],M=n[10],m=n[11];t[0]=e,t[1]=s,t[2]=u,t[3]=c,t[4]=a,t[5]=h,t[6]=f,t[7]=l,t[8]=d,t[9]=_,t[10]=M,t[11]=m,t[12]=e*r+a*o+d*i+n[12],t[13]=s*r+h*o+_*i+n[13],t[14]=u*r+f*o+M*i+n[14],t[15]=c*r+l*o+m*i+n[15]}return t}function M(t,n,e){const r=e[0],o=e[1],i=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*i,t[9]=n[9]*i,t[10]=n[10]*i,t[11]=n[11]*i,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function m(t,n,e,r){let s=r[0],u=r[1],c=r[2],a=Math.sqrt(s*s+u*u+c*c);if(a<=(0,o.e)())return void i(t,n);a=1/a,s*=a,u*=a,c*=a;const h=Math.sin(e),f=Math.cos(e),l=1-f,d=n[0],_=n[1],M=n[2],m=n[3],T=n[4],b=n[5],g=n[6],p=n[7],O=n[8],A=n[9],E=n[10],R=n[11],I=s*s*l+f,N=u*s*l+c*h,S=c*s*l-u*h,P=s*u*l-c*h,F=u*u*l+f,x=c*u*l+s*h,j=s*c*l+u*h,v=u*c*l-s*h,B=c*c*l+f;t[0]=d*I+T*N+O*S,t[1]=_*I+b*N+A*S,t[2]=M*I+g*N+E*S,t[3]=m*I+p*N+R*S,t[4]=d*P+T*F+O*x,t[5]=_*P+b*F+A*x,t[6]=M*P+g*F+E*x,t[7]=m*P+p*F+R*x,t[8]=d*j+T*v+O*B,t[9]=_*j+b*v+A*B,t[10]=M*j+g*v+E*B,t[11]=m*j+p*v+R*B,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15])}function T(t,n,e){const r=Math.sin(e),o=Math.cos(e),i=n[4],s=n[5],u=n[6],c=n[7],a=n[8],h=n[9],f=n[10],l=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=i*o+a*r,t[5]=s*o+h*r,t[6]=u*o+f*r,t[7]=c*o+l*r,t[8]=a*o-i*r,t[9]=h*o-s*r,t[10]=f*o-u*r,t[11]=l*o-c*r,t}function b(t,n,e){const r=Math.sin(e),o=Math.cos(e),i=n[0],s=n[1],u=n[2],c=n[3],a=n[8],h=n[9],f=n[10],l=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*o-a*r,t[1]=s*o-h*r,t[2]=u*o-f*r,t[3]=c*o-l*r,t[8]=i*r+a*o,t[9]=s*r+h*o,t[10]=u*r+f*o,t[11]=c*r+l*o,t}function g(t,n,e){const r=Math.sin(e),o=Math.cos(e),i=n[0],s=n[1],u=n[2],c=n[3],a=n[4],h=n[5],f=n[6],l=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*o+a*r,t[1]=s*o+h*r,t[2]=u*o+f*r,t[3]=c*o+l*r,t[4]=a*o-i*r,t[5]=h*o-s*r,t[6]=f*o-u*r,t[7]=l*o-c*r,t}function p(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,n,e){if(0===n)return u(t);let r=e[0],i=e[1],s=e[2],c=Math.sqrt(r*r+i*i+s*s);if(c<=(0,o.e)())return null;c=1/c,r*=c,i*=c,s*=c;const a=Math.sin(n),h=Math.cos(n),f=1-h;return t[0]=r*r*f+h,t[1]=i*r*f+s*a,t[2]=s*r*f-i*a,t[3]=0,t[4]=r*i*f-s*a,t[5]=i*i*f+h,t[6]=s*i*f+r*a,t[7]=0,t[8]=r*s*f+i*a,t[9]=i*s*f-r*a,t[10]=s*s*f+h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,n){const e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,n,e){const r=n[0],o=n[1],i=n[2],s=n[3],u=r+r,c=o+o,a=i+i,h=r*u,f=r*c,l=r*a,d=o*c,_=o*a,M=i*a,m=s*u,T=s*c,b=s*a;return t[0]=1-(d+M),t[1]=f+b,t[2]=l-T,t[3]=0,t[4]=f-b,t[5]=1-(h+M),t[6]=_+m,t[7]=0,t[8]=l+T,t[9]=_-m,t[10]=1-(h+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function S(t,n){const e=P,r=-n[0],o=-n[1],i=-n[2],s=n[3],u=n[4],c=n[5],a=n[6],h=n[7],f=r*r+o*o+i*i+s*s;return f>0?(e[0]=2*(u*s+h*r+c*i-a*o)/f,e[1]=2*(c*s+h*o+a*r-u*i)/f,e[2]=2*(a*s+h*i+u*o-c*r)/f):(e[0]=2*(u*s+h*r+c*i-a*o),e[1]=2*(c*s+h*o+a*r-u*i),e[2]=2*(a*s+h*i+u*o-c*r)),N(t,n,e),t}const P=(0,r.aA)();function F(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function x(t,n){const e=n[0],r=n[1],o=n[2],i=n[4],s=n[5],u=n[6],c=n[8],a=n[9],h=n[10];return t[0]=Math.sqrt(e*e+r*r+o*o),t[1]=Math.sqrt(i*i+s*s+u*u),t[2]=Math.sqrt(c*c+a*a+h*h),t}function j(t,n){const e=n[0]+n[5]+n[10];let r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t}function v(t,n,e,r){const o=n[0],i=n[1],s=n[2],u=n[3],c=o+o,a=i+i,h=s+s,f=o*c,l=o*a,d=o*h,_=i*a,M=i*h,m=s*h,T=u*c,b=u*a,g=u*h,p=r[0],O=r[1],A=r[2];return t[0]=(1-(_+m))*p,t[1]=(l+g)*p,t[2]=(d-b)*p,t[3]=0,t[4]=(l-g)*O,t[5]=(1-(f+m))*O,t[6]=(M+T)*O,t[7]=0,t[8]=(d+b)*A,t[9]=(M-T)*A,t[10]=(1-(f+_))*A,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function B(t,n,e,r,o){const i=n[0],s=n[1],u=n[2],c=n[3],a=i+i,h=s+s,f=u+u,l=i*a,d=i*h,_=i*f,M=s*h,m=s*f,T=u*f,b=c*a,g=c*h,p=c*f,O=r[0],A=r[1],E=r[2],R=o[0],I=o[1],N=o[2],S=(1-(M+T))*O,P=(d+p)*O,F=(_-g)*O,x=(d-p)*A,j=(1-(l+T))*A,v=(m+b)*A,B=(_+g)*E,L=(m-b)*E,D=(1-(l+M))*E;return t[0]=S,t[1]=P,t[2]=F,t[3]=0,t[4]=x,t[5]=j,t[6]=v,t[7]=0,t[8]=B,t[9]=L,t[10]=D,t[11]=0,t[12]=e[0]+R-(S*R+x*I+B*N),t[13]=e[1]+I-(P*R+j*I+L*N),t[14]=e[2]+N-(F*R+v*I+D*N),t[15]=1,t}function L(t,n){const e=n[0],r=n[1],o=n[2],i=n[3],s=e+e,u=r+r,c=o+o,a=e*s,h=r*s,f=r*u,l=o*s,d=o*u,_=o*c,M=i*s,m=i*u,T=i*c;return t[0]=1-f-_,t[1]=h+T,t[2]=l-m,t[3]=0,t[4]=h-T,t[5]=1-a-_,t[6]=d+M,t[7]=0,t[8]=l+m,t[9]=d-M,t[10]=1-a-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,n,e,r,o,i,s){const u=1/(e-n),c=1/(o-r),a=1/(i-s);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(o+r)*c,t[10]=(s+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*a,t[15]=0,t}function y(t,n,e,r,o){const i=1/Math.tan(n/2);let s;return t[0]=i/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(s=1/(r-o),t[10]=(o+r)*s,t[14]=2*o*r*s):(t[10]=-1,t[14]=-2*r),t}function w(t,n,e,r){const o=Math.tan(n.upDegrees*Math.PI/180),i=Math.tan(n.downDegrees*Math.PI/180),s=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(s+u),a=2/(o+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(s-u)*c*.5,t[9]=(o-i)*a*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function C(t,n,e,r,o,i,s){const u=1/(n-e),c=1/(r-o),a=1/(i-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*a,t[11]=0,t[12]=(n+e)*u,t[13]=(o+r)*c,t[14]=(s+i)*a,t[15]=1,t}function q(t,n,e,r){const i=n[0],s=n[1],c=n[2];let a=i-e[0],h=s-e[1],f=c-e[2];const l=(0,o.e)();if(Math.abs(a)<l&&Math.abs(h)<l&&Math.abs(f)<l)return void u(t);let d=1/Math.sqrt(a*a+h*h+f*f);a*=d,h*=d,f*=d;const _=r[0],M=r[1],m=r[2];let T=M*f-m*h,b=m*a-_*f,g=_*h-M*a;d=Math.sqrt(T*T+b*b+g*g),d?(d=1/d,T*=d,b*=d,g*=d):(T=0,b=0,g=0);let p=h*g-f*b,O=f*T-a*g,A=a*b-h*T;d=Math.sqrt(p*p+O*O+A*A),d?(d=1/d,p*=d,O*=d,A*=d):(p=0,O=0,A=0),t[0]=T,t[1]=p,t[2]=a,t[3]=0,t[4]=b,t[5]=O,t[6]=h,t[7]=0,t[8]=g,t[9]=A,t[10]=f,t[11]=0,t[12]=-(T*i+b*s+g*c),t[13]=-(p*i+O*s+A*c),t[14]=-(a*i+h*s+f*c),t[15]=1}function H(t,n,e,r){const o=n[0],i=n[1],s=n[2],u=r[0],c=r[1],a=r[2];let h=o-e[0],f=i-e[1],l=s-e[2],d=h*h+f*f+l*l;d>0&&(d=1/Math.sqrt(d),h*=d,f*=d,l*=d);let _=c*l-a*f,M=a*h-u*l,m=u*f-c*h;return d=_*_+M*M+m*m,d>0&&(d=1/Math.sqrt(d),_*=d,M*=d,m*=d),t[0]=_,t[1]=M,t[2]=m,t[3]=0,t[4]=f*m-l*M,t[5]=l*_-h*m,t[6]=h*M-f*_,t[7]=0,t[8]=h,t[9]=f,t[10]=l,t[11]=0,t[12]=o,t[13]=i,t[14]=s,t[15]=1,t}function z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function G(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function U(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function V(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function k(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function X(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function Y(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function J(t,n){if(t===n)return!0;const e=t[0],r=t[1],i=t[2],s=t[3],u=t[4],c=t[5],a=t[6],h=t[7],f=t[8],l=t[9],d=t[10],_=t[11],M=t[12],m=t[13],T=t[14],b=t[15],g=n[0],p=n[1],O=n[2],A=n[3],E=n[4],R=n[5],I=n[6],N=n[7],S=n[8],P=n[9],F=n[10],x=n[11],j=n[12],v=n[13],B=n[14],L=n[15],D=(0,o.e)();return Math.abs(e-g)<=D*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-p)<=D*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-O)<=D*Math.max(1,Math.abs(i),Math.abs(O))&&Math.abs(s-A)<=D*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-E)<=D*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(c-R)<=D*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(a-I)<=D*Math.max(1,Math.abs(a),Math.abs(I))&&Math.abs(h-N)<=D*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(f-S)<=D*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(l-P)<=D*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(d-F)<=D*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(_-x)<=D*Math.max(1,Math.abs(_),Math.abs(x))&&Math.abs(M-j)<=D*Math.max(1,Math.abs(M),Math.abs(j))&&Math.abs(m-v)<=D*Math.max(1,Math.abs(m),Math.abs(v))&&Math.abs(T-B)<=D*Math.max(1,Math.abs(T),Math.abs(B))&&Math.abs(b-L)<=D*Math.max(1,Math.abs(b),Math.abs(L))}function K(t){const n=(0,o.e)(),e=t[0],r=t[1],i=t[2],s=t[4],u=t[5],c=t[6],a=t[8],h=t[9],f=t[10];return Math.abs(1-(e*e+s*s+a*a))<=n&&Math.abs(1-(r*r+u*u+h*h))<=n&&Math.abs(1-(i*i+c*c+f*f))<=n}function Q(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[8]&&0===t[9]&&1===t[10]}const W=d,Z=V;Object.freeze(Object.defineProperty({__proto__:null,add:U,adjoint:f,copy:i,determinant:l,equals:J,exactEquals:Y,frob:G,fromQuat:L,fromQuat2:S,fromRotation:A,fromRotationTranslation:N,fromRotationTranslationScale:v,fromRotationTranslationScaleOrigin:B,fromScaling:O,fromTranslation:p,fromXRotation:E,fromYRotation:R,fromZRotation:I,frustum:D,getRotation:j,getScaling:x,getTranslation:F,hasIdentityRotation:Q,identity:u,invert:h,invertOrIdentity:a,isOrthoNormal:K,lookAt:q,mul:W,multiply:d,multiplyScalar:k,multiplyScalarAndAdd:X,ortho:C,perspective:y,perspectiveFromFieldOfView:w,rotate:m,rotateX:T,rotateY:b,rotateZ:g,scale:M,set:s,str:z,sub:Z,subtract:V,targetTo:H,translate:_,transpose:c},Symbol.toStringTag,{value:"Module"}))},77703:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function i(t,n,e,r,o,i,s,u,c,a,h,f,l,d,_,M){return[t,n,e,r,o,i,s,u,c,a,h,f,l,d,_,M]}function s(t,n){return new Float64Array(t,n,16)}e.d(n,{e:function(){return r},o:function(){return u},r:function(){return o}});const u=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:o,create:r,createView:s,fromValues:i},Symbol.toStringTag,{value:"Module"}))},8082:function(t,n,e){e.d(n,{D:function(){return I},H:function(){return k},J:function(){return X},M:function(){return R},O:function(){return S},P:function(){return q},Q:function(){return J},U:function(){return P},V:function(){return K},a:function(){return g},b:function(){return f},c:function(){return T},d:function(){return E},f:function(){return h},g:function(){return A},h:function(){return N},k:function(){return H},l:function(){return F},m:function(){return O},o:function(){return p},p:function(){return x},q:function(){return G},r:function(){return b},t:function(){return m},u:function(){return l},v:function(){return j},w:function(){return U},x:function(){return z},y:function(){return C},z:function(){return V}});var r=e(98503),o=e(92157),i=(e(90211),e(10769)),s=e(77703),u=e(6256),c=e(39967),a=e(83448);function h(t,n){return(0,o.P)(t,n)/(0,o.r)(t)}function f(t,n){const e=(0,o.P)(t,n)/((0,o.r)(t)*(0,o.r)(n));return-(0,r.cC)(e)}function l(t,n,e){(0,o.A)(d,t),(0,o.A)(_,n);const i=(0,o.P)(d,_),s=(0,r.cC)(i),u=(0,o._)(d,d,_);return(0,o.P)(u,e)<0?2*Math.PI-s:s}const d=(0,r.aA)(),_=(0,r.aA)();let M=class t{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.gC)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new t(c.n)}static createVec3f64(){return new t(r.aA)}static createVec4f64(){return new t(a.n)}static createMat3f64(){return new t(i.e)}static createMat4f64(){return new t(s.e)}static createQuatf64(){return new t(u.e)}get test(){}};const m=M.createVec2f64(),T=M.createVec3f64(),b=M.createVec4f64();M.createMat3f64();const g=M.createMat4f64(),p=M.createQuatf64();function O(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function A(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),r=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),i=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,o.o)(t,e,r,i),t}function E(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,o.o)(n,0,1,0):(0,o.o)(n,1,0,0),(0,o._)(e,t,n),(0,o._)(n,e,t),(0,o.A)(e,e),(0,o.A)(n,n)}function R(t=$){return[t[0],t[1],t[2],t[3]]}function I(t=$[0],n=$[1],e=$[2],r=$[3]){return P(t,n,e,r,b.get())}function N(t,n){return P(n[0],n[1],n[2],n[3],t)}function S(t){return t}function P(t,n,e,r,o=R()){return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function F(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function x(t,n,e,r=R()){const o=e[0]-n[0],i=e[1]-n[1],s=e[2]-n[2],u=t[0]-n[0],c=t[1]-n[1],a=t[2]-n[2],h=i*a-s*c,f=s*u-o*a,l=o*c-i*u,d=h*h+f*f+l*l,_=Math.abs(d-1)>1e-5&&d>1e-12?1/Math.sqrt(d):1;return r[0]=h*_,r[1]=f*_,r[2]=l*_,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function j(t,n,e,r=0,i=Math.floor(e*(1/3)),s=Math.floor(e*(2/3))){if(e<3)return!1;n(B,r);let u=i,c=!1;for(;u<e-1&&!c;)n(L,u),u++,c=!(0,o.H)(B,L);if(!c)return!1;for(u=Math.max(u,s),c=!1;u<e&&!c;)n(D,u),u++,(0,o.c)(y,B,L),(0,o.A)(y,y),(0,o.c)(w,L,D),(0,o.A)(w,w),c=!(0,o.H)(B,D)&&!(0,o.H)(L,D)&&Math.abs((0,o.P)(y,w))<v;return c?(x(B,L,D,t),!0):(0!==r||1!==i||2!==s)&&j(t,n,e,0,1,2)}const v=.99619469809,B=(0,r.aA)(),L=(0,r.aA)(),D=(0,r.aA)(),y=(0,r.aA)(),w=(0,r.aA)();function C(t,n,e){return n!==t&&N(t,n),t[3]=-(0,o.P)(t,e),t}function q(t,n,e,r){return(0,o._)(D,n,t),F(e,D,r)}function H(t,n,e,r){return W(Z(t,n,(0,o.c)(T.get(),e,n),nt,r))}function z(t,n,e){return null!=n&&W(Z(t,n.origin,n.direction,et,e))}function G(t,n,e){return W(Z(t,n.origin,n.vector,tt.NONE,e))}function U(t,n,e){return W(Z(t,n.origin,n.vector,tt.CLAMP,e))}function V(t,n){return K(t,n)>=0}function k(t,n,e){const r=(0,o.g)(T.get(),t,-t[3]),i=Y(t,(0,o.c)(T.get(),n,r),T.get());return(0,o.u)(e,i,r),e}function X(t,n,e,r){const i=t,s=T.get(),u=T.get();E(i,s,u);const c=(0,o.c)(T.get(),e,n),a=h(s,c),f=h(u,c),l=h(i,c);return(0,o.o)(r,a,f,l)}function Y(t,n,e){const r=(0,o.g)(T.get(),t,(0,o.P)(t,n));return(0,o.c)(e,n,r),e}function J(t,n){return Math.abs(K(t,n))}function K(t,n){return(0,o.P)(t,n)+t[3]}var Q;function W(t){return t===Q.INTERSECTS_INSIDE_OUT||t===Q.INTERSECTS_OUTSIDE_IN}function Z(t,n,e,i,s){const u=(0,o.P)(t,e),c=K(t,n);if(0===u)return c>=0?Q.INSIDE:Q.OUTSIDE;let a=-c/u;return i&tt.CLAMP&&(a=(0,r.aP)(a,0,1)),!(i&tt.INFINITE_MIN)&&a<0||!(i&tt.INFINITE_MAX)&&a>1?c>=0?Q.INSIDE:Q.OUTSIDE:((0,o.u)(s,n,(0,o.g)(s,e,a)),c>=0?Q.INTERSECTS_INSIDE_OUT:Q.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(Q||(Q={}));const $=[0,0,1,0];var tt;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(tt||(tt={}));const nt=tt.INFINITE_MIN|tt.INFINITE_MAX,et=tt.INFINITE_MAX},6256:function(t,n,e){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}function i(t,n,e,r){return[t,n,e,r]}e.d(n,{e:function(){return r},r:function(){return s},t:function(){return o}});const s=r();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:s,clone:o,create:r,fromValues:i},Symbol.toStringTag,{value:"Module"}))},31178:function(t,n,e){e.d(n,{$:function(){return Y},E:function(){return E},H:function(){return G},I:function(){return C},N:function(){return j},O:function(){return S},T:function(){return P},U:function(){return v},V:function(){return B},_:function(){return R},a:function(){return N},b:function(){return l},f:function(){return ot},i:function(){return tt},k:function(){return _},s:function(){return h},v:function(){return M},w:function(){return b}});var r=e(98503),o=e(74362),i=e(92157),s=e(90211),u=e(83448),c=e(25209),a=(e(69852),e(10769),e(8082));class h{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.gC)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*f);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,f));t++)this._items.push(this._allocator())}}const f=1024;function l(t){return t?d((0,r.cv)(t.origin),(0,r.cv)(t.direction)):d((0,r.aA)(),(0,r.aA)())}function d(t,n){return{origin:t,direction:n}}function _(t,n){const e=p.get();return e.origin=t,e.direction=n,e}function M(t,n=l()){return T(t.origin,t.direction,n)}function m(t,n,e=l()){return(0,i.s)(e.origin,t),(0,i.c)(e.direction,n,t),e}function T(t,n,e=l()){return(0,i.s)(e.origin,t),(0,i.s)(e.direction,n),e}function b(t,n){const e=(0,i._)(a.c.get(),(0,i.A)(a.c.get(),t.direction),(0,i.c)(a.c.get(),n,t.origin));return(0,i.P)(e,e)}function g(t,n,e){const r=(0,i.P)(t.direction,(0,i.c)(e,n,t.origin));return(0,i.u)(e,t.origin,(0,i.g)(e,t.direction,r)),e}const p=new h((()=>l()));function O(t,n){const e=(0,i.r)(t),o=(0,r.fu)(t[2]/e),s=Math.atan2(t[1]/e,t[0]/e);return(0,i.o)(n,e,o,s),n}const A=E();function E(){return(0,u.n)()}const R=s.L,I=s.L;function N(t,n){return(0,s.a)(n,t)}function S(t,n){return(0,u.r)(t[0],t[1],t[2],n)}function P(t){return t}function F(t){t[0]=t[1]=t[2]=t[3]=0}function x(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t}function j(t){return t[3]}function v(t){return t}function B(t,n,e,r){return(0,u.r)(t,n,e,r)}function L(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e}function D(t,n,e){return t!==e&&N(t,e),e}function y(t,n){return n}function w(t,n,e){if(null==n||!H(t,n,q))return!1;let{t0:r,t1:o}=q;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(e){const{origin:t,direction:o}=n;e[0]=t[0]+o[0]*r,e[1]=t[1]+o[1]*r,e[2]=t[2]+o[2]*r}return!0}function C(t,n,e){const o=m(n,e);if(!H(t,o,q))return[];const{origin:s,direction:u}=o,{t0:a,t1:h}=q,f=n=>{const e=(0,r.aA)();return(0,i.q)(e,s,u,n),Y(t,e,e)};return Math.abs(a-h)<(0,c.e)()?[f(a)]:[f(a),f(h)]}const q={t0:0,t1:0};function H(t,n,e){const{origin:r,direction:o}=n,i=z;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===s)return!1;const u=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),c=u*u-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(c<0)return!1;const a=Math.sqrt(c);return e.t0=(-u-a)/(2*s),e.t1=(-u+a)/(2*s),!0}const z=(0,r.aA)();function G(t,n){return w(t,n,null)}function U(t,n,e){if(w(t,n,e))return e;const r=V(t,n,a.c.get());return(0,i.u)(e,n.origin,(0,i.g)(a.c.get(),n.direction,(0,i.p)(n.origin,r)/(0,i.r)(n.direction))),e}function V(t,n,e){const r=a.c.get(),s=a.a.get();(0,i._)(r,n.origin,n.direction);const u=j(t);(0,i._)(e,r,n.origin),(0,i.g)(e,e,1/(0,i.r)(e)*u);const c=K(t,n.origin),h=(0,a.b)(n.origin,e);return(0,o.p)(s,h+c,r),(0,i.E)(e,e,s),e}function k(t,n,e,r){const o=j(t),i=o*o,s=n+.5*Math.PI,u=e*e+i-2*Math.cos(s)*e*o,c=Math.sqrt(u),a=u-i;if(a<=0)return.5;const h=Math.sqrt(a),f=Math.acos(h/c)-Math.asin(o/(c/Math.sin(s)));return Math.min(1,(f+.5*r)/r)}function X(t,n,e){return w(t,n,e)?e:(g(n,t,e),Y(t,e,e))}function Y(t,n,e){const r=(0,i.c)(a.c.get(),n,t),o=(0,i.g)(a.c.get(),r,t[3]/(0,i.r)(r));return(0,i.u)(e,o,t)}function J(t,n){const e=(0,i.c)(a.c.get(),n,t),r=(0,i.j)(e),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))}function K(t,n){const e=(0,i.c)(a.c.get(),n,t),o=(0,i.r)(e),s=j(t),u=s+Math.abs(s-o);return(0,r.cC)(s/u)}const Q=(0,r.aA)();function W(t,n,e,o){const s=(0,i.c)(Q,n,t);switch(e){case r.cD.X:{const t=O(s,Q)[2];return(0,i.o)(o,-Math.sin(t),Math.cos(t),0)}case r.cD.Y:{const t=O(s,Q),n=t[1],e=t[2],r=Math.sin(n);return(0,i.o)(o,-r*Math.cos(e),-r*Math.sin(e),Math.cos(n))}case r.cD.Z:return(0,i.A)(o,s);default:return}}function Z(t,n){const e=(0,i.c)(et,n,t);return(0,i.r)(e)-t[3]}function $(t,n,e,o){const s=Z(t,n),u=W(t,n,r.cD.Z,et),c=(0,i.g)(et,u,e-s);return(0,i.u)(o,n,c)}function tt(t,n){const e=(0,i.v)(t,n),r=j(t);return e<=r*r}function nt(t,n,e=(0,u.n)()){const r=(0,i.p)(t,n),o=t[3],c=n[3];return r+c<o?((0,s.a)(e,t),e):r+o<c?((0,s.a)(e,n),e):((0,i.I)(e,t,n,(r+c-o)/(2*r)),e[3]=(r+o+c)/2,e)}const et=(0,r.aA)(),rt=E(),ot=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:A,altitudeAt:Z,angleToSilhouette:K,axisAt:W,cameraFrustumCoverage:k,clear:F,closestPoint:X,closestPointOnSilhouette:V,containsPoint:tt,copy:N,create:E,distanceToSilhouette:J,elevate:L,equals:I,exactEquals:R,fromCenterAndRadius:S,fromRadius:x,fromValues:B,getCenter:v,getExtent:y,getRadius:j,intersectLine:C,intersectRay:w,intersectRayClosestSilhouette:U,intersectsRay:G,projectPoint:Y,setAltitudeAt:$,setExtent:D,tmpSphere:rt,union:nt,wrap:P},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=3111.e9c78107.js.map