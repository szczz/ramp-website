"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[1903,3297],{36313:function(e,t,i){i.d(t,{l:function(){return r}});var n=i(98503),s=i(5948);const r=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,s.d)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,s.y)(e,n.n.getLogger(this)))}};return(0,n.k)([(0,n.o)()],t.prototype,"title",null),(0,n.k)([(0,n.o)({type:String})],t.prototype,"url",null),t=(0,n.k)([(0,n.A)("esri.layers.mixins.ArcGISService")],t),t}},45528:function(e,t,i){var n;i.d(t,{E:function(){return n}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(n||(n={}))},81519:function(e,t,i){i.d(t,{e:function(){return u}});var n=i(98503);const s=-3,r=s-1;var l;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(l||(l={}));class o{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new n.bX,this._users=new n.bX}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,t){this._removeFuncs.push([e,t])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace((t=>t[0]!==e))}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,-1),this._checkSize()}getSize(e,t){return this._db.get(e.id+t)?.size??0}put(e,t,i,n,o){t=e.id+t;const u=this._db.get(t);if(u&&(this._size-=u.size,e.size-=u.size,this._db.delete(t),u.entry!==i&&this._notifyRemove(t,u.entry,u.size,l.ALL)),n>this._maxSize)return void this._notifyRemove(t,i,n,l.ALL);if(void 0===i)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return console.warn(`Refusing to cache entry with size ${n} for key ${t}`),void this._notifyRemove(t,i,0,l.ALL);const c=1+Math.max(o,r)-s;this._db.set(t,new a(i,n,c)),this._size+=n,e.size+=n,this._checkSize()}updateSize(e,t,i,n){t=e.id+t;const s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){const e=this._notifyRemove(t,i,n,l.SOME);if(!(null!=e&&e>0))return void this._db.delete(t);n=e}s.size=n,this._size+=n,e.size+=n,this._checkSize()}}pop(e,t){t=e.id+t;const i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}get(e,t){t=e.id+t;const i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}peek(e,t){const i=this._db.get(e.id+t);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},t={},i=new Array;this._db.forEach(((e,n)=>{const s=e.lifetime;i[s]=(i[s]||0)+e.size,this._users.forAll((i=>{const{id:s,name:r}=i;if(n.startsWith(s)){const i=t[r]||0;t[r]=i+e.size}}))}));const n={};this._users.forAll((e=>{const i=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){const s=t[i]||0;t[i]=s,n[i]=Math.round(100*e.hitRate)+"%"}else n[i]="0%"}));const r=Object.keys(t);r.sort(((e,i)=>t[i]-t[e])),r.forEach((i=>e[i]=Math.round(t[i]/2**20)+"MB / "+n[i]));for(let l=i.length-1;l>=0;--l){const t=i[l];t&&(e["Priority "+(l+s-1)]=Math.round(t/this._size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll((e=>e.resetHitRate()))}clear(e){const t=e.id;this._db.forEach(((e,i)=>{i.startsWith(t)&&(this._size-=e.size,this._db.delete(i),this._notifyRemove(i,e.entry,e.size,l.ALL))})),e.size=0}clearAll(){this._db.forEach(((e,t)=>this._notifyRemove(t,e.entry,e.size,l.ALL))),this._users.forAll((e=>e.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,t,i,n){let s;return this._removeFuncs.some((r=>{if(e.startsWith(r[0])){const e=r[1](t,n,i);return"number"==typeof e&&(s=e),!0}return!1})),s}_checkSize(){this._users.forAll((e=>this._checkSizeLimits(e))),this._checkSizeLimits()}_checkSizeLimits(e){const t=e??this;if(t.maxSize<0||t.size<=t.maxSize)return;const i=e?.id;let n=!0;for(;n;){n=!1;for(const[s,r]of this._db)if(0===r.lifetime&&(!i||s.startsWith(i))){if(this._purgeItem(s,r,e),t.size<=.9*t.maxSize)return;n||=this._db.has(s)}}for(const[s,r]of this._db)if((!i||s.startsWith(i))&&(this._purgeItem(s,r,e),t.size<=.9*t.maxSize))return}_purgeItem(e,t,i=this._users.find((t=>e.startsWith(t.id)))){if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);const n=this._notifyRemove(e,t.entry,t.size,l.SOME);null!=n&&n>0&&(this._size+=n,i&&(i.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}class a{constructor(e,t,i){this.entry=e,this.size=t,this.lifetime=i,this.lives=i}}class u{constructor(e,t){this._storage=new o,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),t&&this._storage.registerRemoveFunc("",t)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(e,t,i=1){this._storage.put(this,e,t,i,1)}pop(e){return this._storage.pop(this,e)}get(e){return this._storage.get(this,e)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}resetHitRate(){}}},50293:function(e,t,i){i.d(t,{j:function(){return l}});var n=i(98503),s=i(2031),r=i(83297);const l=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,n.C)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,i){if(t.itemId)return new s["default"]({id:t.itemId,portal:i?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:s}=await Promise.all([i.e(3338),i.e(1128)]).then(i.bind(i,21128));return(0,n.D)(t),await s({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(s){throw(0,n.E)(s)||n.n.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${s}`),s}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,n.G)(e),!0))))}async setUserPrivileges(e,t){if(!n.H.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:i,fullEdit:n},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",i),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",s)}catch(i){(0,n.G)(i)}}async _fetchUserPrivileges(e,t){let i=this.portalItem;if(!e||!i||!i.loaded||i.sourceUrl)return this._fetchFallbackUserPrivileges(t);const l=e===i.id;if(l&&i.portal.user)return(0,r.E)(i);let o,a;if(l)o=i.portal.url;else try{o=await(0,n.J)(this.url,t)}catch(h){(0,n.G)(h)}if(!o||!(0,n.W)(o,i.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(n.K?.getCredential(`${o}/sharing`,{prompt:!1,signal:e}))}catch(h){(0,n.G)(h)}const u=!0,c=!1,f=!1;if(!a)return{features:{edit:u,fullEdit:c},content:{updateItem:f}};try{if(l?await i.reload():(i=new s["default"]({id:e,portal:{url:o}}),await i.load(t)),i.portal.user)return(0,r.E)(i)}catch(h){(0,n.G)(h)}return{features:{edit:u,fullEdit:c},content:{updateItem:f}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(i){(0,n.G)(i)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?n.K?.findCredential(this.url):null;if(!t)return!0;const i=o.credential===t?o.user:await this._fetchEditingUser(e);return o.credential=t,o.user=i,null==i?.privileges||i.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const i=n.K?.findServerInfo(this.url??"");if(!i?.owningSystemUrl)return null;const s=`${i.owningSystemUrl}/sharing/rest`,r=n.b.getDefault();if(r&&r.loaded&&(0,n.L)(r.restUrl)===(0,n.L)(s))return r.user;const l=`${s}/community/self`,o=null!=e?e.signal:null,a=await(0,n._)((0,n.U)(l,{authMode:"no-prompt",query:{f:"json"},signal:o}));return a.ok?n.M.fromJSON(a.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const i=t?.portal,s=this.portalItem?.id&&(this.portalItem.portal||n.b.getDefault());return i&&s&&!(0,n.N)(s.restUrl,i.restUrl)?(t.messages&&t.messages.push(new n.s("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,n.k)([(0,n.o)({type:s["default"]})],t.prototype,"portalItem",null),(0,n.k)([(0,n.u)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,n.k)([(0,n.q)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,n.k)([(0,n.o)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,n.k)([(0,n.A)("esri.layers.mixins.PortalLayer")],t),t},o={credential:null,user:null}},9949:function(e,t,i){i.d(t,{p:function(){return o},z:function(){return f}});var n,s=i(98503),r=i(81728);let l=n=class extends s.v{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new n({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,s.k)([(0,s.o)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"cols",void 0),(0,s.k)([(0,s.o)({type:s.bp,json:{write:!0}})],l.prototype,"level",void 0),(0,s.k)([(0,s.o)({type:String,json:{write:!0}})],l.prototype,"levelValue",void 0),(0,s.k)([(0,s.o)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"origin",void 0),(0,s.k)([(0,s.o)({type:Number,json:{write:!0}})],l.prototype,"resolution",void 0),(0,s.k)([(0,s.o)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],l.prototype,"rows",void 0),(0,s.k)([(0,s.o)({type:Number,json:{write:!0}})],l.prototype,"scale",void 0),l=n=(0,s.k)([(0,s.A)("esri.layers.support.LOD")],l);const o=l;var a;const u=new s.ax({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let c=a=class extends s.v{static create(e={}){const{resolutionFactor:t=1,scales:i,size:n=256,spatialReference:r=s.B.WebMercator,numLODs:l=24}=e;if(!(0,s.cg)(r)){const e=[];if(i)for(let t=0;t<i.length;t++){const n=i[t];e.push(new o({level:t,scale:n,resolution:n}))}else{let t=5e-4;for(let i=l-1;i>=0;i--)e.unshift(new o({level:i,scale:t,resolution:t})),t*=2}return new a({dpi:96,lods:e,origin:new s.bv(0,0,r),size:[n,n],spatialReference:r})}const u=(0,s.bF)(r),c=e.origin?new s.bv({x:e.origin.x,y:e.origin.y,spatialReference:r}):new s.bv(u?{x:u.origin[0],y:u.origin[1],spatialReference:r}:{x:0,y:0,spatialReference:r}),f=96,h=1/(39.37*(0,s.bq)(r)*f),p=[];if(i)for(let s=0;s<i.length;s++){const e=i[s],t=e*h;p.push(new o({level:s,scale:e,resolution:t}))}else{let e=(0,s.cK)(r)?512/n*591657527.5917094:256/n*591657527.591555;const i=Math.ceil(l/t);p.push(new o({level:0,scale:e,resolution:e*h}));for(let n=1;n<i;n++){const i=e/2**t,s=i*h;p.push(new o({level:n,scale:i,resolution:s})),e=i}}return new a({dpi:f,lods:p,origin:c,size:[n,n],spatialReference:r})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=(0,s.bF)(e);return e.isWrappable&&!!i&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return s.bv.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const n=[],s=this._levelToLOD={};e&&(t=-1/0,i=1/0,e.forEach((e=>{n.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,s[e.level]=e}))),this._set("scales",n),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const i=Math.floor(e),n=i+1;return t[i]/(t[i]/t[n])**(e-i)}scaleToZoom(e){const t=this.scales,i=t.length-1;let n=0;for(;n<i;n++){const i=t[n],s=t[n+1];if(i<=e)return n;if(s===e)return n+1;if(i>e&&s<e)return n+Math.log(i/e)/Math.log(i/s)}return n}tileAt(e,t,i,n){const l=this.lodAt(e);if(!l)return null;let o,a;if("number"==typeof t)o=t,a=i;else if((0,s.bh)(t.spatialReference,this.spatialReference))o=t.x,a=t.y,n=i;else{const e=(0,s.co)(t,this.spatialReference);if(null==e)return null;o=e.x,a=e.y,n=i}const u=l.resolution*this.size[0],c=l.resolution*this.size[1];return n||(n=new r.t(null,0,0,0,(0,s.bS)())),n.level=e,n.row=Math.floor((this.origin.y-a)/c+.001),n.col=Math.floor((o-this.origin.x)/u+.001),this.updateTileInfo(n),n}updateTileInfo(e,t=a.ExtrapolateOptions.NONE){let i=this.lodAt(e.level);if(!i&&t===a.ExtrapolateOptions.POWER_OF_TWO){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const n=e.level-i.level,r=i.resolution*this.size[0]/2**n,l=i.resolution*this.size[1]/2**n;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,s.bS)()),e.extent[0]=this.origin.x+e.col*r,e.extent[1]=this.origin.y-(e.row+1)*l,e.extent[2]=e.extent[0]+r,e.extent[3]=e.extent[1]+l}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const i=this.lodAt(t.level);if(null==i)return null;const{resolution:n}=i,s=n*this.size[0],r=n*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*r,e[2]=e[0]+s,e[3]=e[1]+r,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return a.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===e)return null;const t=(512===this.size[0]&&256===e?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&0===t)return this;const i=[],n=this.lods.length-t;for(let s=0;s<n;s++){const e=s+t,{scale:n,resolution:r}=e>=0?this.lods[e]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};i.push(new o({level:s,scale:n,resolution:r}))}return new a({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const n=e[i];this._upsampleLevels[n.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/n.resolution:0},t=n}}};(0,s.k)([(0,s.o)({type:Number,json:{write:!0}})],c.prototype,"compressionQuality",void 0),(0,s.k)([(0,s.o)({type:Number,json:{write:!0}})],c.prototype,"dpi",void 0),(0,s.k)([(0,s.o)({type:String,json:{read:u.read,write:u.write,origins:{"web-scene":{read:!1,write:!1}}}})],c.prototype,"format",void 0),(0,s.k)([(0,s.o)({readOnly:!0})],c.prototype,"isWrappable",null),(0,s.k)([(0,s.o)({type:s.bv,json:{write:!0}})],c.prototype,"origin",void 0),(0,s.k)([(0,s.u)("origin")],c.prototype,"readOrigin",null),(0,s.k)([(0,s.o)({type:[o],value:null,json:{write:!0}})],c.prototype,"lods",null),(0,s.k)([(0,s.o)({readOnly:!0})],c.prototype,"scales",void 0),(0,s.k)([(0,s.o)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],c.prototype,"size",void 0),(0,s.k)([(0,s.u)("size",["rows","cols"])],c.prototype,"readSize",null),(0,s.k)([(0,s.q)("size",{cols:{type:s.bp},rows:{type:s.bp}})],c.prototype,"writeSize",null),(0,s.k)([(0,s.o)({type:s.B,json:{write:!0}})],c.prototype,"spatialReference",void 0),c=a=(0,s.k)([(0,s.A)("esri.layers.support.TileInfo")],c),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(c||(c={}));const f=c},81728:function(e,t,i){i.d(t,{t:function(){return n}});class n{constructor(e,t,i,n,s=void 0){this.id=e,this.level=t,this.row=i,this.col=n,this.extent=s}}},15879:function(e,t,i){i.d(t,{T:function(){return d}});var n,s=i(98503),r=i(45528),l=i(81519),o=i(81728);function a(e,t=!1){return e<=s.c0?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}class u{constructor(e){h(e);const{location:t,data:i}=e;this.location=Object.freeze((0,s.f)(t));const n=this.location.width,r=this.location.height;let l=!0,o=!0;const u=Math.ceil(n*r/32),c=a(u);let f=0;for(let s=0;s<i.length;s++){const e=s%32;i[s]?(o=!1,c[f]|=1<<e):l=!1,31===e&&++f}o?(this._availability="unavailable",this.byteSize=40):l?(this._availability="available",this.byteSize=40):(this._availability=c,this.byteSize=40+(0,s.fn)(c))}getAvailability(e,t){if("unavailable"===this._availability||"available"===this._availability)return this._availability;const i=(e-this.location.top)*this.location.width+(t-this.location.left),n=i%32,s=i>>5,r=this._availability;return s<0||s>r.length?"unknown":r[s]&1<<n?"available":"unavailable"}static fromDefinition(e,t){const i=e.service.request||s.U,{row:n,col:r,width:l,height:o}=e,a={query:{f:"json"}};return t=t?{...a,...t}:a,i(f(e),t).then((e=>e.data)).catch((e=>{if(422===e?.details?.httpStatus)return{location:{top:n,left:r,width:l,height:o},valid:!0,data:new Array(l*o).fill(0)};throw e})).then((e=>{if(e.location&&(e.location.top!==n||e.location.left!==r||e.location.width!==l||e.location.height!==o))throw new s.s("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:n,left:r,width:l,height:o}});return u.fromJSON(e)}))}static fromJSON(e){return Object.freeze(new u(e))}}function c(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function f(e){let t;if(e.service.tileServers?.length){const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const i=e.service.query;return i&&(t=`${t}?${i}`),t}function h(e){if(!e?.location)throw new s.s("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new s.s("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new s.s("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new s.s("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new s.s("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}function p(e,t,i){return new s.s("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:i})}let d=n=class extends s.aD{constructor(e){super(e),this._pendingTilemapRequests={},this.request=s.U,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new l.e(2*r.E.MEGABYTES),this.addHandles((0,s.aE)((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition()),s.cR))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const n=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return n?n.getAvailability(t,i):"unknown"}fetchAvailability(e,t,i,n){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(p(e,t,i)):this._fetchTilemap(e,t,i,n).catch((e=>e)).then((n=>{if(n instanceof u){const s=n.getAvailability(t,i);if("unavailable"===s)throw p(e,t,i);return s}if((0,s.E)(n))throw n;return"unknown"}))}fetchAvailabilityUpsample(e,t,i,n,r){n.level=e,n.row=t,n.col=i;const l=this.layer.tileInfo;l.updateTileInfo(n);const o=this.fetchAvailability(e,t,i,r).catch((e=>{if((0,s.E)(e))throw e;if(l.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n,r);throw e}));return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,i,r,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,l,a){if(!this._prefetchingEnabled||null==e)return;const u=`prefetch-${e}`;if(this.hasHandles(u))return;const c=new AbortController;a.then((()=>c.abort()),(()=>c.abort()));let f=!1;const h=(0,s.aH)((()=>{f||(f=!0,c.abort())}));if(this.addHandles(h,u),await(0,s.fo)(10,c.signal).catch((()=>{})),f||(f=!0,this.removeHandles(u)),(0,s.fp)(c))return;const p=new o.t(e,t,i,r),d={...l,signal:c.signal},_=this.layer.tileInfo;for(let s=0;n._prefetches.length<n._maxPrefetch&&_.upsampleTile(p);++s){const e=this.fetchAvailability(p.level,p.row,p.col,d);n._prefetches.push(e);const t=()=>{n._prefetches.removeUnordered(e)};e.then(t,t)}}_fetchTilemap(e,t,i,n){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new s.s("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const r=this._tmpTilemapDefinition,l=this._tilemapFromCache(e,t,i,r);if(l)return Promise.resolve(l);const o=n?.signal;return n={...n,signal:null},new Promise(((e,t)=>{(0,s.aK)(o,(()=>t((0,s.aN)())));const i=c(r);let l=this._pendingTilemapRequests[i];if(!l){l=u.fromDefinition(r,n).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>{delete this._pendingTilemapRequests[i]};this._pendingTilemapRequests[i]=l,l.then(e,e)}l.then(e,t)}))}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:(0,s.bw)({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,n){n.level=e,n.row=t-t%this.size,n.col=i-i%this.size;const s=c(n);return this._tilemapCache.get(s)}get test(){}};d._maxPrefetch=4,d._prefetches=new s.bX({initialSize:n._maxPrefetch}),(0,s.k)([(0,s.o)({constructOnly:!0})],d.prototype,"layer",void 0),(0,s.k)([(0,s.o)({constructOnly:!0})],d.prototype,"minLOD",void 0),(0,s.k)([(0,s.o)({constructOnly:!0})],d.prototype,"maxLOD",void 0),(0,s.k)([(0,s.o)({constructOnly:!0})],d.prototype,"request",void 0),(0,s.k)([(0,s.o)({constructOnly:!0})],d.prototype,"size",void 0),d=n=(0,s.k)([(0,s.A)("esri.layers.support.TilemapCache")],d)},83297:function(e,t,i){i.d(t,{E:function(){return p},a:function(){return u},c:function(){return a},f:function(){return h},i:function(){return l},l:function(){return f},s:function(){return o},u:function(){return c}});var n=i(49555),s=i(98503);async function r(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,s.a0)(e);const i=s.B.WGS84;return await(0,n.N)(t,i),(0,n.K)(e,i)}function l(e,t){if(!o(e,t)){const i=e.typeKeywords;i?i.push(t):e.typeKeywords=[t]}}function o(e,t){return!!e.typeKeywords?.includes(t)}function a(e){return o(e,h.HOSTED_SERVICE)}function u(e,t){const i=e.typeKeywords;if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1)}}function c(e,t,i){i?l(e,t):u(e,t)}async function f(e){const t=e.clone().normalize();let i;if(t.length>1)for(const n of t)i?n.width>i.width&&(i=n):i=n;else i=t[0];return r(i)}const h={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function p(e){const{portal:t,isOrgItem:i,itemControl:n}=e,s=t.user?.privileges;let r=!s||s.includes("features:user:edit"),l=!!i&&!!s?.includes("features:user:fullEdit");const o="update"===n||"admin"===n;return o?l=r=!0:l&&(r=!0),{features:{edit:r,fullEdit:l},content:{updateItem:o}}}},85502:function(e,t,i){i.r(t),i.d(t,{E:function(){return q},F:function(){return p},G:function(){return h},L:function(){return f},N:function(){return c},d:function(){return u},e:function(){return $},i:function(){return s},l:function(){return B},n:function(){return te},p:function(){return ie},t:function(){return r}});var n=i(98503);const s=Math.PI/180,r=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,l=n.a3.radius,o=n.a3.eccentricitySquared,a={a1:l*o,a2:l*o*l*o,a3:l*o*o/2,a4:l*o*l*o*2.5,a5:l*o+l*o*o/2,a6:1-o},u={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:n.a3.radius,f:n.a3.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:n.fs.radius,f:n.fs.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:n.ft.radius,f:n.ft.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:n.ft.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var c;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(c||(c={}));const f={[c.WGS84]:{[c.CGCS2000]:d,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:d,[c.SPHERICAL_ECEF]:b,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:S,[c.PLATE_CARREE]:y,[c.WGS84]:d,[c.WGS84_ECEF]:x},[c.CGCS2000]:{[c.CGCS2000]:d,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:d,[c.SPHERICAL_ECEF]:b,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:S,[c.PLATE_CARREE]:y,[c.WGS84]:d,[c.WGS84_ECEF]:x},[c.GCSMARS2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:d,[c.GCSMOON2000]:null,[c.LON_LAT]:d,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:I,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.GCSMOON2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:d,[c.LON_LAT]:d,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:L,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.WEB_MERCATOR]:{[c.CGCS2000]:_,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:_,[c.SPHERICAL_ECEF]:m,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:d,[c.PLATE_CARREE]:v,[c.WGS84]:_,[c.WGS84_ECEF]:g},[c.WGS84_ECEF]:{[c.CGCS2000]:H,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:H,[c.SPHERICAL_ECEF]:U,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:j,[c.PLATE_CARREE]:C,[c.WGS84]:H,[c.WGS84_ECEF]:d},[c.SPHERICAL_ECEF]:{[c.CGCS2000]:T,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:T,[c.SPHERICAL_ECEF]:d,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:k,[c.PLATE_CARREE]:w,[c.WGS84]:T,[c.WGS84_ECEF]:W},[c.SPHERICAL_MARS_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:G,[c.GCSMOON2000]:null,[c.LON_LAT]:G,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:d,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.SPHERICAL_MOON_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:z,[c.LON_LAT]:z,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:d,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.UNKNOWN]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:null,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:d,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.LON_LAT]:{[c.CGCS2000]:d,[c.GCSMARS2000]:d,[c.GCSMOON2000]:d,[c.LON_LAT]:d,[c.SPHERICAL_ECEF]:b,[c.SPHERICAL_MARS_PCPF]:I,[c.SPHERICAL_MOON_PCPF]:L,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:S,[c.PLATE_CARREE]:y,[c.WGS84]:d,[c.WGS84_ECEF]:x},[c.PLATE_CARREE]:{[c.CGCS2000]:R,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:R,[c.SPHERICAL_ECEF]:A,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:P,[c.PLATE_CARREE]:d,[c.WGS84]:R,[c.WGS84_ECEF]:O}};function h(e,t,i=D()){return null==e||null==t?null:K(e,t,i).projector}function p(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,n.bq)(e,1)),(0,n.fv)(e)?t.spatialReferenceId=c.SPHERICAL_ECEF:(0,n.cb)(e)?t.spatialReferenceId=c.WGS84:(0,n.cL)(e)?t.spatialReferenceId=c.WEB_MERCATOR:(0,n.fw)(e)?t.spatialReferenceId=c.PLATE_CARREE:e.wkt===n.c4.wkt?t.spatialReferenceId=c.WGS84_ECEF:e.wkid===n.fx.CGCS2000?t.spatialReferenceId=c.CGCS2000:e.wkt===n.c2.wkt?t.spatialReferenceId=c.SPHERICAL_MARS_PCPF:e.wkt===n.c3.wkt?t.spatialReferenceId=c.SPHERICAL_MOON_PCPF:(0,n.eD)(e)?t.spatialReferenceId=c.GCSMARS2000:(0,n.eE)(e)?t.spatialReferenceId=c.GCSMOON2000:t.spatialReferenceId=c.UNKNOWN):c.UNKNOWN}function d(e,t,i,n){e!==i&&(i[n++]=e[t++],i[n++]=e[t++],i[n]=e[t])}function _(e,t,i,n){i[n]=Z*(e[t]/Q),i[n+1]=Z*(J-2*Math.atan(Math.exp(-e[t+1]/Q))),i[n+2]=e[t+2]}function m(e,t,i,n){const s=e[t]/Q,r=J-2*Math.atan(Math.exp(-e[t+1]/Q)),l=Q+e[t+2],o=Math.cos(r)*l;i[n]=Math.cos(s)*o,i[n+1]=Math.sin(s)*o,i[n+2]=Math.sin(r)*l}function g(e,t,i,n){_(e,t,i,n),x(i,n,i,n)}function E(e,t,i,s,r){const l=.4999999*V,o=(0,n.aP)(Y*e[t+1],-l,l),a=Math.sin(o);i[s++]=Y*e[t]*r.radius,i[s++]=r.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[s]=e[t+2]}function S(e,t,i,s){E(e,t,i,s,n.a3)}function y(e,t,i,n){i[n]=e[t]*X,i[n+1]=e[t+1]*X,i[n+2]=e[t+2]}function R(e,t,i,n){i[n]=e[t]*ee,i[n+1]=e[t+1]*ee,i[n+2]=e[t+2]}function v(e,t,i,n){_(e,t,i,n),y(i,n,i,n)}function C(e,t,i,n){H(e,t,i,n),y(i,n,i,n)}function w(e,t,i,n){T(e,t,i,n),y(i,n,i,n)}function A(e,t,i,n){R(e,t,i,n),b(i,n,i,n)}function P(e,t,i,n){R(e,t,i,n),S(i,n,i,n)}function O(e,t,i,n){R(e,t,i,n),x(i,n,i,n)}function M(e,t,i,n,s){const r=s+e[t+2],l=Y*e[t+1],o=Y*e[t],a=Math.cos(l)*r;i[n]=Math.cos(o)*a,i[n+1]=Math.sin(o)*a,i[n+2]=Math.sin(l)*r}function L(e,t,i,s){M(e,t,i,s,n.fs.radius)}function I(e,t,i,s){M(e,t,i,s,n.ft.radius)}function b(e,t,i,s){M(e,t,i,s,n.a3.radius)}function N(e,t,i,s,r){const l=e[t],o=e[t+1],a=e[t+2],u=Math.sqrt(l*l+o*o+a*a),c=(0,n.fu)(a/(0===u?1:u)),f=Math.atan2(o,l);i[s++]=Z*f,i[s++]=Z*c,i[s]=u-r}function z(e,t,i,s){N(e,t,i,s,n.fs.radius)}function G(e,t,i,s){N(e,t,i,s,n.ft.radius)}function T(e,t,i,s){N(e,t,i,s,n.a3.radius)}function k(e,t,i,n){T(e,t,i,n),S(i,n,i,n)}function W(e,t,i,n){T(e,t,i,n),x(i,n,i,n)}function F(e,t,i,n,s){const r=Y*e[t],l=Y*e[t+1],o=e[t+2],a=Math.sin(l),u=Math.cos(l),c=s.radius/Math.sqrt(1-s.eccentricitySquared*a*a);i[n++]=(c+o)*u*Math.cos(r),i[n++]=(c+o)*u*Math.sin(r),i[n++]=(c*(1-s.eccentricitySquared)+o)*a}function x(e,t,i,s){F(e,t,i,s,n.a3)}function H(e,t,i,s){const r=a,l=e[t],o=e[t+1],u=e[t+2];let c,f,h,p,d,_,m,g,E,S,y,R,v,C,w,A,P,O,M,L,I;c=Math.abs(u),f=l*l+o*o,h=Math.sqrt(f),p=f+u*u,d=Math.sqrt(p),L=Math.atan2(o,l),_=u*u/p,m=f/p,C=r.a2/d,w=r.a3-r.a4/d,m>.3?(g=c/d*(1+m*(r.a1+C+_*w)/d),M=Math.asin(g),S=g*g,E=Math.sqrt(1-S)):(E=h/d*(1-_*(r.a5-C-m*w)/d),M=Math.acos(E),S=1-E*E,g=Math.sqrt(S)),y=1-n.a3.eccentricitySquared*S,R=n.a3.radius/Math.sqrt(y),v=r.a6*R,C=h-R*E,w=c-v*g,P=E*C+g*w,A=E*w-g*C,O=A/(v/y+P),M+=O,I=P+A*O/2,u<0&&(M=-M),i[s++]=Z*L,i[s++]=Z*M,i[s]=I}function U(e,t,i,n){H(e,t,i,n),b(i,n,i,n)}function j(e,t,i,n){H(e,t,i,n),S(i,n,i,n)}function K(e,t,i){if(null==e||null==t||i.source.spatialReference===e&&i.dest.spatialReference===t)return i;const s=p(e,i.source),r=p(t,i.dest);return s===c.UNKNOWN&&r===c.UNKNOWN?(0,n.bh)(e,t)?i.projector=d:i.projector=null:i.projector=f[s][r],i}function D(){return{source:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},projector:d}}const B={spatialReference:null,spatialReferenceId:c.UNKNOWN},$={spatialReference:null,spatialReferenceId:c.UNKNOWN},q=D(),Y=(0,n.eI)(1),Z=(0,n.dg)(1),V=Math.PI,J=.5*V,Q=n.a3.radius,X=Q*V/180,ee=180/(Q*V);function te(e,t,i,n,s,r,l=Math.floor(e.length/3)){const o=h(t,s,q);if(null==o)return!1;if(o===d){if(e===n&&i===r)return!0;const t=i+3*l;for(let s=i,l=r;s<t;s++,l++)n[l]=e[s];return!0}const a=i+3*l;for(let u=i,c=r;u<a;u+=3,c+=3)o(e,u,n,c);return!0}const ie=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:te},Symbol.toStringTag,{value:"Module"}))},49555:function(e,t,i){i.r(t),i.d(t,{B:function(){return C},H:function(){return T},J:function(){return W},K:function(){return P},L:function(){return F},N:function(){return x},O:function(){return O},Q:function(){return H},V:function(){return M},W:function(){return A},X:function(){return L},Y:function(){return I},_:function(){return R},a:function(){return q},o:function(){return c},p:function(){return X},s:function(){return u}});var n=i(98503),s=i(85502);function r(e,t,i,n,r,o){return l[0]=e,l[1]=t,l[2]=i,(0,s.n)(l,n,0,r,o,0)}const l=(0,n.aA)();let o=0;class a{static fromGE(e){const t=new a;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}constructor(e){this.uid=o++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=o++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=o++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=o++}getInverse(){const e=new a;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}let u=class e{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(t){const i=new e;let n="";for(const e of t.steps){const t=a.fromGE(e);i.steps.push(t),n+=t.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const t of e.steps)t instanceof a?this.steps.push(t):this.steps.push(new a({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){const t=new e;t.steps=[];for(let e=this.steps.length-1;e>=0;e--){const i=this.steps[e];t.steps.push(i.getInverse())}return t}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(t,i,n){this._cachedProjection[e.cacheKey(t,i)]=n}getCachedGeTransformation(t,i){let n="";for(const e of this.steps)n+=e.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const s=this._cachedProjection[e.cacheKey(t,i)];return void 0===s?null:s}};function c(e,t,i){if(null==t||null==i||i.vcsWkid||(0,n.bh)(t,i)||(0,n.gK)(t)||(0,n.gK)(i))return null;const s=(0,n.bg)(t)/(0,n.bg)(i);if(1===s)return null;switch(e){case"point":case"esriGeometryPoint":return e=>f(e,s);case"polyline":case"esriGeometryPolyline":return e=>p(e,s);case"polygon":case"esriGeometryPolygon":return e=>h(e,s);case"multipoint":case"esriGeometryMultipoint":return e=>d(e,s);case"extent":case"esriGeometryEnvelope":return e=>_(e,s);default:return null}}function f(e,t){null!=e?.z&&(e.z*=t)}function h(e,t){if(e)for(const i of e.rings)for(const e of i)e.length>2&&(e[2]*=t)}function p(e,t){if(e)for(const i of e.paths)for(const e of i)e.length>2&&(e[2]*=t)}function d(e,t){if(e)for(const i of e.points)i.length>2&&(i[2]*=t)}function _(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}let m=null,g=null,E=null,S={};const y=new n.aQ;function R(){return!!m&&(0,n.gN)()}function v(){return!!R()||((0,n.aR)(y),A(),!1)}function C(e,t){return!e||!t||W(e,t)||v()}function w(e,t){return!W(e,t)&&!R()}function A(e){return null==E&&(E=Promise.all([(0,n.gL)(),Promise.all([i.e(916),i.e(2020)]).then(i.bind(i,90916)).then((e=>e.g)),i.e(6582).then(i.bind(i,6582))])),E.then((([,t,{hydratedAdapter:i}])=>{(0,n.D)(e),g=i,m=t.default,m._enableProjection(n.gM),y.notify()}))}function P(e,t,i=null,n=null){return Array.isArray(e)?0===e.length?[]:O(g,e,e[0].spatialReference,t,i,n):O(g,[e],e.spatialReference,t,i,n)[0]}function O(e,t,i,s,r=null,l=null){if(null==i||null==s)return t;if(W(i,s,r))return t.map((e=>H(e,i,s)));if(null==r&&(0,n.fv)(i))return t.map((e=>H(e,i,n.B.WGS84))).map((e=>T(e,s)));if(null==r&&(0,n.fv)(s))return t.map((e=>T(e,n.B.WGS84))).map((e=>H(e,n.B.WGS84,s)));if(null==r){const e=u.cacheKey(i,s);void 0!==S[e]?r=S[e]:(null==(r=I(i,s,void 0))&&(r=new u),S[e]=r)}if(null==m||null==e)throw new N;return null!=l?m._project(e,t,i,s,r,l):m._project(e,t,i,s,r)}function M(e,t){const i=L([e],t);return null!=i.pending?{pending:i.pending,geometry:null}:null!=i.geometries?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function L(e,t){if(!R())for(const i of e)if(null!=i&&!(0,n.bh)(i.spatialReference,t)&&(0,n.cg)(i.spatialReference)&&(0,n.cg)(t)&&!W(i.spatialReference,t))return(0,n.aR)(y),{pending:A(),geometries:null};return{pending:null,geometries:e.map((e=>null==e?null:(0,n.bh)(e.spatialReference,t)?e:(0,n.cg)(e.spatialReference)&&(0,n.cg)(t)?T(e,t):null))}}function I(e,t,i=null){if(null==e||null==t)return null;if(null==m||null==g)throw new N;const n=m._getTransformation(g,e,t,i,i?.spatialReference);return null!==n?u.fromGE(n):null}function b(e,t,i=null){if(null==m||null==g)throw new N;const n=m._getTransformationBySuitability(g,e,t,i,i?.spatialReference);if(null!==n){const e=[];for(const t of n)e.push(u.fromGE(t));return e}return[]}class N extends n.s{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function z(){m=null,g=null,E=null,S={}}const G={get loadPromise(){return E}};function T(e,t){try{const i=P(e,t);return null==i?null:("xmin"in e&&"xmin"in i&&(i.zmin=e.zmin,i.zmax=e.zmax),c(i.type,e.spatialReference,t)?.(i),i)}catch(i){if(!(i instanceof N))throw i;return null}}async function k(e,t,i){const n=e.spatialReference;return null!=n&&null!=t&&await x(n,t,null,i),T(e,t)}function W(e,t,i){return!i&&(!!(0,n.bh)(e,t)||(0,n.cg)(e)&&(0,n.cg)(t)&&!!(0,s.G)(e,t,s.E))}function F(e,t){if((0,n.bh)(e,t))return!0;if(!(0,n.cg)(e)||!(0,n.cg)(t))return!1;const i=(0,n.cb)(e)||(0,n.cL)(e)||(0,n.eC)(e),s=(0,n.cb)(t)||(0,n.cL)(t)||(0,n.eC)(t);return i&&s}async function x(e,t,i,s){if(R())return(0,n.O)(s);if(Array.isArray(e)){for(const{source:n,dest:r,geographicTransformation:l}of e)if(n&&r&&!W(n,r,l))return A(s)}else if(e&&t&&!W(e,t,i))return A(s);return(0,n.O)(s)}function H(e,t,i){return e?"x"in e?j(e,t,new n.bv,i,0):"xmin"in e?V(e,t,new n.au,i,0):"rings"in e?Y(e,t,new n.bC,i,0):"paths"in e?$(e,t,new n.aT,i,0):"points"in e?D(e,t,new n.bD,i,0):null:null}function U(e,t,i=t.spatialReference,n=0){return null!=i&&null!=e.spatialReference&&null!=j(e,e.spatialReference,t,i,n)}function j(e,t,i,r,l){Q[0]=e.x,Q[1]=e.y;const o=e.z;return Q[2]=void 0!==o?o:l,(0,s.n)(Q,t,0,Q,r,0)?(i.x=Q[0],i.y=Q[1],i.spatialReference=r,void 0!==o||(0,n.gK)(r)?(i.z=Q[2],i.hasZ=!0):(i.z=void 0,i.hasZ=!1),void 0===e.m?(i.m=void 0,i.hasM=!1):(i.m=e.m,i.hasM=!0),i):null}function K(e,t,i=t.spatialReference,n=0){return null!=e.spatialReference&&null!=i&&null!=D(e,e.spatialReference,t,i,n)}function D(e,t,i,r,l){const{points:o,hasZ:a,hasM:u}=e,c=[],f=o.length,h=[];for(const n of o)h.push(n[0],n[1],a?n[2]:l);if(!(0,s.n)(h,t,0,h,r,0,f))return null;const p=a||(0,n.gK)(r);for(let n=0;n<f;++n){const e=3*n,t=h[e],i=h[e+1];p&&u?c.push([t,i,h[e+2],o[n][3]]):p?c.push([t,i,h[e+2]]):u?c.push([t,i,o[n][2]]):c.push([t,i])}return i.points=c,i.spatialReference=r,i.hasZ=a,i.hasM=u,i}function B(e,t,i=t.spatialReference,n=0){return null!=e.spatialReference&&null!=i&&null!=$(e,e.spatialReference,t,i,n)}function $(e,t,i,s,r){const{paths:l,hasZ:o,hasM:a}=e,u=[];if(!J(l,o??!1,a??!1,t,u,s,r))return null;const c=o||(0,n.gK)(s);return i.paths=u,i.spatialReference=s,i.hasZ=c,i.hasM=a,i}function q(e,t,i=t.spatialReference,n=0){return null!=e.spatialReference&&null!=i&&null!=Y(e,e.spatialReference,t,i,n)}function Y(e,t,i,s,r){const{rings:l,hasZ:o,hasM:a}=e,u=[];if(!J(l,o??!1,a??!1,t,u,s,r))return null;const c=o||(0,n.gK)(s);return i.rings=u,i.spatialReference=s,i.hasZ=c,i.hasM=a,i}function Z(e,t,i=t.spatialReference,n=0){return null!=e.spatialReference&&null!=i&&null!=V(e,e.spatialReference,t,i,n)}function V(e,t,i,s,l){const{xmin:o,ymin:a,xmax:u,ymax:c,hasZ:f,hasM:h}=e,p=f?e.zmin:l;if(!r(o,a,p,t,Q,s))return null;const d=f||(0,n.gK)(s);i.xmin=Q[0],i.ymin=Q[1],d&&(i.zmin=Q[2]);const _=f?e.zmax:l;return r(u,c,_,t,Q,s)?(i.xmax=Q[0],i.ymax=Q[1],d&&(i.zmax=Q[2]),h&&(i.mmin=e.mmin,i.mmax=e.mmax),i.spatialReference=s,i):null}function J(e,t,i,r,l,o,a=0){const u=new Array;for(const n of e)for(const e of n)u.push(e[0],e[1],t?e[2]:a);if(!(0,s.n)(u,r,0,u,o,0))return!1;let c=0;l.length=0;const f=t||(0,n.gK)(o);for(const n of e){const e=new Array;for(const t of n)f&&i?e.push([u[c++],u[c++],u[c++],t[3]]):f?e.push([u[c++],u[c++],u[c++]]):i?(e.push([u[c++],u[c++],t[2]]),c++):(e.push([u[c++],u[c++]]),c++);l.push(e)}return!0}const Q=(0,n.aA)(),X=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:W,getTransformation:I,getTransformations:b,initializeProjection:x,isEqualBaseGCS:F,isLoaded:R,isLoadedOrLoad:v,isLoadedOrLoadFor:C,load:A,project:P,projectExtent:Z,projectMany:O,projectMultipoint:K,projectOrLoad:M,projectOrLoadMany:L,projectPoint:U,projectPolygon:q,projectPolyline:B,projectWithZConversion:k,projectWithoutEngine:H,requiresLoad:w,test:G,tryProjectWithZConversion:T,unload:z},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=1903.9444050d.js.map