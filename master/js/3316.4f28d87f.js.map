{"version":3,"file":"js/3316.4f28d87f.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/index-BxIRLfGo.js"],"sourcesContent":["import{F as f,gk as p,ga as i,gl as n,gm as y,f6 as g,gn as w}from\"./main-I34c1W55.js\";class h extends f{toggleWizard(e){const r=this.$iApi.panel.get(\"wizard\");this.$iApi.panel.toggle(r,e)}}class m extends p{layerCount=0;sublayerCount=0;constructor(e){super(e)}async fetchFileInfo(e,r,a){switch(a||(a=await this.$iApi.geo.layer.files.fetchFileData(e,r)),r){case i.GEOJSON:return this.getGeojsonInfo(e,a);case i.SHAPEFILE:return this.getShapfileInfo(e,a);case i.CSV:return this.getCsvInfo(e,a);default:console.error(`Unsupported file type passed to fetchFileInfo - '${r}'`)}}async getGeojsonInfo(e,r){return r instanceof ArrayBuffer&&(r=JSON.parse(new TextDecoder(\"utf-8\").decode(new Uint8Array(r)))),{config:{id:`geojson#${++this.layerCount}`,layerType:i.GEOJSON,url:e,name:e.substring(e.lastIndexOf(\"/\")+1),state:{opacity:1,visibility:!0},rawData:r},fields:[{name:\"OBJECTID\",type:\"oid\"}].concat(this.$iApi.geo.layer.files.extractGeoJsonFields(r)),configOptions:[\"name\",\"nameField\",\"tooltipField\",\"colour\"]}}async getCsvInfo(e,r){return r instanceof ArrayBuffer&&(r=new TextDecoder(\"utf-8\").decode(new Uint8Array(r))),{config:{id:`csv#${++this.layerCount}`,layerType:i.CSV,url:e,name:e.substring(e.lastIndexOf(\"/\")+1),state:{opacity:1,visibility:!0},rawData:r},fields:[{name:\"OBJECTID\",type:\"oid\"}].concat(this.$iApi.geo.layer.files.extractCsvFields(r)),latLonFields:this.$iApi.geo.layer.files.filterCsvLatLonFields(r),configOptions:[\"name\",\"nameField\",\"tooltipField\",\"latField\",\"longField\",\"colour\"]}}async getShapfileInfo(e,r){const a=await this.$iApi.geo.layer.files.shapefileToGeoJson(r);return this.getGeojsonInfo(e,a)}async fetchServiceInfo(e,r,a){switch(r){case i.FEATURE:return this.getFeatureInfo(e);case i.MAPIMAGE:return this.getMapImageInfo(e,a);case i.TILE:return this.getTileInfo(e);case i.IMAGERY:return this.getImageryInfo(e);case i.WFS:return this.getWfsInfo(e);case i.WMS:return this.getWmsInfo(e,a)}}async getFeatureInfo(e){const r=await n.get(e,{params:{f:\"json\"}});return{config:{id:`${i.FEATURE}#${++this.layerCount}`,url:e,layerType:i.FEATURE,name:r.data.name,nameField:r.data.displayField,tooltipField:r.data.displayField,state:{opacity:1,visibility:!0}},fields:r.data.fields,configOptions:[\"name\",\"nameField\",\"tooltipField\"]}}async getMapImageInfo(e,r){const a=await n.get(e,{params:{f:\"json\"}});return{config:{id:`${i.MAPIMAGE}#${++this.layerCount}`,url:e,layerType:i.MAPIMAGE,name:a.data.mapName,sublayers:[],state:{opacity:1,visibility:!0}},layers:this.createLayerHierarchy(a.data.layers,r),configOptions:[\"name\",\"sublayers\"],layersRaw:a.data.layers}}createLayerHierarchy(e,r){e.sort((l,s)=>l.id-s.id);const a=(l,s)=>{if(s===void 0)return!1;let c;if(s.find(o=>o.id===l))return s.find(o=>o.id===l);for(const o of s)if(c=a(l,o.children),c!==!1)return c;return!1},t=[],d=new Set(e.filter(l=>l.subLayerIds&&l.subLayerIds.length>0).map(l=>l.id));for(const l of e)if(r&&l.parentLayerId===-1)t.push({id:l.id,label:l.name,children:l.subLayerIds?[]:void 0});else if(r){const s=a(l.parentLayerId,t);s.children=[...s.children,{id:l.id,label:l.name,children:l.subLayerIds?[]:void 0}]}else d.has(l.id)||t.push({id:l.id,label:l.name,children:void 0});return t}async getTileInfo(e){const r=await n.get(e,{params:{f:\"json\"}});return{config:{id:`${i.TILE}#${++this.layerCount}`,url:e,layerType:i.TILE,name:r.data.mapName,state:{opacity:1,visibility:!0}},configOptions:[\"name\"]}}async getImageryInfo(e){const r=await n.get(e,{params:{f:\"json\"}});return{config:{id:`${i.IMAGERY}#${++this.layerCount}`,url:e,layerType:i.IMAGERY,name:r.data.name,state:{opacity:1,visibility:!0}},configOptions:[\"name\"]}}async getWfsInfo(e){const r=new y(e),{offset:a,limit:t}=r.queryMap,d=await this.$iApi.geo.layer.ogc.loadWfsData(e,-1,parseInt(a)||0,parseInt(t)||1e3);return this.getGeojsonInfo(e.match(/\\/([^/]+)\\/items/)?.[1]||\"Layer\",d)}async getWmsInfo(e,r){const a=await this.$iApi.geo.layer.ogc.parseCapabilities(e);return{config:{id:`${i.WMS}#${++this.layerCount}`,url:e,layerType:i.WMS,name:e,featureInfoMimeType:a.queryTypes[0],state:{opacity:1,visibility:!0}},layers:this.mapWmsLayerList(a.layers,r),configOptions:[\"name\",\"sublayers\"],layersRaw:a.layers}}mapWmsLayerList(e,r){let a=[];return e.forEach(t=>{t.name===null&&t.layers?a=[...a,...t.layers]:a.push(t)}),r?a.flatMap(t=>({id:`${t.name}#${++this.sublayerCount}`,label:t.title,children:t.layers.length>0?this.mapWmsLayerList(t.layers,r):void 0})):a.flatMap(t=>t.layers&&t.layers.length>0?this.mapWmsLayerList(t.layers,r):{id:`${t.name}#${++this.sublayerCount}`,label:t.title})}guessFormatFromURL(e){switch(e.match(/\\.(zip|csv|geojson|json)$/)?.[1]){case\"zip\":return i.SHAPEFILE;case\"csv\":return i.CSV;case\"geojson\":case\"json\":return i.GEOJSON}return e.match(/\\/ImageServer\\/?$/gi)?i.IMAGERY:e.match(/\\/collections\\//gi)?i.WFS:e.match(/arcgis\\/rest\\/services\\//gi)?e.match(/\\/\\d+\\/?$/g)?i.FEATURE:i.MAPIMAGE:e.match(/service=|version=|\\/wms/gi)?i.WMS:\"\"}}const z={en:{\"wizard.title\":\"Import Layer\",\"wizard.upload.title\":\"Upload data\",\"wizard.upload.or\":\"or\",\"wizard.upload.file.label\":\"Upload a file\",\"wizard.upload.file.help\":\"Drop or select a file to upload\",\"wizard.upload.file.error.failed\":\"File upload failed\",\"wizard.upload.url.label\":\"URL to file or service\",\"wizard.upload.url.error.required\":\"URL is required\",\"wizard.upload.url.error.url\":\"Please enter a valid URL\",\"wizard.format.title\":\"Select format\",\"wizard.format.type.service\":\"Service type\",\"wizard.format.type.file\":\"File format\",\"wizard.format.type.error.required\":\"Service or file type is required\",\"wizard.format.type.error.invalid\":\"Invalid file or service type\",\"wizard.format.type.error.failure\":\"Failed to load data from file/service\",\"wizard.format.info.cors\":\"Service needs to be CORS enabled\",\"wizard.format.warn.cors\":\"Service may not support CORS\",\"wizard.format.warn.vpn\":\"Service may require a VPN connection\",\"wizard.fileType.csv\":\"CSV\",\"wizard.fileType.shapefile\":\"zipped Shapefile\",\"wizard.fileType.geojson\":\"GeoJSON\",\"wizard.layerType.esriFeature\":\"ESRI Feature Layer\",\"wizard.layerType.esriMapImage\":\"ESRI Map Image Layer\",\"wizard.layerType.esriImagery\":\"ESRI Imagery Layer\",\"wizard.layerType.esriTile\":\"ESRI Tile Layer\",\"wizard.layerType.ogcWms\":\"OGC Web Map Service\",\"wizard.layerType.ogcWfs\":\"OGC Web Feature Service\",\"wizard.configure.title\":\"Configure layer\",\"wizard.configure.name.error.required\":\"Name is required\",\"wizard.configure.name.label\":\"Layer Name\",\"wizard.configure.nameField.label\":\"Primary Field\",\"wizard.configure.tooltipField.label\":\"Tooltip Field\",\"wizard.configure.latField.label\":\"Latitude Field\",\"wizard.configure.longField.label\":\"Longitude Field\",\"wizard.configure.sublayers.error.required\":\"Sublayers are required\",\"wizard.configure.sublayers.label\":\"Layers\",\"wizard.configure.sublayers.results\":\"No results\",\"wizard.configure.sublayers.search\":\"Search layers\",\"wizard.configure.sublayers.select\":\"Select layer(s)\",\"wizard.configure.sublayers.clearAll\":\"Clear all\",\"wizard.configure.sublayers.nested\":\"Nested\",\"wizard.configure.colour.label\":\"Colour\",\"wizard.configure.colour.hue\":\"Hue\",\"wizard.configure.colour.copy\":\"Copy colour\",\"wizard.configure.colour.hex\":\"Hex\",\"wizard.step.cancel\":\"Cancel\",\"wizard.step.continue\":\"Continue\",\"wizard.upload.success\":\"has been uploaded successfully.\",\"wizard.upload.fail\":\"failed to upload.\"},fr:{\"wizard.title\":\"Importer un fichier\",\"wizard.upload.title\":\"Charger des donn\\xE9es\",\"wizard.upload.or\":\"ou\",\"wizard.upload.file.label\":\"T\\xE9l\\xE9charger un fichier\",\"wizard.upload.file.help\":\"D\\xE9poser ou s\\xE9lectionner un fichier \\xE0 t\\xE9l\\xE9charger\",\"wizard.upload.file.error.failed\":\"Le t\\xE9l\\xE9chargement du fichier a \\xE9chou\\xE9\",\"wizard.upload.url.label\":\"URL vers fichier ou service\",\"wizard.upload.url.error.required\":\"L'URL est requise\",\"wizard.upload.url.error.url\":\"Veuillez saisir une adresse URL valide\",\"wizard.format.title\":\"Choisir un format\",\"wizard.format.type.service\":\"Type de service\",\"wizard.format.type.file\":\"Format du fichier\",\"wizard.format.type.error.required\":\"Le service ou le type de fichier est requis\",\"wizard.format.type.error.invalid\":\"Type de fichier ou de service non valide\",\"wizard.format.type.error.failure\":\"\\xC9chec du chargement des donn\\xE9es \\xE0 partir du fichier/service\",\"wizard.format.info.cors\":\"Le service doit \\xEAtre compatible CORS.\",\"wizard.format.warn.cors\":\"Le service ne pend peut-\\xEAtre pas en charge CORS.\",\"wizard.format.warn.vpn\":\"Le service peut n\\xE9cessiter une connexion RPV\",\"wizard.fileType.csv\":\"CSV\",\"wizard.fileType.shapefile\":\"Shapefile zipp\\xE9\",\"wizard.fileType.geojson\":\"GeoJSON\",\"wizard.layerType.esriFeature\":\"Couche d'\\xE9l\\xE9ments d'ESRI\",\"wizard.layerType.esriMapImage\":\"Couche d'image de la carte ESRI\",\"wizard.layerType.esriImagery\":\"Couche d'imagerie d'ESRI\",\"wizard.layerType.esriTile\":\"Couche de tuiles d'ESRI\",\"wizard.layerType.ogcWms\":\"Couche WMS de l'OGC\",\"wizard.layerType.ogcWfs\":\"Service d'entit\\xE9s Web OGC\",\"wizard.configure.title\":\"Configurer la couche\",\"wizard.configure.name.error.required\":\"Le champ Nom est obligatoire\",\"wizard.configure.name.label\":\"Nom de la couche\",\"wizard.configure.nameField.label\":\"Champ cl\\xE9\",\"wizard.configure.tooltipField.label\":\"Champ infobulle\",\"wizard.configure.latField.label\":\"Champ latitude\",\"wizard.configure.longField.label\":\"Champ longitude\",\"wizard.configure.sublayers.error.required\":\"Des sous-couches sont requises\",\"wizard.configure.sublayers.label\":\"Couches\",\"wizard.configure.sublayers.results\":\"Aucun r\\xE9sultat\",\"wizard.configure.sublayers.search\":\"Rechercher des couches\",\"wizard.configure.sublayers.select\":\"S\\xE9lectionner les couches\",\"wizard.configure.sublayers.clearAll\":\"Effacer tout\",\"wizard.configure.sublayers.nested\":\"Imbriqu\\xE9es\",\"wizard.configure.colour.label\":\"Couleur\",\"wizard.configure.colour.hue\":\"Teinte\",\"wizard.configure.colour.copy\":\"Copier la couleur\",\"wizard.configure.colour.hex\":\"Hex\",\"wizard.step.cancel\":\"Annuler\",\"wizard.step.continue\":\"Continuer\",\"wizard.upload.success\":\"a \\xE9t\\xE9 t\\xE9l\\xE9vers\\xE9 avec succ\\xE8s.\",\"wizard.upload.fail\":\"n'a pas pu \\xEAtre t\\xE9l\\xE9vers\\xE9.\"}};class v extends h{added(){this.$iApi.panel.register({wizard:{screens:{\"wizard-screen\":()=>g(import(\"./screen-CT4rCX_V.js\"))},button:{tooltip:\"wizard.title\",icon:'<svg class=\"fill-current\" viewBox=\"0 0 23 21\"><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\"></path></svg>'},style:{width:\"350px\"},alertName:\"wizard.title\"}},{i18n:{messages:z}}),this.handlePanelTeleports([\"wizard\"]);let e=new m(this.$iApi);const r=w(this.$vApp.$pinia);r.layerSource=e,this.removed=()=>{this.$iApi.panel.remove(\"wizard\"),e=void 0,r.$reset()}}}export{v as default};\n"],"names":["h","toggleWizard","e","r","this","$iApi","panel","get","toggle","m","layerCount","sublayerCount","constructor","super","fetchFileInfo","a","geo","layer","files","fetchFileData","GEOJSON","getGeojsonInfo","SHAPEFILE","getShapfileInfo","CSV","getCsvInfo","console","error","ArrayBuffer","JSON","parse","TextDecoder","decode","Uint8Array","config","id","layerType","url","name","substring","lastIndexOf","state","opacity","visibility","rawData","fields","type","concat","extractGeoJsonFields","configOptions","extractCsvFields","latLonFields","filterCsvLatLonFields","shapefileToGeoJson","fetchServiceInfo","FEATURE","getFeatureInfo","MAPIMAGE","getMapImageInfo","TILE","getTileInfo","IMAGERY","getImageryInfo","WFS","getWfsInfo","WMS","getWmsInfo","params","f","data","nameField","displayField","tooltipField","mapName","sublayers","layers","createLayerHierarchy","layersRaw","sort","l","s","c","find","o","children","t","d","Set","filter","subLayerIds","length","map","parentLayerId","push","label","has","offset","limit","queryMap","ogc","loadWfsData","parseInt","match","parseCapabilities","featureInfoMimeType","queryTypes","mapWmsLayerList","forEach","flatMap","title","guessFormatFromURL","z","en","fr","v","added","register","wizard","screens","button","tooltip","icon","style","width","alertName","i18n","messages","handlePanelTeleports","$vApp","$pinia","layerSource","removed","remove","$reset"],"sourceRoot":""}