{"version":3,"file":"js/5872.2c19c9a1.js","mappings":"sSAAgO,SAASA,EAAEC,EAAEC,GAAG,MAAMC,EAAEF,EAAEG,SAAS,OAAOD,EAAEE,YAAYF,EAAEE,UAAUF,EAAEE,UAAUC,KAAK,MAAMH,EAAEI,gBAAgBJ,EAAEI,cAAcJ,EAAEI,cAAcD,KAAK,MAAMH,EAAEK,YAAYN,GAAGO,gBAAgBN,EAAEK,UAAUE,SAAS,KAAKP,EAAEK,UAAU,IAAIL,EAAEK,UAAUL,EAAEK,UAAUF,KAAK,YAAYH,EAAEK,UAAUL,EAAEQ,QAAQR,EAAEQ,OAAM,QAAER,EAAEQ,QAAQR,EAAES,oBAAoBT,EAAEU,MAAMC,KAAKC,UAAU,CAACC,OAAOb,EAAES,2BAA2BT,EAAES,mBAAmBT,CAAC,CAACc,eAAeC,EAAEjB,EAAEC,EAAEC,GAAG,MAAMgB,QAAQC,EAAEnB,EAAEC,EAAEC,GAAGkB,EAAEF,EAAEG,KAAKC,EAAEF,EAAEG,aAAaC,EAAEJ,EAAEK,iBAAiBC,EAAE,CAAC,EAAE,IAAI,MAAMC,KAAKP,EAAEQ,oBAAoB,CAAC,MAAMC,EAAE,CAACC,YAAO,EAAOC,uBAAkB,EAAOR,aAAaD,EAAEG,iBAAiBD,EAAEQ,OAAOZ,EAAEY,KAAKC,OAAOb,EAAEa,KAAKC,SAASP,EAAEQ,gBAAgB,GAAe,MAAZR,EAAES,SAAeV,EAAEC,EAAES,UAAUP,OAAO,IAAI,MAAMQ,KAAKC,OAAOC,KAAKZ,GAAO,mBAAJU,IAAuBX,EAAEC,EAAEU,IAAIR,EAAE,CAAC,MAAM,IAAIX,EAAEG,KAAKK,EAAE,CAACV,eAAewB,EAAExC,EAAEC,EAAEC,GAAG,MAAMgB,QAAQC,EAAEnB,EAAEC,EAAEC,EAAE,CAACM,iBAAgB,IAAKY,EAAEF,EAAEG,KAAKC,EAAE,CAAC,EAAE,IAAI,MAAME,KAAKJ,EAAEQ,oBAAgC,MAAZJ,EAAEY,WAAiBd,EAAEE,EAAEY,UAAUZ,EAAEiB,OAAO,MAAM,IAAIvB,EAAEG,KAAKC,EAAE,CAACN,eAAeG,EAAEnB,EAAEC,EAAEC,EAAE,CAAC,EAAEgB,GAAG,MAAME,GAAE,OAAE,IAAIpB,EAAE0C,MAAMC,EAAE,UAAUzB,KAAKnB,EAAEE,EAAEiB,KAAK,OAAO,OAAElB,EAAE4C,KAAK,uBAAuB,IAAI1C,EAAEwC,MAAM,IAAIxC,EAAEwC,SAAStB,IAAI,CAACJ,eAAe6B,EAAE7C,EAAEC,EAAEC,GAAGD,EAAE,IAAE6C,KAAK7C,GAAG,MAAMiB,GAAE,OAAElB,GAAG,OAAOiB,EAAEC,EAAEjB,EAAEC,GAAG6C,MAAK3B,IAAI,MAAME,EAAEF,EAAEC,KAAKG,EAAE,CAAC,EAAE,OAAOc,OAAOC,KAAKjB,GAAG0B,SAAQtB,GAAGF,EAAEE,GAAG,IAAEuB,SAAS3B,EAAEI,MAAKF,IAAG,CAACR,eAAekC,EAAElD,EAAEC,EAAEC,GAAGD,EAAE,IAAE6C,KAAK7C,GAAG,MAAMiB,GAAE,OAAElB,GAAG,OAAOwC,EAAEtB,EAAEjB,EAAE,IAAIC,IAAI6C,MAAK3B,GAAGA,EAAEC,MAAK,C","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/executeRelationshipQuery-hroaxpdD.js"],"sourcesContent":["import{f as l}from\"./utils-BVHLFGcf.js\";import{U as m,bn as p}from\"./main-I34c1W55.js\";import{t as j}from\"./query-DXdJZLOa.js\";import{d as R}from\"./FeatureSet-DwnIB4d5.js\";import{d as f}from\"./RelationshipQuery-v3ocBGsC.js\";function b(r,o){const e=r.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(\",\")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(\",\")),e.outFields&&!o?.returnCountOnly?e.outFields.includes(\"*\")?e.outFields=\"*\":e.outFields=e.outFields.join(\",\"):delete e.outFields,e.outSR&&(e.outSR=p(e.outSR)),e.dynamicDataSource&&(e.layer=JSON.stringify({source:e.dynamicDataSource}),delete e.dynamicDataSource),e}async function F(r,o,e){const n=await y(r,o,e),t=n.data,s=t.geometryType,a=t.spatialReference,c={};for(const d of t.relatedRecordGroups){const u={fields:void 0,objectIdFieldName:void 0,geometryType:s,spatialReference:a,hasZ:!!t.hasZ,hasM:!!t.hasM,features:d.relatedRecords};if(d.objectId!=null)c[d.objectId]=u;else for(const i of Object.keys(d))i!==\"relatedRecords\"&&(c[d[i]]=u)}return{...n,data:c}}async function h(r,o,e){const n=await y(r,o,e,{returnCountOnly:!0}),t=n.data,s={};for(const a of t.relatedRecordGroups)a.objectId!=null&&(s[a.objectId]=a.count);return{...n,data:s}}async function y(r,o,e={},n){const t=j({...r.query,f:\"json\",...n,...b(o,n)});return m(r.path+\"/queryRelatedRecords\",{...e,query:{...e.query,...t}})}async function S(r,o,e){o=f.from(o);const n=l(r);return F(n,o,e).then(t=>{const s=t.data,a={};return Object.keys(s).forEach(c=>a[c]=R.fromJSON(s[c])),a})}async function I(r,o,e){o=f.from(o);const n=l(r);return h(n,o,{...e}).then(t=>t.data)}export{S as executeRelationshipQuery,I as executeRelationshipQueryForCount};\n"],"names":["b","r","o","e","toJSON","objectIds","join","orderByFields","outFields","returnCountOnly","includes","outSR","dynamicDataSource","layer","JSON","stringify","source","async","F","n","y","t","data","s","geometryType","a","spatialReference","c","d","relatedRecordGroups","u","fields","objectIdFieldName","hasZ","hasM","features","relatedRecords","objectId","i","Object","keys","h","count","query","f","path","S","from","then","forEach","fromJSON","I"],"sourceRoot":""}