{"version":3,"file":"js/2707.0930ef97.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/StreamLayerView2D-BkyYE62t.js"],"sourcesContent":["import{k as r,o as i,A as u,aE as c,s as l,eN as p,aH as m}from\"./main-I34c1W55.js\";import{d}from\"./FeatureSet-DwnIB4d5.js\";import{n as y,r as _}from\"./FeatureLayerView2D-LeU2d2b7.js\";import g from\"./FeatureFilter-kLWs5qs1.js\";const f=e=>{let t=class extends e{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&this._streamConnectionStatus===\"connected\"?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return r([i()],t.prototype,\"_isUserPaused\",void 0),r([i({readOnly:!0})],t.prototype,\"connectionStatus\",null),r([i({type:g})],t.prototype,\"filter\",void 0),t=r([u(\"esri.views.layers.StreamLayerView\")],t),t};let a=class extends f(_){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([c(()=>this.layer.customParameters,async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)}),this.layer.on(\"send-message-to-socket\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)}),this.layer.on(\"send-message-to-client\",async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&e.type===\"clear\"&&this.incrementSourceRefreshVersion()}),c(()=>this.layer.purgeOptions,()=>this._update()),c(()=>this.suspended,this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new l(\"stream-controller\",this.pipelineErrorString):null}on(e,t){if(Array.isArray(e))return p(e.map(n=>this.on(n,t)));const s=[\"data-received\",\"message-received\"].includes(e);s&&this.getWorker().then(n=>n.streamMessenger.enableEvent(e,!0));const h=super.on(e,t),o=this;return m(()=>{h.remove(),s&&(o._workerProxy.closed||o.hasEventListener(e)||o.getWorker().then(n=>n.streamMessenger.enableEvent(e,!1)))})}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new l(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return y(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then(h=>{const o=d.fromJSON(h);return o.features.forEach(n=>{n.layer=this.layer,n.sourceLayer=this.layer}),o}),new d({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){this._refreshInterval!=null&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval(()=>this.incrementSourceRefreshVersion(),this.layer.updateInterval)}_doDisconnect(){this.getWorker().then(e=>e.streamMessenger.disconnect()),this._doPause()}_doConnect(){this.getWorker().then(e=>e.streamMessenger.connect()),this.resume()}_doClear(){this.getWorker().then(e=>e.streamMessenger.clear()),this._refreshInterval==null&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),t=this;return{...e,get container(){return t.featureContainer},setProperty:s=>{this.set(s.propertyName,s.value)}}}};r([i()],a.prototype,\"pipelineConnectionStatus\",void 0),r([i()],a.prototype,\"pipelineErrorString\",void 0),r([i({readOnly:!0})],a.prototype,\"connectionError\",null),r([i({readOnly:!0})],a.prototype,\"_streamConnectionStatus\",null),a=r([u(\"esri.views.2d.layers.StreamLayerView2D\")],a);const v=a;export{v as default};\n"],"names":["f","e","t","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","s","super","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","prototype","readOnly","type","a","arguments","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","n","includes","then","enableEvent","h","o","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","timeInfo","endField","startField","trackIdField","features","executeQueryForLatestObservations","_cleanUpQuery","d","fromJSON","forEach","sourceLayer","detach","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","v"],"sourceRoot":""}