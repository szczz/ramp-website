"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[1303,2985],{18696:function(e,t,r){r.d(t,{i:function(){return i}});var o=r(98503);function s(e){return"portalItem"in e}const i=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):s(this)?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,o.k)([(0,o.o)({type:String})],t.prototype,"apiKey",null),t=(0,o.k)([(0,o.A)("esri.layers.mixins.APIKeyMixin")],t),t}},36313:function(e,t,r){r.d(t,{l:function(){return i}});var o=r(98503),s=r(5948);const i=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,s.d)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,s.y)(e,o.n.getLogger(this)))}};return(0,o.k)([(0,o.o)()],t.prototype,"title",null),(0,o.k)([(0,o.o)({type:String})],t.prototype,"url",null),t=(0,o.k)([(0,o.A)("esri.layers.mixins.ArcGISService")],t),t}},99907:function(e,t,r){r.d(t,{e:function(){return s}});var o=r(98503);const s=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,o.k)([(0,o.o)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,o.k)([(0,o.A)("esri.layers.mixins.CustomParametersMixin")],t),t}},904:function(e,t,r){r.d(t,{d:function(){return l}});var o,s=r(98503),i=r(98089);const n=new s.ax({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let a=o=class extends s.v{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=s.B.fromJSON(t.spatialReference),o=[];for(let i=0;i<e.length;i++){const t=e[i],n=s.b1.fromJSON(t),a=t.geometry?.spatialReference;null==n.geometry||a||(n.geometry.spatialReference=r);const l=t.aggregateGeometries,u=n.aggregateGeometries;if(l&&null!=u)for(const e in u){const t=u[e],o=l[e],s=o?.spatialReference;null==t||s||(t.spatialReference=r)}o.push(n)}return o}writeGeometryType(e,t,r,o){if(e)return void n.write(e,t,r,o);const{features:s}=this;if(s)for(const i of s)if(null!=i?.geometry)return void n.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,s.b3)(e);return o&&!r&&t.spatialReference&&(o.spatialReference=s.B.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new o(this.cloneProperties())}cloneProperties(){return(0,s.f)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,s]}=e,i=e=>Math.round((e-o)/t),n=e=>Math.round((s-e)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,i,n);for(let u=0,p=a.length;u<p;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,p--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,s],scale:[i,n]}=r,a=e=>e*i+o,l=e=>s-e*n;let u=null,p=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;u=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;p=r=>null==r?r:r*t+e}const c=this._getHydrationFunction(e,a,l,u,p);for(const{geometry:d}of t)null!=d&&c&&c(d);return this.transform=null,this}_quantizePoints(e,t,r){let o,s;const i=[];for(let n=0,a=e.length;n<a;n++){const a=e[n];if(n>0){const e=t(a[0]),n=r(a[1]);e===o&&n===s||(i.push([e-o,n-s]),o=e,s=n)}else o=t(a[0]),s=r(a[1]),i.push([o,s])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,s.a9)(e)?e.rings:e.paths,i=[];for(let s=0,n=o.length;s<n;s++){const e=o[s],n=this._quantizePoints(e,t,r);n&&i.push(n)}return i.length>0?((0,s.a9)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,o,i){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const n=(0,s.a9)(e)?e.rings:e.paths;let a,l;for(let o=0,s=n.length;o<s;o++){const e=n[o];for(let o=0,s=e.length;o<s;o++){const s=e[o];o>0?(a+=s[0],l+=s[1]):(a=s[0],l=s[1]),s[0]=t(a),s[1]=r(l)}}if(o&&i)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2]),r[3]=i(r[3])}}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2])}}else if(i)for(let t=0,r=n.length;t<r;t++){const e=n[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=i(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const s=e.points;let n,a;for(let o=0,i=s.length;o<i;o++){const e=s[o];o>0?(n+=e[0],a+=e[1]):(n=e[0],a=e[1]),e[0]=t(n),e[1]=r(a)}if(o&&i)for(let t=0,r=s.length;t<r;t++){const e=s[t];e[2]=o(e[2]),e[3]=i(e[3])}else if(o)for(let t=0,r=s.length;t<r;t++){const e=s[t];e[2]=o(e[2])}else if(i)for(let t=0,r=s.length;t<r;t++){const e=s[t];e[2]=i(e[2])}}:null}};(0,s.k)([(0,s.o)({type:String,json:{write:!0}})],a.prototype,"displayFieldName",void 0),(0,s.k)([(0,s.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"exceededTransferLimit",void 0),(0,s.k)([(0,s.o)({type:[s.b1],json:{write:!0}})],a.prototype,"features",void 0),(0,s.k)([(0,s.u)("features")],a.prototype,"readFeatures",null),(0,s.k)([(0,s.o)({type:[i.y],json:{write:!0}})],a.prototype,"fields",void 0),(0,s.k)([(0,s.o)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:n.read}}})],a.prototype,"geometryType",void 0),(0,s.k)([(0,s.q)("geometryType")],a.prototype,"writeGeometryType",null),(0,s.k)([(0,s.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"hasM",void 0),(0,s.k)([(0,s.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"hasZ",void 0),(0,s.k)([(0,s.o)({types:s.b2,json:{write:!0}})],a.prototype,"queryGeometry",void 0),(0,s.k)([(0,s.u)("queryGeometry")],a.prototype,"readQueryGeometry",null),(0,s.k)([(0,s.o)({type:s.B,json:{write:!0}})],a.prototype,"spatialReference",void 0),(0,s.k)([(0,s.q)("spatialReference")],a.prototype,"writeSpatialReference",null),(0,s.k)([(0,s.o)({json:{write:!0}})],a.prototype,"transform",void 0),a=o=(0,s.k)([(0,s.A)("esri.rest.support.FeatureSet")],a),a.prototype.toJSON.isDefaultToJSON=!0;const l=a},69949:function(e,t,r){r.d(t,{p:function(){return n}});var o=r(98503);const s=new o.ax({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let i=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"name",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"description",void 0),(0,o.k)([(0,o.o)({json:{read:s.read,write:s.write}})],i.prototype,"drawingTool",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"prototype",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"thumbnail",void 0),i=(0,o.k)([(0,o.A)("esri.layers.support.FeatureTemplate")],i);const n=i},29344:function(e,t,r){r.d(t,{n:function(){return a}});var o=r(98503),s=r(98089),i=r(69949);let n=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,s.i)(e[r]);return t}writeDomains(e,t){const r={};for(const o of Object.keys(e))e[o]&&(r[o]=e[o]?.toJSON());t.domains=r}};(0,o.k)([(0,o.o)({json:{write:!0}})],n.prototype,"id",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],n.prototype,"name",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],n.prototype,"domains",void 0),(0,o.k)([(0,o.u)("domains")],n.prototype,"readDomains",null),(0,o.k)([(0,o.q)("domains")],n.prototype,"writeDomains",null),(0,o.k)([(0,o.o)({type:[i.p],json:{write:!0}})],n.prototype,"templates",void 0),n=(0,o.k)([(0,o.A)("esri.layers.support.FeatureType")],n);const a=n},21303:function(e,t,r){r.d(t,{v:function(){return c}});var o,s=r(98503);const i=(0,s.g)()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),n=i.jsonValues.slice();(0,s.h)(n,"orthometric");const a=(0,s.g)()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let l=o=class extends s.v{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return i.write(e,t,r)}readHeightModel(e,t,r){return i.read(e)||(r?.messages&&r.messages.push(p(e,{context:r})),null)}readHeightUnit(e,t,r){return a.read(e)||(r?.messages&&r.messages.push(u(e,{context:r})),null)}readHeightUnitService(e,t,r){return(0,s.Y)(e)||a.read(e)||(r?.messages&&r.messages.push(u(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new o({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=(0,s.$)(t);return new o({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new o;return t.read(e,{origin:"web-scene"}),t}};function u(e,t){return new s.z("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function p(e,t){return new s.z("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}(0,s.k)([(0,s.o)({type:i.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:n,default:"ellipsoidal"}}}})],l.prototype,"heightModel",void 0),(0,s.k)([(0,s.q)("web-scene","heightModel")],l.prototype,"writeHeightModel",null),(0,s.k)([(0,s.u)(["web-scene","service"],"heightModel")],l.prototype,"readHeightModel",null),(0,s.k)([(0,s.o)({type:a.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:a.jsonValues,write:a.write}}}})],l.prototype,"heightUnit",void 0),(0,s.k)([(0,s.u)("web-scene","heightUnit")],l.prototype,"readHeightUnit",null),(0,s.k)([(0,s.u)("service","heightUnit")],l.prototype,"readHeightUnitService",null),(0,s.k)([(0,s.o)({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],l.prototype,"vertCRS",void 0),(0,s.k)([(0,s.u)("service","vertCRS",["vertCRS","ellipsoid","geoid"])],l.prototype,"readVertCRS",null),l=o=(0,s.k)([(0,s.A)("esri.geometry.HeightModelInfo")],l);const c=l},28252:function(e,t,r){r.d(t,{f:function(){return l}});var o=r(98503),s=r(50257);async function i(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:s}=await Promise.all([r.e(2031),r.e(7489)]).then(r.bind(r,67489)).then((e=>e.p));try{return await s(t)}catch(i){const e=t?.portalItem,r=e?.id||"unset",s=e?.portal?.url||o.H.portalUrl;throw o.n.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+s+"', id: '"+r+"')",i),i}}let n=0,a=class extends(o.bP.EventedMixin((0,o.da)(o.e))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new o.au(-180,-90,180,90,o.B.WGS84),this.id=Date.now().toString(16)+"-layer-"+n++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=o.B.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([r.e(2031),r.e(8529)]).then(r.bind(r,58529))).fromUrl(t)}static fromPortalItem(e){return i(e)}initialize(){this.when().catch((e=>{(0,o.E)(e)||o.n.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,o.I)(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,o.U)(e,{query:{f:"json"},responseType:"json"})).data;throw new o.s("layer:no-attribution-data","Layer does not have attribution data")}};(0,o.k)([(0,o.o)({type:String})],a.prototype,"attributionDataUrl",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],a.prototype,"effectiveVisible",null),(0,o.k)([(0,o.o)({type:o.au})],a.prototype,"fullExtent",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],a.prototype,"hasAttributionData",null),(0,o.k)([(0,o.o)({type:String,clonable:!1})],a.prototype,"id",void 0),(0,o.k)([(0,o.o)({type:Boolean,nonNullable:!0})],a.prototype,"legendEnabled",void 0),(0,o.k)([(0,o.o)({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),(0,o.k)([(0,o.o)({type:Number,range:{min:0,max:1},nonNullable:!0})],a.prototype,"opacity",void 0),(0,o.k)([(0,o.o)({clonable:!1})],a.prototype,"parent",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],a.prototype,"parsedUrl",null),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],a.prototype,"persistenceEnabled",void 0),(0,o.k)([(0,o.o)({type:Boolean})],a.prototype,"popupEnabled",void 0),(0,o.k)([(0,o.o)({type:Boolean})],a.prototype,"attributionVisible",void 0),(0,o.k)([(0,o.o)({type:o.B})],a.prototype,"spatialReference",void 0),(0,o.k)([(0,o.o)({type:String})],a.prototype,"title",void 0),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),(0,o.k)([(0,o.o)()],a.prototype,"url",void 0),(0,o.k)([(0,o.o)({type:s.p})],a.prototype,"visibilityTimeExtent",void 0),(0,o.k)([(0,o.o)({type:Boolean,nonNullable:!0})],a.prototype,"visible",void 0),a=(0,o.k)([(0,o.A)("esri.layers.Layer")],a);const l=a},25035:function(e,t,r){r.d(t,{p:function(){return n}});var o,s=r(98503);let i=o=class extends s.v{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.V}clone(){return new o({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,s.k)([(0,s.o)({type:String,json:{write:!0}})],i.prototype,"floorField",void 0),(0,s.k)([(0,s.o)({json:{read:!1,write:!1}})],i.prototype,"viewAllMode",void 0),(0,s.k)([(0,s.o)({json:{read:!1,write:!1}})],i.prototype,"viewAllLevelIds",void 0),i=o=(0,s.k)([(0,s.A)("esri.layers.support.LayerFloorInfo")],i);const n=i},50293:function(e,t,r){r.d(t,{j:function(){return n}});var o=r(98503),s=r(2031),i=r(83297);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,o.C)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new s["default"]({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:s}=await Promise.all([r.e(3338),r.e(1128)]).then(r.bind(r,21128));return(0,o.D)(t),await s({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(s){throw(0,o.E)(s)||o.n.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${s}`),s}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,o.G)(e),!0))))}async setUserPrivileges(e,t){if(!o.H.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:o},content:{updateItem:s}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",s)}catch(r){(0,o.G)(r)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const n=e===r.id;if(n&&r.portal.user)return(0,i.E)(r);let a,l;if(n)a=r.portal.url;else try{a=await(0,o.J)(this.url,t)}catch(d){(0,o.G)(d)}if(!a||!(0,o.W)(a,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;l=await(o.K?.getCredential(`${a}/sharing`,{prompt:!1,signal:e}))}catch(d){(0,o.G)(d)}const u=!0,p=!1,c=!1;if(!l)return{features:{edit:u,fullEdit:p},content:{updateItem:c}};try{if(n?await r.reload():(r=new s["default"]({id:e,portal:{url:a}}),await r.load(t)),r.portal.user)return(0,i.E)(r)}catch(d){(0,o.G)(d)}return{features:{edit:u,fullEdit:p},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(r){(0,o.G)(r)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.K?.findCredential(this.url):null;if(!t)return!0;const r=a.credential===t?a.user:await this._fetchEditingUser(e);return a.credential=t,a.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.K?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const s=`${r.owningSystemUrl}/sharing/rest`,i=o.b.getDefault();if(i&&i.loaded&&(0,o.L)(i.restUrl)===(0,o.L)(s))return i.user;const n=`${s}/community/self`,a=null!=e?e.signal:null,l=await(0,o._)((0,o.U)(n,{authMode:"no-prompt",query:{f:"json"},signal:a}));return l.ok?o.M.fromJSON(l.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,s=this.portalItem?.id&&(this.portalItem.portal||o.b.getDefault());return r&&s&&!(0,o.N)(s.restUrl,r.restUrl)?(t.messages&&t.messages.push(new o.s("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,o.k)([(0,o.o)({type:s["default"]})],t.prototype,"portalItem",null),(0,o.k)([(0,o.u)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,o.k)([(0,o.q)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,o.k)([(0,o.o)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,o.k)([(0,o.A)("esri.layers.mixins.PortalLayer")],t),t},a={credential:null,user:null}},64295:function(e,t,r){r.d(t,{p:function(){return a}});var o=r(98503);const s=new o.ax({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),i=new o.ax({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let n=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,o.k)([(0,o.o)({json:{read:s.read,write:s.write}})],n.prototype,"cardinality",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"composite",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"id",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"keyField",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"keyFieldInRelationshipTable",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"name",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"relatedTableId",void 0),(0,o.k)([(0,o.o)({json:{read:!0,write:!0}})],n.prototype,"relationshipTableId",void 0),(0,o.k)([(0,o.o)({json:{read:i.read,write:i.write}})],n.prototype,"role",void 0),n=(0,o.k)([(0,o.A)("esri.layers.support.Relationship")],n);const a=n},22676:function(e,t,r){r.d(t,{r:function(){return s}});var o=r(98503);let s=class e{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.s(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,r=""){const[s,i]=t.split("."),n=/^\s*\d+\s*$/;if(!s?.match||!n.test(s))throw new o.s((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!n.test(i))throw new o.s((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(s,10),l=parseInt(i,10);return new e(a,l,r)}}},49329:function(e,t,r){r.d(t,{n:function(){return o},o:function(){return s}});r(98503);function o(e){}function s(e){return()=>e}},83297:function(e,t,r){r.d(t,{E:function(){return y},a:function(){return u},c:function(){return l},f:function(){return d},i:function(){return n},l:function(){return c},s:function(){return a},u:function(){return p}});var o=r(49555),s=r(98503);async function i(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,s.a0)(e);const r=s.B.WGS84;return await(0,o.N)(t,r),(0,o.K)(e,r)}function n(e,t){if(!a(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function a(e,t){return!!e.typeKeywords?.includes(t)}function l(e){return a(e,d.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function p(e,t,r){r?n(e,t):u(e,t)}async function c(e){const t=e.clone().normalize();let r;if(t.length>1)for(const o of t)r?o.width>r.width&&(r=o):r=o;else r=t[0];return i(r)}const d={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function y(e){const{portal:t,isOrgItem:r,itemControl:o}=e,s=t.user?.privileges;let i=!s||s.includes("features:user:edit"),n=!!r&&!!s?.includes("features:user:fullEdit");const a="update"===o||"admin"===o;return a?n=i=!0:n&&(i=!0),{features:{edit:i,fullEdit:n},content:{updateItem:a}}}},549:function(e,t,r){r.d(t,{A:function(){return E},i:function(){return d}});var o=r(98503),s=r(5948);function i(e,t,r){return!!a(e,t,r)}function n(e,t,r){return a(e,t,r)}function a(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const l={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function u(e){const t=e?.supportedSpatialAggregationStatistics?.map((e=>e.toLowerCase()));return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function p(e,t){return!!e?.supportedOperationsWithCacheHint?.map((e=>e.toLowerCase()))?.includes(t.toLowerCase())}function c(e){const t=e?.supportedStatisticTypes?.map((e=>e.toLowerCase()));return{count:!!t?.includes("count"),sum:!!t?.includes("sum"),min:!!t?.includes("min"),max:!!t?.includes("max"),avg:!!t?.includes("avg"),var:!!t?.includes("var"),stddev:!!t?.includes("stddev"),percentileContinuous:!!t?.includes("percentile_continuous"),percentileDiscrete:!!t?.includes("percentile_discrete"),envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function d(e,t){return{analytics:y(e),attachment:h(e),data:f(e),metadata:m(e),operations:g(e.capabilities,e,t),query:v(e,t),queryBins:b(e),queryRelated:w(e),queryTopFeatures:k(e),editing:S(e)}}function y(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function h(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:i(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((e=>{const t=l[e.name];t&&(r[t]=!!e.isEnabled)})),r}function f(e){return{isVersioned:i(e,"isDataVersioned",!1),isBranchVersioned:i(e,"isDataBranchVersioned",!1),supportsAttachment:i(e,"hasAttachments",!1),supportsM:i(e,"hasM",!1),supportsZ:i(e,"hasZ",!1)}}function m(e){return{supportsAdvancedFieldProperties:i(e,"supportsFieldDescriptionProperty",!1)}}function g(e,t,r){const o=e?e.toLowerCase().split(",").map((e=>e.trim())):[],n=r?(0,s.d)(r):null,a=o.includes(null!=n&&"MapServer"===n.serverType?"data":"query"),l=o.includes("editing")&&!t.datesInUnknownTimezone;let u=l&&o.includes("create"),p=l&&o.includes("delete"),c=l&&o.includes("update");const d=o.includes("changetracking"),y=t.advancedQueryCapabilities;return l&&!(u||p||c)&&(u=p=c=!0),{supportsCalculate:i(t,"supportsCalculate",!1),supportsTruncate:i(t,"supportsTruncate",!1),supportsValidateSql:i(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:p,supportsEditing:l,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:i(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:i(y,"supportsQueryAttachments",!1),supportsQueryBins:i(y,"supportsQueryBins",!1),supportsQueryTopFeatures:i(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:i(t,"supportsAttachmentsResizing",!1),supportsSync:o.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:i(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:i(t,"supportsAsyncConvert3D",!1)}}function v(e,t){const r=e.advancedQueryCapabilities,a=e.ownershipBasedAccessControlForFeatures,l=e.archivingInfo,c=e.currentVersion,d=t?.includes("MapServer"),y=!d||c>=(0,o.a$)("mapserver-pbf-version-support"),h=(0,s.g)(t),f=new Set((e.supportedQueryFormats??"").split(",").map((e=>e.toLowerCase().trim())));return{maxRecordCount:n(e,"maxRecordCount",void 0),maxRecordCountFactor:n(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:n(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:u(r),supportsCacheHint:i(r,"supportsQueryWithCacheHint",!1)||p(r,"query"),supportsCentroid:i(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:h,supportsDefaultSpatialReference:i(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:i(r,"supportsDisjointSpatialRel",!1),supportsDistance:i(r,"supportsQueryWithDistance",!1),supportsDistinct:i(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:i(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:y&&f.has("pbf"),supportsFullTextSearch:i(r,"supportsFullTextSearch",!1),supportsGeometryProperties:i(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:i(r,"supportsHavingClause",!1),supportsHistoricMoment:i(l,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:i(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:i(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:i(r,"supportsPagination",!1),supportsPercentileStatistics:i(r,"supportsPercentileStatistics",!1),supportsQuantization:i(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:i(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:i(a,"allowAnonymousToQuery",!0),supportsQueryByOthers:i(a,"allowOthersToQuery",!0),supportsQueryGeometry:i(e,"supportsReturningQueryGeometry",!1),supportsResultType:i(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:i(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:i(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:i(e,"useStandardizedQueries",!1),supportsStatistics:i(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:i(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:n(e,"tileMaxRecordCount",void 0)}}function w(e){const t=e.advancedQueryCapabilities,r=i(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:i(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p(t,"queryRelated")}}function k(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function b(e){const t=e?e.queryBinsCapabilities:void 0;return{supportsDate:i(t,"supportsDateBin",!1),supportsFixedInterval:i(t,"supportsFixedIntervalBin",!1),supportsAutoInterval:i(t,"supportsAutoIntervalBin",!1),supportsFixedBoundaries:i(t,"supportsFixedBoundariesBin",!1),supportedStatistics:c(t)}}function S(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:i(e,"allowGeometryUpdates",!0),supportsGlobalId:i(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:i(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:i(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:i(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:i(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:i(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:i(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:i(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:i(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:i(r,"supportsAsyncApplyEdits",!1),zDefault:n(e,"zDefault",void 0)}}function E(e){return{operations:{supportsAppend:i(e,"supportsAppend",!1),supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1,supportsExportClip:i(e,"supportsExportClip",!1),supportsExportFrameset:i(e,"supportsExportFrameset",!1),supportsMensuration:i(e,"supportsMensuration",!1),supportsUpdate:i(e,"supportsUpdate",!1)}}}},77998:function(e,t,r){r.d(t,{e:function(){return a},n:function(){return s},o:function(){return n},r:function(){return i}});const o="randomUUID"in crypto;function s(){if(o)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function i(){return`{${s().toUpperCase()}}`}function n(){return`{${s()}}`}function a(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}}}]);
//# sourceMappingURL=2985.79f1b50c.js.map