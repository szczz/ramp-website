"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[1039,4541],{31039:function(e,t,r){r.r(t),r.d(t,{default:function(){return o}});var i=r(98503),l=r(34541);class s extends i.F{gridStore=(0,i.f9)(this.$vApp.$pinia);toggleGrid(e,t){const r=this.gridStore.getGridId(e);if(!r){const t=this.getLayerFixtureConfigs();this.gridStore.addGrid({id:e,layerIds:[e],state:new l.T(t[e]),fieldMap:{}})}const i=this.gridStore.currentId;this.gridStore.currentId=r??e;const s=this.$iApi.panel.get("grid");!1!==t?s.isOpen&&s.isVisible?i!==e||!0===t?s.show({screen:"grid-screen",props:{key:e}}):s.close():this.$iApi.panel.open("grid"):s.close()}_parseConfig(e){this.handlePanelWidths(["grid"]),this.handlePanelTeleports(["grid"]);const t=this.getLayerFixtureConfigs();e&&e.mergeGrids&&e.mergeGrids.forEach((e=>{const r=[],{gridId:i,layers:s,fieldMap:a,options:o}=e;s.forEach((e=>{e.sublayers?e.sublayers?.forEach((i=>{r.push(`${e.layerId}-${i}`),delete t[`${e.layerId}-${i}`]})):(r.push(e.layerId),delete t[e.layerId])}));const d={};a?.forEach((e=>{e.sources.forEach((t=>{d[t]=e.field}))}));const n={id:i,layerIds:r,state:new l.T(o),fieldMap:d};this.gridStore.addGrid(n)})),Object.keys(t).forEach((e=>{const r={id:e,layerIds:[e],state:new l.T(t[e]),fieldMap:{}};this.gridStore.addGrid(r)}))}}const a={en:{"grid.title":"Datatable","grid.alertName":"Grid","grid.splash.error":"Error: Failed to load the layer's data.","grid.splash.loading":"Loading data...","grid.splash.building":"Building table...","grid.splash.cancel":"Cancel","grid.search.clear":"Clear search filter","grid.clearAll":"Clear search and filters","grid.layer.loading":"The layer is loading...","grid.label.pinColumns":"Pin columns","grid.label.export":"Export","grid.label.columns":"Hide columns","grid.label.copied":"Copied","grid.label.copy":"Press ctrl + c or double click to copy","grid.label.specialColumn":"Special Column","grid.label.filters.show":"Show filters","grid.label.filters.hide":"Hide filters","grid.label.filters.apply":"Apply filters to map","grid.header.sort.0":"Sort ascending","grid.header.sort.1":"Sort descending","grid.header.sort.2":"Sort default","grid.header.reorder.left":"Move left","grid.header.reorder.right":"Move right","grid.filters.label.global":"Search table","grid.filters.column.label.text":"Search {0}...","grid.filters.clear":"Clear filters","grid.filters.number.max":"Max","grid.filters.number.min":"Min","grid.filters.date.max":"Max Date","grid.filters.date.min":"Min Date","grid.filters.label.info":"{range} of {total} entries shown","grid.filters.label.filtered":"(filtered from {max} total entries)","grid.filters.label.extent":"Filter by extent","grid.cells.controls":"Use arrow keys to navigate grid cells. Press Tab to proceed","grid.cells.zoom":"Zoom to feature","grid.cells.zoom.zooming":"Zooming...","grid.cells.zoom.error":"Zoom failed","grid.cells.zoom.zoomed":"Zoomed","grid.cells.alert.zoom":"Zoomed into feature","grid.cells.details":"Details","grid.button.title":"Grid"},fr:{"grid.title":"Tableau de données","grid.alertName":"Grille","grid.splash.error":"Erreur : Échec du chargement des données de la couche.","grid.splash.loading":"Chargement des données...","grid.splash.building":"Création du tableau...","grid.splash.cancel":"Annuler","grid.search.clear":"Effacer le filtre de recherche","grid.clearAll":"Effacer la recherche et les filtres","grid.layer.loading":"La couche est en cours de téléchargement...","grid.label.pinColumns":"Épingler les colonnes","grid.label.export":"Exporter","grid.label.columns":"Masquer les colonnes","grid.label.copied":"Copié","grid.label.copy":"Appuyez sur Ctrl + C ou double-cliquez pour copier","grid.label.specialColumn":"Colonne spéciale","grid.label.filters.show":"Afficher les filtres","grid.label.filters.hide":"Masquer les filtres","grid.label.filters.apply":"Appliquer les filtres à la carte","grid.header.sort.0":"Tri ascendant","grid.header.sort.1":"Tri descendant","grid.header.sort.2":"Tri par défaut","grid.header.reorder.left":"Déplacer vers la gauche","grid.header.reorder.right":"Déplacer vers la droite","grid.filters.label.global":"Tableau de recherche","grid.filters.column.label.text":"Rechercher {0}...","grid.filters.clear":"Supprimer les filtres","grid.filters.number.max":"Max","grid.filters.number.min":"Min","grid.filters.date.max":"Date max","grid.filters.date.min":"Date min","grid.filters.label.info":"{range} de {total} saisies affichées","grid.filters.label.filtered":"(filtré à partir d'un total de {max} saisies)","grid.filters.label.extent":"Filtrer par étendue","grid.cells.controls":"Utilisez les flèches pour parcourir les cellules de la grille. Appuyez sur Tab pour continuer","grid.cells.zoom":"Zoom à l'élément","grid.cells.zoom.zooming":"Zoom en cours...","grid.cells.zoom.error":"Échec du zoom","grid.cells.zoom.zoomed":"Zoom terminé","grid.cells.alert.zoom":"Zoom sur la caractéristique","grid.cells.details":"Détails","grid.button.title":"Grille"}};class o extends s{async added(){this.$iApi.panel.register({grid:{screens:{"grid-screen":()=>(0,i.f6)(r.e(9141).then(r.bind(r,59141)))},style:{width:"450px"},controls:{expand:!0},button:{tooltip:"grid.button.title",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0V0z" fill="none" /> <path d="M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5v11zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2zM3 19c0 1.1.9 2 2 2h3V10H3v9z" /></svg>'},expanded:!0,alertName:"grid.alertName"}},{i18n:{messages:a}}),this._parseConfig(this.config)}removed(){this.$iApi.fixture.exists("appbar")&&(0,i.f7)(this.$vApp.$pinia).removeButton("grid"),(0,i.f9)(this.$vApp.$pinia).$reset(),this.$iApi.panel.remove("grid")}}},34541:function(e,t,r){r.d(t,{C:function(){return i},T:function(){return l}});class i{columnConfig;_field;_title;_visible;_width;_sort;_searchable;_filter;_template;constructor(e){this.columnConfig=e,this._field=e?.field,this._title=e?.title,this._visible=e.visible??!0,this._width=e?.width,this._sort=e.sort??"none",this._searchable=e.searchable??!0,this._filter={type:e?.filter?.type??"string",value:e?.filter?.value??"",min:e?.filter?.min??null,max:e?.filter?.max??null,static:e?.filter?.static??!1},this._template=e.template??""}get field(){return this._field}get title(){return this._title}set title(e){this._title=e}get visible(){return this._visible}set visible(e){this._visible=e}get width(){return this._width}set width(e){this._width=e}get sort(){return this._sort}set sort(e){this._sort=e}get searchable(){return this._searchable}set searchable(e){this._searchable=e}get filter(){return this._filter}set filter(e){this._filter=e}set template(e){this._template=e}get template(){return this._template}}class l{state;_title;_showFilter;_filterByExtent;_open;_columns;_filtered;_search;_searchFilter;_applyToMap;_controls;constructor(e){this.state=e??{},this._title=e?.title??"",this._showFilter=e?.showFilter??!0,this._filterByExtent=e?.filterByExtent??!1,this._columns={},this._open=!0,this._filtered=!0,this._search=e?.search??!0,this._searchFilter=e?.searchFilter??"",this._applyToMap=e?.applyToMap??!1,this._controls=e?.controls??["zoom","details"],this.parsecolumns()}parsecolumns(){this.state.columns&&this.state.columns.forEach((e=>{this._columns[e.field]=new i(e)}))}getColumnFilterValue(e,t){const r=this._columns[e].filter;return"min"===t?r.min:"max"===t?r.max:r.value}setColumnFilterValue(e,t,r){let i=t;if(t&&"string"==typeof t){const e=/[(!"#$%&'+,.\\/:;<=>?@[\]^`{|}~)]/g;i=t.replace(e,"\\$&")}"min"===r?this._columns[e].filter.min=i:"max"===r?this._columns[e].filter.max=i:this._columns[e].filter.value=i,""!==this._columns[e].filter.value?this._filtered=!0:this._checkFilters()}clearFilters(){Object.entries(this._columns).forEach((([,e])=>{e.filter.static||(e.filter.min=null,e.filter.max=null,e.filter.value="")})),this._filterByExtent=!1,this._filtered=!1,this._searchFilter=""}_checkFilters(){this._filtered=Object.values(this._columns).some((e=>""!==e.filter.value||e.filter.min||e.filter.max))}get filtered(){return this._filtered}get title(){return this._title}set title(e){this._title=e}get colFilter(){return this._showFilter}set colFilter(e){this._showFilter=e}get filterByExtent(){return this._filterByExtent}set filterByExtent(e){this._filterByExtent=e}get open(){return this._open}set open(e){this._open=e}get search(){return this._search}set search(e){this._search=e}get searchFilter(){return this._searchFilter}set searchFilter(e){this._searchFilter=e}get applyToMap(){return this._applyToMap}set applyToMap(e){this._applyToMap=e}get columns(){return this._columns}set columns(e){this._columns=e}get controls(){return this._controls}}}}]);
//# sourceMappingURL=1039.b4919bdb.js.map