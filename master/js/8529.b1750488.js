"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3567,5948,8529],{5948:function(e,r,a){a.d(r,{C:function(){return p},S:function(){return h},b:function(){return v},d:function(){return c},g:function(){return w},h:function(){return y},m:function(){return d},p:function(){return u},w:function(){return f},y:function(){return m}});var t=a(98503);const n={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},s=Object.values(n),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),i=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${s.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),o=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function u(e){return l.test(e)}function c(e){if(null==e)return null;const r=(0,t.I)(e),a=r?.path.match(l)||r?.path.match(i);if(!a)return null;const[,s,o,u,c]=a,y=o.indexOf("/");return{title:d(-1!==y?o.slice(y+1):o),serverType:n[u.toLowerCase()],sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:s}}}function y(e){const r=(0,t.I)(e).path.match(o);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function d(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function f(e,r){const a=[];if(e){const r=c(e);null!=r&&r.title&&a.push(r.title)}if(r){const e=d(r);a.push(e)}if(2===a.length){if(a[0].toLowerCase().includes(a[1].toLowerCase()))return a[0];if(a[1].toLowerCase().includes(a[0].toLowerCase()))return a[1]}return a.join(" - ")}function w(e){let r=(0,t.X)(e,!0);return!!r&&(r=r.toLowerCase(),r.endsWith(".arcgis.com")&&(r.startsWith("services")||r.startsWith("tiles")||r.startsWith("features")))}function m(e,r){return e&&(0,t.Q)((0,t.S)(e,r))}function h(e){let{url:r}=e;if(!r)return{url:r};r=(0,t.S)(r,e.logger);const a=(0,t.I)(r),n=c(a.path);let s;if(null!=n)null!=n.sublayer&&null==e.layer.layerId&&(s=n.sublayer),r=n.url.path;else if(e.nonStandardUrlAllowed){const e=y(a.path);null!=e&&(r=e.serviceUrl,s=e.sublayerId)}return{url:(0,t.Q)(r),layerId:s}}function p(e,r,a,n,s){(0,t.T)(r,n,"url",s),n.url&&null!=e.layerId&&(n.url=(0,t.Z)(n.url,a,e.layerId.toString()))}function v(e){if(!e)return!1;const r=e.toLowerCase(),a=r.includes("/services/"),t=r.includes("/mapserver/wmsserver"),n=r.includes("/imageserver/wmsserver"),s=r.includes("/wmsserver");return a&&(t||n||s)}},58529:function(e,r,a){a.r(r),a.d(r,{fromUrl:function(){return o}});var t=a(98503),n=a(5948),s=a(22692),l=a(33824);const i={FeatureLayer:!0,SceneLayer:!0};async function o(e){const{properties:r,url:t}=e,n={...r,url:t},s=await d(t,r?.customParameters),{Constructor:l,layerId:i,sourceJSON:o,parsedUrl:u,layers:c,tables:f}=s;if(c.length+f.length===0)return null!=i&&(n.layerId=i),null!=o&&(n.sourceJSON=o),new l(n);const w=new((await Promise.all([a.e(9541),a.e(4063)]).then(a.bind(a,54063))).default)({title:u.title});return await y(w,s,n),w}function u(e,r){return e?e.find((({id:e})=>e===r)):null}function c(e,r,a,t,n){const s={...n,layerId:r};return null!=e&&(s.url=e),null!=a&&(s.sourceJSON=a),"sublayerTitleMode"in t.prototype&&(s.sublayerTitleMode="service-name"),new t(s)}async function y(e,r,a){const t=r.sublayerConstructorProvider;for(const{id:n,serverUrl:s}of r.layers){const l=u(r.sublayerInfos,n),i=c(s,n,l,(l&&t?.(l))??r.Constructor,a);e.add(i)}if(r.tables.length){const t=await p("FeatureLayer");r.tables.forEach((({id:n,serverUrl:s})=>{const l=c(s,n,u(r.tableInfos,n),t,a);e.tables.add(l)}))}}async function d(e,r){let a=(0,n.d)(e);if(null==a&&(a=await f(e,r)),null==a)throw new t.s("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:s,sublayer:o}=a;let u;const c={FeatureServer:"FeatureLayer",KnowledgeGraphServer:"KnowledgeGraphLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer",VideoServer:"VideoLayer"},y="FeatureServer"===s,d="SceneServer"===s,w={parsedUrl:a,Constructor:null,layerId:y||d?o??void 0:void 0,layers:[],tables:[]};switch(s){case"MapServer":if(null!=o){const{type:a}=await(0,l.t)(e,{customParameters:r});switch(u="FeatureLayer",a){case"Catalog Layer":u="CatalogLayer";break;case"Catalog Dynamic Group Layer":throw new t.s("arcgis-layers:unsupported",`fromUrl() not supported for "${a}" layers`)}}else u=await v(e,r)?"TileLayer":"MapImageLayer";break;case"ImageServer":{const a=await(0,l.t)(e,{customParameters:r}),{tileInfo:t,cacheType:n}=a;u=t?"LERC"!==t?.format?.toUpperCase()||n&&"elevation"!==n.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const e=await(0,l.t)(a.url.path,{customParameters:r});if(u="SceneLayer",e){const r=e?.layers;if("Voxel"===e?.layerType)u="VoxelLayer";else if(r?.length){const e=r[0]?.layerType;null!=e&&null!=t.bB[e]&&(u=t.bB[e])}}break}case"3DTilesServer":throw new t.s("arcgis-layers:unsupported","fromUrl() not supported for 3DTiles layers");case"FeatureServer":if(u="FeatureLayer",null!=o){const a=await(0,l.t)(e,{customParameters:r});w.sourceJSON=a,u=(0,l.i)(a.type)}break;default:u=c[s]}if(i[u]&&null==o){const a=await m(e,s,r);if(y&&(w.sublayerInfos=a.layerInfos,w.tableInfos=a.tableInfos),a.layers.length+a.tables.length!==1)w.layers=a.layers,w.tables=a.tables,y&&a.layerInfos?.length&&(w.sublayerConstructorProvider=await b(a.layerInfos));else if(y||d){const e=a.layerInfos?.[0]??a.tableInfos?.[0];if(w.layerId=a.layers[0]?.id??a.tables[0]?.id,w.sourceJSON=e,y){const r=e?.type;u=(0,l.i)(r)}}}return w.Constructor=await p(u),w}async function f(e,r){const a=await(0,l.t)(e,{customParameters:r});let s=null,i=null;const o=a.type;if("Feature Layer"===o||"Table"===o?(s="FeatureServer",i=a.id??null):"indexedVector"===o?s="VectorTileServer":a.hasOwnProperty("mapName")?s="MapServer":a.hasOwnProperty("bandCount")&&a.hasOwnProperty("pixelSizeX")?s="ImageServer":a.hasOwnProperty("maxRecordCount")&&a.hasOwnProperty("allowGeometryUpdates")?s="FeatureServer":a.hasOwnProperty("streamUrls")?s="StreamServer":w(a)?(s="SceneServer",i=a.id):a.hasOwnProperty("layers")&&w(a.layers?.[0])&&(s="SceneServer"),!s)return null;const u=null!=i?(0,n.h)(e):null;return{title:null!=u&&a.name||(0,t.bA)(e),serverType:s,sublayer:i,url:{path:null!=u?u.serviceUrl:(0,t.I)(e).path}}}function w(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}async function m(e,r,a){let t,n,s=!1;switch(r){case"FeatureServer":{const r=await(0,l.a)(e,{customParameters:a});s=!!r.layersJSON,t=r.layersJSON||r.serviceJSON;break}case"SceneServer":{const r=await h(e,a);t=r.serviceInfo,n=r.tableServerUrl;break}default:t=await(0,l.t)(e,{customParameters:a})}const i=t?.layers,o=t?.tables;return{layers:i?.map((e=>({id:e.id}))).reverse()||[],tables:o?.map((e=>({serverUrl:n,id:e.id}))).reverse()||[],layerInfos:s?i:[],tableInfos:s?o:[]}}async function h(e,r){const a=await(0,l.t)(e,{customParameters:r});if(!a.layers?.[0])return{serviceInfo:a};try{const{serverUrl:t}=await(0,s.s)(e),n=await(0,l.t)(t,{customParameters:r}).catch((()=>null));return n&&(a.tables=n.tables),{serviceInfo:a,tableServerUrl:t}}catch{return{serviceInfo:a}}}async function p(e){return(0,l.b[e])()}async function v(e,r){return(await(0,l.t)(e,{customParameters:r})).tileInfo}async function b(e){if(!e.length)return;const r=new Set,a=[];for(const{type:s}of e)r.has(s)||(r.add(s),a.push(p((0,l.i)(s))));const t=await Promise.all(a),n=new Map;return Array.from(r).forEach(((e,r)=>{n.set(e,t[r])})),e=>n.get(e.type)}},22692:function(e,r,a){a.d(r,{s:function(){return l}});var t=a(98503),n=a(5948),s=a(2031);async function l(e,r){const a=(0,n.d)(e);if(!a)throw new t.s("invalid-url","Invalid scene service url");const s={...r,sceneServerUrl:a.url.path,layerId:a.sublayer??void 0};if(s.sceneLayerItem??=await i(s),null==s.sceneLayerItem)return c(s.sceneServerUrl.replace("/SceneServer","/FeatureServer"),s);const l=await y(s);if(!l?.url)throw new t.s("related-service-not-found","Could not find feature service through portal item relationship");s.featureServiceItem=l;const o=await c(l.url,s);return o.portalItem=l,o}async function i(e){const r=(await o(e)).serviceItemId;if(!r)return null;const a=new s["default"]({id:r,apiKey:e.apiKey}),n=await u(e);null!=n&&(a.portal=new t.b({url:n}));try{return await a.load({signal:e.signal})}catch(l){return(0,t.G)(l),null}}async function o(e){if(e.rootDocument)return e.rootDocument;const r={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const a=await(0,t.U)(e.sceneServerUrl,r);e.rootDocument=a.data}catch{e.rootDocument={}}return e.rootDocument}async function u(e){const r=t.K?.findServerInfo(e.sceneServerUrl);if(r?.owningSystemUrl)return r.owningSystemUrl;const a=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const r=(await(0,t.U)(a,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(r)return r}catch(n){(0,t.G)(n)}return null}async function c(e,r){const a=(0,n.d)(e);if(!a)throw new t.s("invalid-feature-service-url","Invalid feature service url");const s=a.url.path,l=r.layerId;if(null==l)return{serverUrl:s};const i=o(r),u=r.featureServiceItem?await r.featureServiceItem.fetchData("json"):null,c=(u?.layers?.[0]||u?.tables?.[0])?.customParameters,y=e=>{const a={query:{f:"json",...c},responseType:"json",authMode:e,signal:r.signal};return(0,t.U)(s,a)},d=y("anonymous").catch((()=>y("no-prompt"))),[f,w]=await Promise.all([d,i]),m=w?.layers,h=f.data&&f.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(m)){for(let t=0;t<Math.min(m.length,h.length);t++)if(m[t].id===l)return{serverUrl:s,layerId:h[t].id}}else if(null!=l&&l<h.length)return{serverUrl:s,layerId:h[l].id};throw new Error("could not find matching associated sublayer")}async function y({sceneLayerItem:e,signal:r}){if(!e)return null;try{const a=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:r})).find((e=>"Feature Service"===e.type))||null;if(!a)return null;const t=new s["default"]({portal:a.portal,id:a.id});return await t.load(),t}catch(a){return(0,t.G)(a),null}}},33824:function(e,r,a){a.d(r,{a:function(){return i},b:function(){return s},i:function(){return w},t:function(){return n}});var t=a(98503);async function n(e,r){const{data:a}=await(0,t.U)(e,{responseType:"json",query:{f:"json",...r?.customParameters,token:r?.apiKey}});return a}const s={BingMapsLayer:async()=>(await Promise.all([a.e(6146),a.e(1451),a.e(2313)]).then(a.bind(a,92313))).default,BuildingSceneLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(3029),a.e(5420),a.e(5716),a.e(2564),a.e(5329),a.e(7278),a.e(7212)]).then(a.bind(a,99838))).default,CSVLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(3029),a.e(5420),a.e(4240)]).then(a.bind(a,88847))).default,CatalogLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(3029),a.e(626),a.e(5842),a.e(8845),a.e(9089)]).then(a.bind(a,53406))).default,DimensionLayer:async()=>(await Promise.all([a.e(3346),a.e(5455)]).then(a.bind(a,45455))).default,ElevationLayer:async()=>(await Promise.all([a.e(5271),a.e(1903),a.e(8643)]).then(a.bind(a,28643))).default,FeatureLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(3029),a.e(5420),a.e(718)]).then(a.bind(a,55420))).default,GeoJSONLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(685)]).then(a.bind(a,59028))).default,GeoRSSLayer:async()=>(await Promise.all([a.e(6146),a.e(2881)]).then(a.bind(a,41822))).default,GroupLayer:async()=>(await Promise.all([a.e(9541),a.e(4063),a.e(8252)]).then(a.bind(a,54063))).default,ImageryLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(5271),a.e(1451),a.e(626),a.e(879),a.e(8932),a.e(2806),a.e(9658)]).then(a.bind(a,88377))).default,ImageryTileLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(5271),a.e(1903),a.e(879),a.e(8932),a.e(2806),a.e(1279),a.e(8966)]).then(a.bind(a,82287))).default,IntegratedMesh3DTilesLayer:async()=>(await a.e(8872).then(a.bind(a,68872))).default,IntegratedMeshLayer:async()=>(await Promise.all([a.e(2564),a.e(543),a.e(3574)]).then(a.bind(a,23574))).default,KMLLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(8954)]).then(a.bind(a,73075))).default,KnowledgeGraphLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(6849),a.e(3281),a.e(7113),a.e(6510),a.e(149),a.e(2611),a.e(3557),a.e(1770),a.e(850),a.e(3658),a.e(8473)]).then(a.bind(a,18473))).default,LineOfSightLayer:async()=>(await Promise.all([a.e(543),a.e(3346),a.e(8260),a.e(4162)]).then(a.bind(a,92523))).default,LinkChartLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(6849),a.e(3281),a.e(7113),a.e(6510),a.e(149),a.e(2611),a.e(3557),a.e(1770),a.e(850),a.e(3658),a.e(7918)]).then(a.bind(a,97918))).default,MapImageLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(1451),a.e(626),a.e(5842),a.e(8911),a.e(8414)]).then(a.bind(a,31751))).default,MapNotesLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(3029),a.e(5420),a.e(2677)]).then(a.bind(a,14464))).default,MediaLayer:async()=>(await Promise.all([a.e(3557),a.e(4284)]).then(a.bind(a,75187))).default,OGCFeatureLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(3281),a.e(6854),a.e(78)]).then(a.bind(a,19721))).default,OpenStreetMapLayer:async()=>(await Promise.all([a.e(6146),a.e(1451),a.e(7345),a.e(34)]).then(a.bind(a,57653))).default,OrientedImageryLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(3029),a.e(5420),a.e(8521)]).then(a.bind(a,129))).default,PointCloudLayer:async()=>(await Promise.all([a.e(2564),a.e(7144)]).then(a.bind(a,7144))).default,RouteLayer:async()=>(await Promise.all([a.e(3313),a.e(136),a.e(7509),a.e(8848),a.e(7384)]).then(a.bind(a,8986))).default,SceneLayer:async()=>(await Promise.all([a.e(3313),a.e(136),a.e(7509),a.e(9459),a.e(5716),a.e(720),a.e(2564),a.e(5329),a.e(543),a.e(7278),a.e(2858),a.e(9254)]).then(a.bind(a,69111))).default,StreamLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(3281),a.e(2434)]).then(a.bind(a,69973))).default,SubtypeGroupLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(3029),a.e(5807)]).then(a.bind(a,96967))).default,TileLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(1451),a.e(626),a.e(5842),a.e(1903),a.e(8911),a.e(4405)]).then(a.bind(a,96786))).default,UnknownLayer:async()=>(await a.e(609).then(a.bind(a,50609))).default,UnsupportedLayer:async()=>(await a.e(3825).then(a.bind(a,93825))).default,VectorTileLayer:async()=>(await Promise.all([a.e(6146),a.e(1903),a.e(6964),a.e(798)]).then(a.bind(a,73726))).default,VideoLayer:async()=>(await a.e(4377).then(a.bind(a,94377))).default,ViewshedLayer:async()=>(await Promise.all([a.e(3346),a.e(8260),a.e(6077)]).then(a.bind(a,66077))).default,VoxelLayer:async()=>(await Promise.all([a.e(2564),a.e(543),a.e(7610)]).then(a.bind(a,27610))).default,WFSLayer:async()=>(await Promise.all([a.e(3313),a.e(6146),a.e(136),a.e(7509),a.e(9459),a.e(5271),a.e(3281),a.e(4840),a.e(4684)]).then(a.bind(a,11996))).default,WMSLayer:async()=>(await Promise.all([a.e(6146),a.e(1451),a.e(7307)]).then(a.bind(a,97307))).default,WMTSLayer:async()=>(await Promise.all([a.e(6146),a.e(1451),a.e(7345),a.e(1479)]).then(a.bind(a,91479))).default,WebTileLayer:async()=>(await Promise.all([a.e(6146),a.e(1451),a.e(7345)]).then(a.bind(a,27345)).then((e=>e.W))).default},l=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);async function i(e,r){const{loadContext:a,...t}=r||{},s=a?await a.fetchServiceMetadata(e,t):await n(e,t);f(s),c(s);const l={serviceJSON:s};if((s.currentVersion??0)<10.5)return l;const i=`${e}/layers`,o=a?await a.fetchServiceMetadata(i,t):await n(i,t);return f(o),c(o),l.layersJSON={layers:o.layers,tables:o.tables},l}function o(e){const{type:r}=e;return!!r&&l.has(r)}function u(e){return"Table"===e.type}function c(e){e.layers=e.layers?.filter(o),e.tables=e.tables?.filter(u)}function y(e){e.type||="Feature Layer"}function d(e){e.type||="Table"}function f(e){e.layers?.forEach(y),e.tables?.forEach(d)}function w(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}}}]);
//# sourceMappingURL=8529.b1750488.js.map