"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[7509],{473:function(e,t,i){i.d(t,{y:function(){return y}});var r=i(98503),s=i(76173),o=i(44126),n=i(8891);function l(e,t,i,s,o){if(null==e)return null;const n=e.referencesGeometry()&&o?u(t,s,o):t,l=e.repurposeFeature(n);try{return e.evaluate({...i,$feature:l},e.services)}catch(a){return r.n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const a=new Map;function u(e,t,i){const{transform:r,hasZ:s,hasM:o}=i;a.has(t)||a.set(t,p(t));const n=a.get(t)(e.geometry,r,s,o);return{...e,geometry:n}}function p(e){const t={};switch(e){case"esriGeometryPoint":return(e,i,r,s)=>(0,n.C)(i,t,e,r,s);case"esriGeometryPolygon":return(e,i,r,s)=>(0,n.D)(i,t,e,r,s);case"esriGeometryPolyline":return(e,i,r,s)=>(0,n.H)(i,t,e,r,s);case"esriGeometryMultipoint":return(e,i,r,s)=>(0,n.B)(i,t,e,r,s);default:return r.n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new r.s("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}const c=e=>{if(!e)return[0,0,0,0];const{r:t,g:i,b:r,a:s}=e;return[t,i,r,255*s]};class y{static findApplicableOverrides(e,t,i){if(e&&t){if(e.primitiveName){let r=!1;for(const t of i)if(t.primitiveName===e.primitiveName){r=!0;break}if(!r)for(const s of t)s.primitiveName===e.primitiveName&&i.push(s)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const r of e.effects)y.findApplicableOverrides(r,t,i);if(e.symbolLayers)for(const r of e.symbolLayers)y.findApplicableOverrides(r,t,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const r of e.effects)y.findApplicableOverrides(r,t,i);if(e.markerPlacement&&y.findApplicableOverrides(e.markerPlacement,t,i),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const r of e.markerGraphics)y.findApplicableOverrides(r,t,i),y.findApplicableOverrides(r.symbol,t,i)}else"CIMCharacterMarker"===e.type?y.findApplicableOverrides(e.symbol,t,i):"CIMHatchFill"===e.type?y.findApplicableOverrides(e.lineSymbol,t,i):"CIMPictureMarker"===e.type&&y.findApplicableOverrides(e.animatedSymbolProperties,t,i)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,o.B)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const i=(0,o.W)(e),r=e.primitiveName,s=[];for(const n of t)n.primitiveName===r&&s.push((0,o.W)(n));return{type:"cim-effect-param",effect:i,overrides:(0,o.U)(s)}}static async resolveSymbolOverrides(e,t,i,s,n,l,a){if(!e?.symbol)return null;let{symbol:u,primitiveOverrides:p}=e;const c=!!p;if(!c&&!s)return u;u=(0,r.f)(u),p=(0,r.f)(p);let d=!0;if(t||(t={attributes:{}},d=!1),c){if(d||(p=p.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),a||(p=p.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),p.length>0){const e={spatialReference:i,fields:(0,o.v)(t.attributes),geometryType:n};await y.createRenderExpressions(p,e),y.evaluateOverrides(p,t,n??"esriGeometryPoint",l,a)}y.applyOverrides(u,p)}return s&&y.applyDictionaryTextOverrides(u,t,s,null),u}static async createRenderExpressions(e,t){const i=[];for(const s of e){const e=s.valueExpressionInfo;if(!e||y._expressionToRenderExpression.has(e.expression))continue;const o=(0,r.em)(e.expression,t.spatialReference,t.fields);i.push(o),o.then((t=>y._expressionToRenderExpression.set(e.expression,t)))}i.length>0&&await Promise.all(i)}static evaluateOverrides(e,t,i,r,o){const n={$view:{scale:o?.scale}};for(const a of e){a.value&&"object"==typeof a.value&&(0,s.c)(a.value)&&("Color"===a.propertyName||"StrokeColor"===a.propertyName)&&(a.value=c(a.value));const e=a.valueExpressionInfo;if(!e)continue;const o=y._expressionToRenderExpression.get(e.expression);o&&(a.value=l(o,t,n,i,r))}}static applyDictionaryTextOverrides(e,t,i,r,s="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=e.symbolLayers;if(!o)return;for(const n of o)n&&"CIMVectorMarker"===n.type&&y.applyDictionaryTextOverrides(n,t,i,r,"CIMTextSymbol"===e.type?e.textCase:s)}break;case"CIMVectorMarker":{const s=e.markerGraphics;if(!s)return;for(const e of s)e&&y.applyDictionaryTextOverrides(e,t,i,r)}break;case"CIMMarkerGraphic":{const n=e.textString;if(n&&n.includes("[")){const l=(0,o.a)(n,i);e.textString=(0,o.c)(t,l,r,s)}}}}static applyOverrides(e,t,i,r){if(e.primitiveName)for(const s of t)if(s.primitiveName===e.primitiveName){const t=(0,o.z)(s.propertyName);if(r&&r.push({cim:e,nocapPropertyName:t,value:e[t]}),i){let t=!1;for(const r of i)r.primitiveName===e.primitiveName&&(t=!0);t||i.push(s)}null!=s.value&&(e[t]=s.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const s of e.effects)y.applyOverrides(s,t,i,r);if(e.symbolLayers)for(const s of e.symbolLayers)y.applyOverrides(s,t,i,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const s of e.effects)y.applyOverrides(s,t,i,r);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const s of e.markerGraphics)y.applyOverrides(s,t,i,r),y.applyOverrides(s.symbol,t,i,r)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const i of e)void 0!==i.value&&(t+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new r.aC(t).toRgba();return e[3]*=255,e}return t}}y._expressionToRenderExpression=new Map},47509:function(e,t,i){i.r(t),i.d(t,{j:function(){return X},l:function(){return E},m:function(){return z},o:function(){return Q},p:function(){return H},t:function(){return W},u:function(){return G}});var r=i(98503),s=i(61140),o=i(81519),n=i(22676),l=i(36879),a=i(473),u=i(44126),p=i(35513),c=i(64977);const y="esri.renderers.support.DictionaryLoader",d={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let f=class{constructor(e,t,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new o.e(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=e,this.config=t,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,t){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{i=await this._dictionaryPromise}catch(y){if((0,r.E)(y))return this._dictionaryPromise=null,null}const s=this._dictionaryVersion?.greaterEqual(4,0),o={};if(this.fieldMap)for(const r of this._symbolFields){const t=(0,u.J)(this.fieldMap[r],this._fieldIndex);if(t){const i=e.attributes[t];o[r]=s?i:null!=i?""+e.attributes[t]:""}else o[r]=""}let n=null;try{n=i?.(o,t)}catch{return null}if(!n||"string"!=typeof n||"invalid"===n)return null;const l=n.split(";"),a=[],p=[];for(let u=0;u<l.length;u++){const t=l[u];if(t)if(t.includes("po:")){const i=t.slice(3).split("|");if(3===i.length){const t=i[0],s=i[1];let o=i[2];const n="countrylabel";if(t===n&&"TextString"===s){if(null!=this.fieldMap){let t=this.fieldMap[n];null==t&&(t=n,this.fieldMap[t]=t),e.attributes[t]=o}continue}if("DashTemplate"===s)o=o.split(" ").map((e=>Number(e)));else if("Color"===s){const e=new r.aC(o).toRgba();o=[e[0],e[1],e[2],255*e[3]]}else o=Number(o);p.push({primitiveName:t,propertyName:s,value:o,defaultValue:null})}}else if(t.includes("|")){for(const e of t.split("|"))if(this._itemNames.has(e)){a.push(e);break}}else if(this._itemNames.has(t))a.push(t);else if(0===u){a.length=0;let t="Invalid_P";null!=e.geometry&&((0,r.a9)(e.geometry)?t="Invalid_A":(0,r.aa)(e.geometry)&&(t="Invalid_L")),a.push(t);break}}const c=null==e.geometry||!e.geometry.hasZ&&"point"===e.geometry.type;return this._cimPartsToCIMSymbol(e,a,p,c,t)}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void r.n.getLogger(y).error("no valid URL!");const t=(0,r.U)(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:null!=e?e.signal:null}),[{data:i}]=await Promise.all([t,(0,r.bG)()]);if(!i)throw this._dictionaryPromise=null,new r.s("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:o,expression:a,itemsNames:u}=i,p=a;let c=!1;o&&(this._dictionaryVersion=n.r.parse(o),c=this._dictionaryVersion.greaterEqual(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(u),this._symbolFields=s.symbol;const d={};if(this.config){const e=this.config;for(const t in e)d[t]=e[t]}if(s.configuration)for(const r of s.configuration)d.hasOwnProperty(r.name)||(d[r.name]=r.value);const f=[];if(e?.fields&&this.fieldMap)for(const r in this.fieldMap){const t=this.fieldMap[r],i=e.fields.filter((e=>e.name.toLowerCase()===t?.toLowerCase()));i.length>0&&f.push({...i[0],type:c?i[0].type:"esriFieldTypeString"})}f.length>0&&(this._fieldIndex=new l.Z(f));const h=(0,r.ic)(p,null!=e?e.spatialReference:null,f,d).then((e=>{const t={scale:0};return(i,r)=>{if(null==e)return null;const s=e.repurposeFeature({geometry:null,attributes:i});return t.scale=null!=r?r.scale??void 0:void 0,e.evaluate({$feature:s,$view:t},e.services)}})).catch((e=>(r.n.getLogger(y).error("Creating dictionary expression failed:",e),null)));return this._dictionaryPromise=h,h}async _cimPartsToCIMSymbol(e,t,i,s,o){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=this._getSymbolPart(t[r],o);let l=await Promise.all(n);const p=this.fieldMap;if(p){l=(0,r.f)(l);for(const t of l)a.y.applyDictionaryTextOverrides(t,e,p,this._fieldIndex,(0,u.R)(t))}return new r.id({data:h(l,i,s)})}async _getSymbolPart(e,t){const i=this._symbolCache.get(e);if(i)return i;if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then((e=>e.data));const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,e),o=(0,r.U)(s,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,o),o.finally((()=>this._ongoingRequests.delete(e)));try{const t=await o;return this._symbolCache.put(e,t.data),t.data}catch(n){throw n}}};function h(e,t,i){if(!e||0===e.length)return null;const r={...e[0]};if(e.length>1){r.effects=null,r.symbolLayers=[];for(const t of e){const e=t;if(null!=e.effects)for(const t of e.symbolLayers)null==t.effects?t.effects=e.effects:t.effects.unshift(...e.effects);r.symbolLayers.unshift(...e.symbolLayers)}}return i&&(r.callout=d),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:t}}var m;let b=m=class extends((0,s.v)(s.p)){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new f(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,i,r){r?.origin||super.writeVisualVariables(e,t,i,r)}clone(){return new m({config:(0,r.f)(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:(0,r.f)(this.fieldMap),url:(0,r.f)(this.url),visualVariables:(0,r.f)(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await(0,r.fq)(e,t,this.scaleExpression);for(const i in this.fieldMap){const r=this.fieldMap[i];t.has(r)&&e.add(r)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};(0,r.k)([(0,r.o)({type:f})],b.prototype,"_loader",null),(0,r.k)([(0,r.o)({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],b.prototype,"config",void 0),(0,r.k)([(0,r.o)({type:Object,json:{write:!0}})],b.prototype,"fieldMap",void 0),(0,r.k)([(0,r.o)({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],b.prototype,"scaleExpression",void 0),(0,r.k)([(0,r.q)("scaleExpression")],b.prototype,"writeData",null),(0,r.k)([(0,r.o)({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],b.prototype,"scaleExpressionTitle",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],b.prototype,"url",void 0),(0,r.k)([(0,r.q)("visualVariables")],b.prototype,"writeVisualVariables",null),b=m=(0,r.k)([(0,r.A)("esri.renderers.DictionaryRenderer")],b);const g=b;var v;let w=v=class extends r.v{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return null==e?e:"function"==typeof e?(r.n.getLogger(this).error(".field: field must be a string value"),null):(0,r.ie)(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new v({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r.k)([(0,r.o)({type:r.aC,json:{type:[Number],write:!0}})],w.prototype,"color",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],w.prototype,"field",void 0),(0,r.k)([(0,r.by)("field")],w.prototype,"castField",null),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],w.prototype,"label",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],w.prototype,"valueExpression",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],w.prototype,"valueExpressionTitle",void 0),w=v=(0,r.k)([(0,r.A)("esri.renderers.support.AttributeColorInfo")],w);const k=w;var S;let x=S=class extends r.v{constructor(){super(...arguments),this.unit=null}clone(){return new S({unit:this.unit})}};(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],x.prototype,"unit",void 0),x=S=(0,r.k)([(0,r.A)("esri.renderers.support.DotDensityLegendOptions")],x);const I=x;var C;let M=C=class extends((0,s.v)(s.p)){constructor(e){super(e),this.attributes=null,this.backgroundColor=new r.aC([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new r.dc,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(null==this.referenceScale)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new r.df({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new C({attributes:(0,r.f)(this.attributes),backgroundColor:(0,r.f)(this.backgroundColor),dotBlendingEnabled:(0,r.f)(this.dotBlendingEnabled),dotShape:(0,r.f)(this.dotShape),dotSize:(0,r.f)(this.dotSize),dotValue:(0,r.f)(this.dotValue),legendOptions:(0,r.f)(this.legendOptions),outline:(0,r.f)(this.outline),referenceScale:(0,r.f)(this.referenceScale),seed:(0,r.f)(this.seed),visualVariables:(0,r.f)(this.visualVariables),authoringInfo:(0,r.f)(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map((e=>e.field||e.valueExpression||""))}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes??[])i.valueExpression&&await(0,r.fq)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,r.k)([(0,r.o)({type:[k],json:{write:!0}})],M.prototype,"attributes",void 0),(0,r.k)([(0,r.o)({type:r.aC,json:{write:!0}})],M.prototype,"backgroundColor",void 0),(0,r.k)([(0,r.o)({type:Boolean,json:{write:!0}})],M.prototype,"dotBlendingEnabled",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!1}})],M.prototype,"dotShape",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],M.prototype,"dotSize",void 0),(0,r.k)([(0,r.o)({type:I,json:{write:!0}})],M.prototype,"legendOptions",void 0),(0,r.k)([(0,r.o)({type:r.dc,json:{default:null,write:!0}})],M.prototype,"outline",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],M.prototype,"dotValue",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],M.prototype,"referenceScale",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],M.prototype,"seed",void 0),(0,r.k)([(0,r.bk)({dotDensity:"dot-density"})],M.prototype,"type",void 0),M=C=(0,r.k)([(0,r.A)("esri.renderers.DotDensityRenderer")],M);const _=M;var j;let O=j=class extends r.v{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new j({color:this.color&&this.color.clone(),ratio:this.ratio})}};(0,r.k)([(0,r.o)({type:r.aC,json:{type:[r.bp],default:null,write:!0}})],O.prototype,"color",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],O.prototype,"ratio",void 0),O=j=(0,r.k)([(0,r.A)("esri.renderers.support.HeatmapColorStop")],O);const E=O;let N=class extends((0,r.a_)(r.v)){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};var P;function R(e){if(null!=e){const{maxDensity:t,minDensity:i,radius:r}=e;if(null!=t||null!=i||null!=r){const{blurRadius:t,maxPixelIntensity:i,minPixelIntensity:r,...s}=e;return s}}return e}(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],N.prototype,"minLabel",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],N.prototype,"maxLabel",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],N.prototype,"title",void 0),N=(0,r.k)([(0,r.A)("esri.renderers.support.HeatmapLegendOptions")],N);let V=P=class extends s.p{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new E({ratio:0,color:new r.aC("rgba(255, 140, 0, 0)")}),new E({ratio:.75,color:new r.aC("rgba(255, 140, 0, 1)")}),new E({ratio:.9,color:new r.aC("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null}normalizeCtorArgs(e){return R(e)}get blurRadius(){return(0,p.a)(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",(0,p.e)(e)),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity)}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity)}get _pixelIntensityToDensity(){return 24/(p.c**2*this.blurRadius**4)}read(e,t){e=R(e),super.read(e,t)}getSymbol(){return new r.de}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const i=this.field,s=this.valueExpression;i&&"string"==typeof i&&(0,r.ig)(e,t,i),s&&"string"==typeof s&&await(0,r.fq)(e,t,s)}getAttributeHash(){return""}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new P({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:(0,r.f)(this.colorStops),field:this.field,legendOptions:(0,r.f)(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};(0,r.k)([(0,r.o)({type:s.j,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],V.prototype,"authoringInfo",void 0),(0,r.k)([(0,r.o)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],V.prototype,"blurRadius",null),(0,r.k)([(0,r.o)({type:[E],json:{write:!0}})],V.prototype,"colorStops",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],V.prototype,"field",void 0),(0,r.k)([(0,r.o)({type:N,json:{write:!0}})],V.prototype,"legendOptions",void 0),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],V.prototype,"maxDensity",void 0),(0,r.k)([(0,r.o)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],V.prototype,"maxPixelIntensity",null),(0,r.k)([(0,r.o)({type:Number,json:{write:!0}})],V.prototype,"minDensity",void 0),(0,r.k)([(0,r.o)({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],V.prototype,"minPixelIntensity",null),(0,r.k)([(0,r.o)({type:Number,cast:r.fy,json:{write:!0}})],V.prototype,"radius",void 0),(0,r.k)([(0,r.o)({type:Number,range:{min:0},json:{default:0,write:!0}})],V.prototype,"referenceScale",void 0),(0,r.k)([(0,r.bk)({heatmap:"heatmap"})],V.prototype,"type",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],V.prototype,"valueExpression",void 0),(0,r.k)([(0,r.o)({type:String})],V.prototype,"valueExpressionTitle",void 0),(0,r.k)([(0,r.o)({readOnly:!0})],V.prototype,"_pixelIntensityToDensity",null),V=P=(0,r.k)([(0,r.A)("esri.renderers.HeatmapRenderer")],V);const T=V;let D=class extends((0,r.a_)(r.v)){constructor(){super(...arguments),this.color=new r.aC([0,0,0,0]),this.label=null,this.threshold=0}};(0,r.k)([(0,r.o)({type:r.aC,json:{write:!0}})],D.prototype,"color",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],D.prototype,"label",void 0),(0,r.k)([(0,r.o)({type:Number,range:{min:0,max:1},json:{write:!0}})],D.prototype,"threshold",void 0),D=(0,r.k)([(0,r.A)("esri.renderers.support.OthersCategory")],D);const A={base:s.c,key:"type",typeMap:{size:s.b,opacity:s.d}};let q=class extends((0,s.v)((0,r.a_)(s.p))){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new r.aC([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new D,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart",this.visualVariables=null}getSymbol(){return new r.de({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(r.bQ)}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const i of this.attributes)i.valueExpression&&await(0,r.fq)(e,t,i.valueExpression),i.field&&e.add(i.field)}};(0,r.k)([(0,r.o)({type:[k],json:{write:!0}})],q.prototype,"attributes",void 0),(0,r.k)([(0,r.o)(s.n)],q.prototype,"backgroundFillSymbol",void 0),(0,r.k)([(0,r.o)({type:r.aC,json:{write:!0}})],q.prototype,"defaultColor",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],q.prototype,"defaultLabel",void 0),(0,r.k)([(0,r.o)({type:Number,range:{min:0,max:1},json:{write:!0}})],q.prototype,"holePercentage",void 0),(0,r.k)([(0,r.o)({type:D,json:{write:!0}})],q.prototype,"othersCategory",void 0),(0,r.k)([(0,r.o)({type:c.a,json:{write:!0}})],q.prototype,"legendOptions",void 0),(0,r.k)([(0,r.o)({type:r.dc,json:{default:null,write:!0}})],q.prototype,"outline",void 0),(0,r.k)([(0,r.o)({type:Number,cast:r.fy,json:{write:!0}})],q.prototype,"size",void 0),(0,r.k)([(0,r.bk)({pieChart:"pie-chart"})],q.prototype,"type",void 0),(0,r.k)([(0,r.o)({types:[A]})],q.prototype,"visualVariables",void 0),q=(0,r.k)([(0,r.A)("esri.renderers.PieChartRenderer")],q);const L=q;var F;let $=F=class extends((0,s.v)(s.p)){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map((i=>i.collectRequiredFields(e,t))))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables?.reduce(((e,t)=>e+t.getAttributeHash()),"")??""}getMeshHash(){return this.getSymbols().reduce(((e,t)=>e+JSON.stringify(t)),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new F({description:this.description,label:this.label,symbol:(0,r.f)(this.symbol),visualVariables:(0,r.f)(this.visualVariables),authoringInfo:(0,r.f)(this.authoringInfo)})}};(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],$.prototype,"description",void 0),(0,r.k)([(0,r.o)({type:String,json:{write:!0}})],$.prototype,"label",void 0),(0,r.k)([(0,r.o)(s.m)],$.prototype,"symbol",void 0),(0,r.k)([(0,r.bk)({simple:"simple"})],$.prototype,"type",void 0),$=F=(0,r.k)([(0,r.A)("esri.renderers.SimpleRenderer")],$);const H=$,z={key:"type",base:s.p,typeMap:{heatmap:T,simple:H,"unique-value":s.A,"class-breaks":s.z,"dot-density":_,dictionary:g,"pie-chart":L},errorContext:"renderer"},G={key:"type",base:s.p,typeMap:{simple:H,"unique-value":s.A,"class-breaks":s.z,heatmap:T},errorContext:"renderer",validate:B};function B(e){switch(e.type){case"simple":return J(e);case"unique-value":return U(e);case"class-breaks":return Z(e);case"heatmap":return e}}function J(e){if(e.symbol)return e;r.n.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function U(e){const t=e.uniqueValueInfos,i=t?.filter((({symbol:e,label:t},i)=>(e||r.n.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${i}] ${t}) without a symbol from web scene.`),!!e)));return i?.length!==t?.length&&(e.uniqueValueInfos=i),e}function Z(e){const t=e.classBreakInfos,i=t?.filter((({symbol:e,label:t},i)=>(e||r.n.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${i}] ${t}) without a symbol from web scene.`),!!e)));return i?.length!==t?.length&&(e.classBreakInfos=i),e}function W(e,t){return Q(e,null,t)}const K=(0,r.ej)({types:z});function Q(e,t,i){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(i?.messages&&i.messages.push(new r.z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:i})),null):K(e,t,i):null}const X=Object.freeze(Object.defineProperty({__proto__:null,fromJSON:W,read:Q},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=7509.ffc21add.js.map