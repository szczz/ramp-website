"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[4162],{92523:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var o=n(98503),r=n(43797),i=n(18260),s=n(74967),l=n(39394),u=n(49555),a=n(42630),c=n(88012),p=n(28252),f=n(20784);let d=class extends((0,o.d9)((0,o.a_)(o.aD))){constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}equals(e){return(0,o.fr)(this.position,e.position)&&(0,o.fr)(this.elevationInfo,e.elevationInfo)&&(0,i.c)(this.feature,e.feature)}};(0,o.k)([(0,o.o)({type:o.bv,json:{write:{isRequired:!0}}})],d.prototype,"position",void 0),(0,o.k)([(0,o.o)({type:l.h}),(0,s.j)()],d.prototype,"elevationInfo",void 0),(0,o.k)([(0,o.o)(i.b)],d.prototype,"feature",void 0),d=(0,o.k)([(0,o.A)("esri.analysis.LineOfSightAnalysisObserver")],d);const y=d;let h=class extends((0,o.d9)(o.g0)){constructor(e){super(e),this.position=null,this.elevationInfo=null,this.feature=null}equals(e){return(0,o.fr)(this.position,e.position)&&(0,o.fr)(this.elevationInfo,e.elevationInfo)&&(0,i.c)(this.feature,e.feature)}};(0,o.k)([(0,o.o)({type:o.bv}),(0,s.j)()],h.prototype,"position",void 0),(0,o.k)([(0,o.o)({type:l.h}),(0,s.j)()],h.prototype,"elevationInfo",void 0),(0,o.k)([(0,o.o)(i.b)],h.prototype,"feature",void 0),h=(0,o.k)([(0,o.A)("esri.analysis.LineOfSightAnalysisTarget")],h);const g=h,v=o.V.ofType(g);let b=class extends r.c{constructor(e){super(e),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles((0,o.aE)((()=>this._computeExtent()),(e=>{null==e?.pending&&this._set("extent",null!=e?e.extent:null)}),o.f1))}get targets(){return this._get("targets")||new v}set targets(e){this._set("targets",(0,o.cW)(e,this.targets,v))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}async waitComputeExtent(){const e=this._computeExtent();return null!=e?e.pending:Promise.resolve()}_computeExtent(){const e=this.spatialReference;if(null==this.observer?.position||null==e)return null;const t=e=>"absolute-height"===(0,a.i)(e.position,e.elevationInfo),n=this.observer.position,r=(0,o.gF)(n.x,n.y,n.z,n.x,n.y,n.z);for(const s of this.targets)if(null!=s.position){const t=(0,u.V)(s.position,e);if(null!=t.pending)return{pending:t.pending,extent:null};if(null!=t.geometry){const{x:e,y:n,z:i}=t.geometry;(0,o.gG)(r,[e,n,i])}}const i=(0,o.gH)(r,e);return t(this.observer)&&this.targets.every(t)||(i.zmin=void 0,i.zmax=void 0),{pending:null,extent:i}}clear(){this.observer=null,this.targets.removeAll()}};(0,o.k)([(0,o.o)({type:["line-of-sight"]})],b.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:y,json:{read:!0,write:!0}})],b.prototype,"observer",void 0),(0,o.k)([(0,o.o)({cast:o.cX,type:v,nonNullable:!0,json:{read:!0,write:!0}})],b.prototype,"targets",null),(0,o.k)([(0,o.o)({value:null,readOnly:!0})],b.prototype,"extent",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],b.prototype,"spatialReference",null),(0,o.k)([(0,o.o)({readOnly:!0})],b.prototype,"requiredPropertiesForEditing",null),b=(0,o.k)([(0,o.A)("esri.analysis.LineOfSightAnalysis")],b);const m=b,x=o.V.ofType(g);let k=class extends((0,f.b)((0,c.S)(p.f))){constructor(e){super(e),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new m,this.opacity=1}initialize(){this.addHandles((0,o.aE)((()=>this.analysis),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),o.f1))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(e){const{analysis:t}=this;t&&(t.observer=e)}get targets(){return null!=this.analysis?this.analysis.targets:new o.V}set targets(e){(0,o.cW)(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new m)}};(0,o.k)([(0,o.o)({json:{read:!1},readOnly:!0})],k.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:["LineOfSightLayer"]})],k.prototype,"operationalLayerType",void 0),(0,o.k)([(0,o.o)({type:y,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],k.prototype,"observer",null),(0,o.k)([(0,o.o)({type:x,json:{read:!0,write:{ignoreOrigin:!0}}})],k.prototype,"targets",null),(0,o.k)([(0,o.o)({nonNullable:!0,json:{read:!1,write:!1}})],k.prototype,"analysis",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],k.prototype,"fullExtent",null),(0,o.k)([(0,o.o)({readOnly:!0})],k.prototype,"spatialReference",null),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],k.prototype,"opacity",void 0),(0,o.k)([(0,o.o)({type:["show","hide"]})],k.prototype,"listMode",void 0),k=(0,o.k)([(0,o.A)("esri.layers.LineOfSightLayer")],k);const w=k},42630:function(e,t,n){n.d(t,{$:function(){return w},E:function(){return g},P:function(){return x},Z:function(){return m},a:function(){return c},b:function(){return v},i:function(){return u},j:function(){return I},l:function(){return a},m:function(){return y},p:function(){return d},u:function(){return l},w:function(){return k},x:function(){return h}});var o=n(98503),r=n(39394);function i(e){return e?I:O}function s(e,t){return t?.mode?t.mode:i(e).mode}function l(e,t){return t??i(e)}function u(e,t){return s(null==e||(e.hasZ??!1),t)}function a(e){const t=p(e);return u(e.geometry,t)}function c(e){const t=p(e),n=u(e.geometry,t),o=null!=t&&"on-the-ground"!==n?E(t):0,r=t?.featureExpressionInfo;return{mode:n,offset:o,featureExpressionInfo:r}}function p(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function f(e,t){if(!e?.offset)return 0;const{offset:n,unit:r}=e;if("decimal-degrees"===r)return 0;const i="unknown"!==r&&r?r:"meters",s=(0,o.d6)(t);return s?(0,o.a1)(n,i,s):0}function d(e,t,n){if(!n?.mode)return;const o=e.hasZ?e.z:0,r=f(n,e.spatialReference);switch(n.mode){case"absolute-height":return o-r;case"on-the-ground":return 0;case"relative-to-ground":return o-((t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"ground")??0)+r);case"relative-to-scene":return o-((t.elevationProvider.getElevation(e.x,e.y,o,e.spatialReference,"scene")??0)+r)}}function y(e,t,n,o=null){return g(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,o)}function h(e,t,n,o,r=null){return g(e,t[0],t[1],t.length>2?t[2]:0,n,o,r)}function g(e,t,n,o,r,i,s=null){if(null==i)return;const l=null!=s?s.mode:"absolute-height";if("on-the-ground"===l)return 0;const{absoluteZ:u}=v(t,n,o,r,e,i);return b(u,t,n,o,r,e,s,l)}function v(e,t,n,o,r,i){const s=f(i,o);switch(i.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{const n=r.elevationProvider.getElevation(e,t,0,o,"ground")??0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const i=r.elevationProvider.getElevation(e,t,n,o,"ground")??0;return{absoluteZ:n+i+s,elevation:i}}case"relative-to-scene":{const i=r.elevationProvider.getElevation(e,t,n,o,"scene")??0;return{absoluteZ:n+i+s,elevation:i}}}}function b(e,t,n,o,r,i,s,l){const u=f(s,r);switch(l){case"absolute-height":return e-u;case"relative-to-ground":return e-((i.elevationProvider.getElevation(t,n,o,r,"ground")??0)+u);case"relative-to-scene":return e-((i.elevationProvider.getElevation(t,n,o,r,"scene")??0)+u)}}function m(e,t,n){return n&&n.mode!==t?`${e} only support ${t} elevation mode`:null}function x(e,t,n){return n?.mode===t?`${e} do not support ${t} elevation mode`:null}function k(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function w(e,t){t&&e.warn(".elevationInfo=",t)}function E(e){return(e?.offset??0)*(0,r.n)(e?.unit)}const I={mode:"absolute-height",offset:0},O={mode:"on-the-ground",offset:null}},64835:function(e,t,n){function o(e){return e&&"getAtOrigin"in e&&"originOf"in e}n.d(t,{i:function(){return o}})},77998:function(e,t,n){n.d(t,{e:function(){return l},n:function(){return r},o:function(){return s},r:function(){return i}});const o="randomUUID"in crypto;function r(){if(o)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function i(){return`{${r().toUpperCase()}}`}function s(){return`{${r()}}`}function l(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}}}]);
//# sourceMappingURL=4162.a5560142.js.map