"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[8327],{88327:function(e,t,n){n.r(t),n.d(t,{executeScript:function(){return oe},extend:function(){return ae},functionHelper:function(){return re}});var r=n(76180),a=n(14435),o=n(11242),i=n(98503);const l=100;async function s(e,t){const n=[];for(let r=0;r<t.arguments.length;r++)n.push(await p(e,t.arguments[r]));return n}async function c(e,t,n){return!0===t.preparsed?n(e,null,t.arguments):n(e,t,await s(e,t))}class u extends a.f{constructor(e,t){super(),this.definition=null,this.context=null,this.definition=e,this.context=t}createFunction(e){return(...t)=>{const n={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(n.depthCounter.depth>64)throw new a.a(e,a.r.MaximumCallDepth,null);return Q(this.definition,n,t,null)}}call(e,t){return w(e,t,((n,r,o)=>{const i={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(i.depthCounter.depth>64)throw new a.a(e,a.r.MaximumCallDepth,t);return Q(this.definition,i,o,t)}))}marshalledCall(e,t,n,r){return r(e,t,(async(o,i,l)=>{const s={spatialReference:e.spatialReference,globalScope:n.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return l=l.map((t=>!(0,a.v)(t)||t instanceof a.b?t:(0,a.n)(t,e,r))),(0,a.n)(await Q(this.definition,s,l,t),n,r)}))}}class f extends a.s{constructor(e){super(),this.source=e}async global(e){const t=this.executingContext.globalScope[e.toLowerCase()];if(t.valueset||(t.value=await p(this.executingContext,t.node),t.valueset=!0),(0,a.v)(t.value)&&!(t.value instanceof a.b)){const e=new a.b;e.fn=t.value,e.parameterEvaluator=w,e.context=this.executingContext,t.value=e}return t.value}setGlobal(e,t){if((0,a.v)(t))throw new a.a(null,a.r.AssignModuleFunction,null);this.executingContext.globalScope[e.toLowerCase()]={value:t,valueset:!0,node:null}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=e.toLowerCase()),void 0!==this.executingContext.exports[e]}async loadModule(e){let t=e.spatialReference;null==t&&(t=new i.B({wkid:102100})),this.moduleScope=te({},e.customfunctions,e.timeZone),this.executingContext={spatialReference:t,services:e.services,libraryResolver:new r.a(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console??ne,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await P(this.executingContext,this.source.syntax)}}async function w(e,t,n){return!0===t.preparsed?n(e,null,t.arguments):n(e,t,await s(e,t))}async function p(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case"UpdateExpression":return await C(e,t);case"AssignmentExpression":return await O(e,t);case"TemplateLiteral":return await X(e,t);case"Identifier":return await V(e,t);case"MemberExpression":return await G(e,t);case"Literal":return t.value;case"CallExpression":return await W(e,t);case"UnaryExpression":return await q(e,t);case"BinaryExpression":return await z(e,t);case"LogicalExpression":return await _(e,t);case"ArrayExpression":return await T(e,t);case"ObjectExpression":return await d(e,t);default:throw new a.a(e,a.r.Unrecognized,t)}}catch(n){throw(0,a.u)(e,t,n)}}async function h(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case"ImportDeclaration":return await K(e,t);case"ExportNamedDeclaration":return await j(e,t);case"VariableDeclaration":return await D(e,t,0);case"BlockStatement":return await P(e,t);case"FunctionDeclaration":return await U(e,t);case"ReturnStatement":return await L(e,t);case"IfStatement":return await E(e,t);case"ExpressionStatement":return await k(e,t);case"ForStatement":return await b(e,t);case"WhileStatement":return await g(e,t);case"ForInStatement":return await A(e,t);case"BreakStatement":return a.O;case"EmptyStatement":return a.M;case"ContinueStatement":return a.R;default:throw new a.a(e,a.r.Unrecognized,t)}}catch(n){throw(0,a.u)(e,t,n)}}async function d(e,t){const n=[];for(let r=0;r<t.properties.length;r++){const a=t.properties[r],o=await p(e,a.value),i="Identifier"===a.key.type?a.key.name:await p(e,a.key);n[r]={key:i,value:o}}const o={},i=new Map;for(let r=0;r<n.length;r++){const l=n[r];if((0,a.v)(l.value))throw new a.a(e,a.r.NoFunctionInDictionary,t);if(!1===(0,a.P)(l.key))throw new a.a(e,a.r.KeyMustBeString,t);let s=l.key.toString();const c=s.toLowerCase();i.has(c)?s=i.get(c):i.set(c,s),l.value===a.M?o[s]=null:o[s]=l.value}const l=new r.N(o);return l.immutable=!1,l}async function g(e,t){const n={testResult:!0,lastAction:a.M};if(n.testResult=await p(e,t.test),!1===n.testResult)return a.M;if(!0!==n.testResult)throw new a.a(e,a.r.BooleanConditionRequired,t);for(;!0===n.testResult&&(n.lastAction=await h(e,t.body),n.lastAction!==a.O)&&!(n.lastAction instanceof a.w);)if(n.testResult=await p(e,t.test),!0!==n.testResult&&!1!==n.testResult)throw new a.a(e,a.r.BooleanConditionRequired,t);return n.lastAction instanceof a.w?n.lastAction:a.M}async function y(e,t,n){const r=await h(e,t.body);return n.lastAction=r,n.lastAction===a.O||n.lastAction instanceof a.w?(n.testResult=!1,n):(null!==t.update&&await p(e,t.update),n)}async function v(e,t,n){if(null!==t.test){const r=await p(e,t.test);if(!0===e.abortSignal?.aborted)throw new a.a(e,a.r.Cancelled,t);if(n.testResult=r,!1===n.testResult)return n;if(!0!==n.testResult)throw new a.a(e,a.r.BooleanConditionRequired,t);return y(e,t,n)}return y(e,t,n)}function m(e,t,n,r,o,i){try{v(e,t,n).then((()=>{try{!0===n.testResult?++i>l?(i=0,setTimeout((()=>{m(e,t,n,r,o,i)}),0)):m(e,t,n,r,o,i):n.lastAction instanceof a.w?r(n.lastAction):r(a.M)}catch(s){o(s)}}),(e=>{o(e)}))}catch(s){o(s)}}async function b(e,t){try{return null!==t.init&&("VariableDeclaration"===t.init.type?await h(e,t.init):await p(e,t.init)),await new Promise(((n,r)=>{m(e,t,{testResult:!0,lastAction:a.M},(e=>{n(e)}),(e=>{r(e)}),0)}))}catch(n){throw n}}function S(e,t,n,r,o,i,s,c,u,f){try{if(r<=i)return void c(a.M);o.value="k"===s?n[i]:i,h(e,t.body).then((w=>{try{w instanceof a.w?c(w):w===a.O?c(a.M):++f>l?(f=0,setTimeout((()=>{S(e,t,n,r,o,i+1,s,c,u,f)}),0)):S(e,t,n,r,o,i+1,s,c,u,f)}catch(p){u(p)}}),(e=>{u(e)}))}catch(w){u(w)}}function x(e,t,n,r,o,i,s,c,u){try{if(n.length()<=o)return void s(a.M);r.value="k"===i?n.get(o):o,h(e,t.body).then((f=>{f instanceof a.w?s(f):f===a.O?s(a.M):++u>l?(u=0,setTimeout((()=>{x(e,t,n,r,o+1,i,s,c,u)}),0)):x(e,t,n,r,o+1,i,s,c,u)}),(e=>{c(e)}))}catch(f){c(f)}}function M(e,t,n,r,o,i){try{if(void 0===i&&(i="i"),0===n.length)return void r.resolve(a.M);S(e,t,n,n.length,o,0,i,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(l){r.reject(l)}}function I(e,t,n,r,o,i){try{if(void 0===i&&(i="i"),0===n.length())return void r.resolve(a.M);x(e,t,n,o,0,i,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(l){r.reject(l)}}function F(e,t,n,r,a){try{M(e,t,n.keys(),r,a,"k")}catch(o){r.reject(o)}}function R(e,t,n,o,i,s,c,u){try{e.next().then((f=>{try{if(null===f)s(a.M);else{const w=r.D.createFromGraphicLikeObject(f.geometry,f.attributes,o,t.timeZone);w._underlyingGraphic=f,i.value=w,h(t,n.body).then((r=>{try{r===a.O?s(a.M):r instanceof a.w?s(r):++u>l?(u=0,setTimeout((()=>{R(e,t,n,o,i,s,c,u)}),0)):R(e,t,n,o,i,s,c,u)}catch(f){c(f)}}),(e=>{c(e)}))}}catch(w){c(w)}}),(e=>{c(e)}))}catch(f){c(f)}}async function A(e,t){return new Promise(((n,o)=>{p(e,t.right).then((i=>{try{let l;l="VariableDeclaration"===t.left.type?h(e,t.left):Promise.resolve(),l.then((()=>{try{const l=(0,r.e)("VariableDeclaration"===t.left.type?t.left.declarations[0].id:t.left);let s=null;if(null!=e.localScope&&void 0!==e.localScope[l]&&(s=e.localScope[l]),null===s&&void 0!==e.globalScope[l]&&(s=e.globalScope[l]),null===s)return void o(new a.a(e,a.r.InvalidIdentifier,t));(0,a.E)(i)||(0,a.P)(i)?M(e,t,i,{reject:o,resolve:n},s):(0,a.X)(i)?I(e,t,i,{reject:o,resolve:n},s):i instanceof r.N||(0,a.U)(i)?F(e,t,i,{reject:o,resolve:n},s):(0,a.K)(i)?R(i.iterator(e.abortSignal),e,t,i,s,(e=>{n(e)}),(e=>{o(e)}),0):M(e,t,[],{reject:o,resolve:n},s)}catch(l){o(l)}}),o)}catch(l){o(l)}}),o)}))}async function C(e,t){const n=t.argument;if("CallExpression"===n.type)throw new a.a(e,a.r.NeverReach,t);if("MemberExpression"===n.type){const o=await p(e,n.object);let i,l;if(!0===n.computed)i=await p(e,n.property);else{if("Identifier"!==n.property.type)throw new a.a(e,a.r.Unrecognized,t);i=n.property.name}if((0,a.E)(o)){if(!(0,a.z)(i))throw new a.a(e,a.r.ArrayAccessorMustBeNumber,t);if(i<0&&(i=o.length+i),i<0||i>=o.length)throw new a.a(e,a.r.OutOfBounds,t);l=(0,a.h)(o[i]),o[i]="++"===t.operator?l+1:l-1}else if(o instanceof r.N){if(!1===(0,a.P)(i))throw new a.a(e,a.r.KeyAccessorMustBeString,t);if(!0!==o.hasField(i))throw new a.a(e,a.r.FieldNotFound,t,{key:i});l=(0,a.h)(o.field(i)),o.setField(i,"++"===t.operator?l+1:l-1)}else if(o instanceof f){if(!1===(0,a.P)(i))throw new a.a(e,a.r.ModuleAccessorMustBeString,t);if(!0!==o.hasGlobal(i))throw new a.a(e,a.r.ModuleExportNotFound,t);l=(0,a.h)(await o.global(i)),o.setGlobal(i,"++"===t.operator?l+1:l-1)}else{if(!(0,a.U)(o))throw(0,a.X)(o)?new a.a(e,a.r.Immutable,t):new a.a(e,a.r.InvalidParameter,t);if(!1===(0,a.P)(i))throw new a.a(e,a.r.KeyAccessorMustBeString,t);if(!0!==o.hasField(i))throw new a.a(e,a.r.FieldNotFound,t,{key:i});l=(0,a.h)(o.field(i)),o.setField(i,"++"===t.operator?l+1:l-1)}return!1===t.prefix?l:"++"===t.operator?l+1:l-1}const o=(0,r.e)(n);let i;if(null!=e.localScope&&void 0!==e.localScope[o])return i=(0,a.h)(e.localScope[o].value),e.localScope[o]={value:"++"===t.operator?i+1:i-1,valueset:!0,node:t},!1===t.prefix?i:"++"===t.operator?i+1:i-1;if(void 0!==e.globalScope[o])return i=(0,a.h)(e.globalScope[o].value),e.globalScope[o]={value:"++"===t.operator?i+1:i-1,valueset:!0,node:t},!1===t.prefix?i:"++"===t.operator?i+1:i-1;throw new a.a(e,a.r.InvalidIdentifier,t)}function N(e,t,n,r,o){switch(t){case"=":return e===a.M?null:e;case"/=":return(0,a.h)(n)/(0,a.h)(e);case"*=":return(0,a.h)(n)*(0,a.h)(e);case"-=":return(0,a.h)(n)-(0,a.h)(e);case"+=":return(0,a.P)(n)||(0,a.P)(e)?(0,a.d)(n)+(0,a.d)(e):(0,a.h)(n)+(0,a.h)(e);case"%=":return(0,a.h)(n)%(0,a.h)(e);default:throw new a.a(o,a.r.UnsupportedOperator,r)}}async function O(e,t){const n=t.left;if("MemberExpression"===n.type){const o=await p(e,n.object);let i;if(!0===n.computed)i=await p(e,n.property);else{if("Identifier"!==n.property.type)throw new a.a(e,a.r.InvalidIdentifier,t);i=n.property.name}const l=await p(e,t.right);if((0,a.E)(o)){if(!(0,a.z)(i))throw new a.a(e,a.r.ArrayAccessorMustBeNumber,t);if(i<0&&(i=o.length+i),i<0||i>o.length)throw new a.a(e,a.r.OutOfBounds,t);if(i===o.length){if("="!==t.operator)throw new a.a(e,a.r.OutOfBounds,t);o[i]=N(l,t.operator,o[i],t,e)}else o[i]=N(l,t.operator,o[i],t,e)}else if(o instanceof r.N){if(!1===(0,a.P)(i))throw new a.a(e,a.r.KeyAccessorMustBeString,t);if(!0===o.hasField(i))o.setField(i,N(l,t.operator,o.field(i),t,e));else{if("="!==t.operator)throw new a.a(e,a.r.FieldNotFound,t,{key:i});o.setField(i,N(l,t.operator,null,t,e))}}else if(o instanceof f){if(!1===(0,a.P)(i))throw new a.a(e,a.r.KeyAccessorMustBeString,t);if(!0!==o.hasGlobal(i))throw new a.a(e,a.r.ModuleExportNotFound,t);o.setGlobal(i,N(l,t.operator,await o.global(i),t,e))}else{if(!(0,a.U)(o))throw(0,a.X)(o)?new a.a(e,a.r.Immutable,t):new a.a(e,a.r.InvalidParameter,t);if(!1===(0,a.P)(i))throw new a.a(e,a.r.KeyAccessorMustBeString,t);if(!0===o.hasField(i))o.setField(i,N(l,t.operator,o.field(i),t,e));else{if("="!==t.operator)throw new a.a(e,a.r.FieldNotFound,t,{key:i});o.setField(i,N(l,t.operator,null,t,e))}}return a.M}const o=(0,r.e)(n);if(null!=e.localScope&&void 0!==e.localScope[o]){const n=await p(e,t.right);return e.localScope[o]={value:N(n,t.operator,e.localScope[o].value,t,e),valueset:!0,node:t.right},a.M}if(void 0!==e.globalScope[o]){const n=await p(e,t.right);return e.globalScope[o]={value:N(n,t.operator,e.globalScope[o].value,t,e),valueset:!0,node:t.right},a.M}throw new a.a(e,a.r.InvalidIdentifier,t)}async function k(e,t){const n=await p(e,t.expression);return n===a.M?a.M:new a.x(n)}async function E(e,t){const n=await p(e,t.test);if(!0===n)return h(e,t.consequent);if(!1===n)return null!==t.alternate?h(e,t.alternate):a.M;throw new a.a(e,a.r.BooleanConditionRequired,t)}async function P(e,t){return B(e,t,0)}async function B(e,t,n){if(n>=t.body.length)return a.M;const r=await h(e,t.body[n]);return r instanceof a.w||r===a.O||r===a.R||n===t.body.length-1?r:B(e,t,n+1)}async function L(e,t){if(null===t.argument)return new a.w(a.M);const n=await p(e,t.argument);return new a.w(n)}async function U(e,t){const n=(0,r.e)(t.id);return e.globalScope[n]={valueset:!0,node:null,value:new u(t,e)},a.M}async function K(e,t){const n=(0,r.e)(t.specifiers[0].local),o=e.libraryResolver.loadLibrary(n);let i;return e.libraryResolver._moduleSingletons?.has(o.uri)?i=e.libraryResolver._moduleSingletons.get(o.uri):(i=new f(o),await i.loadModule(e),e.libraryResolver._moduleSingletons?.set(o.uri,i)),e.globalScope[n]={value:i,valueset:!0,node:t},a.M}async function j(e,t){if(await h(e,t.declaration),"FunctionDeclaration"===t.declaration.type)e.exports[(0,r.e)(t.declaration.id)]="function";else if("VariableDeclaration"===t.declaration.type)for(const n of t.declaration.declarations)e.exports[(0,r.e)(n.id)]="variable";return a.M}async function D(e,t,n){return n>=t.declarations.length||(await Z(e,t.declarations[n]),n===t.declarations.length-1||await D(e,t,n+1)),a.M}async function Z(e,t){let n=null;if(n=null===t.init?null:await p(e,t.init),null!==e.localScope){if(n===a.M&&(n=null),"Identifier"!==t.id.type)throw new a.a(e,a.r.InvalidIdentifier,t);const o=(0,r.e)(t.id);return void(null!=e.localScope&&(e.localScope[o]={value:n,valueset:!0,node:t.init}))}if("Identifier"!==t.id.type)throw new a.a(e,a.r.InvalidIdentifier,t);const o=(0,r.e)(t.id);n===a.M&&(n=null),e.globalScope[o]={value:n,valueset:!0,node:t.init}}async function G(e,t){const n=await p(e,t.object);if(null===n)throw new a.a(e,a.r.MemberOfNull,t);if(!1===t.computed){if("Identifier"===t.property.type){if(n instanceof r.N||(0,a.U)(n))return n.field(t.property.name);if(n instanceof i.cH)return(0,r.b)(n,t.property.name,e,t);if(n instanceof f){if(!n.hasGlobal(t.property.name))throw new a.a(e,a.r.InvalidIdentifier,t);return n.global(t.property.name)}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}let o=await p(e,t.property);if(n instanceof r.N||(0,a.U)(n)){if((0,a.P)(o))return n.field(o);throw new a.a(e,a.r.InvalidMemberAccessKey,t)}if(n instanceof f){if((0,a.P)(o))return n.global(o);throw new a.a(e,a.r.InvalidMemberAccessKey,t)}if(n instanceof i.cH){if((0,a.P)(o))return(0,r.b)(n,o,e,t);throw new a.a(e,a.r.InvalidMemberAccessKey,t)}if((0,a.E)(n)){if((0,a.z)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length+o),o>=n.length||o<0)throw new a.a(e,a.r.OutOfBounds,t);return n[o]}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}if((0,a.X)(n)){if((0,a.z)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length()+o),o>=n.length()||o<0)throw new a.a(e,a.r.OutOfBounds,t);return n.get(o)}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}if((0,a.P)(n)){if((0,a.z)(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length+o),o>=n.length||o<0)throw new a.a(e,a.r.OutOfBounds,t);return n[o]}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}throw new a.a(e,a.r.InvalidMemberAccessKey,t)}async function q(e,t){const n=await p(e,t.argument);if((0,a.L)(n)){if("!"===t.operator)return!n;if("-"===t.operator)return-1*(0,a.h)(n);if("+"===t.operator)return 1*(0,a.h)(n);if("~"===t.operator)return~(0,a.h)(n);throw new a.a(e,a.r.UnsupportedUnaryOperator,t)}if("-"===t.operator)return-1*(0,a.h)(n);if("+"===t.operator)return 1*(0,a.h)(n);if("~"===t.operator)return~(0,a.h)(n);throw new a.a(e,a.r.UnsupportedUnaryOperator,t)}async function T(e,t){const n=[];for(let r=0;r<t.elements.length;r++)n.push(await p(e,t.elements[r]));for(let r=0;r<n.length;r++){if((0,a.v)(n[r]))throw new a.a(e,a.r.NoFunctionInArray,t);n[r]===a.M&&(n[r]=null)}return n}async function z(e,t){const n=await p(e,t.left),r=await p(e,t.right);switch(t.operator){case"|":case"<<":case">>":case">>>":case"^":case"&":return(0,a.I)((0,a.h)(n),(0,a.h)(r),t.operator);case"==":return(0,a.m)(n,r);case"!=":return!(0,a.m)(n,r);case"<":case">":case"<=":case">=":return(0,a.c)(n,r,t.operator);case"+":return(0,a.P)(n)||(0,a.P)(r)?(0,a.d)(n)+(0,a.d)(r):(0,a.h)(n)+(0,a.h)(r);case"-":return(0,a.h)(n)-(0,a.h)(r);case"*":return(0,a.h)(n)*(0,a.h)(r);case"/":return(0,a.h)(n)/(0,a.h)(r);case"%":return(0,a.h)(n)%(0,a.h)(r);default:throw new a.a(e,a.r.UnsupportedOperator,t)}}async function _(e,t){const n=await p(e,t.left);if(!(0,a.L)(n))throw new a.a(e,a.r.LogicalExpressionOnlyBoolean,t);switch(t.operator){case"||":{if(!0===n)return n;const r=await p(e,t.right);if((0,a.L)(r))return r;throw new a.a(e,a.r.LogicExpressionOrAnd,t)}case"&&":{if(!1===n)return n;const r=await p(e,t.right);if((0,a.L)(r))return r;throw new a.a(e,a.r.LogicExpressionOrAnd,t)}default:throw new a.a(e,a.r.LogicExpressionOrAnd,t)}}async function V(e,t){const n=(0,r.e)(t);if(null!=e.localScope&&void 0!==e.localScope[n]){const t=e.localScope[n];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=p(e,t.node);const r=await t.d;return t.value=r,t.valueset=!0,r}if(void 0!==e.globalScope[n]){const t=e.globalScope[n];if(!0===t.valueset)return t.value;if(null!==t.d)return t.d;t.d=p(e,t.node);const r=await t.d;return t.value=r,t.valueset=!0,r}throw new a.a(e,a.r.InvalidIdentifier,t)}async function W(e,t){if("MemberExpression"===t.callee.type){const n=await p(e,t.callee.object);if(!(n instanceof f))throw new a.a(e,a.r.FunctionNotFound,t);const r=!1===t.callee.computed?t.callee.property.name:await p(e,t.callee.property);if(!n.hasGlobal(r))throw new a.a(e,a.r.FunctionNotFound,t);const o=await n.global(r);if(!(0,a.v)(o))throw new a.a(e,a.r.CallNonFunction,t);return o.call(e,t)}if("Identifier"!==t.callee.type)throw new a.a(e,a.r.FunctionNotFound,t);const n=(0,r.e)(t.callee);if(null!=e.localScope&&void 0!==e.localScope[n]){const r=e.localScope[n];if((0,a.v)(r.value))return r.value.call(e,t);throw new a.a(e,a.r.CallNonFunction,t)}if(void 0!==e.globalScope[n]){const r=e.globalScope[n];if((0,a.v)(r.value))return r.value.call(e,t);throw new a.a(e,a.r.CallNonFunction,t)}throw new a.a(e,a.r.FunctionNotFound,t)}async function X(e,t){let n="",r=0;for(const o of t.quasis)if(n+=o.value?o.value.cooked:"",!1===o.tail){if(t.expressions[r]){const o=await p(e,t.expressions[r]);if((0,a.v)(o))throw new a.a(e,a.r.NoFunctionInTemplateLiteral,t);n+=(0,a.d)(o)}r++}return n}const H={};async function Y(e,t,n,r){const o=await p(e,t.arguments[n]);if((0,a.m)(o,r))return p(e,t.arguments[n+1]);const i=t.arguments.length-n;return 1===i?p(e,t.arguments[n]):2===i?null:3===i?p(e,t.arguments[n+2]):Y(e,t,n+2,r)}async function J(e,t,n,r){if(!0===r)return p(e,t.arguments[n+1]);if(t.arguments.length-n===3)return p(e,t.arguments[n+2]);const o=await p(e,t.arguments[n+2]);if(!1===(0,a.L)(o))throw new a.a(e,a.r.ModuleExportNotFound,t.arguments[n+2]);return J(e,t,n+2,o)}async function Q(e,t,n,o){const i=e.body;if(n.length!==e.params.length)throw new a.a(t,a.r.WrongNumberOfParameters,null);for(let a=0;a<n.length;a++){const o=e.params[a];"Identifier"===o.type&&null!=t.localScope&&(t.localScope[(0,r.e)(o)]={d:null,value:n[a],valueset:!0,node:null})}const l=await h(t,i);if(l instanceof a.w)return l.value;if(l===a.O)throw new a.a(t,a.r.UnexpectedToken,o);if(l===a.R)throw new a.a(t,a.r.UnexpectedToken,o);return l instanceof a.x?l.value:l}(0,r.C)(H,c),(0,r.X)(H,c),(0,r.M)(H,c),(0,r.L)(H,c),(0,r.f)(H,c),(0,o.registerFunctions)({functions:H,compiled:!1,signatures:null,evaluateIdentifier:null,mode:"async",standardFunction:c,standardFunctionAsync:w}),H.iif=async function(e,t){(0,a.i)(null===t.arguments?[]:t.arguments,3,3,e,t);const n=await p(e,t.arguments[0]);if(!1===(0,a.L)(n))throw new a.a(e,a.r.BooleanConditionRequired,t);return p(e,n?t.arguments[1]:t.arguments[2])},H.defaultvalue=async function(e,t){(0,a.i)(null===t.arguments?[]:t.arguments,2,3,e,t);const n=await p(e,t.arguments[0]);if(3===t.arguments.length){const a=await p(e,t.arguments[1]),o=(0,r.m)(n,a);return null!=o&&""!==o?o:p(e,t.arguments[2])}return null==n||""===n?p(e,t.arguments[1]):n},H.decode=async function(e,t){if(t.arguments.length<2)throw new a.a(e,a.r.WrongNumberOfParameters,t);if(2===t.arguments.length)return p(e,t.arguments[1]);if((t.arguments.length-1)%2==0)throw new a.a(e,a.r.WrongNumberOfParameters,t);return Y(e,t,1,await p(e,t.arguments[0]))},H.when=async function(e,t){if(t.arguments.length<3)throw new a.a(e,a.r.WrongNumberOfParameters,t);if(t.arguments.length%2==0)throw new a.a(e,a.r.WrongNumberOfParameters,t);const n=await p(e,t.arguments[0]);if(!1===(0,a.L)(n))throw new a.a(e,a.r.BooleanConditionRequired,t.arguments[0]);return J(e,t,0,n)};const $={fixSpatialReference:a.A,parseArguments:s,standardFunction:c,standardFunctionAsync:w,evaluateIdentifier:V};for(const ie in H)H[ie]={value:new a.e(H[ie]),valueset:!0,node:null};const ee=function(){};function te(e,t,n){const o=new ee;null==e&&(e={}),null==t&&(t={});const i=new r.N({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});i.immutable=!1,o.textformatting={value:i,valueset:!0,node:null};for(const r in t)o[r]={value:new a.e(t[r]),native:!0,valueset:!0,node:null};for(const l in e)o[l]={value:(0,a.H)(e[l])?r.D.createFromGraphic(e[l],n):e[l],valueset:!0,node:null};return o}function ne(e){console.log(e)}ee.prototype=H,ee.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},ee.prototype.pi={value:Math.PI,valueset:!0,node:null};const re=$;function ae(e){const t={mode:"async",compiled:!1,functions:{},signatures:[],standardFunction:c,standardFunctionAsync:w,evaluateIdentifier:V};for(let n=0;n<e.length;n++)e[n].registerFunctions(t);for(const n in t.functions)H[n]={value:new a.e(t.functions[n]),valueset:!0,node:null},ee.prototype[n]=H[n];for(let n=0;n<t.signatures.length;n++)(0,r.s)(t.signatures[n],"async")}async function oe(e,t){let n=t.spatialReference;null==n&&(n=new i.B({wkid:102100}));let o=null;e.usesModules&&(o=new r.a(new Map,e.loadedModules));const l=te(t.vars,t.customfunctions,t.timeZone),s={spatialReference:n,services:t.services,exports:{},libraryResolver:o,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:l,console:t.console??ne,timeZone:t.timeZone??null,lrucache:t.lrucache,interceptor:t.interceptor,localScope:null,depthCounter:{depth:1}},c=await P(s,e);if(c instanceof a.w||c instanceof a.x){const e=c.value;if(e===a.M)return null;if((0,a.v)(e))throw new a.a(s,a.r.IllegalResult,null);return e}if(c===a.M)return null;throw c===a.O||c===a.R?new a.a(s,a.r.IllegalResult,null):new a.a(s,a.r.NeverReach,null)}ae([r.p])}}]);
//# sourceMappingURL=8327.9b15d3c9.js.map