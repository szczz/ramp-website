"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3702],{52200:function(e,t,i){i.d(t,{D:function(){return l},F:function(){return a},H:function(){return o},a:function(){return s}});const s="Ramp-Hilight",a="Ramp-Hilight-Fog-Basemap",l={mode:"glow",options:{haloColor:[0,255,0],haloOpacity:.8}};var o=(e=>(e.NONE="none",e.GLOW="glow",e.LIFT="lift",e.FOG="fog",e))(o||{})},43702:function(e,t,i){i.r(t),i.d(t,{default:function(){return n}});var s=i(98503),a=i(52200);class l{id;name;template;priority;fields;componentId;constructor(e){const t={..."string"==typeof e?{id:e,template:"",name:"",priority:50}:e};({template:this.template,id:this.id,name:this.name,fields:this.fields,priority:this.priority}=t)}}const o="details";class r extends s.F{detailsStore=(0,s.g2)(this.$vApp.$pinia);get config(){return super.config}openDetails(e){e.forEach((e=>{this._loadDetailsConfig(this.$iApi.geo.layer.getLayer(e.uid))})),this.detailsStore.payload=e;const t=this.$iApi.panel.get("details");this.detailsStore.origin="identify",t.button.tooltip="details.layers.title.identifyOrigin",this.$iApi.panel.get("details").isOpen||this.$iApi.panel.open({id:"details"})}toggleFeature(e,t){const i=this.$iApi.panel.get("details");if(!1===t)return i.close(),void(this.detailsStore.currentFeatureId=void 0);const a=this.$iApi.geo.layer.getLayer(e.uid),l=`${e.uid}-${a?.supportsFeatures?e.data[a?.oidField??""]:JSON.stringify(e.data)}`;if(i.isOpen&&l===this.detailsStore.currentFeatureId&&!0!==t)return i.close(),void(this.detailsStore.currentFeatureId=void 0);this.detailsStore.origin="toggleEvent",i.button.tooltip="details.layers.title.gridOrigin",this.detailsStore.currentFeatureId=l,this._loadDetailsConfig(a);const o={items:[s.g3.makeRawItem(e.format,e.data)],uid:e.uid,layerId:e.layerId||a?.id||"error-not-found",loading:Promise.resolve(),loaded:!0,errored:!1,requestTime:Date.now()};this.detailsStore.payload=[o],i.isOpen||i.open()}_parseConfig(e){e&&e.templates&&(this.detailsStore.defaultTemplates=e.templates),this.handlePanelWidths(["details"]),this.handlePanelTeleports(["details"]);const t=this.getLayerFixtureConfigs(),i=[];Object.keys(t).forEach((e=>{i.push({id:e,name:t[e].name,template:t[e].template,fields:t[e].fields,priority:t[e].priority??50})}));const s=i.map((e=>new l(e)));this.detailsStore.properties=s.reduce(((e,t)=>(e[t.id]=t,e)),{}),this._validateItems()}_loadDetailsConfig(e){if(e&&void 0===this.detailsStore.properties[e.id]){const t=this.getLayerFixtureConfigs()[e.id];t&&this.detailsStore.addConfigProperty({id:e.id,name:t.name,template:t.template,fields:t.fields,priority:t.priority??50})}}_validateItems(){Object.values(this.detailsStore.properties).forEach((e=>{e.template in this.$vApp.$options.components&&(this.detailsStore.properties[e.id].componentId=e.template)}))}async hilightDetailsItems(e,t){const i=e instanceof Array?e:[e],s=this.$iApi.fixture.get("hilight");if(s){const e=await s.getGraphicsByKey(o);await s.removeHilight(e);const a=Date.now();this.detailsStore.lastHilight=a;const l=await this.getHilightGraphics(i,t);this.detailsStore.lastHilight===a&&(await s.addHilight(l),this.detailsStore.lastHilight!==a&&s.removeHilight(l))}}async removeDetailsHilight(){const e=this.$iApi.fixture.get("hilight");if(e){this.detailsStore.lastHilight=Date.now();const t=await e.getGraphicsByKey(o);await e.removeHilight(t)}}async reloadDetailsHilight(e,t){const i=e instanceof Array?e:[e],s=this.$iApi.fixture.get("hilight");if(s){const e=await this.getHilightGraphics(i,t);s.reloadHilight(e)}}async getHilightGraphics(e,t){const i=this.$iApi.geo.layer.getLayer(t),s=this.$iApi.fixture.get("hilight"),a=[];return i&&await Promise.all(e.map((async e=>{await e.loading;const l=e.data[i.oidField],r=await i.getGraphic(l,{getGeom:!0,getAttribs:!0,getStyle:!0});r.id=s.constructGraphicKey(o,t,l),a.push(r)}))),a}onHilightToggle(e,t,i){this.detailsStore.hilightToggle=e,e&&t&&i?this.hilightDetailsItems(t,i):e||this.removeDetailsHilight()}hasHilighter(){const e=this.$iApi.fixture.get("hilight");return e&&e.hilightMode.mode!==a.H.NONE}}const d={en:{"details.layers.title.identifyOrigin":"Identify Details","details.layers.title.gridOrigin":"Details","details.layers.found":"Found {numResults} results in {numLayers} layers","details.layers.loading":"The layer is loading...","details.layers.error":"Error","details.layers.results.empty":"No results found for any layer.","details.layers.results.empty.currentLayer":"No results found for the selected layer.","details.layers.results.empty.noLayers":"No layers for identification.","details.layers.results.list.tooltip":"Use the arrow keys to navigate the items","details.result.default.name":"Identify Item {0}","details.loading":"Loading...","details.items.title":"Details","details.items.range":"{0} - {1} of {2}","details.items.next":"Next page","details.items.previous":"Previous page","details.items.page":"Items per page","details.item.see.list":"See List","details.item.zoom":"Zoom to feature","details.item.zoom.zooming":"Zooming...","details.item.zoom.error":"Zoom failed","details.item.zoom.zoomed":"Zoomed","details.item.previous.item":"Previous item","details.item.next.item":"Next item","details.item.count":"{0} of {1}","details.item.loading":"Loading results...","details.item.no.data":"No data to show because the layer has been removed","details.item.alert.zoom":"Zoomed into feature","details.item.alert.show.item":"Showing result {itemName}","details.item.alert.show.list":"Showing all results for {layerName}","details.item.alert.defaultAltText":"Image associated with {alias} field","details.togglehilight.title":"Toggle Highlight","details.item.open":"Expand","details.item.collapse":"Collapse"},fr:{"details.layers.title.identifyOrigin":"Identifier les détails","details.layers.title.gridOrigin":"Détails","details.layers.found":"{numResults} résultats trouvés dans {numLayers} couches","details.layers.loading":"La couche est en cours de chargement...","details.layers.error":"Erreur","details.layers.results.empty":"Aucun résultat trouvé pour aucune couche.","details.layers.results.empty.currentLayer":"Aucun résultat trouvé pour la couche sélectionnée.","details.layers.results.empty.noLayers":"Pas de couches pour l'identification.","details.layers.results.list.tooltip":"Utilisez les touches fléchées pour naviguer entre les éléments","details.result.default.name":"Désigner l'élément {0}","details.loading":"Chargement en cours...","details.items.title":"Détails","details.items.range":"{0} - {1} de {2}","details.items.next":"Page suivante","details.items.previous":"Page précédente","details.items.page":"éléments par page","details.item.see.list":"Voir la liste","details.item.zoom":"Zoom à l'élément","details.item.zoom.zooming":"Zoom en cours...","details.item.zoom.error":"Échec du zoom","details.item.zoom.zoomed":"Zoom terminé","details.item.previous.item":"Élément précédent","details.item.next.item":"Élément suivant","details.item.count":"{0} de {1}","details.item.loading":"Chargement des résultats...","details.item.no.data":"Aucune donnée à afficher","details.item.alert.zoom":"Zoom sur la caractéristique","details.item.alert.show.item":"Affichage du résultat {itemName}","details.item.alert.show.list":"Affichage de tous les résultats pour {layerName}","details.item.alert.defaultAltText":"Image associée au champ {alias}","details.togglehilight.title":"Basculer vers l'élément principal","details.item.open":"Développer","details.item.collapse":"Réduire"}};class n extends r{async added(){this.$iApi.panel.register({details:{screens:{"details-screen":()=>(0,s.f6)(i.e(5196).then(i.bind(i,65196)))},style:{width:"425px"},button:{tooltip:"details.layers.title.identifyOrigin",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none" /><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z" /></svg>'},alertName:"details.items.title"}},{i18n:{messages:d}}),this._parseConfig(this.config);const e=this.$vApp.$watch((()=>this.config),(e=>this._parseConfig(e)));this.removed=()=>{e(),this.$iApi.panel.remove("details"),this.$iApi.fixture.exists("appbar")&&(0,s.f7)(this.$vApp.$pinia).removeButton("details"),(0,s.g2)(this.$vApp.$pinia).$reset()}}}}}]);
//# sourceMappingURL=3702.5dae43f9.js.map