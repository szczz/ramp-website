"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3658,8252],{904:function(e,t,r){r.d(t,{d:function(){return l}});var n,o=r(98503),i=r(98089);const s=new o.ax({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let a=n=class extends o.v{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=o.B.fromJSON(t.spatialReference),n=[];for(let i=0;i<e.length;i++){const t=e[i],s=o.b1.fromJSON(t),a=t.geometry?.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=r);const l=t.aggregateGeometries,p=s.aggregateGeometries;if(l&&null!=p)for(const e in p){const t=p[e],n=l[e],o=n?.spatialReference;null==t||o||(t.spatialReference=r)}n.push(s)}return n}writeGeometryType(e,t,r,n){if(e)return void s.write(e,t,r,n);const{features:o}=this;if(o)for(const i of o)if(null!=i?.geometry)return void s.write(i.geometry.type,t,r,n)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,n=(0,o.b3)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=o.B.fromJSON(t.spatialReference)),n}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const n of r)if(n&&null!=n.geometry&&n.geometry.spatialReference)return void(t.spatialReference=n.geometry.spatialReference.toJSON())}clone(){return new n(this.cloneProperties())}cloneProperties(){return(0,o.f)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const n=t.features[r];if(n.geometry){const t=e?.[r];n.geometry=t?.toJSON()||n.geometry}}return t}quantize(e){const{scale:[t,r],translate:[n,o]}=e,i=e=>Math.round((e-n)/t),s=e=>Math.round((o-e)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,i,s);for(let p=0,u=a.length;p<u;p++)l?.(a[p].geometry)||(a.splice(p,1),p--,u--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[n,o],scale:[i,s]}=r,a=e=>e*i+n,l=e=>o-e*s;let p=null,u=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;p=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;u=r=>null==r?r:r*t+e}const c=this._getHydrationFunction(e,a,l,p,u);for(const{geometry:d}of t)null!=d&&c&&c(d);return this.transform=null,this}_quantizePoints(e,t,r){let n,o;const i=[];for(let s=0,a=e.length;s<a;s++){const a=e[s];if(s>0){const e=t(a[0]),s=r(a[1]);e===n&&s===o||(i.push([e-n,s-o]),n=e,o=s)}else n=t(a[0]),o=r(a[1]),i.push([n,o])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const n=(0,o.a9)(e)?e.rings:e.paths,i=[];for(let o=0,s=n.length;o<s;o++){const e=n[o],s=this._quantizePoints(e,t,r);s&&i.push(s)}return i.length>0?((0,o.a9)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const n=this._quantizePoints(e.points,t,r);return n&&n.length>0?(e.points=n,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,n,i){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?e=>{const s=(0,o.a9)(e)?e.rings:e.paths;let a,l;for(let n=0,o=s.length;n<o;n++){const e=s[n];for(let n=0,o=e.length;n<o;n++){const o=e[n];n>0?(a+=o[0],l+=o[1]):(a=o[0],l=o[1]),o[0]=t(a),o[1]=r(l)}}if(n&&i)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=n(r[2]),r[3]=i(r[3])}}else if(n)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=n(r[2])}}else if(i)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=i(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const o=e.points;let s,a;for(let n=0,i=o.length;n<i;n++){const e=o[n];n>0?(s+=e[0],a+=e[1]):(s=e[0],a=e[1]),e[0]=t(s),e[1]=r(a)}if(n&&i)for(let t=0,r=o.length;t<r;t++){const e=o[t];e[2]=n(e[2]),e[3]=i(e[3])}else if(n)for(let t=0,r=o.length;t<r;t++){const e=o[t];e[2]=n(e[2])}else if(i)for(let t=0,r=o.length;t<r;t++){const e=o[t];e[2]=i(e[2])}}:null}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],a.prototype,"displayFieldName",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"exceededTransferLimit",void 0),(0,o.k)([(0,o.o)({type:[o.b1],json:{write:!0}})],a.prototype,"features",void 0),(0,o.k)([(0,o.u)("features")],a.prototype,"readFeatures",null),(0,o.k)([(0,o.o)({type:[i.y],json:{write:!0}})],a.prototype,"fields",void 0),(0,o.k)([(0,o.o)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:s.read}}})],a.prototype,"geometryType",void 0),(0,o.k)([(0,o.q)("geometryType")],a.prototype,"writeGeometryType",null),(0,o.k)([(0,o.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"hasM",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],a.prototype,"hasZ",void 0),(0,o.k)([(0,o.o)({types:o.b2,json:{write:!0}})],a.prototype,"queryGeometry",void 0),(0,o.k)([(0,o.u)("queryGeometry")],a.prototype,"readQueryGeometry",null),(0,o.k)([(0,o.o)({type:o.B,json:{write:!0}})],a.prototype,"spatialReference",void 0),(0,o.k)([(0,o.q)("spatialReference")],a.prototype,"writeSpatialReference",null),(0,o.k)([(0,o.o)({json:{write:!0}})],a.prototype,"transform",void 0),a=n=(0,o.k)([(0,o.A)("esri.rest.support.FeatureSet")],a),a.prototype.toJSON.isDefaultToJSON=!0;const l=a},98089:function(e,t,r){r.r(t),r.d(t,{F:function(){return x},a:function(){return d},i:function(){return v},n:function(){return b},p:function(){return s},y:function(){return E}});var n,o=r(98503),i=r(22555);let s=n=class extends o.v{constructor(e){super(e),this.name=null,this.code=null}clone(){return new n({name:this.name,code:this.code})}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],s.prototype,"name",void 0),(0,o.k)([(0,o.o)({type:[String,Number],json:{write:!0}})],s.prototype,"code",void 0),s=n=(0,o.k)([(0,o.A)("esri.layers.support.CodedValue")],s);const a=new o.ax({inherited:"inherited",codedValue:"coded-value",range:"range"});let l=class extends o.v{constructor(e){super(e),this.name=null,this.type=null}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],l.prototype,"name",void 0),(0,o.k)([(0,o.bk)(a)],l.prototype,"type",void 0),l=(0,o.k)([(0,o.A)("esri.layers.support.Domain")],l);const p=l;var u;let c=u=class extends p{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new u({codedValues:(0,o.f)(this.codedValues),name:this.name})}};(0,o.k)([(0,o.o)({type:[s],json:{write:!0}})],c.prototype,"codedValues",void 0),(0,o.k)([(0,o.bk)({codedValue:"coded-value"})],c.prototype,"type",void 0),c=u=(0,o.k)([(0,o.A)("esri.layers.support.CodedValueDomain")],c);const d=c;var y;let h=y=class extends p{constructor(e){super(e),this.type="inherited"}clone(){return new y}};(0,o.k)([(0,o.bk)({inherited:"inherited"})],h.prototype,"type",void 0),h=y=(0,o.k)([(0,o.A)("esri.layers.support.InheritedDomain")],h);const m=h;var f;let g=f=class extends p{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new f({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,o.k)([(0,o.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],g.prototype,"maxValue",void 0),(0,o.k)([(0,o.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],g.prototype,"minValue",void 0),(0,o.k)([(0,o.bk)({range:"range"})],g.prototype,"type",void 0),g=f=(0,o.k)([(0,o.A)("esri.layers.support.RangeDomain")],g);const w=g,b={key:"type",base:p,typeMap:{range:w,"coded-value":d,inherited:m}};function v(e){if(!e?.type)return null;switch(e.type){case"range":return w.fromJSON(e);case"codedValue":return d.fromJSON(e);case"inherited":return m.fromJSON(e)}return null}var k;const T=new o.ax({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let S=k=class extends o.v{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?T.fromJSON(r.fieldValueType):null}clone(){return new k({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],S.prototype,"alias",void 0),(0,o.k)([(0,o.o)({type:[String,Number],json:{write:{allowNull:!0}}})],S.prototype,"defaultValue",void 0),(0,o.k)([(0,o.o)()],S.prototype,"description",void 0),(0,o.k)([(0,o.u)("description")],S.prototype,"readDescription",null),(0,o.k)([(0,o.o)({types:b,json:{read:{reader:v},write:!0}})],S.prototype,"domain",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],S.prototype,"editable",void 0),(0,o.k)([(0,o.o)({type:o.bp,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],S.prototype,"length",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],S.prototype,"name",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],S.prototype,"nullable",void 0),(0,o.k)([(0,o.bk)(i.i)],S.prototype,"type",void 0),(0,o.k)([(0,o.o)()],S.prototype,"valueType",void 0),(0,o.k)([(0,o.u)("valueType",["description"])],S.prototype,"readValueType",null),(0,o.k)([(0,o.o)({type:Boolean,json:{read:!1}})],S.prototype,"visible",void 0),S=k=(0,o.k)([(0,o.A)("esri.layers.support.Field")],S);const E=S,x=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}))},87654:function(e,t,r){r.d(t,{c:function(){return s},l:function(){return i},n:function(){return o}});var n=r(98503);let o=class extends n.V{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(n.V.ofType(this.itemType.Type))(e):new n.V(e)}};function i(e,t){return{type:e,cast:n.cX,set(r){const o=(0,n.cW)(r,this._get(t),e);o.owner=this,this._set(t,o)}}}(0,n.k)([(0,n.o)()],o.prototype,"owner",null),o=(0,n.k)([(0,n.A)("esri.core.support.OwningCollection")],o);let s=class extends o{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};(0,n.k)([(0,n.ee)({Type:n.b1,ensureType:(0,n.ef)(n.b1)})],s.prototype,"itemType",void 0),s=(0,n.k)([(0,n.A)("esri.support.GraphicsCollection")],s)},14367:function(e,t,r){r.r(t),r.d(t,{default:function(){return u}});var n=r(98503),o=r(87654),i=r(28252),s=r(50027),a=r(83424),l=r(39394);let p=class extends((0,s.l)((0,a.t)(i.f))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new o.c,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,n.k)([(0,n.o)({type:l.h})],p.prototype,"elevationInfo",void 0),(0,n.k)([(0,n.o)((0,o.l)(o.c,"graphics"))],p.prototype,"graphics",void 0),(0,n.k)([(0,n.o)({type:["show","hide"]})],p.prototype,"listMode",void 0),(0,n.k)([(0,n.o)()],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],p.prototype,"type",void 0),(0,n.k)([(0,n.o)({constructOnly:!0})],p.prototype,"internal",void 0),p=(0,n.k)([(0,n.A)("esri.layers.GraphicsLayer")],p);const u=p},95134:function(e,t,r){r.d(t,{A:function(){return ge},E:function(){return Ee},F:function(){return we},L:function(){return ie},R:function(){return be},a:function(){return te},b:function(){return se},c:function(){return q},d:function(){return A},e:function(){return $},f:function(){return ee},g:function(){return M},h:function(){return ne},i:function(){return V},m:function(){return oe},n:function(){return L},o:function(){return z},r:function(){return C},s:function(){return Q},t:function(){return _},u:function(){return Le},v:function(){return re}});var n=r(98503),o=r(49555),i=r(45121),s=r(75934),a=(r(14367),r(50850)),l=r(4665),p=r(13193),u=(r(61140),r(47509)),c=r(88012),d=r(35271),y=r(28252),h=r(82592),m=r(92611),f=r(98485),g=r(86477),w=r(50027),b=r(29821),v=r(83043),k=r(45975),T=r(63125),S=r(83424),E=r(47603),x=r(20014),I=r(98089),R=r(70309),j=r(75863),N=r(904),D=r(43338);const A="ESRI__ID",_="ESRI__OriginID",C="ESRI__DestID",L="ESRI__LayoutGeometry",M="ESRI__AggregationCount",O="LC.ESRI__IsSpatial",F={initializeLayersFromClientData:async(e,t)=>{if(t||(t=[...e.layers,...e.tables].map((e=>e.graphTypeName))),0===t?.length)return;const r=new Map;for(const o of t)r.set(o,P(e,o));const n=await(0,a.W)(e.dataManager.knowledgeGraph,Array.from(r.values()));for(const o of[...e.layers,...e.tables]){const t=o.objectType.name;if(null===t)continue;const r=n.get(P(e,t));if(r){const e=JSON.parse(r);null===e||"object"!=typeof e||e.hasOwnProperty("showLabels")||(e.showLabels=!1),o.read(e,{origin:"service"})}}}},P=(e,t)=>"knowledge-graph"===e.type?`${t}/Map`:`${t}/LinkChart/LinkChartSubLayer`;async function q(e,t){return F.initializeLayersFromClientData(e,t)}let B,V=class e{constructor(){this._featureLookup=new Map}static getInstance(){return e.instance||(e.instance=new e),e.instance}static resetInstance(){e.instance&&(e.instance=null)}deleteFromStore(e){e.forEach((e=>{this._featureLookup.delete(e)}))}readFromStoreByList(e){const t=[];return e.forEach((e=>{const r=this.readFromStoreById(e);r&&t.push(r)})),t}readFromStoreById(e){return this._featureLookup.get(e)??null}writeToStore(e,t,r){const o=[];return e.forEach((e=>{if(!e?.id)return;e.properties||(e.properties=[]);let a,l=null;if(r&&e.properties[r]&&(l=(0,i.o)(e.properties[r])),"originId"in e&&"destinationId"in e&&(e.properties[_]=e.originId,e.properties[C]=e.destinationId),e.properties[t]=e.id,e.id&&this._featureLookup.has(e.id)&&this._featureLookup.get(e.id).attributes){const o=this._featureLookup.get(e.id),i=JSON.parse(JSON.stringify(Object.assign(o.attributes,e.properties)));r&&e.properties[r]&&(i[r]=(0,n.b3)(e.properties[r])),a=new s.e(l?JSON.parse(JSON.stringify(l)):o?.geometry?JSON.parse(JSON.stringify(o.geometry)):null,i,null,e.properties[t])}else a=new s.e(l?JSON.parse(JSON.stringify(l)):null,e.properties,null,e.properties[t]);this._featureLookup.set(`${e.typeName?`${e.typeName}__${e.id}`:e.id}`,a),o.push(a)})),o}},G=null;function $(){return B||(B=r.e(4332).then(r.bind(r,4332)).then((e=>e.l)).then((({default:e})=>e({locateFile:e=>(0,n.eK)(`esri/libs/linkchartlayout/${e}`)}))).then((e=>{U(e)})),B)}function U(e){G=e}var Q,z,H,J;function W(e){const t=Object.keys(H).filter((e=>isNaN(parseInt(e,10)))).indexOf(e.timeDirection),r=Object.keys(J).filter((e=>isNaN(parseInt(e,10)))).indexOf(e.eventsTicksVisualization);return{timeDirection:{value:t>-1?t:H.right},timeBannerUTCOffsetInMinutes:e.timeBannerUTCOffsetInMinutes,eventsTicksVisualization:{value:r>-1?r:J.startAndEnd},showDurationLineForNonZeroDurationEntityEvents:e.showDurationLineForNonZeroDurationEntityEvents,durationLineWidth:e.durationLineWidth,entityPositionAtDurationRatio:e.entityPositionAtDurationRatio,showNonZeroDurationIntervalBounds:e.showNonZeroDurationIntervalBounds,separateTimeOverlaps:e.separateTimeOverlaps,separateTimelineOverlaps:e.separateTimelineOverlaps,moveFirstBends:e.moveFirstBends,secondBendRatio:e.secondBendRatio,lineSeparationMultiplier:e.lineSeparationMultiplier,spaceSeparatedLinesEvenly:e.spaceSeparatedLinesEvenly,useBezierCurves:e.useBezierCurves,separatedLineShapeRatio:e.separatedLineShapeRatio}}function Z(e,t,r,n,o,i){const s=r.length,a=o.length,l=Float64Array.BYTES_PER_ELEMENT,p=Uint32Array.BYTES_PER_ELEMENT,u=Uint8Array.BYTES_PER_ELEMENT,c=16,d=c+s*(u+2*l)+a*(2*p),y=G._malloc(d);try{const u=y+c-y%c,d=u+s*l,h=d+s*l,m=h+a*p,f=m+a*p,g=()=>[G.HEAPF64.subarray(u>>3,(u>>3)+s),G.HEAPF64.subarray(d>>3,(d>>3)+s),G.HEAPU32.subarray(h>>2,(h>>2)+a),G.HEAPU32.subarray(m>>2,(m>>2)+a),G.HEAPU8.subarray(f,f+s)],[w,b,v,k,T]=g();w.set(r),b.set(n),v.set(o),k.set(i),T.set(t);let S=e(s,f,u,d,a,h,m),E=null,x=null;if(S){const e=G.getLayoutLinksTypes(),t=G.getLayoutLinksVerticesEndIndices(),r=G.getLayoutLinksVertices(),n=G.countLayoutLinksVertices();!a||e&&t?n&&!r?S=!1:(E={types:new Uint8Array(G.HEAPU8.subarray(e,e+a)),vertexEndIndex:new Uint32Array(G.HEAPU32.subarray(t>>2,(t>>2)+a)),vertices:new Float64Array(G.HEAPF64.subarray(r>>3,(r>>3)+2*n))},x=G.getAuxiliaryGraphicElements()):S=!1}const[I,R,j,N,D]=g();return r.set(I),n.set(R),o.set(j),i.set(N),t.set(D),{success:S,links:E,graphics:x}}finally{G._free(y),G.cleanupLayout()}}(function(e){e[e.None=0]="None",e[e.IsMovable=1]="IsMovable",e[e.IsGeographic=2]="IsGeographic",e[e.IsRoot=4]="IsRoot",e[e.IsOld=8]="IsOld"})(Q||(Q={})),function(e){e[e.Regular=0]="Regular",e[e.Curved=1]="Curved",e[e.Recursive=2]="Recursive"}(z||(z={})),function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.top=2]="top",e[e.bottom=3]="bottom"}(H||(H={})),function(e){e[e.none=0]="none",e[e.startOnly=1]="startOnly",e[e.startAndEnd=2]="startAndEnd"}(J||(J={}));const Y=2,K=1,X=-1;var ee,te,re,ne,oe,ie,se,ae,le,pe,ue,ce,de,ye,he,me;function fe(e){if(!e.spatialReference.isWGS84)throw new n.s("knowledge-graph:layer-support-utils","The extentToInBoundsRings function only supports WGS84 spatial references.");return e.clone().normalize().map((e=>[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]))}async function ge(e,t){const r=[],n=new Map,o=[];if(t.dataModel?.relationshipTypes)for(const i of t.dataModel.relationshipTypes)i.name&&n.set(i.name,[]);for(const i of e)n.has(i.typeName)&&n.get(i.typeName)?.push(i.id);for(const[i,s]of n){if(s.length<1)continue;const e=new l.s({openCypherQuery:`MATCH (n)-[r:${i}]->(m) WHERE id(r) in $ids RETURN id(n), labels(n)[0], id(m), labels(m)[0]`,bindParameters:{ids:s}});o.push((0,a.M)(t,e).then((async e=>{const t=e.resultRowsStream.getReader();for(;;){const{done:e,value:n}=await t.read();if(e)break;for(const t of n)r.push({id:t[0],typeName:t[1]}),r.push({id:t[2],typeName:t[3]})}})))}return await Promise.all(o),r}async function we(e,t){t??=!1;const r={generateAllSublayers:t,namedTypeDefinitions:new Map};return await ke(e).then((e=>{Se(e,r)})),r}async function be(e){const t=await(0,a.r)(),r=new t.MapOfObjectIdentifierSets;ve(r,t,e);const o=new t.MapOfObjectIdentifierSetsEncoder;try{o.set_map_of_identifier_sets(r),o.encode();const e=o.get_encoding_result();if(0!==e.error.error_code)throw new n.s("knowledge-graph:layer-support-utils",e.error.error_message);const t=structuredClone(e.get_byte_buffer());return o.delete(),t}finally{r.delete()}}function ve(e,t,r){for(const[n,o]of r.namedTypeDefinitions){if(!o.members||o.useAllData)continue;const r=o.members.keys();let i=!1,s=!0;const a=new t.ObjectIdArray,l=new t.StringArray,p=new t.GlobalIdArray,u=new t.IdentifierArray,c=new t.ObjectIdentifierSet;for(const e of r)s&&(i=!isNaN(Number(e)),s=!1),i?a.add_objectid(Number(e)):(l.add_string(e),p.add_globalid(e)),u.add_identifier(e);c.set_oid_array(a),c.set_string_array(l),c.set_globalid_array(p),c.set_identifier_array(u),a.delete(),l.delete(),p.delete(),u.delete(),e.put_identifier_set(n,c),c.delete()}return e}async function ke(e){const t=await(0,n.U)(e,{responseType:"array-buffer"}),r=await t.data;return Te(new Uint8Array(r))}async function Te(e){const t=new((await(0,a.r)()).MapOfObjectIdentifierSetsDecoder),r=t.decode(new Uint8Array(e)),o=new Map;if(0!==r.error_code)throw new n.s("knowledge-graph:layer-support-utils",r.error_message);const i=t.get_map_of_identifier_sets(),s=i.keys,l=s.size();for(let a=0;a<l;a++){const e=s.get(a),t=i.query_identifier_set(e),r=[];if(t.id_array_type.value===me.GLOBALID_ARRAY){const e=t.get_globalid_array(),n=e.count();for(let t=0;t<n;t++)r.push(e.get_globalid_at(t))}else if(t.id_array_type.value===me.IDENTIFIER_ARRAY){const e=t.get_identifier_array(),n=e.count();for(let t=0;t<n;t++)r.push(e.get_identifier_at(t).toString())}else if(t.id_array_type.value===me.STRING_ARRAY){const e=t.get_string_array(),n=e.count();for(let t=0;t<n;t++)r.push(e.get_string_at(t))}else{if(t.id_array_type.value!==me.OID_ARRAY)throw new n.s("knowledge-graph:layer-support-utils","Tried to encode an unexpected ID Array type.");{const e=t.get_oid_array(),n=e.count();for(let t=0;t<n;t++)r.push(e.get_objectid_at(t).toString())}}o.set(e,r)}return t.delete(),o}function Se(e,t){for(const[r,o]of e){const e=(0,n.ao)(t.namedTypeDefinitions,r,(()=>({useAllData:!1,members:new Map})));for(const t of o)e.members.has(t)||e.members.set(t,{id:t})}return t}(function(e){function t(){return G.getMinIdealEdgeLength()}function r(e,t,r,n,o,i=Y,s=K,a=X){return Z(((e,t,r,n,o,l,p)=>G.applyForceDirectedLayout(e,t,r,n,o,l,p,i,s,a)),e,t,r,n,o)}e.getMinIdealEdgeLength=t,e.apply=r})(ee||(ee={})),function(e){function t(e,t,r,n,o,i=Y,s=K,a=X){return Z(((e,t,r,n,o,l,p)=>G.applyCommunityLayout(e,t,r,n,o,l,p,i,s,a)),e,t,r,n,o)}e.apply=t}(te||(te={})),function(e){function t(e,t,r,n,o){return Z(G.applySimpleLayout,e,t,r,n,o)}e.apply=t}(re||(re={})),function(e){function t(e,t,r,n,o){return Z(G.applyHierarchicalLayout,e,t,r,n,o)}e.apply=t}(ne||(ne={})),function(e){function t(e,t,r,n,o){return Z(G.applyRadialTreeLayout,e,t,r,n,o)}e.apply=t}(oe||(oe={})),function(e){function t(e,t,r,n,o){return Z(G.applySmartTreeLayout,e,t,r,n,o)}e.apply=t}(ie||(ie={})),function(e){function t(e,t,r,n,o,i,s,a,l,p,u){const c={timeDirection:H.right,timeBannerUTCOffsetInMinutes:0,eventsTicksVisualization:J.startAndEnd,showDurationLineForNonZeroDurationEntityEvents:!0,durationLineWidth:5,entityPositionAtDurationRatio:1,showNonZeroDurationIntervalBounds:!1,separateTimeOverlaps:!0,separateTimelineOverlaps:!0,moveFirstBends:!0,secondBendRatio:.3,lineSeparationMultiplier:1,spaceSeparatedLinesEvenly:!1,useBezierCurves:!1,separatedLineShapeRatio:0};return Z(((e,t,r,i,s,d,y)=>{if(n.length!==e||o.length!==e||a.length!==s||l.length!==s)return!1;const h=Float64Array.BYTES_PER_ELEMENT,m=16,f=G._malloc(m+e*h),g=G._malloc(m+e*h),w=G._malloc(m+s*h),b=G._malloc(m+s*h),v=f+m-f%m,k=g+m-g%m,T=w+m-w%m,S=b+m-b%m;try{G.HEAPF64.subarray(v>>3,(v>>3)+e).set(n),G.HEAPF64.subarray(k>>3,(k>>3)+e).set(o),G.HEAPF64.subarray(T>>3,(T>>3)+s).set(a),G.HEAPF64.subarray(S>>3,(S>>3)+s).set(l);const h=W(Object.assign(c,u));return G.applyChronologicalLayout(e,t,r,i,v,k,s,d,y,T,S,p,h)}finally{G._free(f),G._free(g),G._free(w),G._free(b)}}),e,t,r,i,s)}e.apply=t}(se||(se={})),function(e){e[e.Undirected=0]="Undirected",e[e.Directed=1]="Directed",e[e.Reversed=2]="Reversed"}(ae||(ae={})),function(e){e[e.ByCC_Raw=0]="ByCC_Raw",e[e.ByCC_NormalizeGlobally=1]="ByCC_NormalizeGlobally",e[e.ByCC_NormalizeByCC=2]="ByCC_NormalizeByCC"}(le||(le={})),function(e){e.ELEMENTUID="ELEMENTUID",e.TYPENAME="TYPENAME"}(pe||(pe={})),pe.ELEMENTUID,pe.TYPENAME,function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME"}(ue||(ue={})),function(e){e[e.ELEMENTUID=0]="ELEMENTUID",e[e.TYPENAME=1]="TYPENAME",e[e.FROMUID=2]="FROMUID",e[e.TOUID=3]="TOUID"}(ce||(ce={})),function(e){e[e.featureResult=0]="featureResult",e[e.countResult=1]="countResult",e[e.idsResult=2]="idsResult"}(de||(de={})),function(e){e[e.upperLeft=0]="upperLeft",e[e.lowerLeft=1]="lowerLeft"}(ye||(ye={})),function(e){e[e.sqlTypeBigInt=0]="sqlTypeBigInt",e[e.sqlTypeBinary=1]="sqlTypeBinary",e[e.sqlTypeBit=2]="sqlTypeBit",e[e.sqlTypeChar=3]="sqlTypeChar",e[e.sqlTypeDate=4]="sqlTypeDate",e[e.sqlTypeDecimal=5]="sqlTypeDecimal",e[e.sqlTypeDouble=6]="sqlTypeDouble",e[e.sqlTypeFloat=7]="sqlTypeFloat",e[e.sqlTypeGeometry=8]="sqlTypeGeometry",e[e.sqlTypeGUID=9]="sqlTypeGUID",e[e.sqlTypeInteger=10]="sqlTypeInteger",e[e.sqlTypeLongNVarchar=11]="sqlTypeLongNVarchar",e[e.sqlTypeLongVarbinary=12]="sqlTypeLongVarbinary",e[e.sqlTypeLongVarchar=13]="sqlTypeLongVarchar",e[e.sqlTypeNChar=14]="sqlTypeNChar",e[e.sqlTypeNVarChar=15]="sqlTypeNVarChar",e[e.sqlTypeOther=16]="sqlTypeOther",e[e.sqlTypeReal=17]="sqlTypeReal",e[e.sqlTypeSmallInt=18]="sqlTypeSmallInt",e[e.sqlTypeSqlXml=19]="sqlTypeSqlXml",e[e.sqlTypeTime=20]="sqlTypeTime",e[e.sqlTypeTimestamp=21]="sqlTypeTimestamp",e[e.sqlTypeTimestamp2=22]="sqlTypeTimestamp2",e[e.sqlTypeTinyInt=23]="sqlTypeTinyInt",e[e.sqlTypeVarbinary=24]="sqlTypeVarbinary",e[e.sqlTypeVarchar=25]="sqlTypeVarchar"}(he||(he={})),function(e){e[e.OID_ARRAY=0]="OID_ARRAY",e[e.GLOBALID_ARRAY=1]="GLOBALID_ARRAY",e[e.STRING_ARRAY=2]="STRING_ARRAY",e[e.IDENTIFIER_ARRAY=3]="IDENTIFIER_ARRAY"}(me||(me={}));let Ee=class extends n.aD{constructor(e){super(e),this._processingCacheUpdatesLookup=new Map,this.knowledgeGraph=null,this.inclusionModeDefinition={generateAllSublayers:!0,namedTypeDefinitions:new Map},this.entityTypeNames=new Set,this.relationshipTypeNames=new Set,this.geographicLookup=new Map,this.sublayerCaches=new Map,this.nodeConnectionsLookup=new Map,this.relationshipConnectionsLookup=new Map,this.memberIdTypeLookup=new Map;const t=new Map;e.knowledgeGraph.dataModel.entityTypes?.forEach((r=>{r.name&&(t.set(r.name,"entity"),this._processingCacheUpdatesLookup.set(r.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.entityTypeNames.add(r.name),r.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(r.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.knowledgeGraph.dataModel.relationshipTypes?.forEach((r=>{r.name&&(t.set(r.name,"relationship"),this._processingCacheUpdatesLookup.set(r.name,[]),e.inclusionModeDefinition&&!e.inclusionModeDefinition?.generateAllSublayers||this.relationshipTypeNames.add(r.name),r.properties?.forEach((e=>{e.geometryType&&"esriGeometryNull"!==e.geometryType&&this.geographicLookup.set(r.name,{name:e.name??"",geometryType:e.geometryType})})))})),e.inclusionModeDefinition?.namedTypeDefinitions.forEach(((r,o)=>{if("entity"===t.get(o))this.entityTypeNames.add(o);else{if("relationship"!==t.get(o))return n.n.getLogger(this).warn(`A named type, ${o}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(o);this.relationshipTypeNames.add(o)}const i=new Map;r.members?.forEach((e=>{(0,n.ao)(this.memberIdTypeLookup,e.id,(()=>new Set)).add(o);const t=this.getById(e.id);t&&i.set(e.id,t)})),this.sublayerCaches.set(o,i)}))}addToLayer(e){e.forEach((({typeName:e,id:t})=>{if(!this.inclusionModeDefinition)throw new n.s("knowledge-graph:layer-data-manager","You cannot add to a layer's exclusion list if it was not created with an exclusion list originally");if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){if(this.inclusionModeDefinition.namedTypeDefinitions.has(e)){const r=this.inclusionModeDefinition.namedTypeDefinitions.get(e);r.members||(r.members=new Map),r.members.set(t,{id:t}),(0,n.ao)(this.memberIdTypeLookup,t,(()=>new Set)).add(e)}}else{const r=new Map;r.set(t,{id:t}),this.inclusionModeDefinition.namedTypeDefinitions.set(e,{useAllData:!1,members:r}),(0,n.ao)(this.memberIdTypeLookup,t,(()=>new Set)).add(e)}}))}getById(e){return V.getInstance().readFromStoreById(e)}async getData(e,t,r){if(t.objectType.name&&this.inclusionModeDefinition?.namedTypeDefinitions&&this.inclusionModeDefinition.namedTypeDefinitions.size>0&&!this.inclusionModeDefinition.namedTypeDefinitions.has(t.objectType.name))return[];let n;if(n=e||new p.b({where:"1=1",outFields:["*"]}),"link-chart"===t.parentCompositeLayer.type){const e=t.parentCompositeLayer,r=this._processingCacheUpdatesLookup.get(t.objectType.name??""),o=n.outFields;o&&1===o.length&&o[0]===A&&"1=1"===n.where||await Promise.all(r??[]);const i=this.sublayerCaches.has(t.objectType.name??"")?Array.from(this.sublayerCaches.get(t.objectType.name)?.values()):[],s=[];return i.forEach((r=>{if(this.relationshipTypeNames.has(t.objectType.name)){r.geometry=e.relationshipLinkChartDiagramLookup.get(r.attributes[t.objectIdField]);const n=this.memberIdTypeLookup.get(r.attributes[_]),o=this.memberIdTypeLookup.get(r.attributes[C]),i=this._isEndEntitySpatial(n,r,_),s=this._isEndEntitySpatial(o,r,C);r.attributes[O]=Number(i&&s)}else{r.geometry=e.entityLinkChartDiagramLookup.get(r.attributes[t.objectIdField]);const n=this.geographicLookup.get(t.objectType.name);n&&r.attributes[n.name]?r.attributes[O]=1:r.attributes[O]=0}r.attributes[L]=r.geometry,s.push(r)})),s}return this.retrieveDataFromService(n,t,r)}async getConnectedRecordIds(e,t){const r=[];let o="";const i=[],s=new Map;if(e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e)){if(!this.entityTypeNames.has(t))return;s.has(t)?s.get(t)?.push(e):s.set(t,[e])}})),t&&0!==t?.length){for(const e of t)o=o+e+"|";o=o.slice(0,-1)}const p={};let u="",c=-1;for(const[n,a]of s){c++,0!==c&&(u+=" UNION ");const e=`${n}_ids`;p[e]=a,u+=t&&0!==t?.length?`MATCH (n:${n}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r:${o}]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`:`MATCH (n:${n}) WHERE id(n) IN $${e} WITH n MATCH (n)-[r]-(m) RETURN id(r), type(r), id(m), labels(m)[0]`}if(!u)return r;const d=new Promise((e=>{(async()=>{const e=(await(0,a.M)(this.knowledgeGraph,new l.s({openCypherQuery:u,bindParameters:p}))).resultRowsStream.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;for(let e=0;e<n.length;e++){const t=n[e];r.push({id:t[0],typeName:t[1]}),r.push({id:t[2],typeName:t[3]})}}}catch(t){if("AbortError"!==t.name)throw t;n.n.getLogger(this).info("Request aborted as expected")}})().then((()=>{e()}))}));return i.push(d),this.refreshCacheContent(),await Promise.all(i),r}async getRelationshipsBetweenNodes(e,t){const r=[],o="MATCH (n)-[r]->(m) WHERE id(n) IN $nodeIds AND id(m) in $nodeIds AND NOT id(r) IN $relationshipExclusionIds return id(r), type(r)",i=(await(0,a.M)(this.knowledgeGraph,new l.s({openCypherQuery:o,bindParameters:{nodeIds:e,relationshipExclusionIds:t}}))).resultRowsStream.getReader();try{for(;;){const{done:e,value:t}=await i.read();if(e)break;for(let n=0;n<t.length;n++){const e=t[n];r.push({id:e[0],typeName:e[1]})}}}catch(s){if("AbortError"!==s.name)throw s;n.n.getLogger(this).info("Request aborted as expected")}return r}async getRelationshipsFromNodes(e,t,r){const o=[],i="MATCH (n)-[r]-(m) WHERE id(n) IN $targetEntityIds AND id(m) in $possibleConnectionEntityIds AND NOT id(r) IN $relationshipExclusionIds return id(r), type(r)",s=(await(0,a.M)(this.knowledgeGraph,new l.s({openCypherQuery:i,bindParameters:{targetEntityIds:e,possibleConnectionEntityIds:t,relationshipExclusionIds:r}}))).resultRowsStream.getReader();try{for(;;){const{done:e,value:t}=await s.read();if(e)break;for(let r=0;r<t.length;r++){const e=t[r];o.push({id:e[0],typeName:e[1]})}}}catch(p){if("AbortError"!==p.name)throw p;n.n.getLogger(this).info("Request aborted as expected")}return o}async refreshCacheContent(e,t,r,o=!0){const i=V.getInstance(),s=[],p=new Map,u=new Map;this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&u.set(e.name,e)})),this.knowledgeGraph.dataModel.relationshipTypes?.forEach((e=>{e.name&&u.set(e.name,e)})),e||this.inclusionModeDefinition?e?e.forEach((e=>{if(this.memberIdTypeLookup.has(e))for(const t of this.memberIdTypeLookup.get(e))p.has(t)?p.get(t)?.push(e):p.set(t,[e])})):this.inclusionModeDefinition?.namedTypeDefinitions?.forEach(((e,t)=>{e.useAllData?p.set(t,null):e.members&&e.members.forEach((e=>{p.has(t)&&null!==p.get(t)?p.get(t)?.push(e.id):p.set(t,[e.id])}))})):(this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&p.set(e.name,null)})),this.knowledgeGraph.dataModel.entityTypes?.forEach((e=>{e.name&&p.set(e.name,null)})));for(const[c,d]of p){const e=new Promise((e=>{(async()=>{const e=new Set,s=[];let p,y="",h=!1;if(t||u.get(c)?.properties?.forEach((t=>{t.name&&e.add(t.name)})),r&&this.geographicLookup.has(c)){const t=this.geographicLookup.get(c)?.name;t&&e.add(t)}if(this.entityTypeNames.has(c))y=`MATCH (n:${c}) ${d?"WHERE id(n) IN $ids ":""}return ID(n)`,e.forEach((e=>{y+=`, n.${e}`,s.push(e)}));else{if(!this.relationshipTypeNames.has(c))throw new n.s("knowledge-graph:layer-data-manager",`The graph type of ${c} could not be determined. Was this type set in the KG data model and inclusion definition?`);h=!0,y=`MATCH ()-[n:${c}]->() ${d?"WHERE id(n) IN $ids ":""}return ID(n), id(startNode(n)), id(endNode(n))`,e.forEach((e=>{y+=`, n.${e}`,s.push(e)}))}p=new l.s(d?{openCypherQuery:y,bindParameters:{ids:d}}:{openCypherQuery:y});const m=(await(0,a.M)(this.knowledgeGraph,p)).resultRowsStream.getReader();for(;;){const{done:e,value:t}=await m.read();if(e)break;const r=[];for(let o=0;o<t.length;o++){const e=t[o];let i=0,a=0;const l={properties:{}};for(l.id=e[i],i++,a++,h&&(l.originId=e[i],i++,a++,l.destinationId=e[i],i++,a++,(0,n.ao)(this.nodeConnectionsLookup,l.originId,(()=>new Set)).add(l.id),(0,n.ao)(this.nodeConnectionsLookup,l.destinationId,(()=>new Set)).add(l.id),(0,n.ao)(this.relationshipConnectionsLookup,l.id,(()=>[l.originId,l.destinationId])));i<e.length;i++)l.properties[s[i-a]]=e[i];r.push(l)}const a=i.writeToStore(r,A,this.geographicLookup.get(c)?.name);this.sublayerCaches.has(c)||this.sublayerCaches.set(c,new Map),o&&!this.inclusionModeDefinition?.namedTypeDefinitions.has(c)&&this.inclusionModeDefinition?.namedTypeDefinitions.set(c,{useAllData:!1,members:new Map}),o&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(c).members&&(this.inclusionModeDefinition.namedTypeDefinitions.get(c).members=new Map);const l=this.sublayerCaches.get(c);a.forEach((e=>{l?.set(e.attributes[A],e),o&&!this.inclusionModeDefinition?.namedTypeDefinitions.get(c).members.has(e.attributes[A])&&(this.inclusionModeDefinition?.namedTypeDefinitions.get(c).members.set(e.attributes[A],{id:e.attributes[A]}),(0,n.ao)(this.memberIdTypeLookup,e.attributes[A],(()=>new Set)).add(c))}))}})().then((()=>{e(null)}))}));s.push(e),this._processingCacheUpdatesLookup.get(c)?.push(e)}await Promise.all(s)}removeFromLayer(e){const t=new Set,r=new Set(e.map((e=>e.id)));for(const n of e)t.add(n.typeName),1===this.memberIdTypeLookup.get(n.id)?.size?this.memberIdTypeLookup.delete(n.id):this.memberIdTypeLookup.get(n.id)?.delete(n.typeName),this.inclusionModeDefinition?.namedTypeDefinitions.forEach(((e,t)=>{t===n.typeName&&e.members?.has(n.id)&&e.members.delete(n.id)}));t.forEach((e=>{this.sublayerCaches.get(e)?.forEach(((t,n)=>{r.has(n)&&this.sublayerCaches.get(e)?.delete(n)}))}))}async retrieveDataFromService(e,t,r){const i=V.getInstance(),s=new Set,p=[];let u,c="",d=[];const y="relationship"===t.graphType,h=this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData,m=t.parentCompositeLayer.sublayerIdsCache.get(t.objectType.name);let f=!h&&m?Array.from(m).sort():null;if(this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData)this.inclusionModeDefinition?.namedTypeDefinitions?.get(t.objectType.name)?.useAllData&&null!=e.objectIds&&(f=e.objectIds);else if(null!=e.objectIds&&f&&f.length>0){const t=e.objectIds;e.objectIds=f.filter((e=>t.includes(e)))}else if(null!=e.objectIds)f=e.objectIds;else{if(this.inclusionModeDefinition?.namedTypeDefinitions.has(t.objectType.name)&&(!this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members||this.inclusionModeDefinition.namedTypeDefinitions.get(t.objectType.name)?.members?.size<1))return e.objectIds=[],[];e.objectIds=f}if(null!=e.outFields){const r=e.outFields;r.includes("*")?t.fields.forEach((e=>{s.add(e.name)})):r.forEach((e=>{e!==A&&e!==t.geometryFieldName&&s.add(e)}))}if(null!=e.geometry){const r=e.geometry;let i;const a=t.parentCompositeLayer.dataManager.knowledgeGraph.serviceDefinition,d=a?.spatialReference,h=a?.serviceCapabilities?.geometryCapabilities;let m=h?.geometryMaxBoundingRectangleSizeX,f=h?.geometryMaxBoundingRectangleSizeY;if("point"===r.type){let e=r;e.spatialReference?.isWGS84||(await(0,o.N)(e.spatialReference,n.c8),e=(0,o.K)(e,n.c8)),i=new n.au({spatialReference:n.c8,xmin:e.x-1e-4,ymin:e.y-1e-4,xmax:e.x+1e-4,ymax:e.y+1e-4})}else r?.extent?.spatialReference&&!r.spatialReference?.isWGS84?(await(0,o.N)(r.extent.spatialReference,n.c8),i=(0,o.K)(r.extent,n.c8)):i=r.extent;if(m&&f&&d){if(4326!==d.wkid){const e=new n.au({spatialReference:d,xmax:m,ymax:f}),t=(0,o.K)(e,n.c8);m=t.xmax,f=t.ymax}if(i.xmax-i.xmin>m)throw new n.s("knowledge-graph:layer-data-manager",`Extent x bounds should be within ${m}° latitude, limit exceeded`);if(i.ymax-i.ymin>f)throw new n.s("knowledge-graph:layer-data-manager",`Extent y bounds should be within ${f}° longitude, limit exceeded`)}if(null!=e.where&&"1=1"!==e.where){const r=await(0,n.eh)(e.where.toUpperCase(),t.fieldsIndex);t.fields.forEach((e=>{r.fieldNames.includes(e.name)&&s.add(e.name)}))}c=y?`Match ()-[n:${t.objectType.name}]->() WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n), id(startNode(r)), id(endNode(r))`:`Match (n:${t.objectType.name}) WHERE esri.graph.ST_Intersects($param_filter_geom, n.${t.geometryFieldName}) return ID(n)`,t.geometryFieldName&&s.add(t.geometryFieldName),s.forEach((e=>{c+=`, n.${e}`,p.push(e)})),u=new l.s({openCypherQuery:c,bindParameters:{param_filter_geom:new n.bC({rings:fe(i)})}})}else{let r="";if(null!=e.where&&"1=1"!==e.where){const o=await(0,n.eh)(e.where,t.fieldsIndex);t.fields.forEach((e=>{o.fieldNames.includes(e.name)&&s.add(e.name)}));const i=new Set(["column-reference","string","number","binary-expression"]),a=new Set(["=","<","<=","<>",">",">=","AND","OR","LIKE"]);let l=!1;const p=e=>{if("column-reference"===e.type)return`n.${e.column}`;if("string"===e.type)return`'${e.value}'`;if("number"===e.type)return`${e.value}`;if("binary-expression"===e.type&&i.has(e.left.type)&&i.has(e.right.type)&&a.has(e.operator))return`${p(e.left)} ${e.operator} ${p(e.right)}`;if("binary-expression"===e.type&&"LIKE"===e.operator){let t="";if("function"===e.left.type&&"column-reference"===e.left.args.value[0].type)t+=`lower(n.${e.left.args.value[0].column})`;else{if("column-reference"!==e.left.type)return l=!0,"";t+=`lower(n.${e.left.column})`}if(t+=" CONTAINS (","string"!==e.right.type)return l=!0,"";{let r=e.right.value;"%"===r.charAt(0)&&(r=r.slice(1)),"%"===r.charAt(r.length-1)&&(r=r.slice(0,-1)),t+=`'${r.toLowerCase()}')`}return t}return l=!0,""};r=p(o.parseTree),l&&(r="")}let o="";o=y?`Match ()-[n:${t.objectType.name}]->()`:`Match (n:${t.objectType.name})`;let i=!1;f&&(i=!0,o+=" WHERE ID(n) IN $ids"),r&&(o+=i?" AND":" WHERE",o+=` ${r}`),o+=" return ID(n)",y&&(o+=", id(startNode(n)), id(endNode(n))"),e.returnGeometry&&t.geometryFieldName&&s.add(t.geometryFieldName),s.forEach((e=>{o+=`, n.${e}`,p.push(e)})),u=new l.s(f?{openCypherQuery:o,bindParameters:{ids:f}}:{openCypherQuery:o})}const g=(await(0,a.M)(t.parentCompositeLayer.dataManager.knowledgeGraph,u,r)).resultRowsStream.getReader();for(;;){const{done:e,value:r}=await g.read();if(e)break;const n=[];for(let t=0;t<r.length;t++){const e=r[t];let o=0,i=0;const s={properties:{}};for(s.id=e[o],o++,i++,y&&(s.originId=e[o],o++,i++,s.destinationId=e[o],o++,i++);o<e.length;o++)s.properties[p[o-i]]=e[o];n.push(s)}d=d.concat(i.writeToStore(n,A,t.parentCompositeLayer.dataManager.geographicLookup.get(t.objectType.name)?.name))}return d}_isEndEntitySpatial(e,t,r){for(const n of e??[])if(this.entityTypeNames.has(n)){const e=this.geographicLookup.get(n),o=e&&this.sublayerCaches.get(n)?.get(t.attributes[r]);if(e&&o?.attributes[e.name])return!0}return!1}};(0,n.k)([(0,n.o)()],Ee.prototype,"knowledgeGraph",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"inclusionModeDefinition",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"entityTypeNames",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"relationshipTypeNames",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"geographicLookup",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"sublayerCaches",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"nodeConnectionsLookup",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"relationshipConnectionsLookup",void 0),(0,n.k)([(0,n.o)()],Ee.prototype,"memberIdTypeLookup",void 0),Ee=(0,n.k)([(0,n.A)("esri.layers.knowledgeGraph.KnowledgeGraphLayerDataManager")],Ee);const xe=(0,g.s)(),Ie=e=>{let t=class extends e{constructor(){super(...arguments),this.fields=[],this.fieldsIndex=null}};return(0,n.k)([(0,n.o)(xe.fields)],t.prototype,"fields",void 0),(0,n.k)([(0,n.o)(xe.fieldsIndex)],t.prototype,"fieldsIndex",void 0),t=(0,n.k)([(0,n.A)("esri.layers.knowledgeGraph.KnowledgeGraphSublayerBase")],t),t};function Re(e){if(!e.json)return e;e.json.write=je(e.json.write);const t=e.json.origins;if(!t)return e;let r;for(r in t){const e=t[r];e&&(e.write=je(e.write))}return e}function je(e){return"object"==typeof e&&e?(!1!==e.enabled&&(e.overridePolicy=Ne(e)),e):!0===e?De():e}function Ne(e){const{target:t,writer:r,overridePolicy:n,...o}=e;return function(e,t){const r=Ae.call(this,e,t);return r.enabled?{...o,...r}:r}}function De(){return{overridePolicy:Ae}}function Ae(e,t){const r=!!this.geometryType;let n={enabled:r};return r&&(n={...n,..._e.call(this,e,t)}),n}function _e(e,t){return{ignoreOrigin:this.originIdOf(t)>n.bm.DEFAULTS}}let Ce=class extends(Ie((0,v.c)((0,b.c)((0,w.l)((0,k.p)((0,E.l)((0,S.t)((0,T.f)((0,c.S)(y.f)))))))))){constructor(e){super(e),this.blendMode="normal",this.capabilities=(0,f.y)(!1,!1),this.charts=null,this.definitionExpression=null,this.displayField="",this.effect=null,this.elevationInfo=null,this.featureEffect=null,this.graphType=null,this.labelsVisible=!0,this.labelingInfo=null,this.layerType=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.objectIdField=A,this.objectType=null,this.opacity=1,this.orderBy=null,this.parent=null,this.parentCompositeLayer=null,this.persistenceEnabled=!0,this.popupEnabled=!0,this.popupTemplate=null,this.refreshInterval=0,this.source={openPorts:()=>this.load().then((()=>{const e=new MessageChannel;return new d.E(e.port1,{channel:e,client:{queryFeatures:(e,t={})=>{const r=p.b.fromJSON(e);return this.queryFeaturesJSON(r,t)}}}),[e.port2]}))},this.type="knowledge-graph-sublayer",this.useViewTime=!0,this.visible=!0}get defaultPopupTemplate(){return this.createPopupTemplate()}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}get fields(){const e=[];return this.objectType?.properties?.forEach((t=>{const r="esriFieldTypeOID"===t.fieldType?"esriFieldTypeInteger":t.fieldType;e.push(I.y.fromJSON({name:t.name,type:r,alias:t.alias,defaultValue:t.defaultValue,editable:t.editable,nullable:t.nullable}))})),e.push(I.y.fromJSON({name:this.objectIdField,type:"esriFieldTypeString",alias:this.objectIdField,editable:!1}),I.y.fromJSON({name:M,type:"esriFieldTypeInteger",alias:M,editable:!1}),I.y.fromJSON({name:O,type:"esriFieldTypeInteger",alias:O,editable:!1})),e}get geometryType(){if("link-chart"===this.parentCompositeLayer?.type)return"relationship"===this.graphType?"polyline":"point";const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.geometryType;return t&&"esriGeometryNull"!==t?n.cB.fromJSON(t):null}get geometryFieldName(){return"link-chart"===this.parentCompositeLayer?.type?L:this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name)?.name??null}get graphTypeName(){return this.objectType?.name}get hasM(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name;return(t?this.objectType?.properties?.[t]:null)?.hasM??!1}get hasZ(){const e=this.parentCompositeLayer?.dataManager.geographicLookup.get(this.objectType?.name),t=e?.name;return(t?this.objectType?.properties?.[t]:null)?.hasZ??!1}set renderer(e){(0,n.f0)(e,this.fieldsIndex),this._set("renderer",e)}get renderer(){return this._isOverridden("renderer")?this._get("renderer"):"link-chart"===this.parentCompositeLayer?.type?"relationship"===this.graphType?(0,u.t)((0,f.u)(n.cB.toJSON("polyline")).renderer):(0,u.t)((0,f.u)(n.cB.toJSON("point")).renderer):(0,u.t)((0,f.u)(n.cB.toJSON(this.geometryType)).renderer)}get spatialReference(){return this.parentCompositeLayer?.dataManager?.knowledgeGraph?.dataModel?.spatialReference??n.B.WGS84}set timeInfo(e){this._set("timeInfo",e)}get title(){return this._isOverridden("title")?this._get("title"):this.graphTypeName}set title(e){this._set("title",e)}writeTitle(e,t){t.title=e??"Layer"}createPopupTemplate(e){return(0,D.p)(this,e)}createQuery(){return new p.b({where:"1=1",outFields:["*"]})}getField(e){for(let t=0;t<this.fields.length;t++)if(this.fields[t].name===e)return this.fields[t];return null}getFieldDomain(e,t){return null}async queryFeatures(e,t){const{resolvedQuery:r,queryEngine:n}=await this._setupQueryObjects(e),o=N.d.fromJSON(await n.executeQuery(r.toJSON(),t?.signal));return o.features.forEach((e=>{e.sourceLayer=this})),o}async queryFeaturesJSON(e,t){const{resolvedQuery:r,queryEngine:n}=await this._setupQueryObjects(e);return await n.executeQuery(r.toJSON(),t?.signal)}async queryFeatureCount(e,t){const{resolvedQuery:r,queryEngine:n}=await this._setupQueryObjects(e);return n.executeQueryForCount(r.toJSON(),t?.signal)}async queryExtent(e={},t){const r={...e,returnGeometry:!0},{resolvedQuery:o,queryEngine:i}=await this._setupQueryObjects(r),s=await i.executeQueryForExtent(o.toJSON(),t?.signal);let a;return a=null!=s.extent?.xmin&&null!=s.extent?.xmax&&null!=s.extent?.ymin&&null!=s.extent?.ymax?new n.au(s.extent):new n.au,{count:s.count,extent:a}}async queryObjectIds(e,t){const r=p.b.from(e);let n;if("link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)n=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);n=this.loadQueryEngine(e)}return n.executeQueryForIds(r.toJSON(),t?.signal)}loadQueryEngine(e){const t=new h.m({geometryType:n.cB.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ}),r=new m.V({fieldsIndex:this.fieldsIndex.toJSON(),geometryType:n.cB.toJSON(this.geometryType),hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:this.spatialReference.toJSON(),timeInfo:this.timeInfo?.toJSON(),featureStore:t});return r.featureStore.addMany(e),r}async refreshCachedQueryEngine(){const e=await this.parentCompositeLayer.dataManager.getData(new p.b({where:"1=1",outFields:[A]}),this);this._cachedQueryEngine=this.loadQueryEngine(e)}load(e){return this.addResolvingPromise(this.parent.load(e).then((()=>{(0,n.aZ)(this.timeInfo,this.fieldsIndex)}))),Promise.resolve(this)}async _setupQueryObjects(e,t){const r=p.b.from(e),i=r.geometry;let s;if(i&&!i.spatialReference?.isWGS84&&(await(0,o.N)(i.spatialReference,n.c8),r.geometry=(0,o.K)(i instanceof n.bC||i instanceof n.aT||i instanceof n.bv?i:i.extent,n.c8)),"link-chart"===this.parentCompositeLayer.type&&this._cachedQueryEngine)s=this._cachedQueryEngine;else{const e=await this.parentCompositeLayer.dataManager.getData(r,this,t);s=this.loadQueryEngine(e)}return{resolvedQuery:r,queryEngine:s}}};(0,n.k)([(0,n.o)(Re((0,n.f)(w.s)))],Ce.prototype,"blendMode",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"capabilities",void 0),(0,n.k)([(0,n.o)({json:{origins:{"web-scene":{write:!1}},write:De()}})],Ce.prototype,"charts",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],Ce.prototype,"defaultPopupTemplate",null),(0,n.k)([(0,n.o)({type:String,json:{origins:{service:{read:!1}},name:"layerDefinition.definitionExpression",write:{ignoreOrigin:!0}}})],Ce.prototype,"definitionExpression",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"displayField",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(w.a)))],Ce.prototype,"effect",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"elevationInfo",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(b.p)))],Ce.prototype,"featureEffect",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(v.p)))],Ce.prototype,"featureReduction",null),(0,n.k)([(0,n.o)()],Ce.prototype,"fields",null),(0,n.k)([(0,n.o)()],Ce.prototype,"geometryType",null),(0,n.k)([(0,n.o)()],Ce.prototype,"geometryFieldName",null),(0,n.k)([(0,n.o)({type:["entity","relationship"],nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],Ce.prototype,"graphType",void 0),(0,n.k)([(0,n.o)({type:String,nonNullable:!0,json:{write:{isRequired:!0,ignoreOrigin:!0}}})],Ce.prototype,"graphTypeName",null),(0,n.k)([(0,n.o)()],Ce.prototype,"hasM",null),(0,n.k)([(0,n.o)()],Ce.prototype,"hasZ",null),(0,n.k)([(0,n.o)({type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],Ce.prototype,"id",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.p)))],Ce.prototype,"labelsVisible",void 0),(0,n.k)([(0,n.o)({type:[R.C],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:R.n,write:De()}})],Ce.prototype,"labelingInfo",void 0),(0,n.k)([(0,n.o)({readOnly:!0,json:{read:!1,write:{writer(e,t){switch(this.parentCompositeLayer.type){case"link-chart":t.layerType="LinkChartSubLayer";break;case"knowledge-graph":t.layerType=this.geometryType?"KnowledgeGraphSubLayer":"KnowledgeGraphSubTable"}},isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],Ce.prototype,"layerType",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.d)))],Ce.prototype,"legendEnabled",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.v)))],Ce.prototype,"maxScale",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.j)))],Ce.prototype,"minScale",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"objectIdField",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"objectType",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.f)))],Ce.prototype,"opacity",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(k.c)))],Ce.prototype,"orderBy",void 0),(0,n.k)([(0,n.o)({clonable:!1})],Ce.prototype,"parent",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"parentCompositeLayer",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(x.l)))],Ce.prototype,"popupEnabled",void 0),(0,n.k)([(0,n.o)({type:n.b4,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],Ce.prototype,"popupTemplate",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:{overridePolicy:_e}}})],Ce.prototype,"refreshInterval",void 0),(0,n.k)([(0,n.o)({types:u.m,json:{name:"layerDefinition.drawingInfo.renderer",write:De()}})],Ce.prototype,"renderer",null),(0,n.k)([(0,n.o)()],Ce.prototype,"source",void 0),(0,n.k)([(0,n.o)()],Ce.prototype,"spatialReference",null),(0,n.k)([(0,n.o)({type:j.d,json:{name:"layerDefinition.timeInfo",write:!0,origins:{"web-document":{name:"layerDefinition.timeInfo",read:!0,write:!0},"portal-item":{name:"layerDefinition.timeInfo",read:!0,write:!0}}}})],Ce.prototype,"timeInfo",null),(0,n.k)([(0,n.o)({type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}})],Ce.prototype,"title",null),(0,n.k)([(0,n.q)("title")],Ce.prototype,"writeTitle",null),(0,n.k)([(0,n.o)({json:{read:!1}})],Ce.prototype,"type",void 0),(0,n.k)([(0,n.o)(Re((0,n.f)(E.f)))],Ce.prototype,"useViewTime",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{name:"visibility",write:De()}})],Ce.prototype,"visible",void 0),Ce=(0,n.k)([(0,n.A)("esri.layers.knowledgeGraph.KnowledgeGraphSublayer")],Ce);const Le=Ce},28252:function(e,t,r){r.d(t,{f:function(){return l}});var n=r(98503),o=r(50257);async function i(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:o}=await Promise.all([r.e(2031),r.e(7489)]).then(r.bind(r,67489)).then((e=>e.p));try{return await o(t)}catch(i){const e=t?.portalItem,r=e?.id||"unset",o=e?.portal?.url||n.H.portalUrl;throw n.n.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+r+"')",i),i}}let s=0,a=class extends(n.bP.EventedMixin((0,n.da)(n.e))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new n.au(-180,-90,180,90,n.B.WGS84),this.id=Date.now().toString(16)+"-layer-"+s++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=n.B.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([r.e(2031),r.e(8529)]).then(r.bind(r,58529))).fromUrl(t)}static fromPortalItem(e){return i(e)}initialize(){this.when().catch((e=>{(0,n.E)(e)||n.n.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,n.I)(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,n.U)(e,{query:{f:"json"},responseType:"json"})).data;throw new n.s("layer:no-attribution-data","Layer does not have attribution data")}};(0,n.k)([(0,n.o)({type:String})],a.prototype,"attributionDataUrl",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],a.prototype,"effectiveVisible",null),(0,n.k)([(0,n.o)({type:n.au})],a.prototype,"fullExtent",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],a.prototype,"hasAttributionData",null),(0,n.k)([(0,n.o)({type:String,clonable:!1})],a.prototype,"id",void 0),(0,n.k)([(0,n.o)({type:Boolean,nonNullable:!0})],a.prototype,"legendEnabled",void 0),(0,n.k)([(0,n.o)({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),(0,n.k)([(0,n.o)({type:Number,range:{min:0,max:1},nonNullable:!0})],a.prototype,"opacity",void 0),(0,n.k)([(0,n.o)({clonable:!1})],a.prototype,"parent",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],a.prototype,"parsedUrl",null),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],a.prototype,"persistenceEnabled",void 0),(0,n.k)([(0,n.o)({type:Boolean})],a.prototype,"popupEnabled",void 0),(0,n.k)([(0,n.o)({type:Boolean})],a.prototype,"attributionVisible",void 0),(0,n.k)([(0,n.o)({type:n.B})],a.prototype,"spatialReference",void 0),(0,n.k)([(0,n.o)({type:String})],a.prototype,"title",void 0),(0,n.k)([(0,n.o)({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),(0,n.k)([(0,n.o)()],a.prototype,"url",void 0),(0,n.k)([(0,n.o)({type:o.p})],a.prototype,"visibilityTimeExtent",void 0),(0,n.k)([(0,n.o)({type:Boolean,nonNullable:!0})],a.prototype,"visible",void 0),a=(0,n.k)([(0,n.A)("esri.layers.Layer")],a);const l=a},77476:function(e,t,r){r.d(t,{a:function(){return a}});var n,o=r(98503);const i=new o.ax({asc:"ascending",desc:"descending"});let s=n=class extends o.v{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new n({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],s.prototype,"field",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],s.prototype,"valueExpression",void 0),(0,o.k)([(0,o.o)({type:i.apiValues,json:{type:i.jsonValues,read:i.read,write:i.write}})],s.prototype,"order",void 0),s=n=(0,o.k)([(0,o.A)("esri.layers.support.OrderByInfo")],s);const a=s},45975:function(e,t,r){r.d(t,{c:function(){return a},p:function(){return l}});var n=r(98503),o=r(77476);function i(e,t,r){if(!e)return null;const n=e.find((e=>!!e.field));if(!n)return null;const i=new o.a;return i.read(n,r),[i]}function s(e,t,r,o){const i=e.find((e=>!!e.field));i&&(0,n.aY)(r,[i.toJSON()],t)}const a={type:[o.a],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:i},write:{writer:s}}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,n.k)([(0,n.o)(a)],t.prototype,"orderBy",void 0),t=(0,n.k)([(0,n.A)("esri.layers.mixins.OrderedLayer")],t),t}},13193:function(e,t,r){r.r(t),r.d(t,{K:function(){return S},Q:function(){return q},a:function(){return N},b:function(){return P},c:function(){return a},m:function(){return L},s:function(){return D}});var n,o=r(98503),i=r(98089),s=r(50257);let a=n=class extends o.v{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new n({mapLayerId:e,gdbVersion:t})}};var l;(0,o.k)([(0,o.bk)({mapLayer:"map-layer"})],a.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:o.bp,json:{write:!0}})],a.prototype,"mapLayerId",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0),a=n=(0,o.k)([(0,o.A)("esri.layers.support.source.MapLayerSource")],a);let p=l=class extends o.v{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:n,geometryType:o}=this,i={workspaceId:e,query:t,oidFields:r,spatialReference:n?.clone()??void 0,geometryType:o};return new l(i)}};var u;(0,o.k)([(0,o.bk)({queryTable:"query-table"})],p.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],p.prototype,"workspaceId",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],p.prototype,"query",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],p.prototype,"oidFields",void 0),(0,o.k)([(0,o.o)({type:o.B,json:{write:!0}})],p.prototype,"spatialReference",void 0),(0,o.k)([(0,o.bk)(o.cB)],p.prototype,"geometryType",void 0),p=l=(0,o.k)([(0,o.A)("esri.layers.support.source.QueryTableDataSource")],p);let c=u=class extends o.v{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new u({workspaceId:e,dataSourceName:t})}};var d;(0,o.k)([(0,o.bk)({raster:"raster"})],c.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],c.prototype,"dataSourceName",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],c.prototype,"workspaceId",void 0),c=u=(0,o.k)([(0,o.A)("esri.layers.support.source.RasterDataSource")],c);let y=d=class extends o.v{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new d({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var h,m;(0,o.k)([(0,o.bk)({table:"table"})],y.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],y.prototype,"workspaceId",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],y.prototype,"dataSourceName",void 0),y=d=(0,o.k)([(0,o.A)("esri.layers.support.source.TableDataSource")],y);const f=(0,o.g)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let g=h=class extends o.v{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return b()(e,t,r)}castLeftTableSource(e){return(0,o.hN)(k(),e)}readRightTableSource(e,t,r){return b()(e,t,r)}castRightTableSource(e){return(0,o.hN)(k(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:n,joinType:o}=this,i={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:n?.clone()??void 0,joinType:o};return new h(i)}};(0,o.k)([(0,o.bk)({joinTable:"join-table"})],g.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],g.prototype,"leftTableKey",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],g.prototype,"rightTableKey",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],g.prototype,"leftTableSource",void 0),(0,o.k)([(0,o.u)("leftTableSource")],g.prototype,"readLeftTableSource",null),(0,o.k)([(0,o.by)("leftTableSource")],g.prototype,"castLeftTableSource",null),(0,o.k)([(0,o.o)({json:{write:!0}})],g.prototype,"rightTableSource",void 0),(0,o.k)([(0,o.u)("rightTableSource")],g.prototype,"readRightTableSource",null),(0,o.k)([(0,o.by)("rightTableSource")],g.prototype,"castRightTableSource",null),(0,o.k)([(0,o.bk)(f)],g.prototype,"joinType",void 0),g=h=(0,o.k)([(0,o.A)("esri.layers.support.source.JoinTableDataSource")],g);let w=null;function b(){return w||(w=(0,o.ej)({types:k()})),w}let v=null;function k(){return v||(v={key:"type",base:null,typeMap:{"data-layer":S,"map-layer":a}}),v}const T={key:"type",base:null,typeMap:{"join-table":g,"query-table":p,raster:c,table:y}};let S=m=class extends o.v{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new m({fields:e,dataSource:t})}};(0,o.k)([(0,o.bk)({dataLayer:"data-layer"})],S.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:[i.y],json:{write:!0}})],S.prototype,"fields",void 0),(0,o.k)([(0,o.o)({types:T,json:{write:!0}})],S.prototype,"dataSource",void 0),S=m=(0,o.k)([(0,o.A)("esri.layers.support.source.DataLayerSource")],S),S.from=(0,o.ef)(S);let E=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};(0,o.k)([(0,o.o)({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&this.onFields.length>0}}}}})],E.prototype,"onFields",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],E.prototype,"operator",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],E.prototype,"searchTerm",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],E.prototype,"searchType",void 0),E=(0,o.k)([(0,o.A)("esri.rest.support.FullTextSearch")],E);const x=E;var I;const R=new o.ax({upperLeft:"upper-left",lowerLeft:"lower-left"});let j=I=class extends o.v{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new I((0,o.f)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,o.k)([(0,o.o)({type:o.au,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],j.prototype,"extent",void 0),(0,o.k)([(0,o.o)({type:["view","edit"],json:{write:!0}})],j.prototype,"mode",void 0),(0,o.k)([(0,o.o)({type:String,json:{read:R.read,write:R.write}})],j.prototype,"originPosition",void 0),(0,o.k)([(0,o.o)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],j.prototype,"tolerance",void 0),j=I=(0,o.k)([(0,o.A)("esri.rest.support.QuantizationParameters")],j);const N=j,D=new o.ax({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var A;const _=new o.ax({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let C=A=class extends o.v{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=(0,o.f)(e))}clone(){return new A({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,o.f)(this.statisticParameters)})}};(0,o.k)([(0,o.o)({type:Number,json:{write:!0}})],C.prototype,"maxPointCount",void 0),(0,o.k)([(0,o.o)({type:Number,json:{write:!0}})],C.prototype,"maxRecordCount",void 0),(0,o.k)([(0,o.o)({type:Number,json:{write:!0}})],C.prototype,"maxVertexCount",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],C.prototype,"onStatisticField",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],C.prototype,"outStatisticFieldName",void 0),(0,o.k)([(0,o.o)({type:String,json:{read:{source:"statisticType",reader:_.read},write:{target:"statisticType",writer:_.write}}})],C.prototype,"statisticType",void 0),(0,o.k)([(0,o.o)({type:Object})],C.prototype,"statisticParameters",void 0),(0,o.k)([(0,o.q)("statisticParameters")],C.prototype,"writeStatisticParameters",null),C=A=(0,o.k)([(0,o.A)("esri.rest.support.StatisticDefinition")],C);const L=C;var M;const O=new o.ax({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let F=M=class extends o.v{static from(e){return(0,o.cG)(M,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const n=e[t];Array.isArray(n)?r[t]=n.map((e=>e instanceof Date?e.getTime():e)):n instanceof Date?r[t]=n.getTime():r[t]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new M((0,o.f)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};F.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,o.k)([(0,o.o)({json:{write:!0}})],F.prototype,"aggregateIds",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],F.prototype,"cacheHint",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"compactGeometryEnabled",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],F.prototype,"datumTransformation",void 0),(0,o.k)([(0,o.by)("datumTransformation")],F.prototype,"castDatumTransformation",null),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"defaultSpatialReferenceEnabled",void 0),(0,o.k)([(0,o.o)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],F.prototype,"distance",void 0),(0,o.k)([(0,o.o)({type:S,json:{write:!0}})],F.prototype,"dynamicDataSource",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"formatOf3DObjects",void 0),(0,o.k)([(0,o.o)({type:[x],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&this.fullText.length>0}}}}})],F.prototype,"fullText",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"gdbVersion",void 0),(0,o.k)([(0,o.o)({types:o.b2,json:{read:o.b3,write:!0}})],F.prototype,"geometry",void 0),(0,o.k)([(0,o.o)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecision",void 0),(0,o.k)([(0,o.o)({type:[String],json:{write:!0}})],F.prototype,"groupByFieldsForStatistics",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"having",void 0),(0,o.k)([(0,o.o)({type:Date})],F.prototype,"historicMoment",void 0),(0,o.k)([(0,o.q)("historicMoment")],F.prototype,"writeHistoricMoment",null),(0,o.k)([(0,o.o)({type:Number,json:{write:!0}})],F.prototype,"maxAllowableOffset",void 0),(0,o.k)([(0,o.o)({type:Number,cast:e=>e<1?1:e>F.MAX_MAX_RECORD_COUNT_FACTOR?F.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],F.prototype,"maxRecordCountFactor",void 0),(0,o.k)([(0,o.o)({type:["xyFootprint"],json:{write:!0}})],F.prototype,"multipatchOption",void 0),(0,o.k)([(0,o.o)({type:Number,json:{read:{source:"resultRecordCount"}}})],F.prototype,"num",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],F.prototype,"objectIds",void 0),(0,o.k)([(0,o.o)({type:[String],json:{write:!0}})],F.prototype,"orderByFields",void 0),(0,o.k)([(0,o.o)({type:[String],json:{write:!0}})],F.prototype,"outFields",void 0),(0,o.k)([(0,o.o)({type:o.B,json:{name:"outSR",write:!0}})],F.prototype,"outSpatialReference",void 0),(0,o.k)([(0,o.o)({type:[L],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&this.outStatistics.length>0}}}}})],F.prototype,"outStatistics",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],F.prototype,"parameterValues",void 0),(0,o.k)([(0,o.q)("parameterValues")],F.prototype,"writeParameterValues",null),(0,o.k)([(0,o.o)({type:o.bv,json:{write:!0}})],F.prototype,"pixelSize",void 0),(0,o.k)([(0,o.o)({type:N,json:{write:!0}})],F.prototype,"quantizationParameters",void 0),(0,o.k)([(0,o.o)({type:[Object],json:{write:!0}})],F.prototype,"rangeValues",void 0),(0,o.k)([(0,o.o)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],F.prototype,"relationParameter",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"resultType",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"returnCentroid",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"returnDistinctValues",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!0,write:!0}})],F.prototype,"returnExceededLimitFeatures",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:!0}})],F.prototype,"returnGeometry",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"returnQueryGeometry",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"returnM",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],F.prototype,"returnZ",void 0),(0,o.k)([(0,o.o)({type:o.B,json:{write:!0}})],F.prototype,"sourceSpatialReference",void 0),(0,o.k)([(0,o.bk)(D,{ignoreUnknown:!1,name:"spatialRel"})],F.prototype,"spatialRelationship",void 0),(0,o.k)([(0,o.o)({type:Number,json:{read:{source:"resultOffset"}}})],F.prototype,"start",void 0),(0,o.k)([(0,o.q)("start"),(0,o.q)("num")],F.prototype,"writeStart",null),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"sqlFormat",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],F.prototype,"text",void 0),(0,o.k)([(0,o.o)({type:s.p,json:{write:!0}})],F.prototype,"timeExtent",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{default:!1,write:!0}})],F.prototype,"timeReferenceUnknownClient",void 0),(0,o.k)([(0,o.bk)(O,{ignoreUnknown:!1}),(0,o.o)({json:{write:{overridePolicy(e){return{enabled:!!e&&null!=this.distance&&this.distance>0}}}}})],F.prototype,"units",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||null!=this.start&&this.start>0}}}}})],F.prototype,"where",void 0),(0,o.k)([(0,o.q)("where")],F.prototype,"writeWhere",null),F=M=(0,o.k)([(0,o.A)("esri.rest.support.Query")],F);const P=F,q=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"}))},4665:function(e,t,r){r.d(t,{c:function(){return g},m:function(){return p},p:function(){return b},s:function(){return y},t:function(){return m}});var n=r(98503);let o=class extends n.v{constructor(e){super(e),this.properties=null}};(0,n.k)([(0,n.o)({json:{write:!0}})],o.prototype,"properties",void 0),o=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.GraphObject")],o);const i=o;let s=class extends i{constructor(e){super(e),this.typeName=null,this.id=null}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.GraphNamedObject")],s);const a=s;let l=class extends a{constructor(e){super(e),this.layoutGeometry=null}};(0,n.k)([(0,n.o)({type:n.bv,json:{write:!0}})],l.prototype,"layoutGeometry",void 0),l=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.Entity")],l);const p=l;let u=class extends n.aD{constructor(e){super(e),this.openCypherQuery=""}};(0,n.k)([(0,n.o)()],u.prototype,"openCypherQuery",void 0),u=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.GraphQuery")],u);const c=u;let d=class extends c{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,n.k)([(0,n.o)()],d.prototype,"bindParameters",void 0),(0,n.k)([(0,n.o)()],d.prototype,"bindGeometryQuantizationParameters",void 0),(0,n.k)([(0,n.o)()],d.prototype,"outputQuantizationParameters",void 0),(0,n.k)([(0,n.o)()],d.prototype,"outputSpatialReference",void 0),(0,n.k)([(0,n.o)()],d.prototype,"provenanceBehavior",void 0),d=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.GraphQueryStreaming")],d);const y=d;let h=class extends i{constructor(e){super(e)}};h=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.ObjectValue")],h);const m=h;let f=class extends n.v{constructor(e){super(e),this.path=null}};(0,n.k)([(0,n.o)({type:[i],json:{write:!0}})],f.prototype,"path",void 0),f=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.Path")],f);const g=f;let w=class extends a{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],w.prototype,"originId",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],w.prototype,"destinationId",void 0),(0,n.k)([(0,n.o)({type:n.aT,json:{write:!0}})],w.prototype,"layoutGeometry",void 0),w=(0,n.k)([(0,n.A)("esri.rest.knowledgeGraph.Relationship")],w);const b=w},50257:function(e,t,r){r.d(t,{i:function(){return s},m:function(){return l},o:function(){return i},p:function(){return d},r:function(){return o}});var n=r(98503);const o={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function i(e,t,r,o=n.dL){const i=new n.a6((0,n.dK)(o)),s=n.at.fromJSDate(e,{zone:i}),a="decades"===r||"centuries"===r?"year":p(r);return"decades"===r&&(t*=10),"centuries"===r&&(t*=100),s.plus({[a]:t}).toJSDate()}function s(e,t,r="milliseconds"){const n=e.getTime(),o=l(t,r,"milliseconds");return new Date(n+o)}function a(e,t,r=n.dL){const o=new n.a6((0,n.dK)(r)),i=n.at.fromJSDate(e,{zone:o});if("decades"===t||"centuries"===t){const e=i.startOf("year"),{year:r}=e,n=r-r%("decades"===t?10:100);return e.set({year:n}).toJSDate()}const s=p(t);return i.startOf(s).toJSDate()}function l(e,t,r){return 0===e?0:e*o[t]/o[r]}function p(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var u;let c=u=class extends n.v{static get allTime(){return y}static get empty(){return h}static fromArray(e){return new u({start:null!=e[0]?new Date(e[0]):e[0],end:null!=e[1]?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(u.allTime)}get isEmpty(){return this.equals(u.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new u({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,n=e.start?.getTime()??e.start,o=e.end?.getTime()??e.end;return t===n&&r===o}expandTo(e,t=n.dL){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=a(r,e,t));let o=this.end;if(o){const r=a(o,e,t);o=o.getTime()===r.getTime()?r:i(r,1,e,t)}return new u({start:r,end:o})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return u.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,n=e.start?.getTime()??-1/0,o=e.end?.getTime()??1/0;let i,s;return n>=t&&n<=r?i=n:t>=n&&t<=o&&(i=t),r>=n&&r<=o?s=r:o>=t&&o<=r&&(s=o),null==i||null==s||isNaN(i)||isNaN(s)?u.empty:new u({start:i===-1/0?null:new Date(i),end:s===1/0?null:new Date(s)})}offset(e,t,r=n.dL){if(this.isEmpty||this.isAllTime)return this.clone();const o=new u,{start:s,end:a}=this;return null!=s&&(o.start=i(s,e,t,r)),null!=a&&(o.end=i(a,e,t,r)),o}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return y.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new u({start:t,end:r})}};(0,n.k)([(0,n.o)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0),(0,n.k)([(0,n.u)("end")],c.prototype,"readEnd",null),(0,n.k)([(0,n.q)("end")],c.prototype,"writeEnd",null),(0,n.k)([(0,n.o)({readOnly:!0,json:{read:!1}})],c.prototype,"isAllTime",null),(0,n.k)([(0,n.o)({readOnly:!0,json:{read:!1}})],c.prototype,"isEmpty",null),(0,n.k)([(0,n.o)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0),(0,n.k)([(0,n.u)("start")],c.prototype,"readStart",null),(0,n.k)([(0,n.q)("start")],c.prototype,"writeStart",null),c=u=(0,n.k)([(0,n.A)("esri.time.TimeExtent")],c);const d=c,y=new c,h=new c({start:void 0,end:void 0})},22676:function(e,t,r){r.d(t,{r:function(){return o}});var n=r(98503);let o=class e{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new n.s(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,r=""){const[o,i]=t.split("."),s=/^\s*\d+\s*$/;if(!o?.match||!s.test(o))throw new n.s((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!s.test(i))throw new n.s((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const a=parseInt(o,10),l=parseInt(i,10);return new e(a,l,r)}}},96197:function(e,t,r){r.d(t,{s:function(){return n},t:function(){return o}});const n={supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportedStatistics:void 0},o={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryBins:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:n,query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},98485:function(e,t,r){r.d(t,{a:function(){return p},l:function(){return c},u:function(){return s},y:function(){return d}});var n=r(98503),o=r(94706),i=r(96197);function s(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?n.bT:"esriGeometryPolyline"===e?n.bU:n.bV}}}const a=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let l=1;function p(e,t){if((0,n.a$)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this${u(t)} = null;`;for(const t in e)r+=`this${u(t)} = ${JSON.stringify(e[t])};`;const n=new Function(`\n      return class AttributesClass$${l++} {\n        constructor() {\n          ${r};\n        }\n      }\n    `)();return()=>new n}catch{return()=>({[t]:null,...e})}}function u(e){return a.test(e)?`.${e}`:`["${e}"]`}function c(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,n.f)(e)}}]}function d(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.t,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:i.s,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},49329:function(e,t,r){r.d(t,{n:function(){return n},o:function(){return o}});r(98503);function n(e){}function o(e){return()=>e}},65944:function(e,t,r){r.d(t,{d:function(){return h},p:function(){return d},s:function(){return c},y:function(){return y}});var n=r(98503);const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function i(e){return e instanceof n.aD}function s(e){return e instanceof n.V?Object.keys(e.items):i(e)?(0,n.bf)(e).keys():e?Object.keys(e):[]}function a(e,t){return e instanceof n.V?e.items[t]:e[t]}function l(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function p(e){return e?e.declaredClass:null}function u(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const n=s(e),c=s(t);if(0===n.length&&0===c.length)return;if(!n.length||!c.length||l(e,t))return{type:"complete",oldValue:e,newValue:t};const d=c.filter((e=>!n.includes(e))),y=n.filter((e=>!c.includes(e))),h=n.filter((r=>c.includes(r)&&a(e,r)!==a(t,r))).concat(d,y).sort(),m=p(e);if(m&&o.has(m)&&h.length)return{type:"complete",oldValue:e,newValue:t};let f;const g=i(e)&&i(t);for(const o of h){const n=a(e,o),i=a(t,o);let s;if((g||"function"!=typeof n&&"function"!=typeof i)&&n!==i&&(null!=n||null!=i)){if(r&&r[o]&&"function"==typeof r[o])s=r[o]?.(n,i);else if(n instanceof Date&&i instanceof Date){if(n.getTime()===i.getTime())continue;s={type:"complete",oldValue:n,newValue:i}}else s="object"==typeof n&&"object"==typeof i&&p(n)===p(i)?u(n,i):{type:"complete",oldValue:n,newValue:i};null!=s&&(null!=f?f.diff[o]=s:f={type:"partial",diff:{[o]:s}})}}return f}function c(e,t){return d(e,t)}function d(e,t){if(null==e)return!1;const r=t.split(".");let n=e;for(const o of r){if("complete"===n.type)return!0;if("partial"!==n.type)return!1;{const e=n.diff[o];if(!e)return!1;n=e}}return!0}function y(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&p(e)!==p(t)?{type:"complete",oldValue:e,newValue:t}:u(e,t)}},68116:function(e,t,r){r.d(t,{E:function(){return w},_:function(){return E},f:function(){return f},g:function(){return g},p:function(){return y},u:function(){return h},x:function(){return m}});var n=r(98503);const o="__begin__",i="__end__",s=new RegExp(o,"ig"),a=new RegExp(i,"ig"),l=new RegExp("^"+o,"i"),p=new RegExp(i+"$","i"),u='"',c=u+" + ",d=" + "+u;function y(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function h(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function m(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=y(e.labelExpression),t.type="conventional"),t}function f(e){const t=m(e);if(!t)return null;switch(t.type){case"conventional":return w(t.expression);case"arcade":return t.expression}return null}function g(e){const t=m(e);if(!t)return null;switch(t.type){case"conventional":return v(t.expression);case"arcade":return E(t.expression)}return null}function w(e){let t;return e?(t=(0,n.r)(e,(e=>o+'$feature["'+e+'"]'+i)),t=l.test(t)?t.replace(l,""):u+t,t=p.test(t)?t.replace(p,""):t+u,t=t.replaceAll(s,c).replaceAll(a,d)):t='""',t}const b=/^\s*\{([^}]+)\}\s*$/i;function v(e){return e?.match(b)?.[1].trim()||null}const k=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,T=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,S=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function E(e){if(!e)return null;let t=k.exec(e)||T.exec(e);return t?t[1]||t[3]:(t=S.exec(e),t?t[2]:null)}},77998:function(e,t,r){r.d(t,{e:function(){return a},n:function(){return o},o:function(){return s},r:function(){return i}});const n="randomUUID"in crypto;function o(){if(n)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function i(){return`{${o().toUpperCase()}}`}function s(){return`{${o()}}`}function a(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}}}]);
//# sourceMappingURL=3658.7b1695ad.js.map