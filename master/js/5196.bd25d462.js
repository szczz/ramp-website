"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[5196],{65196:function(e,l,t){t.r(l),t.d(l,{default:function(){return re}});var a=t(98503),d=t(78253);const i={key:0,class:"relative"},n={key:0,class:"relative"},s=["innerHTML"],u=["src"],r={key:1,class:"w-32 h-32"},o={class:"symbologyIcon"},c=["innerHTML"],v=["src"],p={class:"badge z-50 rounded-full text-white absolute h-10 w-10 p-8 inline-flex items-center justify-center"},g={key:0,class:"px-5"},f={key:1,class:"inline-flex justify-center items-center relative"},y=(0,a.dM)({__name:"symbology-stack",props:{layer:{type:Object,required:!0},result:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.e3)([]);return(0,a.e8)((()=>{t.value=l.layer.legend})),(l,d)=>e.result.loaded?((0,a.dU)(),(0,a.dY)("div",i,[(0,a.dX)("div",{class:(0,a.d_)(0===e.result.items.length?"opacity-50":"")},[t.value.length>1?((0,a.dU)(),(0,a.dY)("div",n,[((0,a.dU)(!0),(0,a.dY)(a.e1,null,(0,a.dZ)(t.value.slice(0,3).reverse(),((e,l)=>((0,a.dU)(),(0,a.dY)("div",{class:(0,a.d_)(["absolute",[0==l?"symbol-0":1==l?"left-3":"left-6"]]),style:(0,a.gh)({"z-index":3-l}),key:l},[t.value[l].svgcode?((0,a.dU)(),(0,a.dY)("span",{key:0,class:"symbologyIcon w-28 h-28",innerHTML:t.value[l].svgcode},null,8,s)):t.value[l].imgUrl?((0,a.dU)(),(0,a.dY)("img",{key:1,class:"symbologyIcon w-28 h-28",src:t.value[l].imgUrl},null,8,u)):(0,a.eb)("",!0)],6)))),128))])):t.value.length>0?((0,a.dU)(),(0,a.dY)("div",r,[(0,a.dX)("div",o,[t.value[0].svgcode?((0,a.dU)(),(0,a.dY)("span",{key:0,innerHTML:t.value[0].svgcode},null,8,c)):t.value[0].imgUrl?((0,a.dU)(),(0,a.dY)("img",{key:1,class:"symbologyIcon w-full h-full",src:t.value[0].imgUrl},null,8,v)):(0,a.eb)("",!0)])])):(0,a.eb)("",!0)],2),(0,a.dX)("div",p,[e.result.loaded?((0,a.dU)(),(0,a.dY)("div",g,(0,a.d$)(e.result.items.length),1)):(0,a.eb)("",!0)])])):((0,a.dU)(),(0,a.dY)("div",f,d[0]||(d[0]=[(0,a.dX)("div",{class:"symbologyIcon h-32 w-32"},[(0,a.dX)("div",{class:"relative animate-spin spinner h-24 w-24"})],-1)])))}}),m=(0,a.fN)(y,[["__scopeId","data-v-496d788d"]]),h=["content"],b={class:"symbologyLayerName truncate"},k=(0,a.dM)({__name:"symbology-item",props:{layer:{type:Object,required:!0},result:{type:Object,required:!0},selected:{type:Boolean,required:!0}},setup(e){const l=(0,a.g2)(),t=(0,a.dQ)((()=>l.properties)),d=e,i=()=>{const e=d.layer;return e&&t.value[e.id]&&t.value[e.id].name?t.value[e.id].name:e?.name??""};return(l,t)=>{const d=(0,a.dS)("tippy");return(0,a.dT)(((0,a.dU)(),(0,a.dY)("button",{class:(0,a.d_)(["flex flex-grow justify-start items-center px-7 py-10 default-focus-style symbologyStackButton truncate",e.selected?"detailsButtonSelected":"px-11"]),onClick:t[0]||(t[0]=(0,a.gi)((()=>{}),["stop"])),content:i()},[(0,a.ec)(m,{class:"symbStack w-32 h-32 mr-10",layer:e.layer,result:e.result},null,8,["layer","result"]),(0,a.dX)("div",b,(0,a.d$)(i()),1)],10,h)),[[d,{placement:"right",sticky:!0}]])}}}),x=["content"],w=(0,a.dM)({__name:"symbology-list",props:{results:{type:Object,required:!0},selected:{type:String,required:!0}},emits:["selection-changed"],setup(e,{emit:l}){const{t:t}=(0,a.dN)(),d=(0,a.h_)(),i=(0,a.e3)(),n=()=>{i.value._tippy.hide()},s=e=>{"Tab"===e.key&&i.value?.matches(":focus")&&i.value._tippy.show()},u=l,r=e,o=(0,a.e3)(""),c=(0,a.e3)([]),v=(0,a.e3)(!1),p=(0,a.e3)(!1),g=e=>d.getLayerByUid(e),f=e=>{o.value=e,u("selection-changed",e),v.value=!1},y=()=>{p.value||setTimeout((()=>{v.value=p.value}),500),p.value=!0},m=()=>{v.value=p.value=!1},h=()=>{p.value||(v.value=!0),p.value=!0},b=()=>{v.value=p.value=!1};return(0,a.e6)((()=>{c.value.push((0,a.e7)(r,(()=>{o.value=r.selected})))})),(0,a.e8)((()=>{i.value?.addEventListener("blur",n),i.value?.addEventListener("keyup",s)})),(0,a.e9)((()=>{c.value.forEach((e=>e())),i.value?.removeEventListener("blur",n),i.value?.removeEventListener("keyup",s)})),(e,l)=>{const d=(0,a.dS)("focus-item"),n=(0,a.dS)("focus-list"),s=(0,a.dS)("tippy");return(0,a.dT)(((0,a.dU)(),(0,a.dY)("div",{class:(0,a.d_)(["symbology-list absolute overflow-hidden z-50 p-0 w-48 bg-white text-sm inline-flex flex-col",{"symbology-list-expanded":v.value}]),onMouseover:y,onMouseleave:m,onFocus:h,onBlur:(0,a.gi)(b,["self"]),content:(0,a.e0)(t)("details.layers.results.list.tooltip"),ref_key:"el",ref:i},[((0,a.dU)(!0),(0,a.dY)(a.e1,null,(0,a.dZ)(r.results,((e,l)=>((0,a.dU)(),(0,a.dY)("div",{class:"flex justify-start relative",key:l},[(0,a.dT)(((0,a.dU)(),(0,a.dV)(k,{key:e.uid,layer:g(e.uid),result:e,selected:e.uid===o.value,onClick:l=>f(e.uid)},null,8,["layer","result","selected","onClick"])),[[d]])])))),128))],42,x)),[[n],[s,{trigger:"manual",placement:"top-start",touch:!1}]])}}}),U={class:"inline font-bold"},L=["innerHTML"],T=(0,a.dM)({__name:"esri-default",props:{fixtureFields:{type:Object,required:!1},fields:{type:Object,required:!0},identifyData:{type:Object,required:!0}},setup(e){const{t:l}=(0,a.dN)(),t=(0,a.e2)("iApi"),d=e,i=(e,l,t,a)=>{const d=e.find((e=>e[l].toLowerCase()===t.toLowerCase()));d&&delete a[d.name]},n=()=>{const e=Object.assign({},d.identifyData.data);i(d.fields,"type","geometry",e),t?.ui.exposeOids||i(d.fields,"type","oid",e),t?.ui.exposeMeasurements||(i(d.fields,"name","shape_length",e),i(d.fields,"name","shape_area",e));const l={};d.fields.forEach((e=>{const t=d.fixtureFields?.find((l=>e.name===l.field));l[e.name]={name:t?.alias||e.alias||e.name,type:e.type,visible:t?.visible??!0}}));const a={};Object.keys(e).forEach((d=>{const i=l[d];if(i&&i.visible){const l=e[d];a[d]={value:"number"==typeof l?t?.ui.formatNumber(l):l,alias:i.name,type:i.type}}}));for(const[d]of Object.entries(a))t.ui.isPlainText(a[d].value)&&(a[d].value=t.ui.escapeHtml(a[d].value));return a},s=(e,l,t)=>{switch(t){case"date":return r(e);default:return u(e,l)}},u=(e,t)=>{if(!e)return e;if(e.trim().match(/\.(jpeg|jpg|gif|png)$/)||e.trim().match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i))return`<img src="${e}" alt="${l("details.item.alert.defaultAltText",{alias:t})}" />`;const d="underline text-blue-700 break-all",i=document.createElement("div");return i.innerHTML=e.trim(),"A"==i.firstElementChild?.tagName?(i.firstElementChild.className=d,i.innerHTML):(0,a.iu)(e,{className:d,target:"_blank",validate:{url:e=>/^https?:\/\//.test(e)}})},r=e=>{const l=parseInt(e);return isNaN(l)?e:new Date(l).toISOString().split("T")[0]};return(e,l)=>((0,a.dU)(),(0,a.dY)("div",null,[((0,a.dU)(!0),(0,a.dY)(a.e1,null,(0,a.dZ)(n(),((e,t,d)=>((0,a.dU)(),(0,a.dY)("div",{class:"p-5 pl-3 flex justify-end flex-wrap even:bg-gray-300",key:d},[(0,a.dX)("span",U,(0,a.d$)(e.alias),1),l[0]||(l[0]=(0,a.dX)("span",{class:"flex-auto"},null,-1)),(0,a.dX)("span",{class:"inline",innerHTML:s(e.value,e.alias,e.type)},null,8,L)])))),128))]))}}),_=["innerHTML"],O={key:1},Y=(0,a.dM)({__name:"html-default",props:{identifyData:{type:Object,required:!0}},setup(e){const{t:l}=(0,a.dN)();return(t,d)=>e.identifyData?((0,a.dU)(),(0,a.dY)("div",{key:0,class:"whitespace-pre-wrap break-words h-full overflow-auto",innerHTML:e.identifyData.data.data??e.identifyData.data},null,8,_)):((0,a.dU)(),(0,a.dY)("div",O,(0,a.d$)((0,a.e0)(l)("details.layers.results.empty")),1))}}),M={class:"relative flex flex-grow truncate"},j={key:0,class:"flex flex-grow items-center truncate"},q={class:"flex p-8 items-center"},E=["innerHTML"],S={key:1,class:"symbologyIcon p-6"},X=["content","innerHTML","tabindex"],C={key:1,class:"flex p-6 flex-grow"},N={key:2,class:"zoomButton text-center p-3"},D=["content","aria-label"],H={key:0,class:"m-auto animate-spin spinner h-20 w-20"},$={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"green",class:"m-auto w-20 h-20"},z={key:2,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"red",class:"m-auto w-20 h-20"},I=["innerHTML"],Q=(0,a.dM)({__name:"result-item",props:{uid:{type:String,required:!0},data:{type:Object,required:!0},open:{type:Boolean,required:!1},inList:{type:Boolean,required:!1}},setup(e){const l=(0,a.h_)(),t=e,d=(0,a.e2)("iApi"),i=(0,a.e3)([]),n=(0,a.g2)(),{t:s}=(0,a.dN)(),u=(0,a.e3)(!1),r=(0,a.e3)(""),o=(0,a.e3)("none"),c=(0,a.e3)(),v=()=>l.getLayerByUid(t.uid),p=(0,a.dQ)((()=>n.properties)),g=(0,a.dQ)((()=>n.defaultTemplates)),f=(0,a.dQ)((()=>v()?.supportsFeatures??!1)),y=(0,a.dQ)((()=>v()?.mapLayer??!1)),m=(0,a.dQ)((()=>{const e=v()?.nameField;let l=e&&t.data.loaded?t.data.data[e]:d.$i18n.t("details.items.title");return d.ui.isPlainText(l)&&(l=d.ui.escapeHtml(l)),l})),h=e=>{if("string"==typeof e){const l="underline text-blue-700 break-all",t=document.createElement("div");return t.innerHTML=e.trim(),"A"==t.firstElementChild?.tagName?(t.firstElementChild.className=l,t.innerHTML):(0,a.iu)(e,{className:l,target:"_blank",validate:{url:e=>/^https?:\/\//.test(e)}})}return e},b=()=>{L("none"),t.data.loaded?k():t.data.load().then((()=>{k()}))},k=()=>{if(r.value="",!t.data||!t.data.loaded)return;const e=v();if(void 0!==e){if(e.supportsFeatures){const l=e.oidField;e.getIcon(t.data.data[l]).then((e=>{r.value=e}))}}else console.warn(`could not find layer for uid ${t.uid} during icon lookup`)},x=(0,a.dQ)((()=>{const e=v();return e&&p.value[e.id]&&p.value[e.id].template?p.value[e.id].template:g.value&&g.value[t.data.format]?g.value[t.data.format]:f.value?T:Y})),w=(0,a.dQ)((()=>f.value&&v()?.fields||[])),U=(0,a.dQ)((()=>{const e=v();if(e&&p.value[e.id]&&p.value[e.id].fields)return p.value[e.id].fields})),L=e=>{"zoomed"===e||"error"===e?setTimeout((()=>{o.value=e,c.value?._tippy.show(),setTimeout((()=>{c.value?._tippy.hide(),o.value="none"}),3e3)}),300):o.value=e},_=()=>{if("none"!==o.value)return;L("zooming");const e=v();if(void 0===e||!e.isLoaded)return console.warn(`Could not find layer for uid ${t.uid} during zoom geometry lookup`),void L("error");if(!t.data.loaded)return console.warn("Details zoomToFeature call on item that is still loading. Should be impossible, alert the devs."),void L("error");const l=t.data.data[e.oidField],i=()=>{const t={getGeom:!0};e.getGraphic(l,t).then((e=>{e.geometry.invalid()?(console.error(`Could not find graphic for objectid ${l}`),L("error")):(d.geo.map.zoomMapTo(e.geometry),L("zoomed"),d.updateAlert(d.$i18n.t("details.item.alert.zoom")))})).catch((()=>{L("error")}))};e.layerType===a.ga.FEATURE&&e.geomType!==a.iv.POINT?e.getGraphicExtent(l).then((e=>{d.geo.map.zoomMapTo(e),L("zoomed"),d.updateAlert(d.$i18n.t("details.item.alert.zoom"))})).catch((()=>{i()})):i()};return(0,a.e6)((()=>{i.value.push((0,a.e7)(t,(()=>{b()}),{deep:!1,immediate:!0}))})),(0,a.e9)((()=>{i.value.forEach((e=>e()))})),(l,t)=>{const i=(0,a.dS)("truncate"),n=(0,a.dS)("tippy");return(0,a.dU)(),(0,a.dY)(a.e1,null,[(0,a.dX)("div",M,[f.value?((0,a.dU)(),(0,a.dY)("div",j,[(0,a.dX)("div",q,[e.data.loaded&&r.value?((0,a.dU)(),(0,a.dY)("span",{key:0,class:"flex-none symbologyIcon",innerHTML:r.value},null,8,E)):((0,a.dU)(),(0,a.dY)("div",S,t[3]||(t[3]=[(0,a.dX)("div",{class:"animate-spin spinner h-20 w-20"},null,-1)])))]),e.data.loaded?(0,a.dT)(((0,a.dU)(),(0,a.dY)("span",{key:0,class:"pl-3 text-left flex-grow itemName",content:m.value,innerHTML:h(m.value),onTouchstart:t[0]||(t[0]=e=>u.value=!0),onTouchend:t[1]||(t[1]=e=>u.value=!1),tabindex:e.inList?-1:0},null,40,X)),[[i,{options:{placement:"top-start",offset:()=>u.value?[0,25]:[0,0]}}]]):((0,a.dU)(),(0,a.dY)("div",C,(0,a.d$)((0,a.e0)(s)("details.loading")),1)),e.data.loaded?((0,a.dU)(),(0,a.dY)("span",N,[y.value?(0,a.dT)(((0,a.dU)(),(0,a.dY)("button",{key:0,type:"button",content:(0,a.e0)(s)("details.item.zoom"+("none"===o.value?"":`.${o.value}`)),"aria-label":(0,a.e0)(s)("grid.cells.zoom"+("none"===o.value?"":`.${o.value}`)),ref_key:"zoomButton",ref:c,onClick:t[2]||(t[2]=e=>{e.stopPropagation(),_()}),class:"text-gray-600 w-24 h-24 p-2 flex justify-center items-center"},["zooming"===o.value?((0,a.dU)(),(0,a.dY)("div",H)):"zoomed"===o.value?((0,a.dU)(),(0,a.dY)("svg",$,t[4]||(t[4]=[(0,a.dX)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12.75l6 6 9-13.5"},null,-1)]))):"error"===o.value?((0,a.dU)(),(0,a.dY)("svg",z,t[5]||(t[5]=[(0,a.dX)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1)]))):((0,a.dU)(),(0,a.dY)("span",{key:3,innerHTML:(0,a.e0)(d).ui.getZoomIcon()},null,8,I))],8,D)),[[n,{placement:"bottom"}]]):(0,a.eb)("",!0)])):(0,a.eb)("",!0)])):(0,a.eb)("",!0)]),e.open?((0,a.dU)(),(0,a.dV)((0,a.hx)(x.value),{key:0,identifyData:e.data,fields:w.value,fixtureFields:U.value,class:"p-8"},null,8,["identifyData","fields","fixtureFields"])):(0,a.eb)("",!0)],64)}}}),V={key:0,class:"layerName w-full flex-grow p-5 pb-8 font-bold truncate",tabIndex:"0"},B={key:1,class:"p-8 mb-8 bg-gray-100 flex justify-between"},A={for:"toggle"},F={key:2,class:"flex flex-col justify-between p-8 mb-8 bg-gray-100"},P={class:"flex"},G=["aria-label"],Z=["content","aria-label","disabled"],R={class:"px-3 text-center flex-grow"},K=["content","aria-label","disabled"],W={key:3},J={key:0},ee=["content"],le=["onClick"],te={key:1,class:"text-center"},ae={key:4,class:"p-5"},de=(0,a.dM)({__name:"result-list",props:{uid:{type:String,required:!0},results:{type:Object,required:!0}},setup(e){const l=(0,a.e3)(),t=()=>{l.value._tippy.hide()},i=e=>{"Tab"===e.key&&l.value?.matches(":focus")&&l.value._tippy.show()},n=(0,a.e2)("iApi"),s=(0,a.g2)(),u=(0,a.h_)(),r=e,{t:o}=(0,a.dN)(),c=(0,a.e3)(!1),v=(0,a.e3)(n.fixture.get("details")),p=(0,a.e3)(!0),g=(0,a.e3)(!1),f=(0,a.e3)(0),y=(0,a.e3)(20),m=(0,a.e3)([]),h=(0,a.e3)([]),b=(0,a.dQ)((()=>s.activeGreedy)),k=(0,a.dQ)((()=>s.properties)),x=(0,a.dQ)((()=>f.value+y.value)),w=()=>u.getLayerByUid(r.uid),U=()=>r.results.find((e=>e.uid===r.uid)),L=(0,a.dQ)((()=>U()?.loaded??!1)),T=(0,a.dQ)((()=>U()?.requestTime)),_=(0,a.dQ)((()=>c.value&&(!g.value&&M().length>1||g.value&&M().length>y.value))),O=(0,a.dQ)((()=>{const e=w();return e&&k.value[e.id]&&k.value[e.id].name?k.value[e.id].name:e?.name??""})),Y=(0,a.dQ)((()=>r.uid)),M=()=>{const e=U();return e?e.items:[]},j=(0,a.dQ)((()=>M()[f.value])),q=(0,a.dQ)((()=>{if(v.value.hasHilighter()){const e=w();if(e)return e.mapLayer&&e.supportsFeatures}return!1})),E=e=>{p.value=e,s.hilightToggle=e,C()},S=()=>{const e=w();f.value=f.value??0,p.value=s.hilightToggle??p.value,g.value=!1,c.value=!!e,C()},X=e=>{g.value?(f.value+=e*y.value,C()):f.value+=e},C=()=>{const e=M();if(p.value&&L.value&&e.length>0&&q.value)if(g.value)v.value.hilightDetailsItems(e.slice(f.value,x.value),r.uid);else{const l=e[f.value];l&&v.value.hilightDetailsItems([l],r.uid)}else v.value.removeDetailsHilight()},N=()=>{g.value=!0,f.value=Math.floor(f.value/y.value)*y.value,C()},D=()=>{v.value.removeDetailsHilight(),h.value.forEach((e=>e())),m.value.forEach((e=>n.event.off(e)))},H=()=>{v.value.removeDetailsHilight()},$=e=>{const l=f.value;f.value=e,g.value=!1,l===e&&C()};return(0,a.e8)((()=>{m.value.push(n.event.on(a.dE.LAYER_REMOVE,(e=>{const l=n.panel.get("details");r.uid===e.uid&&l&&l.close()}))),m.value.push(n.event.on(a.dE.PANEL_CLOSED,(e=>{"details"===e.id&&D()}))),m.value.push(n.event.on(a.dE.PANEL_MINIMIZED,(e=>{"details"===e.id&&H()}))),m.value.push(n.event.on(a.dE.MAP_BASEMAPCHANGE,(e=>{p.value&&e.schemaChanged&&C()}))),l.value?.addEventListener("blur",t),l.value?.addEventListener("keyup",i)})),(0,a.e6)((()=>{h.value.push((0,a.e7)(j,(()=>{g.value||(S(),void 0===j.value&&v.value.removeDetailsHilight())}),{deep:!1,immediate:!0})),h.value.push((0,a.e7)(Y,(()=>{const e=r.uid;if(g.value&&e){const l=U();l&&l.loading.then((()=>{r.uid===e&&g.value&&C()}))}}),{deep:!1,immediate:!0})),h.value.push((0,a.e7)(T,(()=>{f.value=0}))),h.value.push((0,a.e7)((()=>r.uid),(()=>{f.value=0})))})),(0,a.e9)((()=>{l.value?.removeEventListener("blur",t),l.value?.removeEventListener("keyup",i)})),(t,i)=>{const n=(0,a.dS)("truncate"),s=(0,a.dS)("tippy"),u=(0,a.dS)("focus-item"),r=(0,a.dS)("focus-list");return L.value&&0===b.value?((0,a.dU)(),(0,a.dY)("div",{key:0,class:"detailsContent relative flex flex-col flex-grow pl-5",style:(0,a.gh)(e.results.length>1?{"margin-left":"42px"}:"")},[c.value?(0,a.dT)(((0,a.dU)(),(0,a.dY)("h1",V,[(0,a.ea)((0,a.d$)(O.value),1)])),[[n,{options:{placement:"top-start"}}]]):(0,a.eb)("",!0),q.value?((0,a.dU)(),(0,a.dY)("div",B,[(0,a.dX)("label",A,(0,a.d$)((0,a.e0)(o)("details.togglehilight.title")),1),(0,a.ec)(d.T,{config:{value:p.value,disabled:!1},onToggled:E},null,8,["config"])])):(0,a.eb)("",!0),_.value?((0,a.dU)(),(0,a.dY)("div",F,[(0,a.dX)("div",P,[g.value?(0,a.eb)("",!0):((0,a.dU)(),(0,a.dY)("button",{key:0,type:"button",class:"px-8 font-bold hover:bg-gray-200 focus:bg-gray-200","aria-label":(0,a.e0)(o)("details.item.see.list"),onClick:i[0]||(i[0]=e=>N())},(0,a.d$)((0,a.e0)(o)("details.item.see.list")),9,G)),(0,a.dX)("div",{class:(0,a.d_)(["flex ml-auto bg-gray-200 py-8 items-center",{"w-full":g.value}])},[(0,a.dT)(((0,a.dU)(),(0,a.dY)("button",{type:"button",content:(0,a.e0)(o)(g.value?"details.items.previous":"details.item.previous.item"),onClick:i[1]||(i[1]=e=>X(-1)),class:"mx-2 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":(0,a.e0)(o)(g.value?"details.items.previous":"details.item.previous.item"),disabled:0===f.value},i[3]||(i[3]=[(0,a.dX)("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[(0,a.dX)("g",null,[(0,a.dX)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1)]),8,Z)),[[s,{placement:"top"}]]),(0,a.dX)("span",R,(0,a.d$)(g.value?(0,a.e0)(o)("details.items.range",[f.value+1,Math.min(x.value,M().length),M().length]):(0,a.e0)(o)("details.item.count",[f.value+1,M().length])),1),(0,a.dT)(((0,a.dU)(),(0,a.dY)("button",{type:"button",content:(0,a.e0)(o)(g.value?"details.items.next":"details.item.next.item"),onClick:i[2]||(i[2]=e=>X(1)),class:"mx-2 rotate-180 opacity-60 hover:opacity-90 disabled:opacity-30 disabled:cursor-default","aria-label":(0,a.e0)(o)(g.value?"details.items.next":"details.item.next.item"),disabled:!g.value&&f.value===M().length-1||g.value&&x.value>=M().length},i[4]||(i[4]=[(0,a.dX)("svg",{height:"24",width:"24",viewBox:"0 0 23 23"},[(0,a.dX)("g",null,[(0,a.dX)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"})])],-1)]),8,K)),[[s,{placement:"top"}]])],2)])])):(0,a.eb)("",!0),c.value?((0,a.dU)(),(0,a.dY)("div",W,[M().length>0?((0,a.dU)(),(0,a.dY)("div",J,[g.value?(0,a.dT)(((0,a.dU)(),(0,a.dY)("div",{key:0,class:"flex flex-col",content:(0,a.e0)(o)("details.layers.results.list.tooltip"),ref_key:"el",ref:l},[((0,a.dU)(!0),(0,a.dY)(a.e1,null,(0,a.dZ)(M().slice(f.value,x.value),((l,t)=>(0,a.dT)(((0,a.dU)(),(0,a.dY)("button",{class:"flex flex-grow truncate default-focus-style hover:bg-gray-200",key:t,onClick:e=>$(f.value+t)},[(0,a.ec)(Q,{data:l,uid:e.uid,open:!1,"in-list":!0},null,8,["data","uid"])],8,le)),[[u,"show-truncate"]]))),128))],8,ee)),[[r],[s,{trigger:"manual",placement:"top-start",touch:!1}]]):((0,a.dU)(),(0,a.dV)(Q,{key:1,data:j.value,uid:e.uid,open:!0,"in-list":!1},null,8,["data","uid"]))])):((0,a.dU)(),(0,a.dY)("div",te,(0,a.d$)((0,a.e0)(o)("details.layers.results.empty.currentLayer")),1))])):((0,a.dU)(),(0,a.dY)("div",ae,(0,a.d$)((0,a.e0)(o)("details.item.no.data")),1))],4)):((0,a.dU)(),(0,a.dY)("div",{key:1,class:(0,a.d_)(["flex justify-center py-10 items-center",e.results.length>1?"ml-42":""])},[i[5]||(i[5]=(0,a.dX)("span",{class:"animate-spin spinner h-20 w-20 px-5 mr-8"},null,-1)),(0,a.ea)(" "+(0,a.d$)((0,a.e0)(o)("details.item.loading")),1)],2))}}}),ie=(0,a.fN)(de,[["__scopeId","data-v-3706255a"]]),ne={class:"relative h-full"},se={class:"detailsContentSection overflow-y-auto h-full"},ue=(0,a.dM)({__name:"details-screen",props:{panel:{type:Object}},setup(e){const{t:l}=(0,a.dN)(),t=(0,a.e2)("iApi"),d=(0,a.g2)(),i=(0,a.e3)([]),n=(0,a.e3)([]),s=(0,a.e3)([]),u=(0,a.e3)(!1),r=(0,a.e3)(""),o=(0,a.dQ)((()=>d.activeGreedy)),c=(0,a.dQ)((()=>d.payload)),v=(0,a.dQ)((()=>d.properties)),p=e=>{r.value=e},g=e=>s.value.find((l=>l.uid===e)),f=e=>{void 0!==e&&(d.activeGreedy=0===e.length?0:e[0].requestTime,s.value=e,y(e))},y=e=>{if(r.value){const l=g(r.value);l?l.loading.then((()=>{l.requestTime===o.value&&(l.items.length>0?(d.activeGreedy=0,u.value=!1):m(e))})):m(e)}else m(e)},m=(e,l)=>{let t;if(l)t=l;else{const l=d.properties,a=e.map((e=>[l[e.layerId]?.priority??50,e.layerId])),i=new Set(a.map((e=>e[0])));t=[],i.forEach((e=>{const l=a.filter((l=>l[0]===e)).map((e=>e[1]));t.push([e,l])})),t.sort(((e,l)=>l[0]-e[0]))}if(0===t.length)return d.activeGreedy=0,void(u.value=!0);const a=t[t.length-1][1],i=e.filter((e=>a.includes(e.layerId))).map((e=>e.loading.then((()=>e.items.length>0?Promise.resolve(e):Promise.reject())))),n=0===e.length?0:e[0].requestTime;Promise.any(i).then((e=>{e.requestTime===o.value&&(d.activeGreedy=0,r.value=e.uid,u.value=!1)})).catch((()=>{n===o.value&&(t.pop(),m(e,t))}))};return(0,a.e6)((()=>{n.value.push((0,a.e7)(c,(e=>{f(e)}),{deep:!1,immediate:!0}))})),(0,a.e9)((()=>{i.value.forEach((e=>t.event.off(e))),n.value.forEach((e=>e()))})),(t,i)=>{const n=(0,a.dR)("panel-screen");return(0,a.dU)(),(0,a.dV)(n,{panel:e.panel},{header:(0,a.dW)((()=>[(0,a.ea)((0,a.d$)("toggleEvent"===(0,a.e0)(d).origin?(0,a.e0)(l)("details.layers.title.gridOrigin"):(0,a.e0)(l)("details.layers.title.identifyOrigin")),1)])),content:(0,a.dW)((()=>[(0,a.dX)("div",ne,[s.value.length>1?((0,a.dU)(),(0,a.dV)(w,{key:0,results:s.value,detailsProperties:v.value,selected:r.value,onSelectionChanged:p},null,8,["results","detailsProperties","selected"])):(0,a.eb)("",!0),(0,a.dX)("div",se,[u.value?((0,a.dU)(),(0,a.dY)("div",{key:1,class:(0,a.d_)(["text-center",{"ml-42":s.value.length>1}])},(0,a.d$)(s.value.length>=1?(0,a.e0)(l)("details.layers.results.empty"):(0,a.e0)(l)("details.layers.results.empty.noLayers")),3)):((0,a.dU)(),(0,a.dV)(ie,{key:0,uid:r.value,results:s.value},null,8,["uid","results"]))])])])),_:1},8,["panel"])}}}),re=(0,a.fN)(ue,[["__scopeId","data-v-150a1d19"]])},78253:function(e,l,t){t.d(l,{T:function(){return p}});var a=t(98503),d={name:"Toggle",emits:["input","update:modelValue","change"],props:{value:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},modelValue:{validator:function(e){return e=>-1!==["number","string","boolean"].indexOf(typeof e)||null==e},required:!1},id:{type:[String,Number],required:!1,default:"toggle"},name:{type:[String,Number],required:!1,default:"toggle"},disabled:{type:Boolean,required:!1,default:!1},required:{type:Boolean,required:!1,default:!1},falseValue:{type:[String,Number,Boolean],required:!1,default:!1},trueValue:{type:[String,Number,Boolean],required:!1,default:!0},onLabel:{type:[String,Object],required:!1,default:""},offLabel:{type:[String,Object],required:!1,default:""},classes:{type:Object,required:!1,default:()=>({})},labelledby:{type:String,required:!1},describedby:{type:String,required:!1},aria:{required:!1,type:Object,default:()=>({})}},setup(e,l){const t=function(e,l){const{value:t,modelValue:d,falseValue:i,trueValue:n,disabled:s}=(0,a.go)(e),u=d&&void 0!==d.value?d:t,r=(0,a.dQ)((()=>u.value===n.value)),o=e=>{l.emit("input",e),l.emit("update:modelValue",e),l.emit("change",e)},c=()=>{o(n.value)},v=()=>{o(i.value)};return-1!==[null,void 0,!1,0,"0","off"].indexOf(u.value)&&-1===[i.value,n.value].indexOf(u.value)&&v(),-1!==[!0,1,"1","on"].indexOf(u.value)&&-1===[i.value,n.value].indexOf(u.value)&&c(),{externalValue:u,checked:r,update:o,check:c,uncheck:v,handleInput:e=>{o(e.target.checked?n.value:i.value)},handleClick:()=>{s.value||(r.value?v():c())}}}(e,l),d=function(e,l,t){const{trueValue:d,falseValue:i,onLabel:n,offLabel:s}=(0,a.go)(e),u=t.checked,r=t.update;return{label:(0,a.dQ)((()=>{let e=u.value?n.value:s.value;return e||(e="&nbsp;"),e})),toggle:()=>{r(u.value?i.value:d.value)},on:()=>{r(d.value)},off:()=>{r(i.value)}}}(e,0,{checked:t.checked,update:t.update}),i=function(e,l,t){const d=(0,a.go)(e),i=d.disabled,n=t.checked,s=(0,a.dQ)((()=>({container:"toggle-container",toggle:"toggle",toggleOn:"toggle-on",toggleOff:"toggle-off",toggleOnDisabled:"toggle-on-disabled",toggleOffDisabled:"toggle-off-disabled",handle:"toggle-handle",handleOn:"toggle-handle-on",handleOff:"toggle-handle-off",handleOnDisabled:"toggle-handle-on-disabled",handleOffDisabled:"toggle-handle-off-disabled",label:"toggle-label",...d.classes.value})));return{classList:(0,a.dQ)((()=>({container:s.value.container,toggle:[s.value.toggle,i.value?n.value?s.value.toggleOnDisabled:s.value.toggleOffDisabled:n.value?s.value.toggleOn:s.value.toggleOff],handle:[s.value.handle,i.value?n.value?s.value.handleOnDisabled:s.value.handleOffDisabled:n.value?s.value.handleOn:s.value.handleOff],label:s.value.label})))}}(e,0,{checked:t.checked}),n=function(e,l,t){const{disabled:d}=(0,a.go)(e),i=t.check,n=t.uncheck,s=t.checked;return{handleSpace:()=>{d.value||(s.value?n():i())}}}(e,0,{check:t.check,uncheck:t.uncheck,checked:t.checked});return{...t,...i,...d,...n}}};const i=["tabindex","aria-checked","aria-describedby","aria-labelledby"],n=["id","name","value","checked","disabled"],s=["innerHTML"],u=["checked"];d.render=function(e,l,t,d,r,o){return(0,a.dU)(),(0,a.dY)("div",(0,a.gq)({class:e.classList.container,tabindex:t.disabled?void 0:0,"aria-checked":e.checked,"aria-describedby":t.describedby,"aria-labelledby":t.labelledby,role:"switch"},t.aria,{onKeypress:l[1]||(l[1]=(0,a.gj)((0,a.gi)(((...l)=>e.handleSpace&&e.handleSpace(...l)),["prevent"]),["space"]))}),[(0,a.dT)((0,a.dX)("input",{type:"checkbox",id:t.id,name:t.name,value:t.trueValue,checked:e.checked,disabled:t.disabled},null,8,n),[[a.fM,!1]]),(0,a.dX)("div",{class:(0,a.d_)(e.classList.toggle),onClick:l[0]||(l[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[(0,a.dX)("span",{class:(0,a.d_)(e.classList.handle)},null,2),(0,a.gp)(e.$slots,"label",{checked:e.checked,classList:e.classList},(()=>[(0,a.dX)("span",{class:(0,a.d_)(e.classList.label),innerHTML:e.label},null,10,s)])),t.required?((0,a.dU)(),(0,a.dY)("input",{key:0,type:"checkbox",style:{appearance:"none",height:"1px",margin:"0",padding:"0",fontSize:"0",background:"transparent",position:"absolute",width:"100%",bottom:"0",outline:"none"},checked:e.checked,"aria-hidden":"true",tabindex:"-1",required:""},null,8,u)):(0,a.eb)("v-if",!0)],2)],16,i)},d.__file="src/Toggle.vue";const r={class:"flex flex-row rv-label"},o={class:"flex items-center"},c=["innerHTML"],v=(0,a.dM)({__name:"toggle-switch-control",props:{config:{type:Object,required:!0},name:String,icon:String,ariaLabel:String},emits:["toggled"],setup(e,{emit:l}){const t=l,i=e,n=(0,a.e3)(i.config.value),s=(0,a.e3)(!!i.config.disabled),u=(0,a.e3)(0),v=(0,a.gd)([]),p=(0,a.e3)(null);v.push((0,a.e7)((0,a.gr)(i,"config"),((e,l)=>{n.value=e.value,s.value=!!e.disabled,u.value+=s.value!==l.disabled?1:0}),{deep:!0}),(0,a.e7)(p,(e=>{e&&f()})));const g=()=>{s.value||(n.value=!n.value,t("toggled",n.value))},f=()=>{if(p.value){const e=p.value.querySelector('input[type="checkbox"]');e&&i.ariaLabel&&e.setAttribute("aria-label",i.ariaLabel)}};return(0,a.e9)((()=>{v.forEach((e=>e()))})),(l,i)=>((0,a.dU)(),(0,a.dY)("div",r,[(0,a.dX)("div",o,[(0,a.dX)("div",{innerHTML:e.icon,class:"p-8 pl-0"},null,8,c),(0,a.ea)(" "+(0,a.d$)(e.name),1)]),i[2]||(i[2]=(0,a.dX)("div",{class:"flex-1"},null,-1)),(0,a.dX)("div",{ref_key:"toggleWrapper",ref:p},[((0,a.dU)(),(0,a.dV)((0,a.e0)(d),{onChange:i[0]||(i[0]=e=>t("toggled",e)),onKeyupCapture:[(0,a.gj)((0,a.gi)(g,["stop"]),["enter"]),(0,a.gj)((0,a.gi)(g,["stop"]),["space"])],disabled:s.value,key:u.value,modelValue:n.value,"onUpdate:modelValue":i[1]||(i[1]=e=>n.value=e),classes:{container:"inline-block rounded-full outline-none focus:ring focus:ring-blue-500 focus:ring-opacity-30",toggle:"flex w-40 h-15 rounded-full relative cursor-pointer transition items-center box-content border-2 text-xs leading-none",toggleOn:"bg-blue-500 border-blue-500 justify-start text-white",toggleOff:"bg-gray-200 border-gray-200 justify-end text-gray-700",toggleOnDisabled:"bg-gray-300 border-gray-300 justify-start text-gray-400 cursor-not-allowed",toggleOffDisabled:"bg-gray-200 border-gray-200 justify-end text-gray-400 cursor-not-allowed",handle:"inline-block bg-white w-15 h-15 top-0 rounded-full absolute transition-all",handleOn:"left-full transform -translate-x-full",handleOff:"left-0",handleOnDisabled:"bg-gray-100 left-full transform -translate-x-full",handleOffDisabled:"bg-gray-100 left-0",label:"text-center w-8 border-box whitespace-nowrap select-none"}},null,8,["onKeyupCapture","disabled","modelValue"]))],512)]))}}),p=(0,a.fN)(v,[["__scopeId","data-v-f2650ee4"]])}}]);
//# sourceMappingURL=5196.bd25d462.js.map