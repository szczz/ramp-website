"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[78,8252],{18696:function(e,t,r){r.d(t,{i:function(){return i}});var o=r(98503);function n(e){return"portalItem"in e}const i=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):n(this)?this.portalItem?.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,o.k)([(0,o.o)({type:String})],t.prototype,"apiKey",null),t=(0,o.k)([(0,o.A)("esri.layers.mixins.APIKeyMixin")],t),t}},99907:function(e,t,r){r.d(t,{e:function(){return n}});var o=r(98503);const n=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return(0,o.k)([(0,o.o)({type:Object,json:{write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0)})}}})],t.prototype,"customParameters",void 0),t=(0,o.k)([(0,o.A)("esri.layers.mixins.CustomParametersMixin")],t),t}},904:function(e,t,r){r.d(t,{d:function(){return a}});var o,n=r(98503),i=r(98089);const s=new n.ax({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let l=o=class extends n.v{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=n.B.fromJSON(t.spatialReference),o=[];for(let i=0;i<e.length;i++){const t=e[i],s=n.b1.fromJSON(t),l=t.geometry?.spatialReference;null==s.geometry||l||(s.geometry.spatialReference=r);const a=t.aggregateGeometries,u=s.aggregateGeometries;if(a&&null!=u)for(const e in u){const t=u[e],o=a[e],n=o?.spatialReference;null==t||n||(t.spatialReference=r)}o.push(s)}return o}writeGeometryType(e,t,r,o){if(e)return void s.write(e,t,r,o);const{features:n}=this;if(n)for(const i of n)if(null!=i?.geometry)return void s.write(i.geometry.type,t,r,o)}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,o=(0,n.b3)(e);return o&&!r&&t.spatialReference&&(o.spatialReference=n.B.fromJSON(t.spatialReference)),o}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r)for(const o of r)if(o&&null!=o.geometry&&o.geometry.spatialReference)return void(t.spatialReference=o.geometry.spatialReference.toJSON())}clone(){return new o(this.cloneProperties())}cloneProperties(){return(0,n.f)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const o=t.features[r];if(o.geometry){const t=e?.[r];o.geometry=t?.toJSON()||o.geometry}}return t}quantize(e){const{scale:[t,r],translate:[o,n]}=e,i=e=>Math.round((e-o)/t),s=e=>Math.round((n-e)/r),l=this.features,a=this._getQuantizationFunction(this.geometryType,i,s);for(let u=0,c=l.length;u<c;u++)a?.(l[u].geometry)||(l.splice(u,1),u--,c--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[o,n],scale:[i,s]}=r,l=e=>e*i+o,a=e=>n-e*s;let u=null,c=null;if(this.hasZ&&null!=r?.scale?.[2]){const{translate:[,,e],scale:[,,t]}=r;u=r=>r*t+e}if(this.hasM&&null!=r?.scale?.[3]){const{translate:[,,,e],scale:[,,,t]}=r;c=r=>null==r?r:r*t+e}const p=this._getHydrationFunction(e,l,a,u,c);for(const{geometry:d}of t)null!=d&&p&&p(d);return this.transform=null,this}_quantizePoints(e,t,r){let o,n;const i=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(s>0){const e=t(l[0]),s=r(l[1]);e===o&&s===n||(i.push([e-o,s-n]),o=e,n=s)}else o=t(l[0]),n=r(l[1]),i.push([o,n])}return i.length>0?i:null}_getQuantizationFunction(e,t,r){return"point"===e?e=>(e.x=t(e.x),e.y=r(e.y),e):"polyline"===e||"polygon"===e?e=>{const o=(0,n.a9)(e)?e.rings:e.paths,i=[];for(let n=0,s=o.length;n<s;n++){const e=o[n],s=this._quantizePoints(e,t,r);s&&i.push(s)}return i.length>0?((0,n.a9)(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?e=>{const o=this._quantizePoints(e.points,t,r);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?e=>e:null}_getHydrationFunction(e,t,r,o,i){return"point"===e?e=>{e.x=t(e.x),e.y=r(e.y),o&&(e.z=o(e.z))}:"polyline"===e||"polygon"===e?e=>{const s=(0,n.a9)(e)?e.rings:e.paths;let l,a;for(let o=0,n=s.length;o<n;o++){const e=s[o];for(let o=0,n=e.length;o<n;o++){const n=e[o];o>0?(l+=n[0],a+=n[1]):(l=n[0],a=n[1]),n[0]=t(l),n[1]=r(a)}}if(o&&i)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2]),r[3]=i(r[3])}}else if(o)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=o(r[2])}}else if(i)for(let t=0,r=s.length;t<r;t++){const e=s[t];for(let t=0,r=e.length;t<r;t++){const r=e[t];r[2]=i(r[2])}}}:"extent"===e?e=>{e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),o&&null!=e.zmax&&null!=e.zmin&&(e.zmax=o(e.zmax),e.zmin=o(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?e=>{const n=e.points;let s,l;for(let o=0,i=n.length;o<i;o++){const e=n[o];o>0?(s+=e[0],l+=e[1]):(s=e[0],l=e[1]),e[0]=t(s),e[1]=r(l)}if(o&&i)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2]),e[3]=i(e[3])}else if(o)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=o(e[2])}else if(i)for(let t=0,r=n.length;t<r;t++){const e=n[t];e[2]=i(e[2])}}:null}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],l.prototype,"displayFieldName",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],l.prototype,"exceededTransferLimit",void 0),(0,n.k)([(0,n.o)({type:[n.b1],json:{write:!0}})],l.prototype,"features",void 0),(0,n.k)([(0,n.u)("features")],l.prototype,"readFeatures",null),(0,n.k)([(0,n.o)({type:[i.y],json:{write:!0}})],l.prototype,"fields",void 0),(0,n.k)([(0,n.o)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:s.read}}})],l.prototype,"geometryType",void 0),(0,n.k)([(0,n.q)("geometryType")],l.prototype,"writeGeometryType",null),(0,n.k)([(0,n.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],l.prototype,"hasM",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],l.prototype,"hasZ",void 0),(0,n.k)([(0,n.o)({types:n.b2,json:{write:!0}})],l.prototype,"queryGeometry",void 0),(0,n.k)([(0,n.u)("queryGeometry")],l.prototype,"readQueryGeometry",null),(0,n.k)([(0,n.o)({type:n.B,json:{write:!0}})],l.prototype,"spatialReference",void 0),(0,n.k)([(0,n.q)("spatialReference")],l.prototype,"writeSpatialReference",null),(0,n.k)([(0,n.o)({json:{write:!0}})],l.prototype,"transform",void 0),l=o=(0,n.k)([(0,n.A)("esri.rest.support.FeatureSet")],l),l.prototype.toJSON.isDefaultToJSON=!0;const a=l},69949:function(e,t,r){r.d(t,{p:function(){return s}});var o=r(98503);const n=new o.ax({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let i=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"name",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"description",void 0),(0,o.k)([(0,o.o)({json:{read:n.read,write:n.write}})],i.prototype,"drawingTool",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"prototype",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],i.prototype,"thumbnail",void 0),i=(0,o.k)([(0,o.A)("esri.layers.support.FeatureTemplate")],i);const s=i},29344:function(e,t,r){r.d(t,{n:function(){return l}});var o=r(98503),n=r(98089),i=r(69949);let s=class extends((0,o.a_)(o.v)){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,n.i)(e[r]);return t}writeDomains(e,t){const r={};for(const o of Object.keys(e))e[o]&&(r[o]=e[o]?.toJSON());t.domains=r}};(0,o.k)([(0,o.o)({json:{write:!0}})],s.prototype,"id",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],s.prototype,"name",void 0),(0,o.k)([(0,o.o)({json:{write:!0}})],s.prototype,"domains",void 0),(0,o.k)([(0,o.u)("domains")],s.prototype,"readDomains",null),(0,o.k)([(0,o.q)("domains")],s.prototype,"writeDomains",null),(0,o.k)([(0,o.o)({type:[i.p],json:{write:!0}})],s.prototype,"templates",void 0),s=(0,o.k)([(0,o.A)("esri.layers.support.FeatureType")],s);const l=s},98089:function(e,t,r){r.r(t),r.d(t,{F:function(){return j},a:function(){return d},i:function(){return b},n:function(){return w},p:function(){return s},y:function(){return T}});var o,n=r(98503),i=r(22555);let s=o=class extends n.v{constructor(e){super(e),this.name=null,this.code=null}clone(){return new o({name:this.name,code:this.code})}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],s.prototype,"name",void 0),(0,n.k)([(0,n.o)({type:[String,Number],json:{write:!0}})],s.prototype,"code",void 0),s=o=(0,n.k)([(0,n.A)("esri.layers.support.CodedValue")],s);const l=new n.ax({inherited:"inherited",codedValue:"coded-value",range:"range"});let a=class extends n.v{constructor(e){super(e),this.name=null,this.type=null}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],a.prototype,"name",void 0),(0,n.k)([(0,n.bk)(l)],a.prototype,"type",void 0),a=(0,n.k)([(0,n.A)("esri.layers.support.Domain")],a);const u=a;var c;let p=c=class extends u{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some((e=>(String(e.code)===r&&(t=e.name),!!t)))}return t}clone(){return new c({codedValues:(0,n.f)(this.codedValues),name:this.name})}};(0,n.k)([(0,n.o)({type:[s],json:{write:!0}})],p.prototype,"codedValues",void 0),(0,n.k)([(0,n.bk)({codedValue:"coded-value"})],p.prototype,"type",void 0),p=c=(0,n.k)([(0,n.A)("esri.layers.support.CodedValueDomain")],p);const d=p;var y;let h=y=class extends u{constructor(e){super(e),this.type="inherited"}clone(){return new y}};(0,n.k)([(0,n.bk)({inherited:"inherited"})],h.prototype,"type",void 0),h=y=(0,n.k)([(0,n.A)("esri.layers.support.InheritedDomain")],h);const f=h;var m;let g=m=class extends u{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new m({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};(0,n.k)([(0,n.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],g.prototype,"maxValue",void 0),(0,n.k)([(0,n.o)({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],g.prototype,"minValue",void 0),(0,n.k)([(0,n.bk)({range:"range"})],g.prototype,"type",void 0),g=m=(0,n.k)([(0,n.A)("esri.layers.support.RangeDomain")],g);const v=g,w={key:"type",base:u,typeMap:{range:v,"coded-value":d,inherited:f}};function b(e){if(!e?.type)return null;switch(e.type){case"range":return v.fromJSON(e);case"codedValue":return d.fromJSON(e);case"inherited":return f.fromJSON(e)}return null}var k;const S=new n.ax({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let x=k=class extends n.v{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?S.fromJSON(r.fieldValueType):null}clone(){return new k({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],x.prototype,"alias",void 0),(0,n.k)([(0,n.o)({type:[String,Number],json:{write:{allowNull:!0}}})],x.prototype,"defaultValue",void 0),(0,n.k)([(0,n.o)()],x.prototype,"description",void 0),(0,n.k)([(0,n.u)("description")],x.prototype,"readDescription",null),(0,n.k)([(0,n.o)({types:w,json:{read:{reader:b},write:!0}})],x.prototype,"domain",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:!0}})],x.prototype,"editable",void 0),(0,n.k)([(0,n.o)({type:n.bp,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],x.prototype,"length",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],x.prototype,"name",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:!0}})],x.prototype,"nullable",void 0),(0,n.k)([(0,n.bk)(i.i)],x.prototype,"type",void 0),(0,n.k)([(0,n.o)()],x.prototype,"valueType",void 0),(0,n.k)([(0,n.u)("valueType",["description"])],x.prototype,"readValueType",null),(0,n.k)([(0,n.o)({type:Boolean,json:{read:!1}})],x.prototype,"visible",void 0),x=k=(0,n.k)([(0,n.A)("esri.layers.support.Field")],x);const T=x,j=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}))},36879:function(e,t,r){r.d(t,{Z:function(){return u}});var o=r(98503),n=r(6435);function i(e){return"timeZone"in e}function s(e){return"timeZone"in e}function l(e){return"dateFieldsTimeZone"in e}const a=new Map;class u{static fromJSON(e){return new u(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new u(e.fields??[],y(e))}static fromLayerJSON(e){return new u(e.fields??[],y(e))}constructor(e=[],t){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=t?new Map(t):null;const r=[];for(const n of this.fields){const e=n?.name,t=p(e);if(e&&t){const i=c(e);this._fieldsMap.set(e,n),this._fieldsMap.set(i,n),this._normalizedFieldsMap.set(t,n),r.push(`${i}:${n.type}:${this._timeZoneByFieldName?.get(e)}`),(0,o.ag)(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):(0,o.ah)(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),(0,o.ai)(n)||(0,o.aj)(n)||(n.editable=null==n.editable||!!n.editable,n.nullable=null==n.nullable||!!n.nullable)}}r.sort(),this.uid=r.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,o.ai)(e)||(0,o.aj)(e)||e.nullable||void 0!==(0,o.ak)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let t=this._fieldsMap.get(e);return t||(t=this._fieldsMap.get(c(e))??this._normalizedFieldsMap.get(p(e)),t&&this._fieldsMap.set(e,t),t)}getTimeZone(e){const t=this.get(e&&"string"!=typeof e?e.name:e);return t?this._timeZoneByFieldName?this._timeZoneByFieldName.get(t.name):"date"===t.type||"esriFieldTypeDate"===t.type?(o.n.getLogger("esri.layers.support.FieldsIndex").error(new o.s("getTimeZone:no-timezone-information",`no time zone information for field '${t.name}'`)),o.al):d.has(t.type)?o.am:null:null}getLuxonTimeZone(e){const t=this.getTimeZone(e);return t?t===o.am?n.t.instance:t===o.al?o.an.utcInstance:(0,o.ao)(a,t,(()=>o.a6.create(t))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return(0,o.ap)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,o.aq)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function c(e){return e.trim().toLowerCase()}function p(e){return(0,o.ar)(e)?.toLowerCase()??""}const d=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function y(e){const t=new Map;if(!e.fields)return t;const r=!0===e.datesInUnknownTimezone,{timeInfo:n,editFieldsInfo:a}=e,u=(n?"startField"in n?n.startField:n.startTimeField:"")??"",p=(n?"endField"in n?n.endField:n.endTimeField:"")??"",y=l(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,o.as)(e.dateFieldsTimeReference):null,h=a?i(a)?a.timeZone??y:a.dateFieldsTimeReference?(0,o.as)(a.dateFieldsTimeReference):y??o.al:null,f=n?s(n)?n.timeZone??y:n.timeReference?(0,o.as)(n.timeReference):y:null,m=new Map([[c(a?.creationDateField??""),h],[c(a?.editDateField??""),h],[c(u),f],[c(p),f]]);for(const{name:i,type:s}of e.fields)if(d.has(s))t.set(i,o.am);else if("date"!==s&&"esriFieldTypeDate"!==s)t.set(i,null);else if(r)t.set(i,o.am);else{const e=m.get(c(i??""))??y;t.set(i,e)}return t}},28252:function(e,t,r){r.d(t,{f:function(){return a}});var o=r(98503),n=r(50257);async function i(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:n}=await Promise.all([r.e(2031),r.e(7489)]).then(r.bind(r,67489)).then((e=>e.p));try{return await n(t)}catch(i){const e=t?.portalItem,r=e?.id||"unset",n=e?.portal?.url||o.H.portalUrl;throw o.n.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+r+"')",i),i}}let s=0,l=class extends(o.bP.EventedMixin((0,o.da)(o.e))){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new o.au(-180,-90,180,90,o.B.WGS84),this.id=Date.now().toString(16)+"-layer-"+s++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=o.B.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const t="string"==typeof e?{url:e}:e;return(await Promise.all([r.e(2031),r.e(8529)]).then(r.bind(r,58529))).fromUrl(t)}static fromPortalItem(e){return i(e)}initialize(){this.when().catch((e=>{(0,o.E)(e)||o.n.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})}))}destroy(){const e=this.parent;if(e){const t=this;"layers"in e&&e.layers.includes(t)?e.layers.remove(t):"tables"in e&&e.tables.includes(t)?e.tables.remove(t):"baseLayers"in e&&e.baseLayers.includes(t)?e.baseLayers.remove(t):"referenceLayers"in e&&e.referenceLayers.includes(t)&&e.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let e=this.visible;const t=this.parent;return e&&t&&"effectiveVisible"in t&&(e&&=t.effectiveVisible),e}get hasAttributionData(){return null!=this.attributionDataUrl}get parsedUrl(){return(0,o.I)(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await(0,o.U)(e,{query:{f:"json"},responseType:"json"})).data;throw new o.s("layer:no-attribution-data","Layer does not have attribution data")}};(0,o.k)([(0,o.o)({type:String})],l.prototype,"attributionDataUrl",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],l.prototype,"effectiveVisible",null),(0,o.k)([(0,o.o)({type:o.au})],l.prototype,"fullExtent",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],l.prototype,"hasAttributionData",null),(0,o.k)([(0,o.o)({type:String,clonable:!1})],l.prototype,"id",void 0),(0,o.k)([(0,o.o)({type:Boolean,nonNullable:!0})],l.prototype,"legendEnabled",void 0),(0,o.k)([(0,o.o)({type:["show","hide","hide-children"]})],l.prototype,"listMode",void 0),(0,o.k)([(0,o.o)({type:Number,range:{min:0,max:1},nonNullable:!0})],l.prototype,"opacity",void 0),(0,o.k)([(0,o.o)({clonable:!1})],l.prototype,"parent",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],l.prototype,"parsedUrl",null),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],l.prototype,"persistenceEnabled",void 0),(0,o.k)([(0,o.o)({type:Boolean})],l.prototype,"popupEnabled",void 0),(0,o.k)([(0,o.o)({type:Boolean})],l.prototype,"attributionVisible",void 0),(0,o.k)([(0,o.o)({type:o.B})],l.prototype,"spatialReference",void 0),(0,o.k)([(0,o.o)({type:String})],l.prototype,"title",void 0),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1}})],l.prototype,"type",void 0),(0,o.k)([(0,o.o)()],l.prototype,"url",void 0),(0,o.k)([(0,o.o)({type:n.p})],l.prototype,"visibilityTimeExtent",void 0),(0,o.k)([(0,o.o)({type:Boolean,nonNullable:!0})],l.prototype,"visible",void 0),l=(0,o.k)([(0,o.A)("esri.layers.Layer")],l);const a=l},19721:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var o=r(98503),n=(r(61140),r(47509)),i=r(88012),s=r(28252),l=r(69981),a=r(96197),u=r(904),c=r(18696),p=r(50027),d=r(99907),y=r(29821),h=r(83043),f=r(20784),m=r(45975),g=r(50293),v=r(63125),w=r(83424),b=r(47603),k=r(20014),S=r(29344),x=r(98089),T=r(86477),j=r(70309),F=r(13193),I=r(43338);let R=class extends o.e{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(e){return this.addResolvingPromise(this._loadOGCServices(this.layer,e)),this.when()}getSource(){const{featureDefinition:{collection:e,layerDefinition:t,spatialReference:r,supportedCrs:o},layer:{apiKey:n,customParameters:i,effectiveMaxRecordCount:s}}=this;return{type:"ogc-source",collection:e,layerDefinition:t,maxRecordCount:s,queryParameters:{apiKey:n,customParameters:i},spatialReference:r,supportedCrs:o}}queryExtent(e,t={}){return null}queryFeatureCount(e,t={}){return null}queryFeatures(e,t={}){return this.queryFeaturesJSON(e,t).then((e=>u.d.fromJSON(e)))}queryFeaturesJSON(e,t={}){const r=this.getSource();return this.load(t).then((()=>(0,l.R)(r,e,t)))}queryObjectIds(e,t={}){return null}serviceSupportsSpatialReference(e){return!(!e.isWGS84&&!e.isWebMercator)||!!this.featureDefinition.supportedCrs[e.wkid]}_conformsToType(e,t){const r=new RegExp(`^${(0,o.aw)(t)}$`,"i");return e.conformsTo.some((e=>r.test(e)))??!1}_getCapabilities(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryBins:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:t,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryBins:a.s,editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}_getMaxRecordCount(e){const t=e?.components?.parameters;return t?.limit?.schema?.maximum??t?.limitFeatures?.schema?.maximum}_getStorageSpatialReference(e){const t=e.storageCrs??l.x,r=(0,l.C)(t);return null==r?o.B.WGS84:new o.B({wkid:r})}_getSupportedSpatialReferences(e,t){const r="#/crs",o=e.crs??[l.x],n=o.includes(r)?o.filter((e=>e!==r)).concat(t.crs??[]):o,i=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return n.filter((e=>!i.test(e)))}async _loadOGCServices(e,t){const r=null!=t?t.signal:null,{apiKey:n,collectionId:i,customParameters:s,fields:a,geometryType:u,hasZ:c,objectIdField:p,timeInfo:d,url:y}=e,h={fields:a?.map((e=>e.toJSON())),geometryType:o.f4.toJSON(u),hasZ:c??!1,objectIdField:p,timeInfo:d?.toJSON()},f={apiKey:n,customParameters:s,signal:r},m=await(0,l.P)(y,f),[g,v]=await Promise.all([(0,l.O)(m,f),(0,l.N)(m,f)]);if(!this._conformsToType(g,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new o.s("ogc-feature-layer:no-geojson-support","Server does not support geojson");const w=v.collections.find((({id:e})=>e===i));if(!w)throw new o.s("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const b=this._conformsToType(g,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?await(0,l.q)(m,f):null,k=await(0,l.v)(w,h,f),S=this._getMaxRecordCount(b),x=this._getCapabilities(k.hasZ,S),T=this._getStorageSpatialReference(w).toJSON(),j=this._getSupportedSpatialReferences(w,v),F=new RegExp(`^${(0,o.aw)(l.k)}`,"i"),I={};for(const o of j){const e=(0,l.C)(o);null!=e&&(I[e]||(I[e]=o.replace(F,"")))}this.featureDefinition={capabilities:x,collection:w,layerDefinition:k,spatialReference:T,supportedCrs:I}}};(0,o.k)([(0,o.o)()],R.prototype,"featureDefinition",void 0),(0,o.k)([(0,o.o)({constructOnly:!0})],R.prototype,"layer",void 0),(0,o.k)([(0,o.o)()],R.prototype,"type",void 0),R=(0,o.k)([(0,o.A)("esri.layers.graphics.sources.OGCFeatureSource")],R);const P=(0,T.s)();let E=class extends((0,c.i)((0,d.e)((0,h.c)((0,y.c)((0,p.l)((0,m.p)((0,b.l)((0,w.t)((0,f.b)((0,g.j)((0,v.f)((0,i.S)(s.f))))))))))))){constructor(e){super(e),this.capabilities=null,this.collectionId=null,this.copyright=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new R({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){this.source?.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},e).then((()=>this._fetchService(e)))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){return this.maxRecordCount??this.capabilities?.query.maxRecordCount??5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(e){(0,o.f0)(e,this.fieldsIndex),this._set("renderer",e)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return(0,I.p)(this,e)}createQuery(){return new F.b}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,t){let r,o=!1;const n=t?.feature?.attributes,i=this.typeIdField&&n?.[this.typeIdField];return null!=i&&this.types&&(o=this.types.some((t=>t.id==i&&(r=t.domains?.[e],"inherited"===r?.type&&(r=this._getLayerDomain(e)),!0)))),o||r||(r=this._getLayerDomain(e)),r}queryFeatures(e,t){return this.load().then((()=>this.source.queryFeatures(F.b.from(e)||this.createQuery(),t))).then((e=>(e?.features?.forEach((e=>{e.layer=e.sourceLayer=this})),e)))}serviceSupportsSpatialReference(e){return this.source?.serviceSupportsSpatialReference(e)??!1}async _fetchService(e){await this.source.load(e),this.read(this.source.featureDefinition,{origin:"service"}),(0,o.f0)(this.renderer,this.fieldsIndex),(0,o.aZ)(this.timeInfo,this.fieldsIndex)}_getLayerDomain(e){if(!this.fields)return null;for(const t of this.fields)if(t.name===e&&t.domain)return t.domain;return null}};(0,o.k)([(0,o.o)({readOnly:!0,json:{origins:{service:{read:!0}}}})],E.prototype,"capabilities",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:!0}})],E.prototype,"collectionId",void 0),(0,o.k)([(0,o.o)({type:String})],E.prototype,"copyright",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],E.prototype,"defaultPopupTemplate",null),(0,o.k)([(0,o.o)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],E.prototype,"description",void 0),(0,o.k)([(0,o.o)({type:String})],E.prototype,"displayField",void 0),(0,o.k)([(0,o.o)({type:Number})],E.prototype,"effectiveMaxRecordCount",null),(0,o.k)([(0,o.o)(k.c)],E.prototype,"elevationInfo",void 0),(0,o.k)([(0,o.o)({type:[x.y],json:{origins:{service:{name:"layerDefinition.fields"}}}})],E.prototype,"fields",void 0),(0,o.k)([(0,o.o)(P.fieldsIndex)],E.prototype,"fieldsIndex",void 0),(0,o.k)([(0,o.o)({readOnly:!0,type:o.au,json:{origins:{service:{name:"layerDefinition.extent"}}}})],E.prototype,"fullExtent",void 0),(0,o.k)([(0,o.o)({type:o.cB.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:o.cB.read}}}}})],E.prototype,"geometryType",void 0),(0,o.k)([(0,o.o)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],E.prototype,"hasZ",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],E.prototype,"isTable",null),(0,o.k)([(0,o.o)({type:[j.C],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:j.n},write:!0}}}})],E.prototype,"labelingInfo",void 0),(0,o.k)([(0,o.o)(k.p)],E.prototype,"labelsVisible",void 0),(0,o.k)([(0,o.o)(k.d)],E.prototype,"legendEnabled",void 0),(0,o.k)([(0,o.o)({type:Number})],E.prototype,"maxRecordCount",void 0),(0,o.k)([(0,o.o)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],E.prototype,"objectIdField",void 0),(0,o.k)([(0,o.o)({type:["OGCFeatureLayer"]})],E.prototype,"operationalLayerType",void 0),(0,o.k)([(0,o.o)(k.l)],E.prototype,"popupEnabled",void 0),(0,o.k)([(0,o.o)({type:o.b4,json:{name:"popupInfo",write:!0}})],E.prototype,"popupTemplate",void 0),(0,o.k)([(0,o.o)({types:n.m,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:n.u,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],E.prototype,"renderer",null),(0,o.k)([(0,o.o)(k.s)],E.prototype,"screenSizePerspectiveEnabled",void 0),(0,o.k)([(0,o.o)({readOnly:!0})],E.prototype,"source",void 0),(0,o.k)([(0,o.o)({readOnly:!0,type:o.B,json:{origins:{service:{read:!0}}}})],E.prototype,"spatialReference",void 0),(0,o.k)([(0,o.o)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],E.prototype,"title",void 0),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1}})],E.prototype,"type",void 0),(0,o.k)([(0,o.o)({type:String,readOnly:!0})],E.prototype,"typeIdField",void 0),(0,o.k)([(0,o.o)({type:[S.n]})],E.prototype,"types",void 0),(0,o.k)([(0,o.o)(k.y)],E.prototype,"url",void 0),E=(0,o.k)([(0,o.A)("esri.layers.OGCFeatureLayer")],E);const O=E},75934:function(e,t,r){r.d(t,{a:function(){return i},e:function(){return n},s:function(){return o}});let o=class e{constructor(e=[],t=[]){this.lengths=e??[],this.coords=t??[]}static fromJSON(t){return new e(t.lengths,t.coords)}static fromRect(t){const[r,o,n,i]=t,s=n-r,l=i-o;return new e([5],[r,o,s,0,0,l,-s,0,0,-l])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let r=0;r<this.lengths.length;r++){const o=this.lengths[r];for(let r=0;r<o;r++)e(this.coords[2*(r+t)],this.coords[2*(r+t)+1]);t+=o}}deltaDecode(){const e=this.clone(),{coords:t,lengths:r}=e;let o=0;for(const n of r){for(let e=1;e<n;e++)t[2*(o+e)]+=t[2*(o+e)-2],t[2*(o+e)+1]+=t[2*(o+e)-1];o+=n}return e}clone(t){if(0===this.lengths.length)return new e([],[this.coords[0],this.coords[1]]);const r=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),o=this.coords.slice(0,r);return t?(t.set(o),new e(this.lengths,t)):new e(Array.from(this.lengths),Array.from(o))}};class n{constructor(e=null,t={},r,o){this.geometry=e,this.attributes=t,this.centroid=r,this.objectId=o,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(e,t){const r=e.geometry?o.fromJSON(e.geometry):null,i=e.centroid?o.fromJSON(e.centroid):null,s=e.attributes[t];return new n(r,e.attributes,i,s)}weakClone(){const e=new n(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}clone(){const e=this.geometry?.clone(),t=new n(e,{...this.attributes},this.centroid?.clone(),this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function i(e){return!!e.geometry?.coords?.length}},83258:function(e,t,r){r.d(t,{e:function(){return o}});class o{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new o;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}}},77476:function(e,t,r){r.d(t,{a:function(){return l}});var o,n=r(98503);const i=new n.ax({asc:"ascending",desc:"descending"});let s=o=class extends n.v{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new o({field:this.field,valueExpression:this.valueExpression,order:this.order})}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],s.prototype,"field",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],s.prototype,"valueExpression",void 0),(0,n.k)([(0,n.o)({type:i.apiValues,json:{type:i.jsonValues,read:i.read,write:i.write}})],s.prototype,"order",void 0),s=o=(0,n.k)([(0,n.A)("esri.layers.support.OrderByInfo")],s);const l=s},45975:function(e,t,r){r.d(t,{c:function(){return l},p:function(){return a}});var o=r(98503),n=r(77476);function i(e,t,r){if(!e)return null;const o=e.find((e=>!!e.field));if(!o)return null;const i=new n.a;return i.read(o,r),[i]}function s(e,t,r,n){const i=e.find((e=>!!e.field));i&&(0,o.aY)(r,[i.toJSON()],t)}const l={type:[n.a],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:i},write:{writer:s}}},a=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return(0,o.k)([(0,o.o)(l)],t.prototype,"orderBy",void 0),t=(0,o.k)([(0,o.A)("esri.layers.mixins.OrderedLayer")],t),t}},50293:function(e,t,r){r.d(t,{j:function(){return s}});var o=r(98503),n=r(2031),i=r(83297);const s=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,o.C)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new n["default"]({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:n}=await Promise.all([r.e(3338),r.e(1128)]).then(r.bind(r,21128));return(0,o.D)(t),await n({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(n){throw(0,o.E)(n)||o.n.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${n}`),n}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,o.G)(e),!0))))}async setUserPrivileges(e,t){if(!o.H.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:o},content:{updateItem:n}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",o),this._set("userHasUpdateItemPrivileges",n)}catch(r){(0,o.G)(r)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const s=e===r.id;if(s&&r.portal.user)return(0,i.E)(r);let l,a;if(s)l=r.portal.url;else try{l=await(0,o.J)(this.url,t)}catch(d){(0,o.G)(d)}if(!l||!(0,o.W)(l,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;a=await(o.K?.getCredential(`${l}/sharing`,{prompt:!1,signal:e}))}catch(d){(0,o.G)(d)}const u=!0,c=!1,p=!1;if(!a)return{features:{edit:u,fullEdit:c},content:{updateItem:p}};try{if(s?await r.reload():(r=new n["default"]({id:e,portal:{url:l}}),await r.load(t)),r.portal.user)return(0,i.E)(r)}catch(d){(0,o.G)(d)}return{features:{edit:u,fullEdit:c},content:{updateItem:p}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(r){(0,o.G)(r)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?o.K?.findCredential(this.url):null;if(!t)return!0;const r=l.credential===t?l.user:await this._fetchEditingUser(e);return l.credential=t,l.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=o.K?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const n=`${r.owningSystemUrl}/sharing/rest`,i=o.b.getDefault();if(i&&i.loaded&&(0,o.L)(i.restUrl)===(0,o.L)(n))return i.user;const s=`${n}/community/self`,l=null!=e?e.signal:null,a=await(0,o._)((0,o.U)(s,{authMode:"no-prompt",query:{f:"json"},signal:l}));return a.ok?o.M.fromJSON(a.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,n=this.portalItem?.id&&(this.portalItem.portal||o.b.getDefault());return r&&n&&!(0,o.N)(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new o.s("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,o.k)([(0,o.o)({type:n["default"]})],t.prototype,"portalItem",null),(0,o.k)([(0,o.u)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,o.k)([(0,o.q)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,o.k)([(0,o.o)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,o.k)([(0,o.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,o.k)([(0,o.A)("esri.layers.mixins.PortalLayer")],t),t},l={credential:null,user:null}},13193:function(e,t,r){r.r(t),r.d(t,{K:function(){return x},Q:function(){return V},a:function(){return P},b:function(){return L},c:function(){return l},m:function(){return N},s:function(){return E}});var o,n=r(98503),i=r(98089),s=r(50257);let l=o=class extends n.v{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new o({mapLayerId:e,gdbVersion:t})}};var a;(0,n.k)([(0,n.bk)({mapLayer:"map-layer"})],l.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:n.bp,json:{write:!0}})],l.prototype,"mapLayerId",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],l.prototype,"gdbVersion",void 0),l=o=(0,n.k)([(0,n.A)("esri.layers.support.source.MapLayerSource")],l);let u=a=class extends n.v{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:o,geometryType:n}=this,i={workspaceId:e,query:t,oidFields:r,spatialReference:o?.clone()??void 0,geometryType:n};return new a(i)}};var c;(0,n.k)([(0,n.bk)({queryTable:"query-table"})],u.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],u.prototype,"workspaceId",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],u.prototype,"query",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],u.prototype,"oidFields",void 0),(0,n.k)([(0,n.o)({type:n.B,json:{write:!0}})],u.prototype,"spatialReference",void 0),(0,n.k)([(0,n.bk)(n.cB)],u.prototype,"geometryType",void 0),u=a=(0,n.k)([(0,n.A)("esri.layers.support.source.QueryTableDataSource")],u);let p=c=class extends n.v{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new c({workspaceId:e,dataSourceName:t})}};var d;(0,n.k)([(0,n.bk)({raster:"raster"})],p.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],p.prototype,"dataSourceName",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],p.prototype,"workspaceId",void 0),p=c=(0,n.k)([(0,n.A)("esri.layers.support.source.RasterDataSource")],p);let y=d=class extends n.v{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new d({workspaceId:e,gdbVersion:t,dataSourceName:r})}};var h,f;(0,n.k)([(0,n.bk)({table:"table"})],y.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],y.prototype,"workspaceId",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],y.prototype,"gdbVersion",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],y.prototype,"dataSourceName",void 0),y=d=(0,n.k)([(0,n.A)("esri.layers.support.source.TableDataSource")],y);const m=(0,n.g)()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let g=h=class extends n.v{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return w()(e,t,r)}castLeftTableSource(e){return(0,n.hN)(k(),e)}readRightTableSource(e,t,r){return w()(e,t,r)}castRightTableSource(e){return(0,n.hN)(k(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:o,joinType:n}=this,i={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:o?.clone()??void 0,joinType:n};return new h(i)}};(0,n.k)([(0,n.bk)({joinTable:"join-table"})],g.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],g.prototype,"leftTableKey",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],g.prototype,"rightTableKey",void 0),(0,n.k)([(0,n.o)({json:{write:!0}})],g.prototype,"leftTableSource",void 0),(0,n.k)([(0,n.u)("leftTableSource")],g.prototype,"readLeftTableSource",null),(0,n.k)([(0,n.by)("leftTableSource")],g.prototype,"castLeftTableSource",null),(0,n.k)([(0,n.o)({json:{write:!0}})],g.prototype,"rightTableSource",void 0),(0,n.k)([(0,n.u)("rightTableSource")],g.prototype,"readRightTableSource",null),(0,n.k)([(0,n.by)("rightTableSource")],g.prototype,"castRightTableSource",null),(0,n.k)([(0,n.bk)(m)],g.prototype,"joinType",void 0),g=h=(0,n.k)([(0,n.A)("esri.layers.support.source.JoinTableDataSource")],g);let v=null;function w(){return v||(v=(0,n.ej)({types:k()})),v}let b=null;function k(){return b||(b={key:"type",base:null,typeMap:{"data-layer":x,"map-layer":l}}),b}const S={key:"type",base:null,typeMap:{"join-table":g,"query-table":u,raster:p,table:y}};let x=f=class extends n.v{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new f({fields:e,dataSource:t})}};(0,n.k)([(0,n.bk)({dataLayer:"data-layer"})],x.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:[i.y],json:{write:!0}})],x.prototype,"fields",void 0),(0,n.k)([(0,n.o)({types:S,json:{write:!0}})],x.prototype,"dataSource",void 0),x=f=(0,n.k)([(0,n.A)("esri.layers.support.source.DataLayerSource")],x),x.from=(0,n.ef)(x);let T=class extends((0,n.a_)(n.v)){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};(0,n.k)([(0,n.o)({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.onFields&&this.onFields.length>0}}}}})],T.prototype,"onFields",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],T.prototype,"operator",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],T.prototype,"searchTerm",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],T.prototype,"searchType",void 0),T=(0,n.k)([(0,n.A)("esri.rest.support.FullTextSearch")],T);const j=T;var F;const I=new n.ax({upperLeft:"upper-left",lowerLeft:"lower-left"});let R=F=class extends n.v{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new F((0,n.f)({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};(0,n.k)([(0,n.o)({type:n.au,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],R.prototype,"extent",void 0),(0,n.k)([(0,n.o)({type:["view","edit"],json:{write:!0}})],R.prototype,"mode",void 0),(0,n.k)([(0,n.o)({type:String,json:{read:I.read,write:I.write}})],R.prototype,"originPosition",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],R.prototype,"tolerance",void 0),R=F=(0,n.k)([(0,n.A)("esri.rest.support.QuantizationParameters")],R);const P=R,E=new n.ax({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var O;const M=new n.ax({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let _=O=class extends n.v{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){"percentile-continuous"!==this.statisticType&&"percentile-discrete"!==this.statisticType||(t.statisticParameters=(0,n.f)(e))}clone(){return new O({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:(0,n.f)(this.statisticParameters)})}};(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],_.prototype,"maxPointCount",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],_.prototype,"maxRecordCount",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],_.prototype,"maxVertexCount",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],_.prototype,"onStatisticField",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],_.prototype,"outStatisticFieldName",void 0),(0,n.k)([(0,n.o)({type:String,json:{read:{source:"statisticType",reader:M.read},write:{target:"statisticType",writer:M.write}}})],_.prototype,"statisticType",void 0),(0,n.k)([(0,n.o)({type:Object})],_.prototype,"statisticParameters",void 0),(0,n.k)([(0,n.q)("statisticParameters")],_.prototype,"writeStatisticParameters",null),_=O=(0,n.k)([(0,n.A)("esri.rest.support.StatisticDefinition")],_);const N=_;var A;const D=new n.ax({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let C=A=class extends n.v{static from(e){return(0,n.cG)(A,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return"number"==typeof e||"object"==typeof e?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const t in e){const o=e[t];Array.isArray(o)?r[t]=o.map((e=>e instanceof Date?e.getTime():e)):o instanceof Date?r[t]=o.getTime():r[t]=o}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new A((0,n.f)({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:null!=this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};C.MAX_MAX_RECORD_COUNT_FACTOR=5,(0,n.k)([(0,n.o)({json:{write:!0}})],C.prototype,"aggregateIds",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:!0}})],C.prototype,"cacheHint",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"compactGeometryEnabled",void 0),(0,n.k)([(0,n.o)({json:{write:!0}})],C.prototype,"datumTransformation",void 0),(0,n.k)([(0,n.by)("datumTransformation")],C.prototype,"castDatumTransformation",null),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"defaultSpatialReferenceEnabled",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],C.prototype,"distance",void 0),(0,n.k)([(0,n.o)({type:x,json:{write:!0}})],C.prototype,"dynamicDataSource",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"formatOf3DObjects",void 0),(0,n.k)([(0,n.o)({type:[j],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.fullText&&this.fullText.length>0}}}}})],C.prototype,"fullText",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"gdbVersion",void 0),(0,n.k)([(0,n.o)({types:n.b2,json:{read:n.b3,write:!0}})],C.prototype,"geometry",void 0),(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],C.prototype,"geometryPrecision",void 0),(0,n.k)([(0,n.o)({type:[String],json:{write:!0}})],C.prototype,"groupByFieldsForStatistics",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"having",void 0),(0,n.k)([(0,n.o)({type:Date})],C.prototype,"historicMoment",void 0),(0,n.k)([(0,n.q)("historicMoment")],C.prototype,"writeHistoricMoment",null),(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],C.prototype,"maxAllowableOffset",void 0),(0,n.k)([(0,n.o)({type:Number,cast:e=>e<1?1:e>C.MAX_MAX_RECORD_COUNT_FACTOR?C.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],C.prototype,"maxRecordCountFactor",void 0),(0,n.k)([(0,n.o)({type:["xyFootprint"],json:{write:!0}})],C.prototype,"multipatchOption",void 0),(0,n.k)([(0,n.o)({type:Number,json:{read:{source:"resultRecordCount"}}})],C.prototype,"num",void 0),(0,n.k)([(0,n.o)({json:{write:!0}})],C.prototype,"objectIds",void 0),(0,n.k)([(0,n.o)({type:[String],json:{write:!0}})],C.prototype,"orderByFields",void 0),(0,n.k)([(0,n.o)({type:[String],json:{write:!0}})],C.prototype,"outFields",void 0),(0,n.k)([(0,n.o)({type:n.B,json:{name:"outSR",write:!0}})],C.prototype,"outSpatialReference",void 0),(0,n.k)([(0,n.o)({type:[N],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&this.outStatistics.length>0}}}}})],C.prototype,"outStatistics",void 0),(0,n.k)([(0,n.o)({json:{write:!0}})],C.prototype,"parameterValues",void 0),(0,n.k)([(0,n.q)("parameterValues")],C.prototype,"writeParameterValues",null),(0,n.k)([(0,n.o)({type:n.bv,json:{write:!0}})],C.prototype,"pixelSize",void 0),(0,n.k)([(0,n.o)({type:P,json:{write:!0}})],C.prototype,"quantizationParameters",void 0),(0,n.k)([(0,n.o)({type:[Object],json:{write:!0}})],C.prototype,"rangeValues",void 0),(0,n.k)([(0,n.o)({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],C.prototype,"relationParameter",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"resultType",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"returnCentroid",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"returnDistinctValues",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!0,write:!0}})],C.prototype,"returnExceededLimitFeatures",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:!0}})],C.prototype,"returnGeometry",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"returnQueryGeometry",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"returnM",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],C.prototype,"returnZ",void 0),(0,n.k)([(0,n.o)({type:n.B,json:{write:!0}})],C.prototype,"sourceSpatialReference",void 0),(0,n.k)([(0,n.bk)(E,{ignoreUnknown:!1,name:"spatialRel"})],C.prototype,"spatialRelationship",void 0),(0,n.k)([(0,n.o)({type:Number,json:{read:{source:"resultOffset"}}})],C.prototype,"start",void 0),(0,n.k)([(0,n.q)("start"),(0,n.q)("num")],C.prototype,"writeStart",null),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"sqlFormat",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],C.prototype,"text",void 0),(0,n.k)([(0,n.o)({type:s.p,json:{write:!0}})],C.prototype,"timeExtent",void 0),(0,n.k)([(0,n.o)({type:Boolean,json:{default:!1,write:!0}})],C.prototype,"timeReferenceUnknownClient",void 0),(0,n.k)([(0,n.bk)(D,{ignoreUnknown:!1}),(0,n.o)({json:{write:{overridePolicy(e){return{enabled:!!e&&null!=this.distance&&this.distance>0}}}}})],C.prototype,"units",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:{overridePolicy(e){return{enabled:null!=e||null!=this.start&&this.start>0}}}}})],C.prototype,"where",void 0),(0,n.k)([(0,n.q)("where")],C.prototype,"writeWhere",null),C=A=(0,n.k)([(0,n.A)("esri.rest.support.Query")],C);const L=C,V=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}))},94706:function(e,t,r){r.d(t,{t:function(){return o}});const o={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!0,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}},50257:function(e,t,r){r.d(t,{i:function(){return s},m:function(){return a},o:function(){return i},p:function(){return d},r:function(){return n}});var o=r(98503);const n={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function i(e,t,r,n=o.dL){const i=new o.a6((0,o.dK)(n)),s=o.at.fromJSDate(e,{zone:i}),l="decades"===r||"centuries"===r?"year":u(r);return"decades"===r&&(t*=10),"centuries"===r&&(t*=100),s.plus({[l]:t}).toJSDate()}function s(e,t,r="milliseconds"){const o=e.getTime(),n=a(t,r,"milliseconds");return new Date(o+n)}function l(e,t,r=o.dL){const n=new o.a6((0,o.dK)(r)),i=o.at.fromJSDate(e,{zone:n});if("decades"===t||"centuries"===t){const e=i.startOf("year"),{year:r}=e,o=r-r%("decades"===t?10:100);return e.set({year:o}).toJSDate()}const s=u(t);return i.startOf(s).toJSDate()}function a(e,t,r){return 0===e?0:e*n[t]/n[r]}function u(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var c;let p=c=class extends o.v{static get allTime(){return y}static get empty(){return h}static fromArray(e){return new c({start:null!=e[0]?new Date(e[0]):e[0],end:null!=e[1]?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(c.allTime)}get isEmpty(){return this.equals(c.empty)}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new c({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,o=e.start?.getTime()??e.start,n=e.end?.getTime()??e.end;return t===o&&r===n}expandTo(e,t=o.dL){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=l(r,e,t));let n=this.end;if(n){const r=l(n,e,t);n=n.getTime()===r.getTime()?r:i(r,1,e,t)}return new c({start:r,end:n})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return c.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,o=e.start?.getTime()??-1/0,n=e.end?.getTime()??1/0;let i,s;return o>=t&&o<=r?i=o:t>=o&&t<=n&&(i=t),r>=o&&r<=n?s=r:n>=t&&n<=r&&(s=n),null==i||null==s||isNaN(i)||isNaN(s)?c.empty:new c({start:i===-1/0?null:new Date(i),end:s===1/0?null:new Date(s)})}offset(e,t,r=o.dL){if(this.isEmpty||this.isAllTime)return this.clone();const n=new c,{start:s,end:l}=this;return null!=s&&(n.start=i(s,e,t,r)),null!=l&&(n.end=i(l,e,t,r)),n}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return y.clone();const t=null!=this.start&&null!=e.start?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=null!=this.end&&null!=e.end?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new c({start:t,end:r})}};(0,o.k)([(0,o.o)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"end",void 0),(0,o.k)([(0,o.u)("end")],p.prototype,"readEnd",null),(0,o.k)([(0,o.q)("end")],p.prototype,"writeEnd",null),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1}})],p.prototype,"isAllTime",null),(0,o.k)([(0,o.o)({readOnly:!0,json:{read:!1}})],p.prototype,"isEmpty",null),(0,o.k)([(0,o.o)({type:Date,json:{write:{allowNull:!0}}})],p.prototype,"start",void 0),(0,o.k)([(0,o.u)("start")],p.prototype,"readStart",null),(0,o.k)([(0,o.q)("start")],p.prototype,"writeStart",null),p=c=(0,o.k)([(0,o.A)("esri.time.TimeExtent")],p);const d=p,y=new p,h=new p({start:void 0,end:void 0})},6435:function(e,t,r){r.d(t,{i:function(){return s},r:function(){return i},t:function(){return n}});var o=r(98503);class n{}function i(e){return e instanceof o.a7?e===n.instance:"unknown"===e?.toString().toLowerCase()}function s(e){return i(e)?n.instance:e}n.instance=new o.a6("Etc/UTC")},22676:function(e,t,r){r.d(t,{r:function(){return n}});var o=r(98503);let n=class e{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",r=this._context&&this._context+" ";throw new o.s(t+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,r=""){const[n,i]=t.split("."),s=/^\s*\d+\s*$/;if(!n?.match||!s.test(n))throw new o.s((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!s.test(i))throw new o.s((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const l=parseInt(n,10),a=parseInt(i,10);return new e(l,a,r)}}},49329:function(e,t,r){r.d(t,{n:function(){return o},o:function(){return n}});r(98503);function o(e){}function n(e){return()=>e}},65944:function(e,t,r){r.d(t,{d:function(){return h},p:function(){return d},s:function(){return p},y:function(){return y}});var o=r(98503);const n=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function i(e){return e instanceof o.aD}function s(e){return e instanceof o.V?Object.keys(e.items):i(e)?(0,o.bf)(e).keys():e?Object.keys(e):[]}function l(e,t){return e instanceof o.V?e.items[t]:e[t]}function a(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function u(e){return e?e.declaredClass:null}function c(e,t){const r=e.diff;if(r&&"function"==typeof r)return r(e,t);const o=s(e),p=s(t);if(0===o.length&&0===p.length)return;if(!o.length||!p.length||a(e,t))return{type:"complete",oldValue:e,newValue:t};const d=p.filter((e=>!o.includes(e))),y=o.filter((e=>!p.includes(e))),h=o.filter((r=>p.includes(r)&&l(e,r)!==l(t,r))).concat(d,y).sort(),f=u(e);if(f&&n.has(f)&&h.length)return{type:"complete",oldValue:e,newValue:t};let m;const g=i(e)&&i(t);for(const n of h){const o=l(e,n),i=l(t,n);let s;if((g||"function"!=typeof o&&"function"!=typeof i)&&o!==i&&(null!=o||null!=i)){if(r&&r[n]&&"function"==typeof r[n])s=r[n]?.(o,i);else if(o instanceof Date&&i instanceof Date){if(o.getTime()===i.getTime())continue;s={type:"complete",oldValue:o,newValue:i}}else s="object"==typeof o&&"object"==typeof i&&u(o)===u(i)?c(o,i):{type:"complete",oldValue:o,newValue:i};null!=s&&(null!=m?m.diff[n]=s:m={type:"partial",diff:{[n]:s}})}}return m}function p(e,t){return d(e,t)}function d(e,t){if(null==e)return!1;const r=t.split(".");let o=e;for(const n of r){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const e=o.diff[n];if(!e)return!1;o=e}}return!0}function y(e,t){if(!e)return!1;if("partial"===e.type){const r=Object.keys(e.diff);return 1===r.length&&r[0]===t}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}},45121:function(e,t,r){r.d(t,{$:function(){return A},H:function(){return V},I:function(){return ae},K:function(){return q},N:function(){return h},O:function(){return P},P:function(){return g},Q:function(){return B},U:function(){return O},a:function(){return re},b:function(){return ce},c:function(){return X},e:function(){return $},f:function(){return te},g:function(){return se},h:function(){return oe},i:function(){return ee},l:function(){return W},n:function(){return J},o:function(){return H},p:function(){return le},r:function(){return Q},t:function(){return Z},w:function(){return f}});var o=r(98503),n=r(75934),i=r(83258);function s(e,t){return e?t?4:3:t?3:2}const l=()=>o.n.getLogger("esri.layers.graphics.featureConversionUtils"),a={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},u=(e,t,r,o,n,i)=>{e[r]=n,e[r+1]=i},c=(e,t,r,o,n,i)=>{e[r]=n,e[r+1]=i,e[r+2]=t[o+2]},p=(e,t,r,o,n,i)=>{e[r]=n,e[r+1]=i,e[r+2]=t[o+3]},d=(e,t,r,o,n,i)=>{e[r]=n,e[r+1]=i,e[r+2]=t[o+2],e[r+3]=t[o+3]};function y(e,t,r,o){if(e){if(r)return t&&o?d:c;if(t&&o)return p}else if(t&&o)return c;return u}function h({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function f({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function m({scale:e,translate:t},r,o){return r*e[o]+t[o]}function g(e,t,r){return e?t?r?T(e):b(e):r?S(e):v(e):null}function v(e){const t=e.coords;return{x:t[0],y:t[1]}}function w(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function b(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function k(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function S(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function x(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function T(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function j(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function F(e,t,r,o){let n=v;r&&o?n=T:r?n=b:o&&(n=S);for(const i of t){const{geometry:t,attributes:r}=i,o=null!=t?n(t):null;e.push({attributes:r,geometry:o})}return e}function I(e,t){return e&&t?j:e?k:t?x:w}function R(e,t,r,o,i){const s=I(r,o);for(const{geometry:l,attributes:a}of t){const t=null!=l?s(new n.s,l):null;e.push(new n.e(t,a,null,i?a[i]:void 0))}return e}function P(e,t,r=I(null!=t.z,null!=t.m)){return r(e,t)}function E(e,t,r,o){for(const{geometry:n,attributes:i}of t)e.push({attributes:i,geometry:null!=n?O(n,r,o):null});return e}function O(e,t,r){if(null==e)return null;const o=s(t,r),n=[];for(let i=0;i<e.coords.length;i+=o){const t=[];for(let r=0;r<o;r++)t.push(e.coords[i+r]);n.push(t)}return t?r?{points:n,hasZ:t,hasM:r}:{points:n,hasZ:t}:r?{points:n,hasM:r}:{points:n}}function M(e,t,r,o,i){const l=s(r,o);for(const{geometry:s,attributes:a}of t){const t=null!=s?_(new n.s,s,l):null;e.push(new n.e(t,a,null,i?a[i]:void 0))}return e}function _(e,t,r=s(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const o=e.coords;let n=0;for(const i of t.points)for(let e=0;e<r;e++)o[n++]=i[e];return e}function N(e,t,r,o){for(const{geometry:n,attributes:i}of t)e.push({attributes:i,geometry:null!=n?A(n,r,o):null});return e}function A(e,t,r){if(!e)return null;const o=s(t,r),{coords:n,lengths:i}=e,l=[];let a=0;for(const s of i){const e=[];for(let t=0;t<s;t++){const t=[];for(let e=0;e<o;e++)t.push(n[a++]);e.push(t)}l.push(e)}return t?r?{paths:l,hasZ:t,hasM:r}:{paths:l,hasZ:t}:r?{paths:l,hasM:r}:{paths:l}}function D(e,t,r,o,i){const l=s(r,o);for(const{geometry:s,attributes:a,centroid:u}of t){const t=null!=s?C(new n.s,s,l):null,r=null!=u?P(new n.s,u):null;e.push(new n.e(t,a,r,i?a[i]:void 0))}return e}function C(e,t,r=s(t.hasZ,t.hasM)){const{lengths:o,coords:n}=e;let i=0;for(const s of t.paths){for(const e of s)for(let t=0;t<r;t++)n[i++]=e[t];o.push(s.length)}return e}function L(e,t,r,o){for(const{geometry:n,attributes:i,centroid:s}of t){const t=null!=n?V(n,r,o):null;if(null!=s){const r=v(s);e.push({attributes:i,centroid:r,geometry:t})}else e.push({attributes:i,geometry:t})}return e}function V(e,t,r){if(!e)return null;const o=s(t,r),{coords:n,lengths:i}=e,l=[];let a=0;for(const s of i){const e=[];for(let t=0;t<s;t++){const t=[];for(let e=0;e<o;e++)t.push(n[a++]);e.push(t)}l.push(e)}return t?r?{rings:l,hasZ:t,hasM:r}:{rings:l,hasZ:t}:r?{rings:l,hasM:r}:{rings:l}}function G(e,t,r,o,i){for(const{geometry:s,centroid:l,attributes:a}of t){const t=null!=s?q(new n.s,s,r,o):null,u=i?a[i]:void 0;null!=l?e.push(new n.e(t,a,w(new n.s,l),u)):e.push(new n.e(t,a,null,u))}return e}function q(e,t,r=t.hasZ,o=t.hasM){return B(e,t.rings,r,o)}function B(e,t,r,o){const n=s(r,o),{lengths:i,coords:l}=e;let a=0;pe(e);for(const s of t){for(const e of s)for(let t=0;t<n;t++)l[a++]=e[t];i.push(s.length)}return e}const U=[],z=[];function Z(e,t,r,o,n){U[0]=e;const[i]=$(z,U,t,r,o,n);return de(U),de(z),i}function $(e,t,r,i,s,a){if(de(e),!r){for(const r of t){const t=a?r.attributes[a]:void 0;e.push(new n.e(null,r.attributes,null,t))}return e}switch(r){case"esriGeometryPoint":return R(e,t,i,s,a);case"esriGeometryMultipoint":return M(e,t,i,s,a);case"esriGeometryPolyline":return D(e,t,i,s,a);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return G(e,t,i,s,a);default:l().error("convertToFeatureSet:unknown-geometry",new o.s(`Unable to parse unknown geometry type '${r}'`)),de(e)}return e}function J(e,t,r,o){z[0]=e,Y(U,z,t,r,o);const n=U[0];return de(U),de(z),n}function H(e,t,r){if(null==e)return null;const i=new n.s;return"hasZ"in e&&null==t&&(t=e.hasZ),"hasM"in e&&null==r&&(r=e.hasM),(0,o.a8)(e)?I(t??null!=e.z,r??null!=e.m)(i,e):(0,o.a9)(e)?q(i,e,t,r):(0,o.aa)(e)?C(i,e,s(t,r)):(0,o.ab)(e)?_(i,e,s(t,r)):void l().error("convertFromGeometry:unknown-geometry",new o.s(`Unable to parse unknown geometry type '${e}'`))}function Q(e,t,r,n){const i=e&&("coords"in e?e:e.geometry);if(null==i)return null;switch(t){case"esriGeometryPoint":{let e=v;return r&&n?e=T:r?e=b:n&&(e=S),e(i)}case"esriGeometryMultipoint":return O(i,r,n);case"esriGeometryPolyline":return A(i,r,n);case"esriGeometryPolygon":return V(i,r,n);default:return l().error("convertToGeometry:unknown-geometry",new o.s(`Unable to parse unknown geometry type '${t}'`)),null}}function K(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function Y(e,t,r,n,i){if(de(e),null==r)return K(e,t);switch(r){case"esriGeometryPoint":return F(e,t,n,i);case"esriGeometryMultipoint":return E(e,t,n,i);case"esriGeometryPolyline":return N(e,t,n,i);case"esriGeometryPolygon":return L(e,t,n,i);default:l().error("convertToFeatureSet:unknown-geometry",new o.s(`Unable to parse unknown geometry type '${r}'`))}return e}function W(e){const{objectIdFieldName:t,spatialReference:r,transform:o,fields:n,hasM:i,hasZ:s,features:l,geometryType:a,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:p,queryGeometryType:d}=e,y={features:Y([],l,a,s,i),fields:n,geometryType:a,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:Q(p,d,!1,!1)};return o&&(y.transform=o),u&&(y.exceededTransferLimit=u),i&&(y.hasM=i),s&&(y.hasZ=s),y}function X(e,t){const r=new i.e,{hasM:n,hasZ:s,features:a,objectIdFieldName:u,spatialReference:c,geometryType:p,exceededTransferLimit:d,transform:y,fields:h}=e;return h&&(r.fields=h),r.geometryType=p??null,r.objectIdFieldName=u??t??null,r.spatialReference=c??null,r.objectIdFieldName?(a&&$(r.features,a,p,s,n,r.objectIdFieldName),d&&(r.exceededTransferLimit=d),n&&(r.hasM=n),s&&(r.hasZ=s),y&&(r.transform=y),r):(l().error(new o.s("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function ee(e){const{transform:t,features:r,hasM:o,hasZ:n}=e;if(!t)return e;for(const i of r)null!=i.geometry&&le(i.geometry,i.geometry,o,n,t),null!=i.centroid&&le(i.centroid,i.centroid,o,n,t);return e.transform=null,e}function te(e,t){const{geometryType:r,features:o,hasM:i,hasZ:s}=t;if(!e)return t;for(let l=0;l<o.length;l++){const t=o[l],a=t.weakClone();a.geometry=new n.s,re(a.geometry,t.geometry,i,s,r,e),t.centroid&&(a.centroid=new n.s,re(a.centroid,t.centroid,i,s,"esriGeometryPoint",e)),o[l]=a}return t.transform=e,t}function re(e,t,r,o,n,i,l=r,u=o){if(pe(e),!t?.coords.length)return null;const c=a[n],{coords:p,lengths:d}=t,m=s(r,o),g=s(r&&l,o&&u),v=y(r,o,l,u);if(!d.length)return v(e.coords,p,0,0,h(i,p[0]),f(i,p[1])),pe(e,m,0),e;let w,b,k,S,x=0,T=0,j=T;for(const s of d){if(s<c)continue;let t=0;T=j,k=w=h(i,p[x]),S=b=f(i,p[x+1]),v(e.coords,p,T,x,k,S),t++,x+=m,T+=g;for(let r=1;r<s;r++,x+=m)k=h(i,p[x]),S=f(i,p[x+1]),k===w&&S===b||(v(e.coords,p,T,x,k-w,S-b),T+=g,t++,w=k,b=S);t>=c&&(e.lengths.push(t),j=T)}return de(e.coords,j),e.coords.length?e:null}function oe(e,t,r,o,n,i,l=r,u=o){if(pe(e),!t?.coords.length)return null;const c=a[n],{coords:p,lengths:d}=t,h=s(r,o),f=s(r&&l,o&&u),m=y(r,o,l,u);if(!d.length)return m(e.coords,p,0,0,p[0],p[1]),pe(e,h,0),e;let g=0;const v=i*i;for(const s of d){if(s<c){g+=s*h;continue}const t=e.coords.length/f,r=g,o=g+(s-1)*h;m(e.coords,p,e.coords.length,r,p[r],p[r+1]),ie(e.coords,p,h,v,m,r,o),m(e.coords,p,e.coords.length,o,p[o],p[o+1]);const n=e.coords.length/f-t;n>=c?e.lengths.push(n):de(e.coords,t*f),g+=s*h}return e.coords.length?e:null}function ne(e,t,r,o){const n=e[t],i=e[t+1],s=e[r],l=e[r+1],a=e[o],u=e[o+1];let c=s,p=l,d=a-c,y=u-p;if(0!==d||0!==y){const e=((n-c)*d+(i-p)*y)/(d*d+y*y);e>1?(c=a,p=u):e>0&&(c+=d*e,p+=y*e)}return d=n-c,y=i-p,d*d+y*y}function ie(e,t,r,o,n,i,s){let l,a=o,u=0;for(let c=i+r;c<s;c+=r)l=ne(t,c,i,s),l>a&&(u=c,a=l);a>o&&(u-i>r&&ie(e,t,r,o,n,i,u),n(e,t,e.length,u,t[u],t[u+1]),s-u>r&&ie(e,t,r,o,n,u,s))}function se(e,t,r,n){if(!t?.coords?.length)return null;const i=s(r,n);let l=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(t&&t.coords){const e=t.coords;for(let t=0;t<e.length;t+=i){const r=e[t],o=e[t+1];l=Math.min(l,r),u=Math.max(u,r),a=Math.min(a,o),c=Math.max(c,o)}}return(0,o.ac)(e)?(0,o.ad)(e,l,a,u,c):(0,o.ae)(l,a,u,c,e),e}function le(e,t,r,n,i){const{coords:l,lengths:a}=t,u=s(r,n);if(!l.length)return e!==t&&pe(e),e;(0,o.af)(i);const{originPosition:c,scale:p,translate:d}=i,y=ye;y.originPosition=c;const h=y.scale;h[0]=p[0]??1,h[1]=-(p[1]??1),h[2]=p[2]??1,h[3]=p[3]??1;const f=y.translate;if(f[0]=d[0]??0,f[1]=d[1]??0,f[2]=d[2]??0,f[3]=d[3]??0,!a.length){for(let t=0;t<u;++t)e.coords[t]=m(y,l[t],t);return e!==t&&pe(e,u,0),e}let g=0;for(let o=0;o<a.length;o++){const t=a[o];e.lengths[o]=t;for(let o=0;o<u;++o)e.coords[g+o]=m(y,l[g+o],o);let r=e.coords[g],n=e.coords[g+1];g+=u;for(let o=1;o<t;o++,g+=u){r+=l[g]*h[0],n+=l[g+1]*h[1],e.coords[g]=r,e.coords[g+1]=n;for(let t=2;t<u;++t)e.coords[g+t]=m(y,l[g+t],t)}}return e!==t&&pe(e,l.length,a.length),e}function ae(e,t,r,o,n,i){if(pe(e),e.lengths.push(...t.lengths),r===n&&o===i)for(let s=0;s<t.coords.length;s++)e.coords.push(t.coords[s]);else{const l=s(r,o),a=y(r,o,n,i),u=t.coords;for(let t=0;t<u.length;t+=l)a(e.coords,u,e.coords.length,t,u[t],u[t+1])}return e}function ue(e,t,r,o){let n=0,i=e[o*t],s=e[o*(t+1)];for(let l=1;l<r;l++){const r=i+e[o*(t+l)],a=s+e[o*(t+l)+1],u=(r-i)*(a+s);i=r,s=a,n+=u}return.5*n}function ce(e,t){const{coords:r,lengths:o}=e;let n=0,i=0;for(let s=0;s<o.length;s++){const e=o[s];i+=ue(r,n,e,t),n+=e}return Math.abs(i)}function pe(e,t=0,r=0){de(e.lengths,r),de(e.coords,t)}function de(e,t=0){e.length!==t&&(e.length=t)}const ye={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},35513:function(e,t,r){r.d(t,{a:function(){return a},c:function(){return s},e:function(){return l},f:function(){return c},l:function(){return p},u:function(){return d}});var o=r(98503),n=r(90211),i=r(83448);const s=2.4;function l(e){return(0,o.bd)(e*s)}function a(e){return(0,o.be)(e)/s}function u(e,t,r,i){let{color:s,ratio:l}=t,{color:a,ratio:u}=r;u===l&&(1===u?l-=1e-6:u+=1e-6);const c=(0,o.aP)((i-l)/(u-l),0,1);(0,n._)(e,s.toArray(),a.toArray(),c)}function c(e){const t=new Uint8ClampedArray(2048);if(e=e.filter((({ratio:e})=>e>=0&&e<=1)).sort(((e,t)=>e.ratio-t.ratio)).map((({color:e,ratio:t})=>({color:e,ratio:Math.max(t,.001)}))),e.length<1)return t;let r=e[0],o=e[0],n=1;const s=(0,i.n)();for(let i=0;i<512;i++){const l=(i+.5)/512;for(;l>o.ratio&&n<e.length;)r=o,o=e[n++];u(s,r,o,l),t.set(s,4*i)}return t}function p(e,t,r){const o=Math.sqrt(e**2+t**2)/r;return o>1?0:3/(Math.PI*r**2)*(1-o**2)**2}function d(e){return"function"==typeof e?e:e?t=>+t[e]:()=>1}},68116:function(e,t,r){r.d(t,{E:function(){return v},_:function(){return T},f:function(){return m},g:function(){return g},p:function(){return y},u:function(){return h},x:function(){return f}});var o=r(98503);const n="__begin__",i="__end__",s=new RegExp(n,"ig"),l=new RegExp(i,"ig"),a=new RegExp("^"+n,"i"),u=new RegExp(i+"$","i"),c='"',p=c+" + ",d=" + "+c;function y(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function h(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function f(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):null!=e.labelExpression&&(t.expression=y(e.labelExpression),t.type="conventional"),t}function m(e){const t=f(e);if(!t)return null;switch(t.type){case"conventional":return v(t.expression);case"arcade":return t.expression}return null}function g(e){const t=f(e);if(!t)return null;switch(t.type){case"conventional":return b(t.expression);case"arcade":return T(t.expression)}return null}function v(e){let t;return e?(t=(0,o.r)(e,(e=>n+'$feature["'+e+'"]'+i)),t=a.test(t)?t.replace(a,""):c+t,t=u.test(t)?t.replace(u,""):t+c,t=t.replaceAll(s,p).replaceAll(l,d)):t='""',t}const w=/^\s*\{([^}]+)\}\s*$/i;function b(e){return e?.match(w)?.[1].trim()||null}const k=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,S=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,x=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function T(e){if(!e)return null;let t=k.exec(e)||S.exec(e);return t?t[1]||t[3]:(t=x.exec(e),t?t[2]:null)}},83297:function(e,t,r){r.d(t,{E:function(){return y},a:function(){return u},c:function(){return a},f:function(){return d},i:function(){return s},l:function(){return p},s:function(){return l},u:function(){return c}});var o=r(49555),n=r(98503);async function i(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,n.a0)(e);const r=n.B.WGS84;return await(0,o.N)(t,r),(0,o.K)(e,r)}function s(e,t){if(!l(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function l(e,t){return!!e.typeKeywords?.includes(t)}function a(e){return l(e,d.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function c(e,t,r){r?s(e,t):u(e,t)}async function p(e){const t=e.clone().normalize();let r;if(t.length>1)for(const o of t)r?o.width>r.width&&(r=o):r=o;else r=t[0];return i(r)}const d={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function y(e){const{portal:t,isOrgItem:r,itemControl:o}=e,n=t.user?.privileges;let i=!n||n.includes("features:user:edit"),s=!!r&&!!n?.includes("features:user:fullEdit");const l="update"===o||"admin"===o;return l?s=i=!0:s&&(i=!0),{features:{edit:i,fullEdit:s},content:{updateItem:l}}}},8891:function(e,t,r){r.d(t,{B:function(){return k},C:function(){return S},D:function(){return x},H:function(){return T},j:function(){return b},s:function(){return o},u:function(){return i}});r(98503);function o(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:null!=e.extent?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function n(e){return"lowerLeft"===e.originPosition&&4===e.scale.length&&4===e.translate.length}function i(e){if(n(e))return e;const{originPosition:t,scale:r,translate:o}=e,i=r[0]??1,s=r[1]??1;return{originPosition:"lowerLeft",scale:[i,"lowerLeft"===t?s:-s,r[2]??1,r[3]??1],translate:[o[0]??0,o[1]??0,o[2]??0,o[3]??0]}}function s({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function l({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function a({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function u({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function c({scale:e,translate:t},r){return r*e[0]+t[0]}function p({scale:e,translate:t},r){return r*e[1]+t[1]}function d({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function y({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function h(e,t){return e&&t?v:e&&!t?m:!e&&t?g:f}const f=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const o=t[0];let n=c(e,o[0]),i=p(e,o[1]);r[0]=[n,i];const{scale:s,originPosition:l}=e,a=s[0],u="lowerLeft"===l?s[1]:-s[1];for(let c=1;c<t.length;c++){const[e,o]=t[c];n+=a*e,i+=u*o,r[c]=[n,i]}return r},m=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const o=t[0];let n=c(e,o[0]),i=p(e,o[1]);r[0]=[n,i,d(e,o[2])];const{scale:s,originPosition:l}=e,a=s[0],u="lowerLeft"===l?s[1]:-s[1];for(let c=1;c<t.length;c++){const[o,s,l]=t[c];n+=a*o,i+=u*s,r[c]=[n,i,d(e,l)]}return r},g=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const o=t[0];let n=c(e,o[0]),i=p(e,o[1]);r[0]=[n,i,y(e,o[2])];const{scale:s,originPosition:l}=e,a=s[0],u="lowerLeft"===l?s[1]:-s[1];for(let c=1;c<t.length;c++){const[o,s,l]=t[c];n+=a*o,i+=u*s,r[c]=[n,i,y(e,l)]}return r},v=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const o=t[0];let n=c(e,o[0]),i=p(e,o[1]);r[0]=[n,i,d(e,o[2]),y(e,o[3])];const{scale:s,originPosition:l}=e,a=s[0],u="lowerLeft"===l?s[1]:-s[1];for(let c=1;c<t.length;c++){const[o,s,l,p]=t[c];n+=a*o,i+=u*s,r[c]=[n,i,d(e,l),y(e,p)]}return r};function w(e,t,r){const o=new Array(r.length);for(let n=0;n<r.length;n++)o[n]=t(e,r[n]);return o}function b(e,t,r){const o=i(e);return t.x=s(o,r.x),t.y=l(o,r.y),null!=r.z&&(t.z=a(o,r.z)),null!=r.m&&(t.m=u(o,r.m)),t}function k(e,t,r,o=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const s=i(e);t.points=h(o,n)(s,r.points),t.hasZ=o,t.hasM=n}return t}function S(e,t,r,o=null!=r?.z,n=null!=r?.m){if(null==r)return t;const s=i(e);return t.x=c(s,r.x),t.y=p(s,r.y),o&&(t.z=d(s,r.z)),n&&(t.m=y(s,r.m)),t}function x(e,t,r,o=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const s=i(e);t.rings=w(s,h(o,n),r.rings),t.hasZ=o,t.hasM=n}return t}function T(e,t,r,o=r?.hasZ??!1,n=r?.hasM??!1){if(null!=r){const s=i(e);t.paths=w(s,h(o,n),r.paths),t.hasZ=o,t.hasM=n}return t}},77998:function(e,t,r){r.d(t,{e:function(){return l},n:function(){return n},o:function(){return s},r:function(){return i}});const o="randomUUID"in crypto;function n(){if(o)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=t=>e[t].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function i(){return`{${n().toUpperCase()}}`}function s(){return`{${n()}}`}function l(e){const t=e.toUpperCase();return"{"!==e[0]?`{${t}}`:t}}}]);
//# sourceMappingURL=78.ee276573.js.map