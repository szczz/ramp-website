"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3410],{95154:function(e,t,r){r.d(t,{i:function(){return x}});var i=r(98503),n=r(93598),s=r(80774),a=r(48631),o=r(69852),c=r(85047),l=r(80152),u=r(58469),h=r(42614),f=r(64027),p=r(81612),d=r(41470),g=r(46490);let m=0;function y(e,t){return new n.i((0,n.r)(m++),e,t)}const v={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null};class b{constructor(){this.instances={fill:y(a.T.fill,{uniforms:v,optionalAttributes:{zoomRange:!0}}),marker:y(a.T.marker,{uniforms:v,optionalAttributes:{zoomRange:!0}}),line:y(a.T.line,{uniforms:v,optionalAttributes:{zoomRange:!0}}),text:y(a.T.text,{uniforms:v,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1}}),complexFill:y(a.T.complexFill,{uniforms:v,optionalAttributes:{zoomRange:!0}}),texturedLine:y(a.T.texturedLine,{uniforms:v,optionalAttributes:{zoomRange:!0}}),animatedMarker:y(a.T.animatedMarker,{uniforms:v,optionalAttributes:{zoomRange:!0}})},this._instancesById=Object.values(this.instances).reduce(((e,t)=>(e.set(t.instanceId,t),e)),new Map)}getInstance(e){return this._instancesById.get(e)}}const M=Math.PI/180,_=4;class C extends h.e{constructor(e){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,s.e)(),this._localOrigin={x:0,y:0},this._getBounds=e}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,i.cF)(this._program)}doRender(e){const{context:t}=e,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(t),this._updateMatricesAndLocalOrigin(e),this._updateBufferData(t,r),t.setBlendingEnabled(!0),t.setDepthTestEnabled(!1),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1),t.setBlendFunction(d.R.ONE,d.R.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0);const i=this._program;t.bindVAO(this._vao),t.useProgram(i),i.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),t.gl.lineWidth(1),t.drawElements(d.E.LINES,8*r.length,d.C.UNSIGNED_INT,0),t.bindVAO()}_createTransforms(){return{displayViewScreenMat3:(0,s.e)()}}_createShaderProgram(e){if(this._program)return;const t="precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }",r="precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }";this._program=e.programCache.acquire(t,r,w().attributes)}_updateMatricesAndLocalOrigin(e){const{state:t}=e,{displayMat3:r,size:i,resolution:n,pixelRatio:s,rotation:a,viewpoint:h}=t,f=M*a,{x:p,y:d}=h.targetGeometry,g=(0,u.L)(p,t.spatialReference);this._localOrigin.x=g,this._localOrigin.y=d;const m=s*i[0],y=s*i[1],v=n*m,b=n*y,_=(0,o.o)(this._dvsMat3);(0,o.i)(_,_,r),(0,o.M)(_,_,(0,c.t)(m/2,y/2)),(0,o.f)(_,_,(0,l.r)(i[0]/v,-y/b,1)),(0,o.h)(_,_,-f)}_updateBufferData(e,t){const{x:r,y:i}=this._localOrigin,n=2*_*t.length,s=new Float32Array(n),a=new Uint32Array(8*t.length);let o=0,c=0;for(const l of t)l&&(s[2*o]=l[0]-r,s[2*o+1]=l[1]-i,s[2*o+2]=l[0]-r,s[2*o+3]=l[3]-i,s[2*o+4]=l[2]-r,s[2*o+5]=l[3]-i,s[2*o+6]=l[2]-r,s[2*o+7]=l[1]-i,a[c]=o+0,a[c+1]=o+3,a[c+2]=o+3,a[c+3]=o+2,a[c+4]=o+2,a[c+5]=o+1,a[c+6]=o+1,a[c+7]=o+0,o+=4,c+=8);if(this._vertexBuffer?this._vertexBuffer.setData(s.buffer):this._vertexBuffer=p.E.createVertex(e,d.F.DYNAMIC_DRAW,s.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=p.E.createIndex(e,d.F.DYNAMIC_DRAW,a),!this._vao){const t=w();this._vao=new g.o(e,t.attributes,t.bufferLayouts,new Map([["geometry",this._vertexBuffer]]),this._indexBuffer)}}}const w=()=>(0,f.b)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:d.C.FLOAT}]});class x extends n.n{constructor(e){super(e),this._instanceStore=new b,this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,i.C)(this._boundsRenderer)}get instanceStore(){return this._instanceStore}enableRenderingBounds(e){this._boundsRenderer=new C(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}_renderChildren(e,t){e.selection=t;for(const r of this.children)r.visible&&r.getDisplayList(this._instanceStore,s.N.STRICT_ORDER)?.render(e)}}},48706:function(e,t,r){r.d(t,{t:function(){return s}});var i=r(80774),n=r(95154);class s extends n.i{renderChildren(e){for(const t of this.children)t.setTransform(e.state);if(super.renderChildren(e),this._updateAttributeView(),this.children.some((e=>e.hasData))){switch(e.drawPhase){case i.E.MAP:this._renderChildren(e,i.R.All);break;case i.E.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(e)}this._boundsRenderer&&this._boundsRenderer.doRender(e)}}_renderHighlight(e){(0,i.h)(e,!1,(e=>{this._renderChildren(e,i.R.Highlight)}))}}},72894:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var i=r(98503),n=r(87399),s=r(48706),a=r(2917),o=r(26453);let c=class extends((0,n.j)(n.y)){constructor(){super(...arguments),this._highlightCounter=new o.e}attach(){this.graphicsView=new a.F({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new s.t(this.view.featuresTilingScheme),layerId:this.layer.id}),this.container.addChild(this.graphicsView.container),this.addAttachHandles([this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler),this.watch("layer.visible",(e=>{e&&(this.graphicsView.update({state:this.view.state}),this.graphicsView.pushUpdate())}))]),this._updateHighlights()}detach(){this.container.removeAllChildren(),this.graphicsView=(0,i.C)(this.graphicsView)}async hitTest(e){return this.graphicsView?this.graphicsView.hitTest(e).map((t=>({type:"graphic",graphic:t,mapPoint:e,layer:this.layer}))):null}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(e){this.graphicsView.processUpdate(e)}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(e,t="default"){let r;"number"==typeof e?r=[e]:e instanceof i.b1?r=[e.uid]:Array.isArray(e)&&e.length>0?r="number"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.V.isCollection(e)&&e.length>0&&(r=e.map((e=>e&&e.uid)).toArray());const n=r?.filter(i.bQ);return n?.length?(this._addHighlight(n,t),(0,i.aH)((()=>this._removeHighlight(n,t)))):(0,i.aH)()}_addHighlight(e,t){this._highlightCounter.addGroup(e,t),this._updateHighlights()}_removeHighlight(e,t){this._highlightCounter.deleteGroup(e,t),this._updateHighlights()}_updateHighlights(){const e=[];for(const t of this._highlightCounter.ids()){const r=this._highlightCounter.getHighlightGroups(t),i=this._getHighlightBits(r);e.push({objectId:t,highlightFlags:i})}this.graphicsView?.setHighlight(e)}};(0,i.k)([(0,i.o)()],c.prototype,"graphicsView",void 0),c=(0,i.k)([(0,i.A)("esri.views.2d.layers.GraphicsLayerView2D")],c);const l=c},473:function(e,t,r){r.d(t,{y:function(){return f}});var i=r(98503),n=r(76173),s=r(44126),a=r(8891);function o(e,t,r,n,s){if(null==e)return null;const a=e.referencesGeometry()&&s?l(t,n,s):t,o=e.repurposeFeature(a);try{return e.evaluate({...r,$feature:o},e.services)}catch(c){return i.n.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const c=new Map;function l(e,t,r){const{transform:i,hasZ:n,hasM:s}=r;c.has(t)||c.set(t,u(t));const a=c.get(t)(e.geometry,i,n,s);return{...e,geometry:a}}function u(e){const t={};switch(e){case"esriGeometryPoint":return(e,r,i,n)=>(0,a.C)(r,t,e,i,n);case"esriGeometryPolygon":return(e,r,i,n)=>(0,a.D)(r,t,e,i,n);case"esriGeometryPolyline":return(e,r,i,n)=>(0,a.H)(r,t,e,i,n);case"esriGeometryMultipoint":return(e,r,i,n)=>(0,a.B)(r,t,e,i,n);default:return i.n.getLogger("esri.views.2d.support.arcadeOnDemand").error(new i.s("mapview-arcade",`Unable to handle geometryType: ${e}`)),e=>e}}const h=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:n}=e;return[t,r,i,255*n]};class f{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let i=!1;for(const t of r)if(t.primitiveName===e.primitiveName){i=!0;break}if(!i)for(const n of t)n.primitiveName===e.primitiveName&&r.push(n)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const i of e.effects)f.findApplicableOverrides(i,t,r);if(e.symbolLayers)for(const i of e.symbolLayers)f.findApplicableOverrides(i,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const i of e.effects)f.findApplicableOverrides(i,t,r);if(e.markerPlacement&&f.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const i of e.markerGraphics)f.findApplicableOverrides(i,t,r),f.findApplicableOverrides(i.symbol,t,r)}else"CIMCharacterMarker"===e.type?f.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?f.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&f.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t){if(!e)return null;if("CIMGeometricEffectDashes"===e.type&&(0,s.B)(e),!t||!e.primitiveName)return{type:"cim-effect-param",effect:e,overrides:[]};const r=(0,s.W)(e),i=e.primitiveName,n=[];for(const a of t)a.primitiveName===i&&n.push((0,s.W)(a));return{type:"cim-effect-param",effect:r,overrides:(0,s.U)(n)}}static async resolveSymbolOverrides(e,t,r,n,a,o,c){if(!e?.symbol)return null;let{symbol:l,primitiveOverrides:u}=e;const h=!!u;if(!h&&!n)return l;l=(0,i.f)(l),u=(0,i.f)(u);let p=!0;if(t||(t={attributes:{}},p=!1),h){if(p||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),c||(u=u.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),u.length>0){const e={spatialReference:r,fields:(0,s.v)(t.attributes),geometryType:a};await f.createRenderExpressions(u,e),f.evaluateOverrides(u,t,a??"esriGeometryPoint",o,c)}f.applyOverrides(l,u)}return n&&f.applyDictionaryTextOverrides(l,t,n,null),l}static async createRenderExpressions(e,t){const r=[];for(const n of e){const e=n.valueExpressionInfo;if(!e||f._expressionToRenderExpression.has(e.expression))continue;const s=(0,i.em)(e.expression,t.spatialReference,t.fields);r.push(s),s.then((t=>f._expressionToRenderExpression.set(e.expression,t)))}r.length>0&&await Promise.all(r)}static evaluateOverrides(e,t,r,i,s){const a={$view:{scale:s?.scale}};for(const c of e){c.value&&"object"==typeof c.value&&(0,n.c)(c.value)&&("Color"===c.propertyName||"StrokeColor"===c.propertyName)&&(c.value=h(c.value));const e=c.valueExpressionInfo;if(!e)continue;const s=f._expressionToRenderExpression.get(e.expression);s&&(c.value=o(s,t,a,r,i))}}static applyDictionaryTextOverrides(e,t,r,i,n="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const s=e.symbolLayers;if(!s)return;for(const a of s)a&&"CIMVectorMarker"===a.type&&f.applyDictionaryTextOverrides(a,t,r,i,"CIMTextSymbol"===e.type?e.textCase:n)}break;case"CIMVectorMarker":{const n=e.markerGraphics;if(!n)return;for(const e of n)e&&f.applyDictionaryTextOverrides(e,t,r,i)}break;case"CIMMarkerGraphic":{const a=e.textString;if(a&&a.includes("[")){const o=(0,s.a)(a,r);e.textString=(0,s.c)(t,o,i,n)}}}}static applyOverrides(e,t,r,i){if(e.primitiveName)for(const n of t)if(n.primitiveName===e.primitiveName){const t=(0,s.z)(n.propertyName);if(i&&i.push({cim:e,nocapPropertyName:t,value:e[t]}),r){let t=!1;for(const i of r)i.primitiveName===e.primitiveName&&(t=!0);t||r.push(n)}null!=n.value&&(e[t]=n.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const n of e.effects)f.applyOverrides(n,t,r,i);if(e.symbolLayers)for(const n of e.symbolLayers)f.applyOverrides(n,t,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const n of e.effects)f.applyOverrides(n,t,r,i);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const n of e.markerGraphics)f.applyOverrides(n,t,r,i),f.applyOverrides(n.symbol,t,r,i)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(e,t){if("DashTemplate"===e)return t.split(" ").map((e=>Number(e)));if("Color"===e){const e=new i.aC(t).toRgba();return e[3]*=255,e}return t}}f._expressionToRenderExpression=new Map},76173:function(e,t,r){r.d(t,{A:function(){return x},B:function(){return I},C:function(){return S},H:function(){return k},O:function(){return V},R:function(){return R},c:function(){return n}});var i=r(98503);r(90211),r(83448);function n(e){return"r"in e&&"g"in e&&"b"in e}function s(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function o(e){return"l"in e&&"c"in e&&"h"in e}function c(e){return"x"in e&&"y"in e&&"z"in e}const l=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],u=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function h(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw new Error("dimensions do not match");const s=e.length,a=e[0].length;let o=0;for(i=0;i<s;i++){for(o=0,n=0;n<a;n++)o+=e[i][n]*t[n];r.push(o)}return r}function f(e){const t=[e.r/255,e.g/255,e.b/255].map((e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4)),r=h(l,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function p(e){const t=h(u,[e.x/100,e.y/100,e.z/100]).map((e=>{const t=e<=.0031308?12.92*e:1.055*e**.4166666666666667-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function d(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map((e=>e>.008856451679035631?e**.3333333333333333:7.787037037037035*e+.13793103448275862));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function g(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((e=>e>6/29?e**3:3*(6/29)**2*(e-4/29)));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function m(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function y(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function v(e){return d(f(e))}function b(e){return p(g(e))}function M(e){return m(d(f(e)))}function _(e){return p(g(y(e)))}function C(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let a=n,o=0===s?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,c=0===s?0:s/a;return o<0&&(o+=6),o*=60,c*=100,a*=100/255,{h:o,s:c,v:a}}function w(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let a;switch(Math.floor(t)){case 0:a={r:n,g:s,b:0};break;case 1:a={r:s,g:n,b:0};break;case 2:a={r:0,g:n,b:s};break;case 3:a={r:0,g:s,b:n};break;case 4:a={r:s,g:0,b:n};break;case 5:case 6:a={r:n,g:0,b:s};break;default:a={r:0,g:0,b:0}}return a.r=Math.round(a.r+i-n),a.g=Math.round(a.g+i-n),a.b=Math.round(a.b+i-n),a}function x(e){return n(e)?e:o(e)?_(e):a(e)?b(e):c(e)?p(e):s(e)?w(e):e}function I(e){return s(e)?e:C(x(e))}function S(e){return a(e)?e:v(x(e))}function k(e){return o(e)?e:M(x(e))}function O(e,t){const{r:r,g:i,b:n}=e;return.2126*r+.7152*i+.0722*n}var A;function R(e,t=A.High){return O(e)>t?new i.aC([0,0,0,e.a]):new i.aC([255,255,255,e.a])}function V(e,t,r={}){if(0===e.length||t<=0)return[];if(1===(e=e.map((e=>"string"==typeof e?new i.aC(e):e))).length||1===t){const r=[],i=e[0];for(let e=0;e<t;e++)r.push(i.clone());return r}if(r.shuffle&&(e=(0,i.bi)((0,i.f)(e),r.seed)),e.length>=t){const r=[],i=(e.length-1)/(t-1);for(let n=0;n<t;n++){const t=Math.round(n*i);r.push(e[t].clone())}return r}return T(e,t,r)}function T(e,t,r={}){const n=[],s=e.length-1,a=Math.ceil((t-e.length)/s);e:for(let i=0;i<s;i++){const s=e[i],o=e[i+1];for(let i=1;i<=a;i++){const c=i/(a+1);if(n.push(N(s,o,c,r)),n.length+e.length===t)break e}}return[...e.map((e=>e.clone())),...(0,i.bi)(n,r.seed??1)]}(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(A||(A={}));const H=(e,t)=>{const r=Math.floor(10*t())-5;return Math.min(255,Math.max(0,e+r))};function N(e,t,r,n={}){const s=e.r,a=e.g,o=e.b,c=t.r,l=t.g,u=t.b,h=Math.round(s+(c-s)*r),f=Math.round(a+(l-a)*r),p=Math.round(o+(u-o)*r);if(!n.offset)return new i.aC([h,f,p]);const d=(0,i.bj)(n.seed);return new i.aC([H(h,d),H(f,d),H(p,d)])}}}]);
//# sourceMappingURL=3410.d09736c5.js.map