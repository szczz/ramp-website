"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[2895,5276],{56201:function(e,t,n){n.d(t,{F:function(){return w},a:function(){return d},c:function(){return h},i:function(){return l},o:function(){return u},p:function(){return y},t:function(){return i}});var r=n(98503),s=n(77998);const i=(0,s.o)(),a=new Map,o=new Map;async function u(e,t,n){if(!e||!n)return!1;if(!t)return!0;const s=new URL(e).host;let i=a.get(s);if(!i){const t=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");i=(await(0,r.U)(t,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return i===t}async function l(e,t,r=!1){if(!e||!t)return!0;const s=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),a=o.get(s)?.entries();if(a)for(const[o,u]of a)if(u.name===t){const e=!u.stack?.hasForwardEdits();if(!e&&r){const[{deleteForwardEdits:e},{default:t}]=await Promise.all([n.e(8624).then(n.bind(n,58624)),n.e(4616).then(n.bind(n,34616))]),r=await e(s,o,new t({sessionId:i,moment:u.moment}));return r.success&&u.stack?.clearForwardEdits(),r.success}return e}return!0}function d(e,t){if(!e)return!1;const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),r=o.get(n)?.entries();if(r)for(const[s,i]of r)if(i.name===t)return"edit"===i.lockType;return!1}const c=new r.bP.EventEmitter;function p(e){return c.on("apply-edits",new WeakRef(e))}function f(e){return c.on("update-moment",new WeakRef(e))}function h(e,t,n=null,s=!1){const i=(0,r.aM)();return s=null==t||s,c.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:n,mayReceiveServiceEdits:s,result:i.promise}),i}const m=Symbol();function y(e){return null!=e&&"object"==typeof e&&m in e}function g(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function b(e,t,n){const r=new URL(e).host,s=a.get(r),i=e=>!e||e===s;return i(t)&&i(n)||t===n}const w=e=>{var t;let n=class extends e{constructor(...e){super(...e),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:n,gdbVersion:s,mayReceiveServiceEdits:i,result:a}=e,o=t===this.url,u=null!=n&&null!=this.layerId&&n===this.layerId,l=g(this),d=g(this)&&b(t,s,this.gdbVersion);if(!o||l&&!d||!u&&!i)return;const c=a.then((e=>{if(this.lastEditsEventDate=new Date,u&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,r.f)(e)),e;const n=e.editedFeatures?.find((({layerId:e})=>e===this.layerId));if(n){const{adds:t,updates:s,deletes:i}=n.editedFeatures,a={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:t?t.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],deletedFeatures:i?i.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],updatedFeatures:s?s.map((({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],editedFeatures:(0,r.f)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,r.f)(e.historicMoment)};return this.emit("edits",a),a}const i={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,r.f)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,r.f)(e.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(t,s,i.historicMoment)&&this.emit("edits",i),i})).then((e=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(t,s,e.historicMoment)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:c})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:n,moment:r}=e,s=t===this.url,i=g(this),a=g(this)&&b(t,n,this.gdbVersion),o=g(this)&&!b(t,this.gdbVersion,null);s&&i&&a&&o&&"historicMoment"in this&&this.historicMoment!==r&&(this.historicMoment=r)},this.when().then((()=>{this.addHandles(p(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(f(this._updateMomentHandler))}),(()=>{}))}_shouldUpdateHistoricMoment(e,t,n){return"historicMoment"in this&&this.historicMoment!==n&&d(e,t)}};return t=m,(0,r.k)([(0,r.o)()],n.prototype,"lastEditsEventDate",void 0),n=(0,r.k)([(0,r.A)("esri.layers.mixins.EditBusLayer")],n),n}},25276:function(e,t,n){n.d(t,{applyEdits:function(){return f},r3:function(){return d},uploadAssets:function(){return L},zp:function(){return p}});var r=n(98503),s=n(77998),i=n(58469),a=n(56201),o=n(48165);function u(e){return null!=e?.applyEdits}function l(e){return"object"==typeof e&&null!=e&&"objectId"in e&&!!e.objectId}function d(e){return e.every(l)}function c(e){return"object"==typeof e&&null!=e&&"globalId"in e&&!!e.globalId}function p(e){return e.every(c)}async function f(e,t,n,s={}){let i;const o="gdbVersion"in e?e.gdbVersion:null,u=s.gdbVersion??o;if((0,a.p)(e)&&e.url)i=(0,a.c)(e.url,e.layerId,u,"original-and-current-features"===s.returnServiceEditsOption);else{i=(0,r.aM)(),i.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit("edits",t)}));const t={result:i.promise};e.emit("apply-edits",t)}try{const{results:a,edits:o}=await h(e,t,n,s),u=e=>e.filter((e=>!e.error)).map(r.f),l={edits:o,addedFeatures:u(a.addFeatureResults),updatedFeatures:u(a.updateFeatureResults),deletedFeatures:u(a.deleteFeatureResults),addedAttachments:u(a.addAttachmentResults),updatedAttachments:u(a.updateAttachmentResults),deletedAttachments:u(a.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:a.editMoment?new Date(a.editMoment):null,globalIdToObjectId:s.globalIdToObjectId};return a.editedFeatureResults?.length&&(l.editedFeatures=a.editedFeatureResults),i.resolve(l),a}catch(l){throw i.reject(l),l}}async function h(e,t,n,s){if(await e.load(),!u(t))throw new r.s(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!(0,r.c$)(e))throw new r.s(`${e.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:e});const{edits:i,options:a}=await m(e,n,s);return i.addFeatures?.length||i.updateFeatures?.length||i.deleteFeatures?.length||i.addAttachments?.length||i.updateAttachments?.length||i.deleteAttachments?.length?{edits:i,results:await t.applyEdits(i,a)}:{edits:i,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function m(e,t,n){const s=(0,r.d0)(e),i=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),a=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),o=null!=e.infoFor3D;if(S(t,s,n,!!i,!!a,`${e.type}-layer`),!s.data.isVersioned&&n?.gdbVersion)throw new r.s(`${e.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!s.editing.supportsRollbackOnFailure&&n?.rollbackOnFailureEnabled)throw new r.s(`${e.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const u={...n};if(null!=u.rollbackOnFailureEnabled||s.editing.supportsRollbackOnFailure||(u.rollbackOnFailureEnabled=!0),u.rollbackOnFailureEnabled||"original-and-current-features"!==u.returnServiceEditsOption||(!1===u.rollbackOnFailureEnabled&&r.n.getLogger("esri.layers.graphics.editingSupport").warn(`${e.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),u.rollbackOnFailureEnabled=!0),!s.editing.supportsReturnServiceEditsInSourceSpatialReference&&u.returnServiceEditsInSourceSR)throw new r.s(`${e.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(u.returnServiceEditsInSourceSR&&"original-and-current-features"!==u.returnServiceEditsOption)throw new r.s(`${e.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const l=R(t,s,`${e.type}-layer`),d=n?.globalIdUsed||o,c=e.fields.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(d){const{globalIdField:t}=e;if(null==t)throw new r.s(`${e.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");l.addFeatures.forEach((e=>v(e,t)))}return l.addFeatures.forEach((t=>b(t,e,d,c))),l.updateFeatures.forEach((t=>F(t,e,d,c))),l.deleteFeatures.forEach((t=>w(t,e,d,c))),l.addAttachments.forEach((t=>I(t,e))),l.updateAttachments.forEach((t=>I(t,e))),o&&await $(l,e),{edits:await A(l),options:u}}function y(e,t,n,s){if(n){if("attributes"in e&&!e.attributes[t.globalIdField])throw new r.s(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in e)&&!e.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(s.length&&"attributes"in e)for(const i of s){const n=e.attributes[i.name];if(void 0!==n&&!(0,r.d1)(i,n))throw new r.s(`${t.type}-layer:invalid-parameter`,`Big-integer field '${i.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if("geometry"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new r.s(`${t.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new r.s(`${t.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function g(e,t){if("geometry"in e&&"mesh"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:n}=e,{spatialReference:s,vertexSpace:i}=n,a=t.spatialReference,o="local"===i.type,u=(0,r.cK)(a),l=(0,r.bh)(a,s),d=l||(0,r.cb)(a)&&((0,r.cb)(s)||(0,r.cL)(s));if(!(o&&u&&d||!o&&!u&&l))throw new r.s(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${i.type} vertex space and a spatial reference wkid:${s.wkid} to a layer with a spatial reference wkid:${a.wkid} is not supported.`)}}function b(e,t,n,r){y(e,t,n,r),g(e,t)}function w(e,t,n,r){y(e,t,n,r)}function F(e,t,n,s){y(e,t,n,s),g(e,t);const i=(0,r.d0)(t);if("geometry"in e&&null!=e.geometry&&!i?.editing.supportsGeometryUpdate)throw new r.s(`${t.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}function I(e,t){const{feature:n,attachment:s}=e;if(!n||"attributes"in n&&!n.attributes[t.globalIdField])throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in n)&&!n.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!s.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!s.data&&!s.uploadId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(s.data instanceof File&&s.data.name)&&!s.name)throw new r.s(`${t.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities?.editing.supportsUploadWithItemId&&s.uploadId)throw new r.s(`${t.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof s.data){const e=(0,r.aU)(s.data);if(e&&!e.isBase64)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function v(e,t){const{attributes:n}=e;null==n[t]&&(n[t]=(0,s.r)())}async function A(e){const t=e.addFeatures??[],n=e.updateFeatures??[],r=t.concat(n).map((e=>e.geometry)),s=await(0,i.R)(r),a=t.length,o=n.length;return s.slice(0,a).forEach(((e,n)=>t[n].geometry=e)),s.slice(a,a+o).forEach(((e,t)=>n[t].geometry=e)),e}function M(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&r.V.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function R(e,t,n){const s=M(e);if(s.addFeatures?.length&&!t.operations.supportsAdd)throw new r.s(`${n}:unsupported-operation`,"Layer does not support adding features.");if(s.updateFeatures?.length&&!t.operations.supportsUpdate)throw new r.s(`${n}:unsupported-operation`,"Layer does not support updating features.");if(s.deleteFeatures?.length&&!t.operations.supportsDelete)throw new r.s(`${n}:unsupported-operation`,"Layer does not support deleting features.");return s.addFeatures=s.addFeatures.map(E),s.updateFeatures=s.updateFeatures.map(E),s.addAssetFeatures=[],s}function S(e,t,n,s,i,a){if(!e||!s&&!i)throw new r.s(`${a}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!t.editing.supportsGlobalId&&n?.globalIdUsed)throw new r.s(`${a}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!t.editing.supportsGlobalId&&i)throw new r.s(`${a}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!n?.globalIdUsed&&i)throw new r.s(`${a}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function E(e){const t=new r.b1;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}async function $(e,t){const{infoFor3D:n}=t;if(null==n)return;if(!(0,o.f)(n))throw new r.s(`${t.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");e.addAssetFeatures??=[];const{addAssetFeatures:s}=e;for(const r of e.addFeatures??[])x(r)&&s.push(r);for(const r of e.updateFeatures??[])x(r)&&s.push(r)}function x(e){return"mesh"===e?.geometry?.type}function L(e,t,n,s){if(!u(t))throw new r.s(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!t.uploadAssets)throw new r.s(`${e.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:e});return t.uploadAssets(n,s)}},48165:function(e,t,n){n.d(t,{M:function(){return A},a:function(){return c},c:function(){return l},d:function(){return f},f:function(){return p},l:function(){return h},m:function(){return m},n:function(){return s},p:function(){return d},r:function(){return i},s:function(){return u},u:function(){return a}});const r=[["binary","application/octet-stream","bin",""]];function s(e,t){return null!=w(t.name,e?.supportedFormats??[])}function i(e,t){if(!e)return!1;const n=l(t,e.supportedFormats??[]);return null!=n&&e.editFormats.includes(n)}function a(e,t){return F(b(e,t))}function o(e,t){return F(w(e,t))}function u(e,t){return I(g(e,t))}function l(e,t){return o(e.name,t)??a(e.type,t)}function d(e,t,n){return a(e,n)??o(t,n)}function c({supportedFormats:e}){return d("model/gltf-binary","glb",e)}function p(e){const t=c(e);return null!=t&&e.editFormats.includes(t)}function f({supportedFormats:e}){return d("model/gltf+json","gltf",e)}function h({supportedFormats:e}){return d("application/esri3do-SR_world","wld",e)}function m({supportedFormats:e}){return d("application/esri3do-SR_prj","prj",e)}function y(e){return[...r,...e]}function g(e,t){return y(t).find((t=>F(t)===e))}function b(e,t){const n=e.toLowerCase();return y(t).find((e=>I(e)===n))}function w(e,t){const n=e.toLowerCase();return y(t).find((e=>v(e).some((e=>n.endsWith(e)))))}function F(e){return e?.[0]}function I(e){return e?.[1].toLowerCase()}function v(e){return e?.[2].split(",").map((e=>e.toLowerCase()))??[]}function A(e){return e.tables?.find((e=>"assetMaps"===e.role))}},58469:function(e,t,n){n.d(t,{L:function(){return I},M:function(){return h},P:function(){return F},R:function(){return b},v:function(){return w}});var r=n(98503),s=n(94137),i=n(81528),a=n(44485);async function o(e,t,n,s){const a=(0,i.f)(e),o=t[0].spatialReference,u={...s,responseType:"json",query:{...a.query,f:"json",sr:(0,r.bn)(o),target:JSON.stringify({geometryType:(0,r.aW)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},l=await(0,r.U)(a.path+"/cut",u),{cutIndexes:d,geometries:c=[]}=l.data;return{cutIndexes:d,geometries:c.map((e=>{const t=(0,r.b3)(e);return t.spatialReference=o,t}))}}async function u(e,t,n){const s="string"==typeof e?(0,r.I)(e):e,i=t[0].spatialReference,o=(0,r.aW)(t[0]),u={...n,query:{...s.query,f:"json",sr:(0,r.bn)(i),geometries:JSON.stringify((0,a.r)(t))}},{data:l}=await(0,r.U)(s.path+"/simplify",u);return(0,a.o)(l.geometries,o,i)}const l=()=>r.n.getLogger("esri.geometry.support.normalizeUtils");function d(e){return"polygon"===e.type}function c(e){return"polygon"===e[0].type}function p(e){return"polyline"===e[0].type}function f(e){const t=[];let n=0,r=0;for(let s=0;s<e.length;s++){const i=e[s];let a=null;for(let e=0;e<i.length;e++)a=i[e],t.push(a),0===e?(n=a[0],r=n):(n=Math.min(n,a[0]),r=Math.max(r,a[0]));a&&t.push([(n+r)/2,0])}return t}function h(e,t){if(!(e instanceof r.aT||e instanceof r.bC)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw l().error(e),new r.s(e)}const n=(0,s.o)(e),i=[];for(const r of n){const e=[];i.push(e),e.push([r[0][0],r[0][1]]);for(let n=0;n<r.length-1;n++){const s=r[n][0],i=r[n][1],a=r[n+1][0],o=r[n+1][1],u=Math.sqrt((a-s)*(a-s)+(o-i)*(o-i)),l=(o-i)/u,d=(a-s)/u,c=u/t;if(c>1){for(let o=1;o<=c-1;o++){const n=o*t,r=d*n+s,a=l*n+i;e.push([r,a])}const n=(u+Math.floor(c-1)*t)/2,r=d*n+s,a=l*n+i;e.push([r,a])}e.push([a,o])}}return d(e)?new r.bC({rings:i,spatialReference:e.spatialReference}):new r.aT({paths:i,spatialReference:e.spatialReference})}function m(e,t,n){if(t){const t=h(e,1e6);e=(0,r.a0)(t,!0)}return n&&(e=(0,s.s)(e,n)),e}function y(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,s.i)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,s.i)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,s.i)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,s.i)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function g(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const i=t.cutIndexes[r],a=t.geometries[r],o=(0,s.o)(a);for(let e=0;e<o.length;e++){const t=o[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,s.i)(n,180);for(let s=0;s<t.length;s++){const t=a.getPoint(e,s);a.setPoint(e,s,t.clone().offset(r,0))}return!0}}))}if(i===n){if(c(e))for(const t of(0,s.o)(a))e[i]=e[i].addRing(t);else if(p(e))for(const t of(0,s.o)(a))e[i]=e[i].addPath(t)}else n=i,e[i]=a}return e}async function b(e,t,n){if(!Array.isArray(e))return b([e],t);t&&"string"!=typeof t&&l().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i="string"==typeof t?t:t?.url??r.H.geometryServiceUrl;let a,d,c,p,f,h,w,F,I=0;const v=[],A=[];for(const o of e)if(null!=o)if(a||(a=o.spatialReference,d=(0,r.bF)(a),c=a.isWebMercator,h=c?102100:4326,p=s.r[h].maxX,f=s.r[h].minX,w=s.r[h].plus180Line,F=s.r[h].minus180Line),d)if("mesh"===o.type)A.push(o);else if("point"===o.type)A.push(y(o.clone(),p,f));else if("multipoint"===o.type){const e=o.clone();e.points=e.points.map((e=>y(e,p,f))),A.push(e)}else if("extent"===o.type){const e=o.clone()._normalize(!1,!1,d);A.push(e.rings?new r.bC(e):e)}else if(o.extent){const e=o.extent,t=(0,s.i)(e.xmin,f)*(2*p);let n=0===t?o.clone():(0,s.s)(o.clone(),t);e.offset(t,0);let{xmin:r,xmax:i}=e;r=Number(r.toFixed(9)),i=Number(i.toFixed(9)),e.intersects(w)&&i!==p?(I=i>I?i:I,n=m(n,c),v.push(n),A.push("cut")):e.intersects(F)&&r!==f?(I=i*(2*p)>I?i*(2*p):I,n=m(n,c,360),v.push(n),A.push("cut")):A.push(n)}else A.push(o.clone());else A.push(o);else A.push(o);let M=(0,s.i)(I,p),R=-90;const S=M,E=new r.aT;for(;M>0;){const e=360*M-180;E.addPath([[e,R],[e,-1*R]]),R*=-1,M--}if(v.length>0&&S>0){const t=g(v,await o(i,v,E,n)),s=[],a=[];for(let n=0;n<A.length;n++){const i=A[n];if("cut"!==i)a.push(i);else{const i=t.shift(),o=e[n];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&i.rings.length>=o.rings.length?(s.push(i),a.push("simplify")):a.push(c?(0,r.cI)(i):i)}}if(!s.length)return a;const l=await u(i,s,n),d=[];for(let e=0;e<a.length;e++){const t=a[e];"simplify"!==t?d.push(t):d.push(c?(0,r.cI)(l.shift()):l.shift())}return d}const $=[];for(let s=0;s<A.length;s++){const e=A[s];if("cut"!==e)$.push(e);else{const e=v.shift();$.push(!0===c?(0,r.cI)(e):e)}}return $}function w(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&(0,r.bF)(e.spatialReference);if(!n)return t;const[s,i]=n.valid,a=2*i,{width:o}=t;let u,{xmin:l,xmax:d}=t;if([l,d]=[d,l],"extent"===e.type||0===o||o<=i||o>a||l<s||d>i)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;u=f(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;u=f(e.paths);break;case"multipoint":u=e.points}const c=t.clone();for(let r=0;r<u.length;r++){let e=u[r][0];e<0?(e+=i,d=Math.max(e,d)):(e-=i,l=Math.min(e,l))}return c.xmin=l,c.xmax=d,c.width<o?(c.xmin-=i,c.xmax-=i,c):t}function F(e,t,n){const s=(0,r.bF)(n);if(null==s)return e;const[i,a]=s.valid,o=2*a;let u=0,l=0;t>a?u=Math.ceil(Math.abs(t-a)/o):t<i&&(u=-Math.ceil(Math.abs(t-i)/o)),e>a?l=Math.ceil(Math.abs(e-a)/o):e<i&&(l=-Math.ceil(Math.abs(e-i)/o));let d=e+(u-l)*o;const c=d-t;return c>a?d-=o:c<i&&(d+=o),d}function I(e,t){const n=(0,r.bF)(t);if(n){const[t,r]=n.valid,s=r-t;if(e<t)for(;e<t;)e+=s;if(e>r)for(;e>r;)e-=s}return e}},94137:function(e,t,n){n.d(t,{i:function(){return i},o:function(){return o},r:function(){return s},s:function(){return a}});var r=n(98503);const s={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.aT({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.B.WebMercator}),minus180Line:new r.aT({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.aT({paths:[[[180,-180],[180,180]]],spatialReference:r.B.WGS84}),minus180Line:new r.aT({paths:[[[-180,-180],[-180,180]]],spatialReference:r.B.WGS84})}};function i(e,t){return Math.ceil((e-t)/(2*t))}function a(e,t){const n=o(e);for(const r of n)for(const e of r)e[0]+=t;return e}function o(e){return(0,r.a9)(e)?e.rings:e.paths}},81528:function(e,t,n){n.d(t,{f:function(){return i},i:function(){return s},s:function(){return a}});var r=n(98503);function s(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function i(e){return"string"==typeof e?(0,r.I)(e):(0,r.f)(e)}function a(e,t,n){const r={};for(const s in e){if("declaredClass"===s)continue;const t=e[s];if(null!=t&&"function"!=typeof t)if(Array.isArray(t))r[s]=t.map((e=>a(e)));else if("object"==typeof t)if(t.toJSON){const e=t.toJSON(n?.[s]);r[s]=JSON.stringify(e)}else r[s]=JSON.stringify(t);else r[s]=t}return r}},44485:function(e,t,n){n.d(t,{o:function(){return i},r:function(){return s}});var r=n(98503);function s(e){return{geometryType:(0,r.aW)(e[0]),geometries:e.map((e=>e.toJSON()))}}function i(e,t,n){const s=(0,r.aX)(t);return e.map((e=>{const t=s.fromJSON(e);return t.spatialReference=n,t}))}}}]);
//# sourceMappingURL=5276.ab5c2162.js.map