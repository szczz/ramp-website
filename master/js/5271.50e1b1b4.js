(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[5271],{21213:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=21213,e.exports=t},35271:function(e,t,s){"use strict";s.d(t,{E:function(){return L},O:function(){return P},c:function(){return C},m:function(){return oe},p:function(){return ae},s:function(){return i}});var r=s(98503);const n="20241122",o="f6f7099a0e79cf518abdcf87c5aa8b6f24ecdcd8";let i=class{constructor(e=e=>e.values().next().value){this._peeker=e,this._observable=new r.aQ,this._items=new Set}get length(){return(0,r.aR)(this._observable),this._items.size}clear(){0!==this.length&&(this._items.clear(),this._observable.notify())}last(){if(0===this.length)return;let e;for(e of this._items);return e}peek(){if(0!==this.length)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return(0,r.aR)(this._observable),this._items.has(e)}pop(){if(0===this.length)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(0===this.length)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const t=this.length;return this._items.forEach((t=>{e(t)||this._items.delete(t)})),t!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){(0,r.aR)(this._observable),yield*this._items}};const a=new FinalizationRegistry((e=>{e.close()}));function l(e,t){a.register(e,t,t)}function c(e){a.unregister(e)}function h(e,t){return new Proxy({},{get:(s,r,n)=>(...s)=>{let n,o;const i=s[s.length-1];return u(i)&&(n=i.signal,o=i.transferList,s.pop()),e.apply(t?`${t}.${r.toString()}`:r.toString(),s,{transferList:o,signal:n})}})}function u(e){return"object"==typeof e&&!Array.isArray(e)&&null!=e&&("signal"in e||"transferList"in e||0===Object.keys(e).length)}const d={statsWorker:()=>Promise.all([s.e(2031),s.e(6510),s.e(6830)]).then(s.bind(s,4449)),geometryEngineWorker:()=>Promise.all([s.e(916),s.e(2022)]).then(s.bind(s,26847)),CSVSourceWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(3557),s.e(1770),s.e(8928)]).then(s.bind(s,87443)),EdgeProcessingWorker:()=>Promise.all([s.e(615),s.e(6502)]).then(s.bind(s,76502)),ElevationSamplerWorker:()=>Promise.all([s.e(720),s.e(6947)]).then(s.bind(s,79041)),FeatureServiceSnappingSourceWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(3557),s.e(1770),s.e(9248),s.e(6233)]).then(s.bind(s,21606)),GeoJSONSourceWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(3557),s.e(1770),s.e(1569)]).then(s.bind(s,93454)),LercWorker:()=>s.e(8829).then(s.bind(s,48829)),MemorySourceWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(3557),s.e(1770),s.e(7674)]).then(s.bind(s,2821)),PBFDecoderWorker:()=>s.e(5843).then(s.bind(s,35843)),FeaturePipelineWorker:()=>Promise.all([s.e(3313),s.e(2031),s.e(2753),s.e(6171),s.e(6849),s.e(1110),s.e(7032),s.e(7113),s.e(6510),s.e(6481),s.e(149),s.e(2611),s.e(2137),s.e(30),s.e(9248),s.e(6854),s.e(5744),s.e(655),s.e(7211),s.e(9805)]).then(s.bind(s,99805)),PointCloudWorker:()=>Promise.all([s.e(5716),s.e(5329),s.e(5239)]).then(s.bind(s,51052)),RasterWorker:()=>Promise.all([s.e(879),s.e(8932),s.e(1279),s.e(4007)]).then(s.bind(s,30695)),SceneLayerSnappingSourceWorker:()=>Promise.all([s.e(615),s.e(3111)]).then(s.bind(s,83111)),SceneLayerWorker:()=>Promise.all([s.e(5716),s.e(5329),s.e(7278),s.e(262)]).then(s.bind(s,78582)),WFSSourceWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(3557),s.e(1770),s.e(4840),s.e(8560)]).then(s.bind(s,94366)),WorkerTileHandler:()=>Promise.all([s.e(1110),s.e(6964),s.e(9874)]).then(s.bind(s,63845)),Lyr3DWorker:()=>s.e(9377).then(s.bind(s,29377)),Feature3DPipelineWorker:()=>Promise.all([s.e(2031),s.e(6849),s.e(7113),s.e(6510),s.e(149),s.e(2611),s.e(5716),s.e(30),s.e(5850),s.e(8003),s.e(1090)]).then(s.bind(s,30950)).then((e=>e.F))},f="worker:port-closed";var p;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(p||(p={}));let g=0;function m(){return g++}function b(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}function _(e){return e?"string"==typeof e?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function y(e,t,s,n){if(t.type===p.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==p.INVOKE&&t.type!==p.RESPONSE)return void e.postMessage(t);let o;if(b(s)?(o=w(s.transferList),t.data=s.result):(o=w(n),t.data=s),o){if((0,r.a$)("ff"))for(const s of o)if("byteLength"in s&&s.byteLength>267386880){const s="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case p.INVOKE:throw s;case p.RESPONSE:return void y(e,{type:p.RESPONSE,jobId:t.jobId,error:_(s)})}}e.postMessage(t,o)}else e.postMessage(t)}function k(e){if(!e)return null;const t=e.data;return t?"string"==typeof t?JSON.parse(t):t:null}function w(e){if(!e?.length)return null;if((0,r.a$)("esri-workers-arraybuffer-transfer"))return e;const t=e.filter((e=>!v(e)));return t.length?t:null}function v(e){return e instanceof ArrayBuffer||"ArrayBuffer"===e?.constructor?.name}async function P(e){try{return await e}catch(t){const e=t?.name===f;if(!(0,r.E)(t)&&!e)throw t;return}}const{CLOSE:E,ABORT:O,INVOKE:N,RESPONSE:S,OPEN_PORT:M,ON:I}=p,j=2;class J{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===p.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class L{static connect(e,t){const s=new MessageChannel;let r;r="function"==typeof e?new e:"default"in e&&"function"==typeof e.default?new e.default:e;const n=new L(s.port1,{channel:s,client:r,schedule:t});return"object"==typeof r&&"remoteClient"in r&&(r.remoteClient=n),L.clients.set(n,r),s.port2}static loadWorker(e){const t=d[e];return t?t():Promise.resolve(null)}constructor(e,t,s){this._port=e,this._jobQueue=s,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new J((e=>this._onInvokeMessage(e))),this._client=t.client,this._onMessage=this._onMessage.bind(this),this._channel=t.channel,this._schedule=t.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:E}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,t,s){return this.apply(e,[t],s)}apply(e,t,s){const n=s?.signal,o=s?.transferList;if(!this._port)return Promise.reject(new r.s(f,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:t}));const i=m();return new Promise(((s,a)=>{if((0,r.fp)(n))return this._processWork(),void a((0,r.aN)());const l=(0,r.aK)(n,(()=>{const e=this._outJobs.get(i);e&&(this._outJobs.delete(i),this._processWork(),(0,r.aJ)(e.abortHandle),this._post({type:O,jobId:i}),a((0,r.aN)()))})),c={resolve:s,reject:a,abortHandle:l,debugInfo:e};this._outJobs.set(i,c),this._post({type:N,jobId:i,methodName:e,abortable:null!=n},t,o)}))}createInvokeProxy(e){return h(this,e)}on(e,t){const s=new MessageChannel;function n(e){t(e.data)}return this._port.postMessage({type:p.ON,eventType:e,port:s.port2},[s.port2]),s.port1.addEventListener("message",n),s.port1.start(),(0,r.aH)((()=>{s.port1.postMessage({type:p.CLOSE}),s.port1.close(),s.port1.removeEventListener("message",n)}))}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:M,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=j)return;const e=this._jobQueue?.pop();if(!e)return;const{methodName:t,data:s,invokeOptions:r,resolver:n}=e;this.apply(t,s,r).then((e=>n.resolve(e))).catch((e=>n.reject(e)))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach((e=>{(0,r.aJ)(e.abortHandle),e.reject((0,r.aN)(`Worker closing, aborting job calling '${e.debugInfo}'`))})),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(e){null!=this._schedule?this._schedule((()=>this._processMessage(e,!0))):this._processMessage(e,!1)}_processMessage(e,t){const s=k(e);if(s)switch(s.type){case S:this._onResponseMessage(s);break;case N:t?this._onInvokeMessage(s):this._invokeQueue.push(s);break;case O:this._onAbortMessage(s);break;case E:this._onCloseMessage();break;case M:this._onOpenPortMessage(s);break;case I:this._onOnMessage(s)}}_onAbortMessage(e){const t=this._inJobs,s=e.jobId,r=t.get(s);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),t.delete(s))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&L.clients.get(this)===e&&e.destroy(),L.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:t,jobId:s,data:n=[],abortable:o}=e,i=o?new AbortController:null,a=this._inJobs;let l,c=this._client,h=c[t];try{if(!h&&t&&t.includes(".")){const e=t.split(".");for(let t=0;t<e.length-1;t++)c=c[e[t]],h=c[e[t+1]]}if("function"!=typeof h)throw new TypeError(`${t} is not a function`);n.push({client:this,signal:i?i.signal:null}),l=h.apply(c,n)}catch(u){return void this._post({type:S,jobId:s,error:_(u)})}(0,r.aO)(l)?(a.set(s,{controller:i,promise:l}),l.then((e=>{a.has(s)&&(a.delete(s),this._post({type:S,jobId:s},e))}),(e=>{a.has(s)&&(a.delete(s),(0,r.E)(e)||this._post({type:S,jobId:s,error:_(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:S,jobId:s},l)}_onOpenPortMessage(e){new L(e.port,{client:this._client})}_onOnMessage(e){const{port:t}=e,s=this._client.on(e.eventType,(e=>{t.postMessage(e)})),n=(0,r.eT)(e.port,"message",(e=>{k(e)?.type===p.CLOSE&&(n.remove(),s.remove(),t.close())}))}_onResponseMessage(e){const{jobId:t,error:s,data:n}=e,o=this._outJobs;if(!o.has(t))return;const i=o.get(t);o.delete(t),this._processWork(),(0,r.aJ)(i.abortHandle),s?i.reject(r.s.fromJSON(JSON.parse(s))):i.resolve(n)}_post(e,t,s){return y(this._port,e,t,s)}}L.kernelInfo={buildDate:n,fullVersion:r.ih,revision:o},L.clients=new Map;let C=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new i}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,t){return new Promise(((s,n)=>{let o=!0;const i=e=>{(0,r.D)(t.signal),o&&(o=!1,e())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const o=e[a];(0,r.aO)(o)?this._clientPromises[a]=o.then((e=>(this._clients[a]=new L(e,t,this._ongoingJobsQueue),i(s),this._clients[a])),(()=>(i(n),null))):(this._clients[a]=new L(o,t,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),i(s))}}))}broadcast(e,t,s){const r=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];r[n]=o.then((r=>r?.invoke(e,t,s)))}return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject((0,r.aN)(`Worker closing, aborting job calling '${e.methodName}'`));for(const t of this._clientPromises)t.then((e=>e?.close()));this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,c(this)}invoke(e,t,s){return this.apply(e,[t],s)}apply(e,t,s){const n=(0,r.aM)();this._ongoingJobsQueue.push({methodName:e,data:t,invokeOptions:s,resolver:n});for(let r=0;r<this._clientPromises.length;r++){const e=this._clients[r];e?e.jobAdded():this._clientPromises[r].then((e=>e?.jobAdded()))}return n.promise}createInvokeProxy(e){return h(this,e)}on(e,t){return Promise.all(this._clientPromises).then((()=>(0,r.eN)(this._clients.map((s=>s.on(e,t))))))}openPorts(){return new Promise((e=>{const t=new Array(this._clientPromises.length);let s=t.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then((n=>{n&&(t[r]=n.openPort()),0==--s&&e(t)}))}))}get test(){}};const A={async request(e,t){const s=e.options,n=s.responseType;s.signal=t?.signal,s.responseType="native"===n||"native-request-init"===n?"native-request-init":n&&["blob","json","text"].includes(n)&&(0,r.ii)(e.url)?.after?n:"array-buffer";const o=await(0,r.U)(e.url,s),i={data:o.data,httpStatus:o.httpStatus,ssl:o.ssl};switch(o.requestOptions?.responseType){case"native-request-init":return delete i.data.signal,i;case"blob":i.data=await i.data.arrayBuffer();break;case"json":i.data=(new TextEncoder).encode(JSON.stringify(i.data)).buffer;break;case"text":i.data=(new TextEncoder).encode(i.data).buffer}return{result:i,transferList:[i.data]}}},W={};function R(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.slice()||[],paths:{...W.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=W.baseUrl),t}class H{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach((t=>{this[t]=(...s)=>e[t](...s)}))}}let $=class{constructor(){this._dispatcher=new H,this._workerPostMessage({type:p.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){(0,r.gC)((()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,t,s){this._dispatcher.addEventListener(e,t,s)}removeEventListener(e,t,s){this._dispatcher.removeEventListener(e,t,s)}_workerPostMessage(e){(0,r.gC)((()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))}))}async _workerMessageHandler(e){const t=k(e);if(t&&t.type===p.OPEN){const{modulePath:e,jobId:r}=t;let n=await L.loadWorker(e);n||(n=await s(21213)(e));const o=L.connect(n);this._workerPostMessage({type:p.OPENED,jobId:r,data:o})}}};const D=()=>r.n.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:T}=p,x='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let U,F;const q="Failed to create Worker. Fallback to execute module in main thread";async function K(){if(!(0,r.a$)("esri-workers"))return B(new $);if(!U&&!F)try{const e=x.split("{CONFIGURATION}").join(Q());U=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(t){F=t||{}}let e;if(U)try{e=new Worker(U,{name:"esri-worker-"+V++})}catch{D().warn(q,F),e=new $}else D().warn(q,F),e=new $;return B(e)}async function B(e){return new Promise((t=>{function s(n){const o=k(n);o&&o.type===T&&(e.removeEventListener("message",s),e.removeEventListener("error",r),t(e))}function r(t){t.preventDefault(),e.removeEventListener("message",s),e.removeEventListener("error",r),D().warn("Failed to create Worker. Fallback to execute module in main thread",t),(e=new $).addEventListener("message",s),e.addEventListener("error",r)}e.addEventListener("message",s),e.addEventListener("error",r)}))}function Q(){let e;if(null!=r.H.default){const t={...r.H};delete t.default,e=JSON.parse(JSON.stringify(t))}else e=JSON.parse(JSON.stringify(r.H));e.assetsPath=(0,r.bx)(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?(0,r.bx)(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=(0,r.av)(),e.has={"esri-csp-restrictions":(0,r.a$)("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":(0,r.a$)("esri-2d-update-debug"),"esri-2d-log-updating":(0,r.a$)("esri-2d-log-updating"),"featurelayer-pbf":(0,r.a$)("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":(0,r.a$)("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":(0,r.a$)("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":(0,r.a$)("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":(0,r.a$)("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":(0,r.a$)("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":(0,r.a$)("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":(0,r.a$)("featurelayer-snapshot-enabled"),"esri-atomics":(0,r.a$)("esri-atomics"),"esri-shared-array-buffer":(0,r.a$)("esri-shared-array-buffer"),"esri-tiles-debug":(0,r.a$)("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":(0,r.a$)("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":(0,r.a$)("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=(0,r.bx)(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=(0,r.bx)(e.workers.workerPath):e.workers.workerPath=(0,r.bx)((0,r.eK)("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=r.H.workers.loaderConfig,s=R({baseUrl:t?.baseUrl,locale:(0,r.av)(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:s,kernelInfo:{buildDate:n,fullVersion:r.ih,revision:o}})}let V=0;const{ABORT:z,INVOKE:G,OPEN:X,OPENED:Y,RESPONSE:Z}=p;class ee{static async create(e){const t=await K();return new ee(t,e)}constructor(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",(e=>{e.preventDefault(),r.n.getLogger("esri.core.workers.WorkerOwner").error(e)}))}terminate(){this.worker.terminate()}async open(e,t={}){const{signal:s}=t,n=m();return new Promise(((t,o)=>{const i={resolve:t,reject:o,abortHandle:(0,r.aL)(s,(()=>{this._outJobs.delete(n),this._post({type:z,jobId:n})}))};this._outJobs.set(n,i),this._post({type:X,jobId:n,modulePath:e})}))}_onMessage(e){const t=k(e);if(t)switch(t.type){case Y:this._onOpenedMessage(t);break;case Z:this._onResponseMessage(t);break;case z:this._onAbortMessage(t);break;case G:this._onInvokeMessage(t)}}_onAbortMessage(e){const t=this._inJobs,s=e.jobId,r=t.get(s);r&&(r.controller&&r.controller.abort(),t.delete(s))}_onInvokeMessage(e){const{methodName:t,jobId:s,data:n,abortable:o}=e,i=o?new AbortController:null,a=this._inJobs,l=A[t];let c;try{if("function"!=typeof l)throw new TypeError(`${t} is not a function`);c=l.call(null,n,{signal:i?i.signal:null})}catch(h){return void this._post({type:Z,jobId:s,error:_(h)})}(0,r.aO)(c)?(a.set(s,{controller:i,promise:c}),c.then((e=>{a.has(s)&&(a.delete(s),this._post({type:Z,jobId:s},e))}),(e=>{a.has(s)&&(a.delete(s),e||(e={message:"Error encountered at method"+t}),(0,r.E)(e)||this._post({type:Z,jobId:s,error:_(e||{message:`Error encountered at method ${t}`})}))}))):this._post({type:Z,jobId:s},c)}_onOpenedMessage(e){const{jobId:t,data:s}=e,n=this._outJobs.get(t);n&&(this._outJobs.delete(t),(0,r.aJ)(n.abortHandle),n.resolve(s))}_onResponseMessage(e){const{jobId:t,error:s,data:n}=e,o=this._outJobs.get(t);o&&(this._outJobs.delete(t),(0,r.aJ)(o.abortHandle),s?o.reject(r.s.fromJSON(JSON.parse(s))):o.resolve(n))}_post(e,t,s){return y(this.worker,e,t,s)}}const te=(0,r.a$)("host-browser")?Math.min(navigator.hardwareConcurrency-1,(0,r.a$)("workers-pool-size")??8):0;let se=(0,r.a$)("esri-mobile")?Math.min(te,3):te;se||(se=(0,r.a$)("safari")&&(0,r.a$)("mac")?7:2);let re=0;const ne=[];function oe(){ce()}async function ie(e,t){const s=new C,{registryTarget:r,...n}=t;return await s.open(e,n),r&&l(r,s),s}async function ae(e,t={}){if("string"!=typeof e)throw new r.s("workers:undefined-module","modulePath is missing");let n=t.strategy||"distributed";if((0,r.a$)("host-webworker")&&!(0,r.a$)("esri-workers")&&(n="local"),"local"===n){let n=await L.loadWorker(e);n||(n=await s(21213)(e)),(0,r.D)(t.signal);const o=t.client||n;return ie([L.connect(n,t.schedule)],{...t,client:o})}if(await ce(),(0,r.D)(t.signal),"dedicated"===n){const s=re++%se;return ie([await ne[s].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const s=Math.min(t.maxNumWorkers,se);if(s<se){const r=new Array(s);for(let n=0;n<s;++n){const s=re++%se;r[n]=ne[s].open(e,t)}return ie(r,t)}}return ie(ne.map((s=>s.open(e,t))),t)}let le=null;async function ce(){if(le)return le;new AbortController;const e=[];for(let t=0;t<se;t++){const s=ee.create(t).then((e=>(ne[t]=e,e)));e.push(s)}return le=Promise.all(e),le}}}]);
//# sourceMappingURL=5271.50e1b1b4.js.map