"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[2895],{25276:function(e,t,n){n.d(t,{applyEdits:function(){return f},r3:function(){return d},uploadAssets:function(){return M},zp:function(){return c}});var r=n(98503),a=n(77998),s=n(58469),i=n(56201),o=n(48165);function l(e){return null!=e?.applyEdits}function u(e){return"object"==typeof e&&null!=e&&"objectId"in e&&!!e.objectId}function d(e){return e.every(u)}function p(e){return"object"==typeof e&&null!=e&&"globalId"in e&&!!e.globalId}function c(e){return e.every(p)}async function f(e,t,n,a={}){let s;const o="gdbVersion"in e?e.gdbVersion:null,l=a.gdbVersion??o;if((0,i.p)(e)&&e.url)s=(0,i.c)(e.url,e.layerId,l,"original-and-current-features"===a.returnServiceEditsOption);else{s=(0,r.aM)(),s.promise.then((t=>{(t.addedFeatures.length||t.updatedFeatures.length||t.deletedFeatures.length||t.addedAttachments.length||t.updatedAttachments.length||t.deletedAttachments.length)&&e.emit("edits",t)}));const t={result:s.promise};e.emit("apply-edits",t)}try{const{results:i,edits:o}=await h(e,t,n,a),l=e=>e.filter((e=>!e.error)).map(r.f),u={edits:o,addedFeatures:l(i.addFeatureResults),updatedFeatures:l(i.updateFeatureResults),deletedFeatures:l(i.deleteFeatureResults),addedAttachments:l(i.addAttachmentResults),updatedAttachments:l(i.updateAttachmentResults),deletedAttachments:l(i.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:i.editMoment?new Date(i.editMoment):null,globalIdToObjectId:a.globalIdToObjectId};return i.editedFeatureResults?.length&&(u.editedFeatures=i.editedFeatureResults),s.resolve(u),i}catch(u){throw s.reject(u),u}}async function h(e,t,n,a){if(await e.load(),!l(t))throw new r.s(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!(0,r.c$)(e))throw new r.s(`${e.type}-layer:editing-disabled`,"Editing is disabled for layer",{layer:e});const{edits:s,options:i}=await y(e,n,a);return s.addFeatures?.length||s.updateFeatures?.length||s.deleteFeatures?.length||s.addAttachments?.length||s.updateAttachments?.length||s.deleteAttachments?.length?{edits:s,results:await t.applyEdits(s,i)}:{edits:s,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}async function y(e,t,n){const a=(0,r.d0)(e),s=t&&(t.addFeatures||t.updateFeatures||t.deleteFeatures),i=t&&(t.addAttachments||t.updateAttachments||t.deleteAttachments),o=null!=e.infoFor3D;if($(t,a,n,!!s,!!i,`${e.type}-layer`),!a.data.isVersioned&&n?.gdbVersion)throw new r.s(`${e.type}-layer:invalid-parameter`,"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!a.editing.supportsRollbackOnFailure&&n?.rollbackOnFailureEnabled)throw new r.s(`${e.type}-layer:invalid-parameter`,"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const l={...n};if(null!=l.rollbackOnFailureEnabled||a.editing.supportsRollbackOnFailure||(l.rollbackOnFailureEnabled=!0),l.rollbackOnFailureEnabled||"original-and-current-features"!==l.returnServiceEditsOption||(!1===l.rollbackOnFailureEnabled&&r.n.getLogger("esri.layers.graphics.editingSupport").warn(`${e.type}-layer:invalid-parameter`,"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),l.rollbackOnFailureEnabled=!0),!a.editing.supportsReturnServiceEditsInSourceSpatialReference&&l.returnServiceEditsInSourceSR)throw new r.s(`${e.type}-layer:invalid-parameter`,"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(l.returnServiceEditsInSourceSR&&"original-and-current-features"!==l.returnServiceEditsOption)throw new r.s(`${e.type}-layer:invalid-parameter`,"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const u=S(t,a,`${e.type}-layer`),d=n?.globalIdUsed||o,p=e.fields.filter((e=>"big-integer"===e.type||"oid"===e.type&&(e.length||0)>=8));if(d){const{globalIdField:t}=e;if(null==t)throw new r.s(`${e.type}-layer:invalid-parameter`,"Layer does not specify a global id field.");u.addFeatures.forEach((e=>A(e,t)))}return u.addFeatures.forEach((t=>b(t,e,d,p))),u.updateFeatures.forEach((t=>F(t,e,d,p))),u.deleteFeatures.forEach((t=>w(t,e,d,p))),u.addAttachments.forEach((t=>v(t,e))),u.updateAttachments.forEach((t=>v(t,e))),o&&await x(u,e),{edits:await I(u),options:l}}function m(e,t,n,a){if(n){if("attributes"in e&&!e.attributes[t.globalIdField])throw new r.s(`${t.type}-layer:invalid-parameter`,`Feature should have '${t.globalIdField}' when 'globalIdUsed' is true`);if(!("attributes"in e)&&!e.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(a.length&&"attributes"in e)for(const s of a){const n=e.attributes[s.name];if(void 0!==n&&!(0,r.d1)(s,n))throw new r.s(`${t.type}-layer:invalid-parameter`,`Big-integer field '${s.name}' of the feature must be less than ${Number.MAX_SAFE_INTEGER}`,{feature:e})}if("geometry"in e&&null!=e.geometry){if(e.geometry.hasZ&&!1===t.capabilities?.data.supportsZ)throw new r.s(`${t.type}-layer:z-unsupported`,"Layer does not support z values while feature has z values.");if(e.geometry.hasM&&!1===t.capabilities?.data.supportsM)throw new r.s(`${t.type}-layer:m-unsupported`,"Layer does not support m values while feature has m values.")}}function g(e,t){if("geometry"in e&&"mesh"===e.geometry?.type&&null!=t.infoFor3D&&null!=t.spatialReference){const{geometry:n}=e,{spatialReference:a,vertexSpace:s}=n,i=t.spatialReference,o="local"===s.type,l=(0,r.cK)(i),u=(0,r.bh)(i,a),d=u||(0,r.cb)(i)&&((0,r.cb)(a)||(0,r.cL)(a));if(!(o&&l&&d||!o&&!l&&u))throw new r.s(`${t.type}-layer:mesh-unsupported`,`Uploading a mesh with a ${s.type} vertex space and a spatial reference wkid:${a.wkid} to a layer with a spatial reference wkid:${i.wkid} is not supported.`)}}function b(e,t,n,r){m(e,t,n,r),g(e,t)}function w(e,t,n,r){m(e,t,n,r)}function F(e,t,n,a){m(e,t,n,a),g(e,t);const s=(0,r.d0)(t);if("geometry"in e&&null!=e.geometry&&!s?.editing.supportsGeometryUpdate)throw new r.s(`${t.type}-layer:unsupported-operation`,"Layer does not support geometry updates.")}function v(e,t){const{feature:n,attachment:a}=e;if(!n||"attributes"in n&&!n.attributes[t.globalIdField])throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in n)&&!n.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have reference to 'globalId' of the parent feature");if(!a.globalId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have 'globalId'");if(!a.data&&!a.uploadId)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment should have 'data' or 'uploadId'");if(!(a.data instanceof File&&a.data.name)&&!a.name)throw new r.s(`${t.type}-layer:invalid-parameter`,"'name' is required when attachment is specified as Base64 encoded string using 'data'");if(!t.capabilities?.editing.supportsUploadWithItemId&&a.uploadId)throw new r.s(`${t.type}-layer:invalid-parameter`,"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof a.data){const e=(0,r.aU)(a.data);if(e&&!e.isBase64)throw new r.s(`${t.type}-layer:invalid-parameter`,"Attachment 'data' should be a Blob, File or Base64 encoded string")}}function A(e,t){const{attributes:n}=e;null==n[t]&&(n[t]=(0,a.r)())}async function I(e){const t=e.addFeatures??[],n=e.updateFeatures??[],r=t.concat(n).map((e=>e.geometry)),a=await(0,s.R)(r),i=t.length,o=n.length;return a.slice(0,i).forEach(((e,n)=>t[n].geometry=e)),a.slice(i,i+o).forEach(((e,t)=>n[t].geometry=e)),e}function R(e){return{addFeatures:Array.from(e?.addFeatures??[]),updateFeatures:Array.from(e?.updateFeatures??[]),deleteFeatures:e&&r.V.isCollection(e.deleteFeatures)?e.deleteFeatures.toArray():e.deleteFeatures||[],addAttachments:e.addAttachments||[],updateAttachments:e.updateAttachments||[],deleteAttachments:e.deleteAttachments||[]}}function S(e,t,n){const a=R(e);if(a.addFeatures?.length&&!t.operations.supportsAdd)throw new r.s(`${n}:unsupported-operation`,"Layer does not support adding features.");if(a.updateFeatures?.length&&!t.operations.supportsUpdate)throw new r.s(`${n}:unsupported-operation`,"Layer does not support updating features.");if(a.deleteFeatures?.length&&!t.operations.supportsDelete)throw new r.s(`${n}:unsupported-operation`,"Layer does not support deleting features.");return a.addFeatures=a.addFeatures.map(E),a.updateFeatures=a.updateFeatures.map(E),a.addAssetFeatures=[],a}function $(e,t,n,a,s,i){if(!e||!a&&!s)throw new r.s(`${i}:missing-parameters`,"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!t.editing.supportsGlobalId&&n?.globalIdUsed)throw new r.s(`${i}:invalid-parameter`,"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!t.editing.supportsGlobalId&&s)throw new r.s(`${i}:invalid-parameter`,"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if(!n?.globalIdUsed&&s)throw new r.s(`${i}:invalid-parameter`,"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}function E(e){const t=new r.b1;return e.attributes||(e.attributes={}),t.geometry=e.geometry,t.attributes=e.attributes,t}async function x(e,t){const{infoFor3D:n}=t;if(null==n)return;if(!(0,o.f)(n))throw new r.s(`${t.type}-layer:binary-gltf-asset-not-supported`,"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");e.addAssetFeatures??=[];const{addAssetFeatures:a}=e;for(const r of e.addFeatures??[])O(r)&&a.push(r);for(const r of e.updateFeatures??[])O(r)&&a.push(r)}function O(e){return"mesh"===e?.geometry?.type}function M(e,t,n,a){if(!l(t))throw new r.s(`${e.type}-layer:no-editing-support`,"Layer source does not support applyEdits capability",{layer:e});if(!t.uploadAssets)throw new r.s(`${e.type}-layer:no-asset-upload-support`,"Layer source does not support uploadAssets capability",{layer:e});return t.uploadAssets(n,a)}},58469:function(e,t,n){n.d(t,{L:function(){return v},M:function(){return h},P:function(){return F},R:function(){return b},v:function(){return w}});var r=n(98503),a=n(94137),s=n(81528),i=n(44485);async function o(e,t,n,a){const i=(0,s.f)(e),o=t[0].spatialReference,l={...a,responseType:"json",query:{...i.query,f:"json",sr:(0,r.bn)(o),target:JSON.stringify({geometryType:(0,r.aW)(t[0]),geometries:t}),cutter:JSON.stringify(n)}},u=await(0,r.U)(i.path+"/cut",l),{cutIndexes:d,geometries:p=[]}=u.data;return{cutIndexes:d,geometries:p.map((e=>{const t=(0,r.b3)(e);return t.spatialReference=o,t}))}}async function l(e,t,n){const a="string"==typeof e?(0,r.I)(e):e,s=t[0].spatialReference,o=(0,r.aW)(t[0]),l={...n,query:{...a.query,f:"json",sr:(0,r.bn)(s),geometries:JSON.stringify((0,i.r)(t))}},{data:u}=await(0,r.U)(a.path+"/simplify",l);return(0,i.o)(u.geometries,o,s)}const u=()=>r.n.getLogger("esri.geometry.support.normalizeUtils");function d(e){return"polygon"===e.type}function p(e){return"polygon"===e[0].type}function c(e){return"polyline"===e[0].type}function f(e){const t=[];let n=0,r=0;for(let a=0;a<e.length;a++){const s=e[a];let i=null;for(let e=0;e<s.length;e++)i=s[e],t.push(i),0===e?(n=i[0],r=n):(n=Math.min(n,i[0]),r=Math.max(r,i[0]));i&&t.push([(n+r)/2,0])}return t}function h(e,t){if(!(e instanceof r.aT||e instanceof r.bC)){const e="straightLineDensify: the input geometry is neither polyline nor polygon";throw u().error(e),new r.s(e)}const n=(0,a.o)(e),s=[];for(const r of n){const e=[];s.push(e),e.push([r[0][0],r[0][1]]);for(let n=0;n<r.length-1;n++){const a=r[n][0],s=r[n][1],i=r[n+1][0],o=r[n+1][1],l=Math.sqrt((i-a)*(i-a)+(o-s)*(o-s)),u=(o-s)/l,d=(i-a)/l,p=l/t;if(p>1){for(let o=1;o<=p-1;o++){const n=o*t,r=d*n+a,i=u*n+s;e.push([r,i])}const n=(l+Math.floor(p-1)*t)/2,r=d*n+a,i=u*n+s;e.push([r,i])}e.push([i,o])}}return d(e)?new r.bC({rings:s,spatialReference:e.spatialReference}):new r.aT({paths:s,spatialReference:e.spatialReference})}function y(e,t,n){if(t){const t=h(e,1e6);e=(0,r.a0)(t,!0)}return n&&(e=(0,a.s)(e,n)),e}function m(e,t,n){if(Array.isArray(e)){const r=e[0];if(r>t){const n=(0,a.i)(r,t);e[0]=r+n*(-2*t)}else if(r<n){const t=(0,a.i)(r,n);e[0]=r+t*(-2*n)}}else{const r=e.x;if(r>t){const n=(0,a.i)(r,t);e=e.clone().offset(n*(-2*t),0)}else if(r<n){const t=(0,a.i)(r,n);e=e.clone().offset(t*(-2*n),0)}}return e}function g(e,t){let n=-1;for(let r=0;r<t.cutIndexes.length;r++){const s=t.cutIndexes[r],i=t.geometries[r],o=(0,a.o)(i);for(let e=0;e<o.length;e++){const t=o[e];t.some((n=>{if(n[0]<180)return!0;{let n=0;for(let e=0;e<t.length;e++){const r=t[e][0];n=r>n?r:n}n=Number(n.toFixed(9));const r=-360*(0,a.i)(n,180);for(let a=0;a<t.length;a++){const t=i.getPoint(e,a);i.setPoint(e,a,t.clone().offset(r,0))}return!0}}))}if(s===n){if(p(e))for(const t of(0,a.o)(i))e[s]=e[s].addRing(t);else if(c(e))for(const t of(0,a.o)(i))e[s]=e[s].addPath(t)}else n=s,e[s]=i}return e}async function b(e,t,n){if(!Array.isArray(e))return b([e],t);t&&"string"!=typeof t&&u().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const s="string"==typeof t?t:t?.url??r.H.geometryServiceUrl;let i,d,p,c,f,h,w,F,v=0;const A=[],I=[];for(const o of e)if(null!=o)if(i||(i=o.spatialReference,d=(0,r.bF)(i),p=i.isWebMercator,h=p?102100:4326,c=a.r[h].maxX,f=a.r[h].minX,w=a.r[h].plus180Line,F=a.r[h].minus180Line),d)if("mesh"===o.type)I.push(o);else if("point"===o.type)I.push(m(o.clone(),c,f));else if("multipoint"===o.type){const e=o.clone();e.points=e.points.map((e=>m(e,c,f))),I.push(e)}else if("extent"===o.type){const e=o.clone()._normalize(!1,!1,d);I.push(e.rings?new r.bC(e):e)}else if(o.extent){const e=o.extent,t=(0,a.i)(e.xmin,f)*(2*c);let n=0===t?o.clone():(0,a.s)(o.clone(),t);e.offset(t,0);let{xmin:r,xmax:s}=e;r=Number(r.toFixed(9)),s=Number(s.toFixed(9)),e.intersects(w)&&s!==c?(v=s>v?s:v,n=y(n,p),A.push(n),I.push("cut")):e.intersects(F)&&r!==f?(v=s*(2*c)>v?s*(2*c):v,n=y(n,p,360),A.push(n),I.push("cut")):I.push(n)}else I.push(o.clone());else I.push(o);else I.push(o);let R=(0,a.i)(v,c),S=-90;const $=R,E=new r.aT;for(;R>0;){const e=360*R-180;E.addPath([[e,S],[e,-1*S]]),S*=-1,R--}if(A.length>0&&$>0){const t=g(A,await o(s,A,E,n)),a=[],i=[];for(let n=0;n<I.length;n++){const s=I[n];if("cut"!==s)i.push(s);else{const s=t.shift(),o=e[n];null!=o&&"polygon"===o.type&&o.rings&&o.rings.length>1&&s.rings.length>=o.rings.length?(a.push(s),i.push("simplify")):i.push(p?(0,r.cI)(s):s)}}if(!a.length)return i;const u=await l(s,a,n),d=[];for(let e=0;e<i.length;e++){const t=i[e];"simplify"!==t?d.push(t):d.push(p?(0,r.cI)(u.shift()):u.shift())}return d}const x=[];for(let a=0;a<I.length;a++){const e=I[a];if("cut"!==e)x.push(e);else{const e=A.shift();x.push(!0===p?(0,r.cI)(e):e)}}return x}function w(e){if(!e)return null;const t=e.extent;if(!t)return null;const n=e.spatialReference&&(0,r.bF)(e.spatialReference);if(!n)return t;const[a,s]=n.valid,i=2*s,{width:o}=t;let l,{xmin:u,xmax:d}=t;if([u,d]=[d,u],"extent"===e.type||0===o||o<=s||o>i||u<a||d>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;l=f(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;l=f(e.paths);break;case"multipoint":l=e.points}const p=t.clone();for(let r=0;r<l.length;r++){let e=l[r][0];e<0?(e+=s,d=Math.max(e,d)):(e-=s,u=Math.min(e,u))}return p.xmin=u,p.xmax=d,p.width<o?(p.xmin-=s,p.xmax-=s,p):t}function F(e,t,n){const a=(0,r.bF)(n);if(null==a)return e;const[s,i]=a.valid,o=2*i;let l=0,u=0;t>i?l=Math.ceil(Math.abs(t-i)/o):t<s&&(l=-Math.ceil(Math.abs(t-s)/o)),e>i?u=Math.ceil(Math.abs(e-i)/o):e<s&&(u=-Math.ceil(Math.abs(e-s)/o));let d=e+(l-u)*o;const p=d-t;return p>i?d-=o:p<s&&(d+=o),d}function v(e,t){const n=(0,r.bF)(t);if(n){const[t,r]=n.valid,a=r-t;if(e<t)for(;e<t;)e+=a;if(e>r)for(;e>r;)e-=a}return e}},94137:function(e,t,n){n.d(t,{i:function(){return s},o:function(){return o},r:function(){return a},s:function(){return i}});var r=n(98503);const a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new r.aT({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:r.B.WebMercator}),minus180Line:new r.aT({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:r.B.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new r.aT({paths:[[[180,-180],[180,180]]],spatialReference:r.B.WGS84}),minus180Line:new r.aT({paths:[[[-180,-180],[-180,180]]],spatialReference:r.B.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function i(e,t){const n=o(e);for(const r of n)for(const e of r)e[0]+=t;return e}function o(e){return(0,r.a9)(e)?e.rings:e.paths}},81528:function(e,t,n){n.d(t,{f:function(){return s},i:function(){return a},s:function(){return i}});var r=n(98503);function a(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function s(e){return"string"==typeof e?(0,r.I)(e):(0,r.f)(e)}function i(e,t,n){const r={};for(const a in e){if("declaredClass"===a)continue;const t=e[a];if(null!=t&&"function"!=typeof t)if(Array.isArray(t))r[a]=t.map((e=>i(e)));else if("object"==typeof t)if(t.toJSON){const e=t.toJSON(n?.[a]);r[a]=JSON.stringify(e)}else r[a]=JSON.stringify(t);else r[a]=t}return r}},44485:function(e,t,n){n.d(t,{o:function(){return s},r:function(){return a}});var r=n(98503);function a(e){return{geometryType:(0,r.aW)(e[0]),geometries:e.map((e=>e.toJSON()))}}function s(e,t,n){const a=(0,r.aX)(t);return e.map((e=>{const t=a.fromJSON(e);return t.spatialReference=n,t}))}}}]);
//# sourceMappingURL=2895.c6a0bd43.js.map