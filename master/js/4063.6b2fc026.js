"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[3297,4063],{50027:function(e,t,r){r.d(t,{a:function(){return o},l:function(){return l},s:function(){return s}});var n=r(98503),i=r(78546);const s={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},a={read:{reader:i.n},write:{allowNull:!0,writer:i.a}},o={json:{read:!1,write:!1,origins:{"web-map":a,"portal-item":a}}},l=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return(0,n.k)([(0,n.o)(s)],t.prototype,"blendMode",void 0),(0,n.k)([(0,n.o)(o)],t.prototype,"effect",void 0),t=(0,n.k)([(0,n.A)("esri.layers.mixins.BlendLayer")],t),t}},39394:function(e,t,r){r.d(t,{h:function(){return y},n:function(){return l}});var n,i=r(98503),s=r(64131);let a=n=class extends i.v{constructor(e){super(e)}async collectRequiredFields(e,t){return(0,i.fq)(e,t,this.expression)}clone(){return new n({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],a.prototype,"expression",void 0),(0,i.k)([(0,i.o)({type:String,json:{write:!0}})],a.prototype,"title",void 0),a=n=(0,i.k)([(0,i.A)("esri.symbols.support.FeatureExpressionInfo")],a);const o=a;function l(e){return 1/(s.m[e]||1)}function u(){const e=Object.keys(s.m);return(0,i.eW)(e,"decimal-degrees"),e.sort(),e}const c=u();var p;const f=(0,i.g)()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d=new i.ax({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let h=p=class extends i.v{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,n){t[r]=e.write({},n),"0"===e.expression&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):null!=e||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new p({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&(0,i.fr)(this.featureExpressionInfo,e.featureExpressionInfo)}};(0,i.k)([(0,i.o)({type:o,json:{write:!0}})],h.prototype,"featureExpressionInfo",void 0),(0,i.k)([(0,i.u)("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],h.prototype,"readFeatureExpressionInfo",null),(0,i.k)([(0,i.q)("featureExpressionInfo",{featureExpressionInfo:{type:o},"featureExpression.value":{type:[0]}})],h.prototype,"writeFeatureExpressionInfo",null),(0,i.k)([(0,i.o)({type:f.apiValues,nonNullable:!0,json:{type:f.jsonValues,read:f.read,write:{writer:f.write,isRequired:!0}}})],h.prototype,"mode",null),(0,i.k)([(0,i.o)({type:Number,json:{write:!0}})],h.prototype,"offset",void 0),(0,i.k)([(0,i.o)({type:c,json:{type:String,read:d.read,write:d.write}})],h.prototype,"unit",null),h=p=(0,i.k)([(0,i.A)("esri.symbols.support.ElevationInfo")],h);const y=h},54063:function(e,t,r){r.r(t),r.d(t,{default:function(){return w}});var n=r(98503),i=r(7524),s=r(16787),a=r(88012),o=r(28252),l=r(50027),u=r(20784),c=r(50293),p=r(83424),f=r(33824),d=r(2031),h=r(70018),y=r(25938),m=r(15381),g=r(78879);const S=Symbol("WebScene");let v=class extends((0,l.l)((0,p.t)((0,u.b)((0,c.j)((0,h.n)((0,h.l)((0,a.S)(o.f)))))))){constructor(e){super(e),this.allLayers=new i.n({getCollections:()=>[this.layers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=(0,h.t)(this),this.fullExtent=void 0,this.operationalLayerType="GroupLayer",this.spatialReference=void 0,this.type="group",this._debouncedSaveOperations=(0,n.dA)((async(e,t,n)=>{const{save:i,saveAs:s}=await r.e(1375).then(r.bind(r,13756));switch(e){case y.A.SAVE:return i(this,t);case y.A.SAVE_AS:return s(this,n,t)}}))}initialize(){this._enforceVisibility(this.visibilityMode,this.visible),this.addHandles([(0,n.aE)((()=>{let e=this.parent;for(;e&&"parent"in e&&e.parent;)e=e.parent;return e&&S in e}),(e=>{const t="prevent-adding-tables";this.removeHandles(t),e&&(this.tables.removeAll(),this.addHandles((0,n.aG)((()=>this.tables),"before-add",(e=>{e.preventDefault(),n.n.getLogger(this).errorOnce("tables","tables in group layers in a webscene are not supported. Please move the tables from the group layer to the webscene if you want to persist them.")})),t))}),n.f1),(0,n.aE)((()=>this.visible),this._onVisibilityChange.bind(this),n.az)])}destroy(){this.allLayers.destroy(),this.allTables.destroy()}get sourceIsPortalItem(){return this.portalItem&&this.originIdOf("portalItem")===n.bm.USER}_writeLayers(e,t,r,n){const i=[];if(!e)return i;e.forEach((e=>{const t=(0,g.f)(e,n.webmap?n.webmap.getLayerJSONFromResourceInfo(e):null,n);t?.layerType&&i.push(t)})),t.layers=i}set portalItem(e){this._set("portalItem",e)}readPortalItem(e,t,r){const{itemId:n,layerType:i}=t;if("GroupLayer"===i&&n)return new d["default"]({id:n,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}set visibilityMode(e){const t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}async beforeSave(){return(0,m.r)(this)}load(e){const t=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Group Layer","Scene Service"],layerModuleTypeMap:f.b},e).catch((e=>{if((0,n.G)(e),this.sourceIsPortalItem)throw e}));return this.addResolvingPromise(t),Promise.resolve(this)}async loadAll(){return(0,s.t)(this,(e=>{e(this.layers,this.tables)}))}async save(e){return this._debouncedSaveOperations(y.A.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(y.A.SAVE_AS,t,e)}layerAdded(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this.hasHandles(e.uid)?console.error(`Layer read to Grouplayer: uid=${e.uid}`):this.addHandles((0,n.aE)((()=>e.visible),(t=>this._onChildVisibilityChange(e,t)),n.az),e.uid)}layerRemoved(e){this.removeHandles(e.uid),this._enforceVisibility(this.visibilityMode,this.visible)}_turnOffOtherLayers(e){this.layers.forEach((t=>{t!==e&&(t.visible=!1)}))}_enforceVisibility(e,t){if(!(0,n.bf)(this).initialized)return;const r=this.layers;let i=r.find((e=>e.visible));switch(e){case"exclusive":r.length&&!i&&(i=r.at(0),i.visible=!0),this._turnOffOtherLayers(i);break;case"inherited":r.forEach((e=>{e.visible=t}))}}_onVisibilityChange(e){"inherited"===this.visibilityMode&&this.layers.forEach((t=>{t.visible=e}))}_onChildVisibilityChange(e,t){switch(this.visibilityMode){case"exclusive":t?this._turnOffOtherLayers(e):this._isAnyLayerVisible()||(e.visible=!0);break;case"inherited":e.visible=this.visible}}_isAnyLayerVisible(){return this.layers.some((e=>e.visible))}};(0,n.k)([(0,n.o)({readOnly:!0,dependsOn:[]})],v.prototype,"allLayers",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],v.prototype,"allTables",void 0),(0,n.k)([(0,n.o)({json:{read:!0,write:!0}})],v.prototype,"blendMode",void 0),(0,n.k)([(0,n.o)()],v.prototype,"fullExtent",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],v.prototype,"sourceIsPortalItem",null),(0,n.k)([(0,n.o)({json:{read:!1,write:{ignoreOrigin:!0}}})],v.prototype,"layers",void 0),(0,n.k)([(0,n.q)("layers")],v.prototype,"_writeLayers",null),(0,n.k)([(0,n.o)({type:["GroupLayer"]})],v.prototype,"operationalLayerType",void 0),(0,n.k)([(0,n.o)({json:{origins:{"web-map":{read:!1,write:{overridePolicy(e,t,r){return{enabled:"Group Layer"===e?.type&&r?.initiator!==this}}}},"web-scene":{read:!1,write:!1}}}})],v.prototype,"portalItem",null),(0,n.k)([(0,n.u)("web-map","portalItem",["itemId"])],v.prototype,"readPortalItem",null),(0,n.k)([(0,n.q)("web-map","portalItem",{itemId:{type:String}})],v.prototype,"writePortalItem",null),(0,n.k)([(0,n.o)()],v.prototype,"spatialReference",void 0),(0,n.k)([(0,n.o)({json:{read:!1},readOnly:!0,value:"group"})],v.prototype,"type",void 0),(0,n.k)([(0,n.o)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{type:["independent","exclusive"],write:(e,t,r)=>{"inherited"!==e&&(t[r]=e)}}}}})],v.prototype,"visibilityMode",null),v=(0,n.k)([(0,n.A)("esri.layers.GroupLayer")],v);const w=v},88012:function(e,t,r){r.d(t,{S:function(){return c},m:function(){return p}});var n=r(98503);class i{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(n.fi),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const t=new i,r=this._originStores[n.bm.DEFAULTS];r&&r.forEach(((e,r)=>{t.set(r,(0,n.f)(e),n.bm.DEFAULTS)}));for(let i=n.bm.SERVICE;i<n.fi;i++){const r=this._originStores[i];r&&r.forEach(((r,s)=>{e&&e.has(s)||t.set(s,(0,n.f)(r),i)}))}return t}get(e,t){const r=void 0===t?this._values:this._originStores[t];return r?r.get(e):void 0}keys(e){const t=null==e?this._values:this._originStores[e];return t?[...t.keys()]:[]}set(e,t,r=n.bm.USER){let i=this._originStores[r];if(i||(i=new Map,this._originStores[r]=i),i.set(e,t),!this._values.has(e)||this._propertyOriginMap.get(e)<=r){const n=this._values.get(e);return this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t}return!1}delete(e,t=n.bm.USER){const r=this._originStores[t];if(!r)return;const i=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t){this._values.delete(e);for(let r=t-1;r>=0;r--){const t=this._originStores[r];if(t&&t.has(e)){this._values.set(e,t.get(e)),this._propertyOriginMap.set(e,r);break}}}return i}has(e,t){const r=void 0===t?this._values:this._originStores[t];return!!r&&r.has(e)}revert(e,t){for(;t>0&&!this.has(e,t);)--t;const r=this._originStores[t],n=r?.get(e),i=this._values.get(e);return this._values.set(e,n),this._propertyOriginMap.set(e,t),i!==n}originOf(e){return this._propertyOriginMap.get(e)||n.bm.DEFAULTS}forEach(e){this._values.forEach(e)}}const s=e=>{let t=class extends e{constructor(...e){super(...e);const t=(0,n.bf)(this),r=t.store,s=new i;t.store=s,(0,n.fj)(t,r,s)}read(e,t){(0,n.fk)(this,e,t)}getAtOrigin(e,t){const r=a(this),i=(0,n.bl)(t);if("string"==typeof e)return r.get(e,i);const s={};return e.forEach((e=>{s[e]=r.get(e,i)})),s}originOf(e){return(0,n.dt)(this.originIdOf(e))}originIdOf(e){return a(this).originOf(e)}revert(e,t){const r=a(this),i=(0,n.bl)(t),s=(0,n.bf)(this);let o;o="string"==typeof e?"*"===e?r.keys(i):[e]:e,o.forEach((e=>{s.invalidate(e),r.revert(e,i),s.commit(e)}))}};return t=(0,n.k)([(0,n.A)("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function a(e){return(0,n.bf)(e).store}let o=class extends(s(n.aD)){};o=(0,n.k)([(0,n.A)("esri.core.ReadOnlyMultiOriginJSONSupport")],o);const l=e=>{let t=class extends e{constructor(...e){super(...e)}clear(e,t="user"){return u(this).delete(e,(0,n.bl)(t))}write(e,t){return(0,n.fl)(this,e=e||{},t),e}setAtOrigin(e,t,r){(0,n.bf)(this).setAtOrigin(e,t,(0,n.bl)(r))}removeOrigin(e){const t=u(this),r=(0,n.bl)(e),i=t.keys(r);for(const s of i)t.originOf(s)===r&&t.set(s,t.get(s,r),n.bm.USER)}updateOrigin(e,t){const r=u(this),i=(0,n.bl)(t),s=(0,n.fm)(this,e);for(let a=i+1;a<n.fi;++a)r.delete(e,a);r.set(e,s,i)}toJSON(e){return this.write({},e)}};return t=(0,n.k)([(0,n.A)("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function u(e){return(0,n.bf)(e).store}const c=e=>{let t=class extends(l(s(e))){constructor(...e){super(...e)}};return t=(0,n.k)([(0,n.A)("esri.core.MultiOriginJSONSupport")],t),t};let p=class extends(c(n.aD)){};p=(0,n.k)([(0,n.A)("esri.core.MultiOriginJSONSupport")],p)},20784:function(e,t,r){r.d(t,{b:function(){return c}});var n=r(98503),i=r(20014),s=r(50257);const a={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},o={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},l={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},u={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,ViewshedLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":a,"web-map/basemap":o,"web-map/tables":l,"link-chart/operational-layers":{...a,LinkChartLayer:!0},"link-chart/basemap":o,"link-chart/tables":l,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},c=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(e,t,r){return"Group Layer"===r?.portalItem?.type?void 0:e}writeListMode(e,t,r,i){(i&&"ground"===i.layerContainerType||e&&(0,n.dI)(this,r,{},i))&&(t[r]=e)}writeOperationalLayerType(e,t,r,n){e&&"tables"!==n?.layerContainerType&&(t.layerType=e)}writeTitle(e,t){t.title=e??"Layer"}readTimeExtent(e){return e?s.p.fromArray(e):null}writeTimeExtent(e,t,r,i){e&&"tables"!==i.layerContainerType&&(e.isEmpty?i?.messages&&i.messages.push(new n.s("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):t[r]=e.toArray())}read(e,t){t&&(t.layer=this),(0,n.dJ)(this,e,(t=>super.read(e,t)),t)}write(e,t){if(!this.persistenceEnabled&&!t?.ignorePersistenceEnabled)return null;if(t?.origin){const e=`${t.origin}/${t.layerContainerType||"operational-layers"}`;let r=!!u[e]?.[this.operationalLayerType];if("ArcGISTiledElevationServiceLayer"===this.operationalLayerType&&"web-scene/operational-layers"===e&&(r=!1),"ArcGISDimensionLayer"===this.operationalLayerType&&"web-map/operational-layers"===e&&(r=!1),!r)return t.messages?.push(new n.s("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${e}'`,{layer:this})),null}const r=super.write(e,{...t,layer:this}),i=!!t&&!!t.messages&&!!t.messages.filter((e=>e instanceof n.s&&"web-document-write:property-required"===e.name)).length;return(0,n.dp)(r?.url)?(t?.messages?.push(new n.s("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&i?null:r}beforeSave(){}};return(0,n.k)([(0,n.o)({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),(0,n.k)([(0,n.u)("id",["id"])],t.prototype,"readId",null),(0,n.k)([(0,n.o)(i.I)],t.prototype,"listMode",void 0),(0,n.k)([(0,n.q)("listMode")],t.prototype,"writeListMode",null),(0,n.k)([(0,n.o)({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:i.a}}}}})],t.prototype,"operationalLayerType",void 0),(0,n.k)([(0,n.q)("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),(0,n.k)([(0,n.o)(i.f)],t.prototype,"opacity",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),(0,n.k)([(0,n.q)("title"),(0,n.q)(["web-scene"],"title")],t.prototype,"writeTitle",null),(0,n.k)([(0,n.o)({type:s.p,json:{origins:{"web-scene":{write:{layerContainerTypes:i.a}}}}})],t.prototype,"visibilityTimeExtent",void 0),(0,n.k)([(0,n.u)("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),(0,n.k)([(0,n.q)(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[n.bp,n.dH]]}})],t.prototype,"writeTimeExtent",null),(0,n.k)([(0,n.o)({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:i.a}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=(0,n.k)([(0,n.A)("esri.layers.mixins.OperationalLayer")],t),t}},50293:function(e,t,r){r.d(t,{j:function(){return a}});var n=r(98503),i=r(2031),s=r(83297);const a=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=(0,n.C)(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new i["default"]({id:t.itemId,portal:r?.portal})}writePortalItem(e,t){e?.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem?.id)try{const{load:i}=await Promise.all([r.e(3338),r.e(1128)]).then(r.bind(r,21128));return(0,n.D)(t),await i({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData,layerModuleTypeMap:e.layerModuleTypeMap},t)}catch(i){throw(0,n.E)(i)||n.n.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${i}`),i}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(e).catch((e=>((0,n.G)(e),!0))))}async setUserPrivileges(e,t){if(!n.H.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(t);if(this.url)try{const{features:{edit:r,fullEdit:n},content:{updateItem:i}}=await this._fetchUserPrivileges(e,t);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",i)}catch(r){(0,n.G)(r)}}async _fetchUserPrivileges(e,t){let r=this.portalItem;if(!e||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(t);const a=e===r.id;if(a&&r.portal.user)return(0,s.E)(r);let o,l;if(a)o=r.portal.url;else try{o=await(0,n.J)(this.url,t)}catch(f){(0,n.G)(f)}if(!o||!(0,n.W)(o,r.portal.url))return this._fetchFallbackUserPrivileges(t);try{const e=null!=t?t.signal:null;l=await(n.K?.getCredential(`${o}/sharing`,{prompt:!1,signal:e}))}catch(f){(0,n.G)(f)}const u=!0,c=!1,p=!1;if(!l)return{features:{edit:u,fullEdit:c},content:{updateItem:p}};try{if(a?await r.reload():(r=new i["default"]({id:e,portal:{url:o}}),await r.load(t)),r.portal.user)return(0,s.E)(r)}catch(f){(0,n.G)(f)}return{features:{edit:u,fullEdit:c},content:{updateItem:p}}}async _fetchFallbackUserPrivileges(e){let t=!0;try{t=await this._fetchUserHasEditingPrivileges(e)}catch(r){(0,n.G)(r)}return{features:{edit:t,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(e){const t=this.url?n.K?.findCredential(this.url):null;if(!t)return!0;const r=o.credential===t?o.user:await this._fetchEditingUser(e);return o.credential=t,o.user=r,null==r?.privileges||r.privileges.includes("features:user:edit")}async _fetchEditingUser(e){const t=this.portalItem?.portal?.user;if(t)return t;const r=n.K?.findServerInfo(this.url??"");if(!r?.owningSystemUrl)return null;const i=`${r.owningSystemUrl}/sharing/rest`,s=n.b.getDefault();if(s&&s.loaded&&(0,n.L)(s.restUrl)===(0,n.L)(i))return s.user;const a=`${i}/community/self`,o=null!=e?e.signal:null,l=await(0,n._)((0,n.U)(a,{authMode:"no-prompt",query:{f:"json"},signal:o}));return l.ok?n.M.fromJSON(l.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t?.portal,i=this.portalItem?.id&&(this.portalItem.portal||n.b.getDefault());return r&&i&&!(0,n.N)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new n.s("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,n.k)([(0,n.o)({type:i["default"]})],t.prototype,"portalItem",null),(0,n.k)([(0,n.u)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,n.k)([(0,n.q)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,n.k)([(0,n.o)({clonable:!1})],t.prototype,"resourceReferences",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),(0,n.k)([(0,n.o)({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=(0,n.k)([(0,n.A)("esri.layers.mixins.PortalLayer")],t),t},o={credential:null,user:null}},83424:function(e,t,r){r.d(t,{t:function(){return i}});var n=r(98503);const i=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const e={minScale:this.minScale,maxScale:this.maxScale},t=this.parent;t&&"effectiveScaleRange"in t&&s(e,t.effectiveScaleRange);const r=this._get("effectiveScaleRange");return r&&r.minScale===e.minScale&&r.maxScale===e.maxScale?r:e}};return(0,n.k)([(0,n.o)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),(0,n.k)([(0,n.o)({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),(0,n.k)([(0,n.o)({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=(0,n.k)([(0,n.A)("esri.layers.mixins.ScaleRangeLayer")],t),t};function s(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}},20014:function(e,t,r){r.d(t,{I:function(){return B},T:function(){return K},a:function(){return s},b:function(){return W},c:function(){return k},d:function(){return G},e:function(){return M},f:function(){return F},g:function(){return j},j:function(){return U},l:function(){return O},m:function(){return N},p:function(){return P},s:function(){return L},u:function(){return H},v:function(){return $},y:function(){return x}});var n=r(98503),i=r(39394);const s=(e=>e)(["operational-layers","basemap","ground"]);let a=class extends n.v{constructor(e){super(e),this.description=null,this.label=null,this.type=null}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],a.prototype,"description",void 0),(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],a.prototype,"label",void 0),(0,n.k)([(0,n.o)()],a.prototype,"type",void 0),a=(0,n.k)([(0,n.A)("esri.tables.elements.AttributeTableElement")],a);const o=a;var l;let u=l=class extends o{constructor(e){super(e),this.displayType="auto",this.type="attachment"}clone(){return new l({description:this.description,displayType:this.displayType,label:this.label})}};(0,n.k)([(0,n.o)({type:["auto"],json:{write:!0}})],u.prototype,"displayType",void 0),(0,n.k)([(0,n.o)({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],u.prototype,"type",void 0),u=l=(0,n.k)([(0,n.A)("esri.tables.elements.AttributeTableAttachmentElement")],u);const c=u;var p;let f=p=class extends o{constructor(e){super(e),this.fieldName=null,this.type="field"}clone(){return new p({description:this.description,fieldName:this.fieldName,label:this.label})}};(0,n.k)([(0,n.o)({type:String,json:{write:!0}})],f.prototype,"fieldName",void 0),(0,n.k)([(0,n.o)({type:String,json:{read:!1,write:!0}})],f.prototype,"type",void 0),f=p=(0,n.k)([(0,n.A)("esri.tables.elements.AttributeTableFieldElement")],f);const d=f;var h;let y=h=class extends o{constructor(e){super(e),this.relationshipId=null,this.type="relationship"}clone(){return new h({description:this.description,label:this.label,relationshipId:this.relationshipId})}};(0,n.k)([(0,n.o)({type:Number,json:{write:!0}})],y.prototype,"relationshipId",void 0),(0,n.k)([(0,n.o)({type:["relationship"],json:{read:!1,write:!0}})],y.prototype,"type",void 0),y=h=(0,n.k)([(0,n.A)("esri.tables.elements.AttributeTableRelationshipElement")],y);const m=y;function g(e){return{typesWithGroup:{base:o,key:"type",typeMap:{attachment:c,field:d,group:e,relationship:m}},typesWithoutGroup:{base:o,key:"type",typeMap:{attachment:c,field:d,relationship:m}}}}function S(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>n[e.type].fromJSON(e)))}function v(e,t,r=!0){if(!e)return null;const n=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter((e=>n[e.type])).map((e=>e.toJSON()))}function w(e,t,r=!0){return e?e.map((e=>(0,n.hN)(r?t.typesWithGroup:t.typesWithoutGroup,e))):null}var b;let E=b=class extends o{constructor(e){super(e),this.elements=null,this.type="group"}castElements(e){return w(e,A,!1)}readElements(e,t){return S(t.attributeTableElements,A,!1)}writeElements(e,t){t.attributeTableElements=v(e,A,!1)}clone(){return new b({description:this.description,elements:(0,n.f)(this.elements),label:this.label})}};(0,n.k)([(0,n.o)({json:{write:!0}})],E.prototype,"elements",void 0),(0,n.k)([(0,n.by)("elements")],E.prototype,"castElements",null),(0,n.k)([(0,n.u)("elements",["attributeTableElements"])],E.prototype,"readElements",null),(0,n.k)([(0,n.q)("elements")],E.prototype,"writeElements",null),(0,n.k)([(0,n.o)({type:String,json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=b=(0,n.k)([(0,n.A)("esri.tables.elements.AttributeTableGroupElement")],E);const A=g(E),_=E;var C;const R=g(_);let I=C=class extends n.v{constructor(e){super(e),this.elements=null,this.orderByFields=null}castElements(e){return w(e,R)}readElements(e,t){return S(t.attributeTableElements,R)}writeElements(e,t){t.attributeTableElements=v(e,R)}clone(){return new C({elements:(0,n.f)(this.elements),orderByFields:this.orderByFields})}};(0,n.k)([(0,n.o)({json:{write:!0}})],I.prototype,"elements",void 0),(0,n.k)([(0,n.by)("elements")],I.prototype,"castElements",null),(0,n.k)([(0,n.u)("elements",["attributeTableElements"])],I.prototype,"readElements",null),(0,n.k)([(0,n.q)("elements")],I.prototype,"writeElements",null),(0,n.k)([(0,n.o)({type:[Object],json:{write:!0}})],I.prototype,"orderByFields",void 0),I=C=(0,n.k)([(0,n.A)("esri.tables.AttributeTableTemplate")],I);const M=I,L={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:s}}},O={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},P={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:s}}},x={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:n.T}}},G={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:s}}},k={value:null,type:i.h,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:s}}};function N(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const T={write:{enabled:!0,layerContainerTypes:s},read:!0},F={type:Number,json:{origins:{"web-document":T,"portal-item":{write:!0}}}},W={...F,json:{...F.json,origins:{"web-document":{...T,write:{enabled:!0,layerContainerTypes:s,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition?.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,n.hs)(t.layerDefinition.drawingInfo.transparency):void 0:(0,n.hs)(t.drawingInfo.transparency)}}},j={type:n.au,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=n.au.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=n.B.fromJSON(t.spatialReference)),r}}}},read:!1}},H={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},U={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:s}}},name:"layerDefinition.minScale",write:!0}},$={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:s}}},name:"layerDefinition.maxScale",write:!0}},B={json:{write:{ignoreOrigin:!0,layerContainerTypes:s},origins:{"web-map":{read:!1,write:!1}}}},K={type:M,json:{name:"attributeTableInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}}},25938:function(e,t,r){var n;r.d(t,{A:function(){return n}}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(n||(n={}))},78546:function(e,t,r){r.d(t,{a:function(){return a},n:function(){return s}});var n=r(98503),i=r(80910);function s(e,t,r){try{return l(e)}catch(n){r?.messages?.push(n)}return null}function a(e,t,r,i){try{const i=o(e);(0,n.aY)(r,i,t)}catch(s){i.messages&&i.messages.push(s)}}function o(e){const t=(0,i.d)(e);return t?(0,i.l)(t)?t.map((e=>e.toJSON())):t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))}))):null}function l(e){if(!e||0===e.length)return null;if(u(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:c(r.value)});return t}return c(e)}function u(e){const t=e[0];return!!t&&"scale"in t}function c(e){if(!e?.length)return"";const t=[];for(const r of e){let e=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[p(r,"amount")];break;case"blur":e=[p(r,"radius","pt")];break;case"hue-rotate":e=[p(r,"angle","deg")];break;case"drop-shadow":e=[p(r,"xoffset","pt"),p(r,"yoffset","pt"),p(r,"blurRadius","pt"),f(r,"color")];break;case"bloom":e=[p(r,"strength"),p(r,"radius","pt"),p(r,"threshold")]}const n=`${r.type}(${e.filter(Boolean).join(" ")})`;(0,i.d)(n),t.push(n)}return t.join(" ")}function p(e,t,r){if(null==e[t])throw new n.s("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function f(e,t){if(null==e[t])throw new n.s("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}},64131:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(98503);const i={unknown:1,inches:(0,n.a1)(1,"meters","inches"),feet:(0,n.a1)(1,"meters","feet"),"us-feet":(0,n.a1)(1,"meters","us-feet"),yards:(0,n.a1)(1,"meters","yards"),miles:(0,n.a1)(1,"meters","miles"),"nautical-miles":(0,n.a1)(1,"meters","nautical-miles"),millimeters:(0,n.a1)(1,"meters","millimeters"),centimeters:(0,n.a1)(1,"meters","centimeters"),decimeters:(0,n.a1)(1,"meters","decimeters"),meters:(0,n.a1)(1,"meters","meters"),kilometers:(0,n.a1)(1,"meters","kilometers"),"decimal-degrees":1/(0,n.a2)(1,"meters",n.a3.radius)}},16787:function(e,t,r){r.d(t,{a:function(){return s},t:function(){return i}});var n=r(98503);async function i(e,t){return await e.load(),s(e,t)}async function s(e,t){const r=[],i=(...e)=>{for(const t of e)null!=t&&(Array.isArray(t)?i(...t):n.V.isCollection(t)?t.forEach((e=>i(e))):n.e.isLoadable(t)&&r.push(t))};t(i);let s=null;if(await(0,n.d)(r,(async e=>{const t=await(0,n._)(a(e)?e.loadAll():e.load());!1!==t.ok||s||(s=t)})),s)throw s.error;return e}function a(e){return"loadAll"in e&&"function"==typeof e.loadAll}},80910:function(e,t,r){r.d(t,{d:function(){return L},e:function(){return A},l:function(){return _},t:function(){return E}});var n=r(98503),i=r(92113),s=r(74362);const a=(e,t)=>{const r=(0,s.r)(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return(0,s.s)(r,r)},o=(e,t)=>{const r=(0,s.r)(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return(0,s.s)(r,r)},l=(e,t)=>{const r=1-t,n=(0,s.r)(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return(0,s.s)(n,n)},u=(e,t)=>{const r=Math.sin(t*Math.PI/180),n=Math.cos(t*Math.PI/180),i=(0,s.r)(e,.213+.787*n-.213*r,.715-.715*n-.715*r,.072-.072*n+.928*r,0,.213-.213*n+.143*r,.715+.285*n+.14*r,.072-.072*n-.283*r,0,.213-.213*n-.787*r,.715-.715*n+.715*r,.072+.928*n+.072*r,0,0,0,0,1);return(0,s.s)(i,i)},c=(e,t)=>{const r=1-2*t,n=(0,s.r)(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return(0,s.s)(n,n)},p=(e,t)=>{const r=(0,s.r)(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return(0,s.s)(r,r)},f=(e,t)=>{const r=1-t,n=(0,s.r)(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return(0,s.s)(n,n)};class d{constructor(e,t,r){this.strength=e,this.radius=t,this.threshold=r,this.type="bloom"}interpolate(e,t,r){this.strength=v(e.strength,t.strength,r),this.radius=v(e.radius,t.radius,r),this.threshold=v(e.threshold,t.threshold,r)}clone(){return new d(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:w(this.radius),strength:this.strength,threshold:this.threshold}}}let h=class e{constructor(e){this.radius=e,this.type="blur"}interpolate(e,t,r){this.radius=Math.round(v(e.radius,t.radius,r))}clone(){return new e(this.radius)}toJSON(){return{type:"blur",radius:w(this.radius)}}};class y{constructor(e,t){this.type=e,this.amount=t,"invert"!==this.type&&"grayscale"!==this.type&&"sepia"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.amount=v(e.amount,t.amount,r),this._updateMatrix()}clone(){return new y(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||(0,i.e)();switch(this.type){case"brightness":this._colorMatrix=a(e,this.amount);break;case"contrast":this._colorMatrix=o(e,this.amount);break;case"grayscale":this._colorMatrix=l(e,this.amount);break;case"invert":this._colorMatrix=c(e,this.amount);break;case"saturate":this._colorMatrix=p(e,this.amount);break;case"sepia":this._colorMatrix=f(e,this.amount)}}}let m=class e{constructor(e,t,r,n){this.offsetX=e,this.offsetY=t,this.blurRadius=r,this.color=n,this.type="drop-shadow"}interpolate(e,t,r){this.offsetX=v(e.offsetX,t.offsetX,r),this.offsetY=v(e.offsetY,t.offsetY,r),this.blurRadius=v(e.blurRadius,t.blurRadius,r),this.color[0]=Math.round(v(e.color[0],t.color[0],r)),this.color[1]=Math.round(v(e.color[1],t.color[1],r)),this.color[2]=Math.round(v(e.color[2],t.color[2],r)),this.color[3]=v(e.color[3],t.color[3],r)}clone(){return new e(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:w(this.offsetX),yoffset:w(this.offsetY),blurRadius:w(this.blurRadius),color:e}}},g=class e{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,t,r){this.angle=v(e.angle,t.angle,r),this._updateMatrix()}clone(){return new e(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||(0,i.e)();this._colorMatrix=u(e,this.angle)}};class S{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,t,r){this.amount=v(e.amount,t.amount,r)}clone(){return new S(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function v(e,t,r){return e+(t-e)*r}function w(e){return Math.round(1e3*(0,n.bd)(e))/1e3}function b(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new y(e.type,0);case"saturate":case"brightness":case"contrast":return new y(e.type,1);case"opacity":return new S(1);case"hue-rotate":return new g(0);case"blur":return new h(0);case"drop-shadow":return new m(0,0,0,[...(0,n.gv)("transparent")]);case"bloom":return new d(0,0,1)}}function E(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every(((e,t)=>e.type===r[t].type))}function A(e,t){const r=e.length>t.length?e:t,n=e.length>t.length?t:e;for(let i=n.length;i<r.length;i++)n.push(b(r[i]))}function _(e){const t=e[0];return!!t&&"type"in t}function C(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}function R(e,t,r,n){var i=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(i,R.prototype),i.expected=t,i.found=r,i.location=n,i.name="SyntaxError",i}function I(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function M(e,t){var r,n={},i=(t=void 0!==t?t:{}).grammarSource,s={start:Ve},a=Ve,o="none",l=")",u=",",c="(",p="%",f="px",d="cm",h="mm",y="in",m="pt",g="pc",S="deg",v="rad",w="grad",b="turn",E="#",A=".",_="e",C=/^[ \t\n\r]/,I=/^[a-z\-]/,M=/^[0-9a-fA-F]/,L=/^[+\-]/,O=/^[0-9]/,P=$e("none"),x=je("none",!1),G=je(")",!1),k=je(",",!1),N=$e("whitespace"),T=He([" ","\t","\n","\r"],!1,!1),F=$e("function"),W=je("(",!1),j=$e("identifier"),H=He([["a","z"],"-"],!1,!1),U=$e("percentage"),$=je("%",!1),B=$e("length"),K=je("px",!1),D=je("cm",!1),q=je("mm",!1),V=je("in",!1),z=je("pt",!1),J=je("pc",!1),Y=$e("angle"),Z=je("deg",!1),X=je("rad",!1),Q=je("grad",!1),ee=je("turn",!1),te=$e("number"),re=$e("color"),ne=je("#",!1),ie=He([["0","9"],["a","f"],["A","F"]],!1,!1),se=He(["+","-"],!1,!1),ae=He([["0","9"]],!1,!1),oe=je(".",!1),le=je("e",!1),ue=function(){return[]},ce=function(e,t){return{type:"function",name:e,parameters:t||[]}},pe=function(e,t){return t.length>0?ut(e,t,3):[e]},fe=function(e){return{type:"quantity",value:e.value,unit:e.unit}},de=function(e){return{type:"color",colorType:e.type,value:e.value}},he=function(e){return e},ye=function(){return We()},me=function(e){return{value:e,unit:"%"}},ge=function(e){return{value:e,unit:"px"}},Se=function(e){return{value:e,unit:"cm"}},ve=function(e){return{value:e,unit:"mm"}},we=function(e){return{value:e,unit:"in"}},be=function(e){return{value:e,unit:"pt"}},Ee=function(e){return{value:e,unit:"pc"}},Ae=function(e){return{value:e,unit:"deg"}},_e=function(e){return{value:e,unit:"rad"}},Ce=function(e){return{value:e,unit:"grad"}},Re=function(e){return{value:e,unit:"turn"}},Ie=function(e){return{value:e,unit:null}},Me=function(){return{type:"hex",value:We()}},Le=function(e){return{type:"function",value:e}},Oe=function(){return{type:"named",value:We()}},Pe=function(){return parseFloat(We())},xe=0|t.peg$currPos,Ge=xe,ke=[{line:1,column:1}],Ne=xe,Te=t.peg$maxFailExpected||[],Fe=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');a=s[t.startRule]}function We(){return e.substring(Ge,xe)}function je(e,t){return{type:"literal",text:e,ignoreCase:t}}function He(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Ue(){return{type:"end"}}function $e(e){return{type:"other",description:e}}function Be(t){var r,n=ke[t];if(n)return n;if(t>=ke.length)r=ke.length-1;else for(r=t;!ke[--r];);for(n={line:(n=ke[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return ke[t]=n,n}function Ke(e,t,r){var n=Be(e),s=Be(t);return{source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:s.line,column:s.column}}}function De(e){xe<Ne||(xe>Ne&&(Ne=xe,Te=[]),Te.push(e))}function qe(e,t,r){return new R(R.buildMessage(e,t),e,t,r)}function Ve(){var e;return(e=ze())===n&&(e=Je()),e}function ze(){var t,r;return Fe++,t=xe,Qe(),e.substr(xe,4)===o?(r=o,xe+=4):(r=n,0===Fe&&De(x)),r!==n?(Qe(),Ge=t,t=ue()):(xe=t,t=n),Fe--,t===n&&0===Fe&&De(P),t}function Je(){var e,t;if(e=[],(t=Ye())!==n)for(;t!==n;)e.push(t),t=Ye();else e=n;return e}function Ye(){var t,r,i,s;return t=xe,Qe(),(r=et())!==n?(Qe(),(i=Ze())===n&&(i=null),Qe(),41===e.charCodeAt(xe)?(s=l,xe++):(s=n,0===Fe&&De(G)),s!==n?(Qe(),Ge=t,t=ce(r,i)):(xe=t,t=n)):(xe=t,t=n),t}function Ze(){var t,r,i,s,a,o,l,c;if(t=xe,(r=Xe())!==n){for(i=[],s=xe,a=Qe(),44===e.charCodeAt(xe)?(o=u,xe++):(o=n,0===Fe&&De(k)),o===n&&(o=null),l=Qe(),(c=Xe())!==n?s=a=[a,o,l,c]:(xe=s,s=n);s!==n;)i.push(s),s=xe,a=Qe(),44===e.charCodeAt(xe)?(o=u,xe++):(o=n,0===Fe&&De(k)),o===n&&(o=null),l=Qe(),(c=Xe())!==n?s=a=[a,o,l,c]:(xe=s,s=n);Ge=t,t=pe(r,i)}else xe=t,t=n;return t}function Xe(){var e,t;return e=xe,(t=rt())===n&&(t=nt())===n&&(t=it())===n&&(t=st()),t!==n&&(Ge=e,t=fe(t)),(e=t)===n&&(e=xe,(t=at())!==n&&(Ge=e,t=de(t)),e=t),e}function Qe(){var t,r;for(Fe++,t=[],r=e.charAt(xe),C.test(r)?xe++:(r=n,0===Fe&&De(T));r!==n;)t.push(r),r=e.charAt(xe),C.test(r)?xe++:(r=n,0===Fe&&De(T));return Fe--,r=n,0===Fe&&De(N),t}function et(){var t,r,i;return Fe++,t=xe,(r=tt())!==n?(40===e.charCodeAt(xe)?(i=c,xe++):(i=n,0===Fe&&De(W)),i!==n?(Ge=t,t=he(r)):(xe=t,t=n)):(xe=t,t=n),Fe--,t===n&&(r=n,0===Fe&&De(F)),t}function tt(){var t,r,i;if(Fe++,t=xe,r=[],i=e.charAt(xe),I.test(i)?xe++:(i=n,0===Fe&&De(H)),i!==n)for(;i!==n;)r.push(i),i=e.charAt(xe),I.test(i)?xe++:(i=n,0===Fe&&De(H));else r=n;return r!==n&&(Ge=t,r=ye()),Fe--,(t=r)===n&&(r=n,0===Fe&&De(j)),t}function rt(){var t,r,i;return Fe++,t=xe,Qe(),(r=ot())!==n?(37===e.charCodeAt(xe)?(i=p,xe++):(i=n,0===Fe&&De($)),i!==n?(Ge=t,t=me(r)):(xe=t,t=n)):(xe=t,t=n),Fe--,t===n&&0===Fe&&De(U),t}function nt(){var t,r,i;return Fe++,t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===f?(i=f,xe+=2):(i=n,0===Fe&&De(K)),i!==n?(Ge=t,t=ge(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===d?(i=d,xe+=2):(i=n,0===Fe&&De(D)),i!==n?(Ge=t,t=Se(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===h?(i=h,xe+=2):(i=n,0===Fe&&De(q)),i!==n?(Ge=t,t=ve(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===y?(i=y,xe+=2):(i=n,0===Fe&&De(V)),i!==n?(Ge=t,t=we(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===m?(i=m,xe+=2):(i=n,0===Fe&&De(z)),i!==n?(Ge=t,t=be(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,Qe(),(r=ot())!==n?(e.substr(xe,2)===g?(i=g,xe+=2):(i=n,0===Fe&&De(J)),i!==n?(Ge=t,t=Ee(r)):(xe=t,t=n)):(xe=t,t=n)))))),Fe--,t===n&&0===Fe&&De(B),t}function it(){var t,r,i;return Fe++,t=xe,(r=ot())!==n?(e.substr(xe,3)===S?(i=S,xe+=3):(i=n,0===Fe&&De(Z)),i!==n?(Ge=t,t=Ae(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,(r=ot())!==n?(e.substr(xe,3)===v?(i=v,xe+=3):(i=n,0===Fe&&De(X)),i!==n?(Ge=t,t=_e(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,(r=ot())!==n?(e.substr(xe,4)===w?(i=w,xe+=4):(i=n,0===Fe&&De(Q)),i!==n?(Ge=t,t=Ce(r)):(xe=t,t=n)):(xe=t,t=n),t===n&&(t=xe,(r=ot())!==n?(e.substr(xe,4)===b?(i=b,xe+=4):(i=n,0===Fe&&De(ee)),i!==n?(Ge=t,t=Re(r)):(xe=t,t=n)):(xe=t,t=n)))),Fe--,t===n&&(r=n,0===Fe&&De(Y)),t}function st(){var e,t;return Fe++,e=xe,Qe(),(t=ot())!==n?(Ge=e,e=Ie(t)):(xe=e,e=n),Fe--,e===n&&0===Fe&&De(te),e}function at(){var t,r,i,s;if(Fe++,t=xe,35===e.charCodeAt(xe)?(r=E,xe++):(r=n,0===Fe&&De(ne)),r!==n){if(i=[],s=e.charAt(xe),M.test(s)?xe++:(s=n,0===Fe&&De(ie)),s!==n)for(;s!==n;)i.push(s),s=e.charAt(xe),M.test(s)?xe++:(s=n,0===Fe&&De(ie));else i=n;i!==n?(Ge=t,t=Me()):(xe=t,t=n)}else xe=t,t=n;return t===n&&(t=xe,(r=Ye())!==n&&(Ge=t,r=Le(r)),(t=r)===n&&(t=xe,(r=tt())!==n&&(Ge=t,r=Oe()),t=r)),Fe--,t===n&&(r=n,0===Fe&&De(re)),t}function ot(){var t,r,i,s,a,o,l,u;for(t=xe,r=e.charAt(xe),L.test(r)?xe++:(r=n,0===Fe&&De(se)),r===n&&(r=null),i=xe,s=[],a=e.charAt(xe),O.test(a)?xe++:(a=n,0===Fe&&De(ae));a!==n;)s.push(a),a=e.charAt(xe),O.test(a)?xe++:(a=n,0===Fe&&De(ae));if(46===e.charCodeAt(xe)?(a=A,xe++):(a=n,0===Fe&&De(oe)),a!==n){if(o=[],l=e.charAt(xe),O.test(l)?xe++:(l=n,0===Fe&&De(ae)),l!==n)for(;l!==n;)o.push(l),l=e.charAt(xe),O.test(l)?xe++:(l=n,0===Fe&&De(ae));else o=n;o!==n?i=s=[s,a,o]:(xe=i,i=n)}else xe=i,i=n;if(i===n)if(i=[],s=e.charAt(xe),O.test(s)?xe++:(s=n,0===Fe&&De(ae)),s!==n)for(;s!==n;)i.push(s),s=e.charAt(xe),O.test(s)?xe++:(s=n,0===Fe&&De(ae));else i=n;if(i!==n){if(s=xe,101===e.charCodeAt(xe)?(a=_,xe++):(a=n,0===Fe&&De(le)),a!==n){if(o=e.charAt(xe),L.test(o)?xe++:(o=n,0===Fe&&De(se)),o===n&&(o=null),l=[],u=e.charAt(xe),O.test(u)?xe++:(u=n,0===Fe&&De(ae)),u!==n)for(;u!==n;)l.push(u),u=e.charAt(xe),O.test(u)?xe++:(u=n,0===Fe&&De(ae));else l=n;l!==n?s=a=[a,o,l]:(xe=s,s=n)}else xe=s,s=n;s===n&&(s=null),Ge=t,t=Pe()}else xe=t,t=n;return t}function lt(e,t){return e.map((function(e){return e[t]}))}function ut(e,t,r){return[e].concat(lt(t,r))}if(r=a(),t.peg$library)return{peg$result:r,peg$currPos:xe,peg$FAILED:n,peg$maxFailExpected:Te,peg$maxFailPos:Ne};if(r!==n&&xe===e.length)return r;throw r!==n&&xe<e.length&&De(Ue()),qe(Te,Ne<e.length?e.charAt(Ne):null,Ne<e.length?Ke(Ne,Ne+1):Ke(Ne,Ne))}function L(e){if(!e||0===e.length)return null;if("string"==typeof e){const t=O(e);return t&&0!==t.length?t:null}const t=e.map((e=>{if(!Number.isFinite(e.scale)||e.scale<=0)throw new n.s("effect:invalid-scale","scale must be finite and greater than 0",{stop:e});return{scale:e.scale,effects:O(e.value)}}));t.sort(((e,t)=>t.effects.length-e.effects.length));for(let r=0;r<t.length-1;r++){if(!E(t[r].effects,t[r+1].effects))throw new n.s("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});A(t[r].effects,t[r+1].effects)}return t.sort(((e,t)=>t.scale-e.scale)),t}function O(e){let t;if(!e)return[];try{t=M(e)}catch(r){throw new n.s("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map((e=>P(e)))}function P(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return x(e);case"opacity":return G(e);case"hue-rotate":return k(e);case"blur":return N(e);case"drop-shadow":return T(e);case"bloom":return F(e)}}catch(t){throw t.details.filter=e,t}throw new n.s("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function x(e){let t=1;return W(e.parameters,1),1===e.parameters.length&&(t=V(e.parameters[0])),new y(e.name,t)}function G(e){let t=1;return W(e.parameters,1),1===e.parameters.length&&(t=V(e.parameters[0])),new S(t)}function k(e){let t=0;return W(e.parameters,1),1===e.parameters.length&&(t=J(e.parameters[0])),new g(t)}function N(e){let t=0;return W(e.parameters,1),1===e.parameters.length&&(t=Y(e.parameters[0]),H(t,e.parameters[0])),new h(t)}function T(e){const t=[];let r=null;for(const i of e.parameters)if("color"===i.type){if(t.length&&Object.freeze(t),r)throw new n.s("effect:type-error","Accepts only one color",{});r=Z(i)}else{const e=Y(i);if(Object.isFrozen(t))throw new n.s("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(e),3===t.length&&H(e,i)}if(t.length<2||t.length>3)throw new n.s("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new m(t[0],t[1],t[2]||0,r||X("black"))}function F(e){let t=1,r=0,n=0;return W(e.parameters,3),e.parameters[0]&&(t=V(e.parameters[0])),e.parameters[1]&&(r=Y(e.parameters[1]),H(r,e.parameters[1])),e.parameters[2]&&(n=V(e.parameters[2])),new d(t,r,n)}function W(e,t){if(e.length>t)throw new n.s("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function j(e){if("color"===e.type)return"<color>";if(e.unit){if(e.unit in D)return"<length>";if(e.unit in B)return"<angle>";if("%"===e.unit)return"<percentage>"}return"<double>"}function H(e,t){if(e<0)throw new n.s("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function U(e){if("quantity"!==e.type||null!==e.unit)throw new n.s("effect:type-error",`Expected <double>, Actual: ${j(e)}`,{term:e})}function $(e){if("quantity"!==e.type||null!==e.unit&&"%"!==e.unit)throw new n.s("effect:type-error",`Expected <double> or <percentage>, Actual: ${j(e)}`,{term:e})}C(R,Error),R.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,a=this.location.source+":"+s.line+":"+s.column;if(n){var o=this.location.end,l=I("",s.line.toString().length," "),u=n[i.line-1],c=(i.line===o.line?o.column:u.length+1)-i.column||1;t+="\n --\x3e "+a+"\n"+l+" |\n"+s.line+" | "+u+"\n"+l+" | "+I("",i.column-1," ")+I("",c,"^")}else t+="\n at "+a}return t},R.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function a(e){return r[e.type](e)}function o(e){var t,r,n=e.map(a);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function l(e){return e?'"'+i(e)+'"':"end of input"}return"Expected "+o(e)+" but "+l(t)+" found."};const B={deg:1,grad:.9,rad:180/Math.PI,turn:360};function K(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=B[e.unit]))throw new n.s("effect:type-error",`Expected <angle>, Actual: ${j(e)}`,{term:e})}const D={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function q(e){if("quantity"!==e.type||!(0===e.value&&null===e.unit||e.unit&&null!=D[e.unit]))throw new n.s("effect:type-error",`Expected <length>, Actual: ${j(e)}`,{term:e})}function V(e){$(e);const t=e.value;return H(t,e),"%"===e.unit?.01*t:t}function z(e){return U(e),H(e.value,e),e.value}function J(e){return K(e),e.value*B[e.unit]||0}function Y(e){return q(e),e.value*D[e.unit]||0}function Z(e){switch(e.colorType){case"hex":return(0,n.gw)(e.value);case"named":return X(e.value);case"function":return te(e.value)}}function X(e){if(!(0,n.gx)(e))throw new n.s("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return(0,n.gy)(e)}const Q=/^rgba?/i,ee=/^hsla?/i;function te(e){if(W(e.parameters,4),Q.test(e.name))return[V(e.parameters[0]),V(e.parameters[1]),V(e.parameters[2]),e.parameters[3]?V(e.parameters[3]):1];if(ee.test(e.name))return(0,n.gz)(z(e.parameters[0]),V(e.parameters[1]),V(e.parameters[2]),e.parameters[3]?V(e.parameters[3]):1);throw new n.s("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}},83297:function(e,t,r){r.d(t,{E:function(){return d},a:function(){return u},c:function(){return l},f:function(){return f},i:function(){return a},l:function(){return p},s:function(){return o},u:function(){return c}});var n=r(49555),i=r(98503);async function s(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return(0,i.a0)(e);const r=i.B.WGS84;return await(0,n.N)(t,r),(0,n.K)(e,r)}function a(e,t){if(!o(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function o(e,t){return!!e.typeKeywords?.includes(t)}function l(e){return o(e,f.HOSTED_SERVICE)}function u(e,t){const r=e.typeKeywords;if(r){const e=r.indexOf(t);e>-1&&r.splice(e,1)}}function c(e,t,r){r?a(e,t):u(e,t)}async function p(e){const t=e.clone().normalize();let r;if(t.length>1)for(const n of t)r?n.width>r.width&&(r=n):r=n;else r=t[0];return s(r)}const f={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map",ORIENTED_IMAGERY_LAYER:"OrientedImageryLayer"};function d(e){const{portal:t,isOrgItem:r,itemControl:n}=e,i=t.user?.privileges;let s=!i||i.includes("features:user:edit"),a=!!r&&!!i?.includes("features:user:fullEdit");const o="update"===n||"admin"===n;return o?a=s=!0:a&&(s=!0),{features:{edit:s,fullEdit:a},content:{updateItem:o}}}},85502:function(e,t,r){r.r(t),r.d(t,{E:function(){return V},F:function(){return d},G:function(){return f},L:function(){return p},N:function(){return c},d:function(){return u},e:function(){return q},i:function(){return i},l:function(){return D},n:function(){return te},p:function(){return re},t:function(){return s}});var n=r(98503);const i=Math.PI/180,s=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,a=n.a3.radius,o=n.a3.eccentricitySquared,l={a1:a*o,a2:a*o*a*o,a3:a*o*o/2,a4:a*o*a*o*2.5,a5:a*o+a*o*o/2,a6:1-o},u={4267:{a:6378206.4,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:n.a3.radius,f:n.a3.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:n.fs.radius,f:n.fs.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:n.ft.radius,f:n.ft.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:n.ft.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};var c;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(c||(c={}));const p={[c.WGS84]:{[c.CGCS2000]:h,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:h,[c.SPHERICAL_ECEF]:P,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:v,[c.PLATE_CARREE]:w,[c.WGS84]:h,[c.WGS84_ECEF]:j},[c.CGCS2000]:{[c.CGCS2000]:h,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:h,[c.SPHERICAL_ECEF]:P,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:v,[c.PLATE_CARREE]:w,[c.WGS84]:h,[c.WGS84_ECEF]:j},[c.GCSMARS2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:h,[c.GCSMOON2000]:null,[c.LON_LAT]:h,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:O,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.GCSMOON2000]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:h,[c.LON_LAT]:h,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:L,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.WEB_MERCATOR]:{[c.CGCS2000]:y,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:y,[c.SPHERICAL_ECEF]:m,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:h,[c.PLATE_CARREE]:E,[c.WGS84]:y,[c.WGS84_ECEF]:g},[c.WGS84_ECEF]:{[c.CGCS2000]:H,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:H,[c.SPHERICAL_ECEF]:U,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:$,[c.PLATE_CARREE]:A,[c.WGS84]:H,[c.WGS84_ECEF]:h},[c.SPHERICAL_ECEF]:{[c.CGCS2000]:N,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:N,[c.SPHERICAL_ECEF]:h,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:T,[c.PLATE_CARREE]:_,[c.WGS84]:N,[c.WGS84_ECEF]:F},[c.SPHERICAL_MARS_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:k,[c.GCSMOON2000]:null,[c.LON_LAT]:k,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:h,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.SPHERICAL_MOON_PCPF]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:G,[c.LON_LAT]:G,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:h,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.UNKNOWN]:{[c.CGCS2000]:null,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:null,[c.SPHERICAL_ECEF]:null,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:h,[c.WEB_MERCATOR]:null,[c.PLATE_CARREE]:null,[c.WGS84]:null,[c.WGS84_ECEF]:null},[c.LON_LAT]:{[c.CGCS2000]:h,[c.GCSMARS2000]:h,[c.GCSMOON2000]:h,[c.LON_LAT]:h,[c.SPHERICAL_ECEF]:P,[c.SPHERICAL_MARS_PCPF]:O,[c.SPHERICAL_MOON_PCPF]:L,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:v,[c.PLATE_CARREE]:w,[c.WGS84]:h,[c.WGS84_ECEF]:j},[c.PLATE_CARREE]:{[c.CGCS2000]:b,[c.GCSMARS2000]:null,[c.GCSMOON2000]:null,[c.LON_LAT]:b,[c.SPHERICAL_ECEF]:C,[c.SPHERICAL_MARS_PCPF]:null,[c.SPHERICAL_MOON_PCPF]:null,[c.UNKNOWN]:null,[c.WEB_MERCATOR]:R,[c.PLATE_CARREE]:h,[c.WGS84]:b,[c.WGS84_ECEF]:I}};function f(e,t,r=K()){return null==e||null==t?null:B(e,t,r).projector}function d(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=(0,n.bq)(e,1)),(0,n.fv)(e)?t.spatialReferenceId=c.SPHERICAL_ECEF:(0,n.cb)(e)?t.spatialReferenceId=c.WGS84:(0,n.cL)(e)?t.spatialReferenceId=c.WEB_MERCATOR:(0,n.fw)(e)?t.spatialReferenceId=c.PLATE_CARREE:e.wkt===n.c4.wkt?t.spatialReferenceId=c.WGS84_ECEF:e.wkid===n.fx.CGCS2000?t.spatialReferenceId=c.CGCS2000:e.wkt===n.c2.wkt?t.spatialReferenceId=c.SPHERICAL_MARS_PCPF:e.wkt===n.c3.wkt?t.spatialReferenceId=c.SPHERICAL_MOON_PCPF:(0,n.eD)(e)?t.spatialReferenceId=c.GCSMARS2000:(0,n.eE)(e)?t.spatialReferenceId=c.GCSMOON2000:t.spatialReferenceId=c.UNKNOWN):c.UNKNOWN}function h(e,t,r,n){e!==r&&(r[n++]=e[t++],r[n++]=e[t++],r[n]=e[t])}function y(e,t,r,n){r[n]=J*(e[t]/X),r[n+1]=J*(Z-2*Math.atan(Math.exp(-e[t+1]/X))),r[n+2]=e[t+2]}function m(e,t,r,n){const i=e[t]/X,s=Z-2*Math.atan(Math.exp(-e[t+1]/X)),a=X+e[t+2],o=Math.cos(s)*a;r[n]=Math.cos(i)*o,r[n+1]=Math.sin(i)*o,r[n+2]=Math.sin(s)*a}function g(e,t,r,n){y(e,t,r,n),j(r,n,r,n)}function S(e,t,r,i,s){const a=.4999999*Y,o=(0,n.aP)(z*e[t+1],-a,a),l=Math.sin(o);r[i++]=z*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+l)/(1-l)),r[i]=e[t+2]}function v(e,t,r,i){S(e,t,r,i,n.a3)}function w(e,t,r,n){r[n]=e[t]*Q,r[n+1]=e[t+1]*Q,r[n+2]=e[t+2]}function b(e,t,r,n){r[n]=e[t]*ee,r[n+1]=e[t+1]*ee,r[n+2]=e[t+2]}function E(e,t,r,n){y(e,t,r,n),w(r,n,r,n)}function A(e,t,r,n){H(e,t,r,n),w(r,n,r,n)}function _(e,t,r,n){N(e,t,r,n),w(r,n,r,n)}function C(e,t,r,n){b(e,t,r,n),P(r,n,r,n)}function R(e,t,r,n){b(e,t,r,n),v(r,n,r,n)}function I(e,t,r,n){b(e,t,r,n),j(r,n,r,n)}function M(e,t,r,n,i){const s=i+e[t+2],a=z*e[t+1],o=z*e[t],l=Math.cos(a)*s;r[n]=Math.cos(o)*l,r[n+1]=Math.sin(o)*l,r[n+2]=Math.sin(a)*s}function L(e,t,r,i){M(e,t,r,i,n.fs.radius)}function O(e,t,r,i){M(e,t,r,i,n.ft.radius)}function P(e,t,r,i){M(e,t,r,i,n.a3.radius)}function x(e,t,r,i,s){const a=e[t],o=e[t+1],l=e[t+2],u=Math.sqrt(a*a+o*o+l*l),c=(0,n.fu)(l/(0===u?1:u)),p=Math.atan2(o,a);r[i++]=J*p,r[i++]=J*c,r[i]=u-s}function G(e,t,r,i){x(e,t,r,i,n.fs.radius)}function k(e,t,r,i){x(e,t,r,i,n.ft.radius)}function N(e,t,r,i){x(e,t,r,i,n.a3.radius)}function T(e,t,r,n){N(e,t,r,n),v(r,n,r,n)}function F(e,t,r,n){N(e,t,r,n),j(r,n,r,n)}function W(e,t,r,n,i){const s=z*e[t],a=z*e[t+1],o=e[t+2],l=Math.sin(a),u=Math.cos(a),c=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);r[n++]=(c+o)*u*Math.cos(s),r[n++]=(c+o)*u*Math.sin(s),r[n++]=(c*(1-i.eccentricitySquared)+o)*l}function j(e,t,r,i){W(e,t,r,i,n.a3)}function H(e,t,r,i){const s=l,a=e[t],o=e[t+1],u=e[t+2];let c,p,f,d,h,y,m,g,S,v,w,b,E,A,_,C,R,I,M,L,O;c=Math.abs(u),p=a*a+o*o,f=Math.sqrt(p),d=p+u*u,h=Math.sqrt(d),L=Math.atan2(o,a),y=u*u/d,m=p/d,A=s.a2/h,_=s.a3-s.a4/h,m>.3?(g=c/h*(1+m*(s.a1+A+y*_)/h),M=Math.asin(g),v=g*g,S=Math.sqrt(1-v)):(S=f/h*(1-y*(s.a5-A-m*_)/h),M=Math.acos(S),v=1-S*S,g=Math.sqrt(v)),w=1-n.a3.eccentricitySquared*v,b=n.a3.radius/Math.sqrt(w),E=s.a6*b,A=f-b*S,_=c-E*g,R=S*A+g*_,C=S*_-g*A,I=C/(E/w+R),M+=I,O=R+C*I/2,u<0&&(M=-M),r[i++]=J*L,r[i++]=J*M,r[i]=O}function U(e,t,r,n){H(e,t,r,n),P(r,n,r,n)}function $(e,t,r,n){H(e,t,r,n),v(r,n,r,n)}function B(e,t,r){if(null==e||null==t||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=d(e,r.source),s=d(t,r.dest);return i===c.UNKNOWN&&s===c.UNKNOWN?(0,n.bh)(e,t)?r.projector=h:r.projector=null:r.projector=p[i][s],r}function K(){return{source:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:c.UNKNOWN,metersPerUnit:1},projector:h}}const D={spatialReference:null,spatialReferenceId:c.UNKNOWN},q={spatialReference:null,spatialReferenceId:c.UNKNOWN},V=K(),z=(0,n.eI)(1),J=(0,n.dg)(1),Y=Math.PI,Z=.5*Y,X=n.a3.radius,Q=X*Y/180,ee=180/(X*Y);function te(e,t,r,n,i,s,a=Math.floor(e.length/3)){const o=f(t,i,V);if(null==o)return!1;if(o===h){if(e===n&&r===s)return!0;const t=r+3*a;for(let i=r,a=s;i<t;i++,a++)n[a]=e[i];return!0}const l=r+3*a;for(let u=r,c=s;u<l;u+=3,c+=3)o(e,u,n,c);return!0}const re=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:te},Symbol.toStringTag,{value:"Module"}))},49555:function(e,t,r){r.r(t),r.d(t,{B:function(){return A},H:function(){return N},J:function(){return F},K:function(){return R},L:function(){return W},N:function(){return j},O:function(){return I},Q:function(){return H},V:function(){return M},W:function(){return C},X:function(){return L},Y:function(){return O},_:function(){return b},a:function(){return V},o:function(){return c},p:function(){return Q},s:function(){return u}});var n=r(98503),i=r(85502);function s(e,t,r,n,s,o){return a[0]=e,a[1]=t,a[2]=r,(0,i.n)(a,n,0,s,o,0)}const a=(0,n.aA)();let o=0;class l{static fromGE(e){const t=new l;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}constructor(e){this.uid=o++,e?(this._wkt=null!=e.wkt?e.wkt:null,this._wkid=null!=e.wkid?e.wkid:-1,this._isInverse=null!=e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=o++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=o++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=o++}getInverse(){const e=new l;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}let u=class e{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(t){const r=new e;let n="";for(const e of t.steps){const t=l.fromGE(e);r.steps.push(t),n+=t.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=n,r}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(const t of e.steps)t instanceof l?this.steps.push(t):this.steps.push(new l({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){const t=new e;t.steps=[];for(let e=this.steps.length-1;e>=0;e--){const r=this.steps[e];t.steps.push(r.getInverse())}return t}getGTListEntry(){let e="";for(const t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(t,r,n){this._cachedProjection[e.cacheKey(t,r)]=n}getCachedGeTransformation(t,r){let n="";for(const e of this.steps)n+=e.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const i=this._cachedProjection[e.cacheKey(t,r)];return void 0===i?null:i}};function c(e,t,r){if(null==t||null==r||r.vcsWkid||(0,n.bh)(t,r)||(0,n.gK)(t)||(0,n.gK)(r))return null;const i=(0,n.bg)(t)/(0,n.bg)(r);if(1===i)return null;switch(e){case"point":case"esriGeometryPoint":return e=>p(e,i);case"polyline":case"esriGeometryPolyline":return e=>d(e,i);case"polygon":case"esriGeometryPolygon":return e=>f(e,i);case"multipoint":case"esriGeometryMultipoint":return e=>h(e,i);case"extent":case"esriGeometryEnvelope":return e=>y(e,i);default:return null}}function p(e,t){null!=e?.z&&(e.z*=t)}function f(e,t){if(e)for(const r of e.rings)for(const e of r)e.length>2&&(e[2]*=t)}function d(e,t){if(e)for(const r of e.paths)for(const e of r)e.length>2&&(e[2]*=t)}function h(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function y(e,t){e&&null!=e.zmin&&null!=e.zmax&&(e.zmin*=t,e.zmax*=t)}let m=null,g=null,S=null,v={};const w=new n.aQ;function b(){return!!m&&(0,n.gN)()}function E(){return!!b()||((0,n.aR)(w),C(),!1)}function A(e,t){return!e||!t||F(e,t)||E()}function _(e,t){return!F(e,t)&&!b()}function C(e){return null==S&&(S=Promise.all([(0,n.gL)(),Promise.all([r.e(916),r.e(2020)]).then(r.bind(r,90916)).then((e=>e.g)),r.e(6582).then(r.bind(r,6582))])),S.then((([,t,{hydratedAdapter:r}])=>{(0,n.D)(e),g=r,m=t.default,m._enableProjection(n.gM),w.notify()}))}function R(e,t,r=null,n=null){return Array.isArray(e)?0===e.length?[]:I(g,e,e[0].spatialReference,t,r,n):I(g,[e],e.spatialReference,t,r,n)[0]}function I(e,t,r,i,s=null,a=null){if(null==r||null==i)return t;if(F(r,i,s))return t.map((e=>H(e,r,i)));if(null==s&&(0,n.fv)(r))return t.map((e=>H(e,r,n.B.WGS84))).map((e=>N(e,i)));if(null==s&&(0,n.fv)(i))return t.map((e=>N(e,n.B.WGS84))).map((e=>H(e,n.B.WGS84,i)));if(null==s){const e=u.cacheKey(r,i);void 0!==v[e]?s=v[e]:(null==(s=O(r,i,void 0))&&(s=new u),v[e]=s)}if(null==m||null==e)throw new x;return null!=a?m._project(e,t,r,i,s,a):m._project(e,t,r,i,s)}function M(e,t){const r=L([e],t);return null!=r.pending?{pending:r.pending,geometry:null}:null!=r.geometries?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function L(e,t){if(!b())for(const r of e)if(null!=r&&!(0,n.bh)(r.spatialReference,t)&&(0,n.cg)(r.spatialReference)&&(0,n.cg)(t)&&!F(r.spatialReference,t))return(0,n.aR)(w),{pending:C(),geometries:null};return{pending:null,geometries:e.map((e=>null==e?null:(0,n.bh)(e.spatialReference,t)?e:(0,n.cg)(e.spatialReference)&&(0,n.cg)(t)?N(e,t):null))}}function O(e,t,r=null){if(null==e||null==t)return null;if(null==m||null==g)throw new x;const n=m._getTransformation(g,e,t,r,r?.spatialReference);return null!==n?u.fromGE(n):null}function P(e,t,r=null){if(null==m||null==g)throw new x;const n=m._getTransformationBySuitability(g,e,t,r,r?.spatialReference);if(null!==n){const e=[];for(const t of n)e.push(u.fromGE(t));return e}return[]}class x extends n.s{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function G(){m=null,g=null,S=null,v={}}const k={get loadPromise(){return S}};function N(e,t){try{const r=R(e,t);return null==r?null:("xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax),c(r.type,e.spatialReference,t)?.(r),r)}catch(r){if(!(r instanceof x))throw r;return null}}async function T(e,t,r){const n=e.spatialReference;return null!=n&&null!=t&&await j(n,t,null,r),N(e,t)}function F(e,t,r){return!r&&(!!(0,n.bh)(e,t)||(0,n.cg)(e)&&(0,n.cg)(t)&&!!(0,i.G)(e,t,i.E))}function W(e,t){if((0,n.bh)(e,t))return!0;if(!(0,n.cg)(e)||!(0,n.cg)(t))return!1;const r=(0,n.cb)(e)||(0,n.cL)(e)||(0,n.eC)(e),i=(0,n.cb)(t)||(0,n.cL)(t)||(0,n.eC)(t);return r&&i}async function j(e,t,r,i){if(b())return(0,n.O)(i);if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:a}of e)if(n&&s&&!F(n,s,a))return C(i)}else if(e&&t&&!F(e,t,r))return C(i);return(0,n.O)(i)}function H(e,t,r){return e?"x"in e?$(e,t,new n.bv,r,0):"xmin"in e?Y(e,t,new n.au,r,0):"rings"in e?z(e,t,new n.bC,r,0):"paths"in e?q(e,t,new n.aT,r,0):"points"in e?K(e,t,new n.bD,r,0):null:null}function U(e,t,r=t.spatialReference,n=0){return null!=r&&null!=e.spatialReference&&null!=$(e,e.spatialReference,t,r,n)}function $(e,t,r,s,a){X[0]=e.x,X[1]=e.y;const o=e.z;return X[2]=void 0!==o?o:a,(0,i.n)(X,t,0,X,s,0)?(r.x=X[0],r.y=X[1],r.spatialReference=s,void 0!==o||(0,n.gK)(s)?(r.z=X[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),void 0===e.m?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function B(e,t,r=t.spatialReference,n=0){return null!=e.spatialReference&&null!=r&&null!=K(e,e.spatialReference,t,r,n)}function K(e,t,r,s,a){const{points:o,hasZ:l,hasM:u}=e,c=[],p=o.length,f=[];for(const n of o)f.push(n[0],n[1],l?n[2]:a);if(!(0,i.n)(f,t,0,f,s,0,p))return null;const d=l||(0,n.gK)(s);for(let n=0;n<p;++n){const e=3*n,t=f[e],r=f[e+1];d&&u?c.push([t,r,f[e+2],o[n][3]]):d?c.push([t,r,f[e+2]]):u?c.push([t,r,o[n][2]]):c.push([t,r])}return r.points=c,r.spatialReference=s,r.hasZ=l,r.hasM=u,r}function D(e,t,r=t.spatialReference,n=0){return null!=e.spatialReference&&null!=r&&null!=q(e,e.spatialReference,t,r,n)}function q(e,t,r,i,s){const{paths:a,hasZ:o,hasM:l}=e,u=[];if(!Z(a,o??!1,l??!1,t,u,i,s))return null;const c=o||(0,n.gK)(i);return r.paths=u,r.spatialReference=i,r.hasZ=c,r.hasM=l,r}function V(e,t,r=t.spatialReference,n=0){return null!=e.spatialReference&&null!=r&&null!=z(e,e.spatialReference,t,r,n)}function z(e,t,r,i,s){const{rings:a,hasZ:o,hasM:l}=e,u=[];if(!Z(a,o??!1,l??!1,t,u,i,s))return null;const c=o||(0,n.gK)(i);return r.rings=u,r.spatialReference=i,r.hasZ=c,r.hasM=l,r}function J(e,t,r=t.spatialReference,n=0){return null!=e.spatialReference&&null!=r&&null!=Y(e,e.spatialReference,t,r,n)}function Y(e,t,r,i,a){const{xmin:o,ymin:l,xmax:u,ymax:c,hasZ:p,hasM:f}=e,d=p?e.zmin:a;if(!s(o,l,d,t,X,i))return null;const h=p||(0,n.gK)(i);r.xmin=X[0],r.ymin=X[1],h&&(r.zmin=X[2]);const y=p?e.zmax:a;return s(u,c,y,t,X,i)?(r.xmax=X[0],r.ymax=X[1],h&&(r.zmax=X[2]),f&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function Z(e,t,r,s,a,o,l=0){const u=new Array;for(const n of e)for(const e of n)u.push(e[0],e[1],t?e[2]:l);if(!(0,i.n)(u,s,0,u,o,0))return!1;let c=0;a.length=0;const p=t||(0,n.gK)(o);for(const n of e){const e=new Array;for(const t of n)p&&r?e.push([u[c++],u[c++],u[c++],t[3]]):p?e.push([u[c++],u[c++],u[c++]]):r?(e.push([u[c++],u[c++],t[2]]),c++):(e.push([u[c++],u[c++]]),c++);a.push(e)}return!0}const X=(0,n.aA)(),Q=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:F,getTransformation:O,getTransformations:P,initializeProjection:j,isEqualBaseGCS:W,isLoaded:b,isLoadedOrLoad:E,isLoadedOrLoadFor:A,load:C,project:R,projectExtent:J,projectMany:I,projectMultipoint:B,projectOrLoad:M,projectOrLoadMany:L,projectPoint:U,projectPolygon:V,projectPolyline:D,projectWithZConversion:T,projectWithoutEngine:H,requiresLoad:_,test:k,tryProjectWithZConversion:N,unload:G},Symbol.toStringTag,{value:"Module"}))},15381:function(e,t,r){r.d(t,{r:function(){return i},t:function(){return a}});var n=r(98503);async function i(e){const t=[];for(const r of e.allLayers)if("beforeSave"in r&&"function"==typeof r.beforeSave){const e=r.beforeSave();e&&t.push(e)}await Promise.allSettled(t)}const s=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function a(e,t,r){let i=(e.messages??[]).filter((({type:e})=>"error"===e)).map((({name:e,message:t,details:r})=>new n.s(e,t,r)));if(e.blockedRelativeUrls&&(i=i.concat(e.blockedRelativeUrls.map((e=>new n.s("url:unsupported",`Relative url '${e}' is not supported`))))),r){const{ignoreUnsupported:e,supplementalUnsupportedErrors:t=[],requiredPropertyChecksDisabled:n}=r;e&&(i=i.filter((({name:e})=>!(s.has(e)||t.includes(e))))),n&&(i=i.filter((e=>"web-document-write:property-required"!==e.name)))}if(i.length>0)throw new n.s(t.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}},78879:function(e,t,r){r.d(t,{f:function(){return p}});var n=r(98503);const i=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),s=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function a(e){return"basemap"===e.layerContainerType?i:"operational-layers"===e.layerContainerType?s:null}function o(e,t){if(t.restrictedWebMapWriting){const r=a(t);return null==r||r.has(e.type)&&!(0,n.w)(e)}return!0}function l(e,t){if(t)if((0,n.w)(e)){const r=(0,n.t)("featureCollection.layers",t),i=r?.[0]?.layerDefinition;i&&u(e,i)}else"group"!==e.type&&u(e,t)}function u(e,t){"maxScale"in e&&(t.maxScale=(0,n.y)(e.maxScale)??void 0),"minScale"in e&&(t.minScale=(0,n.y)(e.minScale)??void 0)}function c(e,t){if(l(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,"normal"===t.blendMode&&delete t.blendMode),t.opacity=(0,n.y)(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&"wmts"!==e.type))if((0,n.w)(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function p(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r?.messages&&r.messages.push(new n.s("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if((0,n.w)(e)&&!e.isTable)t=e.resourceInfo;else if(o(e,r)){const t={};return e.write(t,r)?t:null}return null!=t&&c(e,t=(0,n.f)(t)),t}}}]);
//# sourceMappingURL=4063.6b2fc026.js.map