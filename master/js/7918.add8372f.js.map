{"version":3,"file":"js/7918.add8372f.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/LinkChartLayer-DAJSgLFI.js"],"sourcesContent":["import{V as $,au as ce,s as V,aE as Te,az as Ee,n as R,ao as ye,D as Ne,bm as pe,bv as ne,aT as ge,k as M,o as b,A as Ie}from\"./main-I34c1W55.js\";import{S as De}from\"./MultiOriginJSONSupport-DsYvNMb2.js\";import{f as xe}from\"./Layer-CYh3Ux8v.js\";import{o as B}from\"./featureConversionUtils-CpxfICn8.js\";import{s as _e}from\"./OptimizedFeature-EIithYlr.js\";import{u as z,E as Re,A as Oe,b as Ae,v as ve,L as Se,m as Ge,h as Pe,a as He,f as Fe,d as T,s as A,t as Y,r as q,e as Ue,n as w,o as me,g as Be,c as fe,i as ze}from\"./KnowledgeGraphSublayer-OzrfZO2x.js\";import{l as je}from\"./BlendLayer-DPdNbUGL.js\";import{b as We}from\"./OperationalLayer-DhLn_F27.js\";import{t as Qe}from\"./ScaleRangeLayer-kD9VKvAo.js\";import{F as $e}from\"./knowledgeGraphService-Cvx4fB2s.js\";var J;(function(e){e.MULTIPLIER=\"multiplier\",e.ABSOLUTE=\"absoluteValue\"})(J||(J={}));let f=class extends We(je(Qe(De(xe)))){constructor(e){if(super(e),this.dataPreloadedInLocalCache=!1,this.defaultLinkChartConfig=null,this._currentLinkChartConfig={layoutMode:\"RADIAL_TREE\"},this._graphTypeLookup=new Map,this.dataManager=null,this.knowledgeGraph=null,this.layers=new($.ofType(z)),this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map,this.linkChartExtent=new ce({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7}),this.memberEntityTypes=null,this.memberRelationshipTypes=null,this.operationalLayerType=\"LinkChartLayer\",this.sublayerIdsCache=new Map,this.tables=new($.ofType(z)),this.type=\"link-chart\",this.chronologicalAuxiliaryGraphics=null,this._originalInclusionList=e?.inclusionModeDefinition,e?.dataPreloadedInLocalCache&&!e?.inclusionModeDefinition)throw new V(\"knowledge-graph:linkchart-layer-constructor\",\"If creating a link chart composite layer and configured that data is already loaded in the cache, you must specify an inclusion list so the Composite Layer knows what records belong to it\");this.addHandles(Te(()=>this.layers.concat(this.tables),(t,i)=>this._handleSublayersChange(t,i),Ee))}normalizeCtorArgs(e){if(!e)return{};const{url:t,title:i,dataPreloadedInLocalCache:a,defaultLinkChartConfig:n}=e;return{url:t,title:i,dataPreloadedInLocalCache:a,defaultLinkChartConfig:n}}_initializeLayerProperties(e){if(!this.title&&this.url){const o=this.url.split(\"/\");this.title=o[o.length-2]}const t=new Set;let i=[],a=[];if(e.inclusionModeDefinition&&(!e.inclusionModeDefinition.namedTypeDefinitions||e.inclusionModeDefinition.namedTypeDefinitions.size<1))throw new V(\"knowledge-graph:composite-layer-constructor\",\"If an explicit inclusion definition is defined, at least one namedTypeDefinition must also be defined\");e.knowledgeGraph.dataModel.entityTypes?.forEach(o=>{o.name&&this._graphTypeLookup.set(o.name,o)}),e.knowledgeGraph.dataModel.relationshipTypes?.forEach(o=>{o.name&&this._graphTypeLookup.set(o.name,o)}),e.inclusionModeDefinition?.generateAllSublayers?(i=e.knowledgeGraph.dataModel.entityTypes??[],a=e.knowledgeGraph.dataModel.relationshipTypes??[]):e.inclusionModeDefinition?.namedTypeDefinitions&&e.inclusionModeDefinition?.namedTypeDefinitions.size>0?e.inclusionModeDefinition?.namedTypeDefinitions.forEach((o,u)=>{const c=this._graphTypeLookup.get(u);if(!c)return R.getLogger(this).warn(`A named type, ${u}, was in the inclusion list that wasn't in the data model and will be removed`),void e.inclusionModeDefinition?.namedTypeDefinitions.delete(u);c.type===\"relationship\"?t.has(u)||(t.add(u),a.push(c)):c.type===\"entity\"?t.has(u)||(t.add(u),i.push(c)):(R.getLogger(this).warn(`A named type, ${u}, was in the inclusion list that wasn't properly modeled and will be removed`),e.inclusionModeDefinition?.namedTypeDefinitions.delete(u))}):(i=e.knowledgeGraph.dataModel.entityTypes??[],a=e.knowledgeGraph.dataModel.relationshipTypes??[]);const n=new Re({knowledgeGraph:e.knowledgeGraph,inclusionModeDefinition:e.inclusionModeDefinition});this.knowledgeGraph=e.knowledgeGraph,this.memberEntityTypes=i,this.memberRelationshipTypes=a,this.dataManager=n}load(e){const t=async()=>{const i=[],a=[];this.loadLayerAssumingLocalCache(),await fe(this),this.dataManager.inclusionModeDefinition&&(this.dataManager.inclusionModeDefinition.generateAllSublayers=!1),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach(n=>{n.useAllData=!1}),await this._initializeDiagram(),this.layers.forEach(n=>{a.push(n.refreshCachedQueryEngine()),i.push(new Promise(o=>{n.on(\"layerview-create\",()=>{o(null)})}))}),this.tables.forEach(n=>{a.push(n.refreshCachedQueryEngine())}),await Promise.all(a)};return this.addResolvingPromise(new Promise(i=>{$e(this.url).then(async a=>{if(this._initializeLayerProperties({knowledgeGraph:a,inclusionModeDefinition:this._originalInclusionList}),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.size||(this.dataManager.inclusionModeDefinition={generateAllSublayers:!1,namedTypeDefinitions:new Map},this.dataManager.knowledgeGraph.dataModel.entityTypes?.forEach(n=>{n.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(n.name,{useAllData:!0})}),this.dataManager.knowledgeGraph.dataModel.relationshipTypes?.forEach(n=>{n.name&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.set(n.name,{useAllData:!0})})),this.dataPreloadedInLocalCache){const n=ze.getInstance();for(const[o,u]of this.dataManager.inclusionModeDefinition?.namedTypeDefinitions??[])for(const c of u.members?.values()??[]){const L=n.readFromStoreById(`${o}__${c.id}`);L&&ye(this.dataManager.sublayerCaches,o,()=>new Map).set(c.id,L)}await t()}else{const n=this.defaultLinkChartConfig?.layoutMode===\"GEOGRAPHIC\";this.addResolvingPromise(this.dataManager.refreshCacheContent(void 0,!1,n,!0).then(async()=>{Ne(e),await t()}))}i(null)})})),Promise.resolve(this)}set inclusionModeDefinition(e){this.loadStatus!==\"loaded\"&&this.loadStatus!==\"failed\"?this._set(\"inclusionModeDefinition\",e):R.getLogger(this).error(\"#inclusionModeDefinition\",\"inclusionModeDefinition cannot be changed after the layer is loaded.\")}async addRecords(e,t){let i=[];t?.cascadeAddRelationshipEndNodes&&this.dataManager.knowledgeGraph.dataModel&&(i=await Oe(e,this.dataManager.knowledgeGraph));const a=e.concat(i).filter(n=>!this.sublayerIdsCache.get(n.typeName)?.has(n.id));await this._handleNewRecords(a)}async removeRecords(e,{cascadeRemoveRelationships:t=!0,recalculateLayout:i=!1}={cascadeRemoveRelationships:!0,recalculateLayout:!1}){let a=[];for(const o of e)this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(o.typeName)?.useAllData===!1&&this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.get(o.typeName)?.members?.has(o.id)&&a.push(o);if(t){const o=new Set,u=[];for(const c of a)if(this.dataManager.nodeConnectionsLookup.has(c.id))for(const L of this.dataManager.nodeConnectionsLookup.get(c.id))o.add(L);for(const c of o)if(this.dataManager.memberIdTypeLookup.has(c))for(const L of this.dataManager.memberIdTypeLookup.get(c))this.dataManager.relationshipTypeNames.has(L)&&u.push({id:c,typeName:L});a=a.concat(u)}this.dataManager.removeFromLayer(a);for(const o of a)this.sublayerIdsCache.get(o.typeName)?.delete(o.id),this.dataManager.relationshipTypeNames.has(o.typeName)?this.relationshipLinkChartDiagramLookup.delete(o.id):this.entityLinkChartDiagramLookup.delete(o.id);i&&await this._calculateLayoutWithSublayerTimeInfo(this._currentLinkChartConfig.layoutMode,this._currentLinkChartConfig.layoutOptions);const n=[];return this.layers.forEach(o=>{n.push(o.refreshCachedQueryEngine())}),await Promise.all(n),this._refreshNamedTypes(),a}async expand(e,t){const i=await this.dataManager.getConnectedRecordIds(e,t),a=i.filter(n=>!this.sublayerIdsCache.get(n.typeName)?.has(n.id));return await this._handleNewRecords(i),{records:a}}loadLayerAssumingLocalCache(){const e=[...this.memberRelationshipTypes,...this.memberEntityTypes];this.originIdOf(\"layers\")===pe.DEFAULTS?this._createSublayers(e,this.layers,t=>!!t.geometryType):this._updateSublayers(e,this.layers),this.originIdOf(\"tables\")===pe.DEFAULTS?this._createSublayers(e,this.tables,t=>!t.geometryType):this._updateSublayers(e,this.tables),this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((t,i)=>{const a=ye(this.sublayerIdsCache,i,()=>new Set);t.members?.forEach(({id:n,linkChartLocation:o})=>{if(a.add(n),o){const u=o instanceof _e?o:B(o);this.dataManager.relationshipTypeNames.has(i)?this.relationshipLinkChartDiagramLookup.set(n,u):this.entityLinkChartDiagramLookup.set(n,u)}})})}async calculateLinkChartLayout(e=\"RADIAL_TREE\",t){const i=[],a=[],n=[];this.dataManager.sublayerCaches.forEach((s,l)=>{this.dataManager.entityTypeNames.has(l)?s.forEach(r=>{i.push({typeName:l,feature:r})}):this.dataManager.relationshipTypeNames.has(l)&&s.forEach(r=>{a.push({typeName:l,feature:r})})}),this.entityLinkChartDiagramLookup=new Map,this.relationshipLinkChartDiagramLookup=new Map;const o=new Map,u=new Map,c=new Map,L=new Map,k=new Uint8Array(i.length),p=new Float64Array(i.length),g=new Float64Array(i.length),m=new Float64Array(i.length),se=new Float64Array(i.length),K=new Uint32Array(a.length),X=new Uint32Array(a.length),oe=new Float64Array(a.length),re=new Float64Array(a.length),y=[],Le=\"FORCE_DIRECTED\",x=new ce({xmin:-1e-7,ymin:-1e-7,xmax:1e-7,ymax:1e-7});let P,le=\"FORCE_DIRECTED\",d=0,E=0;const Ce=Ae.apply;switch(le=e===\"GEOGRAPHIC\"?Le:e,le){case\"FORCE_DIRECTED\":P=Fe.apply;break;case\"COMMUNITY\":P=He.apply;break;case\"HIERARCHICAL\":P=Pe.apply;break;case\"RADIAL_TREE\":P=Ge.apply;break;case\"SMART_TREE\":P=Se.apply;break;default:P=ve.apply}let Z=!1;i.forEach(({typeName:s,feature:l})=>{if(e!==\"CHRONOLOGICAL_SINGLE\"&&e!==\"CHRONOLOGICAL_MULTIPLE\"&&t?.lockedNodeLocations?.has(l.attributes[T])){e===\"GEOGRAPHIC\"&&this.dataManager.geographicLookup.has(s)?k[d]=A.IsGeographic:k[d]=A.None;const r=t.lockedNodeLocations.get(l.attributes[T]);p[d]=r.x,g[d]=r.y}else if(e===\"GEOGRAPHIC\"&&this.dataManager.geographicLookup.has(s)){k[d]=A.IsGeographic;let r=null;const I=l.attributes[this.dataManager.geographicLookup.get(s).name];switch(this.dataManager.geographicLookup.get(s)?.geometryType){case\"esriGeometryPoint\":p[d]=I?.x,g[d]=I?.y;break;case\"esriGeometryPolygon\":r=I?.centroid,r?.x!=null&&r?.y!=null?(p[d]=r.x,g[d]=r.y):k[d]=A.IsMovable;break;case\"esriGeometryPolyline\":case\"esriGeometryMultipoint\":r=I?.extent?.center,r?.x!=null&&r?.y!=null?(p[d]=r.x,g[d]=r.y):k[d]=A.IsMovable;break;default:k[d]=A.IsMovable}(p[d]==null||g[d]==null||Number.isNaN(p[d])||Number.isNaN(g[d]))&&(k[d]=A.IsMovable,p[d]=0,g[d]=0)}else if(e===\"CHRONOLOGICAL_SINGLE\"||e===\"CHRONOLOGICAL_MULTIPLE\"){!Z&&t?.lockedNodeLocations?.has(l.attributes[T])&&(Z=!0);const r=t?.timeInfoByTypeName?.get(s),I=r?.startField,v=I&&r?.startField?l.attributes[I]:null;m[d]=v?new Date(v).getTime():NaN;const C=r?.endField,D=C&&r?.endField?l.attributes[C]:null;se[d]=D?new Date(D).getTime():NaN,p[d]=0,g[d]=0,k[d]=A.IsMovable}else k[d]=A.IsMovable,p[d]=0,g[d]=0;L.set(l.attributes[T],d),y[d]={feature:l,typeName:s},d++}),Z&&R.getLogger(this).warn(\"Locked node locations are not supported for chronological layout at this time.  Requested node locations were ignored\");let he=!1;const ee=new Map;a.forEach(s=>{const l=s.feature.attributes[Y],r=s.feature.attributes[q],I=L.get(l),v=L.get(r),C=t?.timeInfoByTypeName?.get(s.typeName),D=t?.timeInfoByTypeName?C?.startField:null,O=D?s.feature.attributes[D]:null,Q=C?.endField,H=Q?s.feature.attributes[Q]:null;if(I!==void 0&&v!==void 0){let S=l+\"-\"+r;e!==\"CHRONOLOGICAL_SINGLE\"&&e!==\"CHRONOLOGICAL_MULTIPLE\"||(S=S+\"-\"+O+\"-\"+H);const U=ee.get(S);U?.has(s.typeName)||(K[E]=I,X[E]=v,e!==\"CHRONOLOGICAL_SINGLE\"&&e!==\"CHRONOLOGICAL_MULTIPLE\"||(oe[E]=O?new Date(O).getTime():NaN,re[E]=H?new Date(H).getTime():NaN),U===void 0?ee.set(S,new Map([[s.typeName,E]])):U.set(s.typeName,E),E++),n.push(s)}else he=!0,this.relationshipLinkChartDiagramLookup.set(l,null)}),he&&R.getLogger(this).warn(\"A relationship is a member of this layer that has either origin or destination entity nodes that are not members. The diagram geometry will be set to null\");const de=this._validateLayoutSettings(e,t),te=this._convertLayoutSettingsToCalculationSettings(de);await Ue();let j=!1,N=null;if(e===\"CHRONOLOGICAL_SINGLE\"||e===\"CHRONOLOGICAL_MULTIPLE\"){let s;({success:j,links:N,graphics:s}=Ce(k,p,g,m,se,K.subarray(0,E),X.subarray(0,E),oe.subarray(0,E),re.subarray(0,E),e===\"CHRONOLOGICAL_MULTIPLE\",t?.chronologicalLayoutSettings??{})),j&&(this.chronologicalAuxiliaryGraphics=s)}else({success:j,links:N}=P(k,p,g,K.subarray(0,E),X.subarray(0,E),te.computationBudgetTime,te.idealEdgeLengthMultiplier,te.repulsionRadiusMultiplier));if(!j)throw new V(\"knowledge-graph:layout-failed\",\"Attempting to arrange the records in the specified layout failed\");for(let s=0;s<y.length;s++){if(g[s]>84.9999?g[s]=84.9999:g[s]<-84.9999&&(g[s]=-84.9999),p[s]>179.9999?p[s]=179.9999:p[s]<-179.9999&&(p[s]=-179.9999),y[s].feature.attributes[w]=new ne(p[s],g[s]),o.has(y[s].typeName))o.get(y[s].typeName)?.set(y[s].feature.attributes[T],y[s].feature);else{const r=new Map;r.set(y[s].feature.attributes[T],y[s].feature),o.set(y[s].typeName,r)}c.set(y[s].feature.attributes[T],y[s].feature);const l=B(y[s].feature.attributes[w]);this.entityLinkChartDiagramLookup.set(y[s].feature.attributes[T],y[s].feature.attributes[w]?l:null),y[s].feature.attributes[w].x<x.xmin&&(x.xmin=y[s].feature.attributes[w].x),y[s].feature.attributes[w].x>x.xmax&&(x.xmax=y[s].feature.attributes[w].x),y[s].feature.attributes[w].y<x.ymin&&(x.ymin=y[s].feature.attributes[w].y),y[s].feature.attributes[w].y>x.ymax&&(x.ymax=y[s].feature.attributes[w].y)}if(this.linkChartExtent.xmin=x.xmin,this.linkChartExtent.xmax=x.xmax,this.linkChartExtent.ymin=x.ymin,this.linkChartExtent.ymax=x.ymax,!N)throw new V(\"knowledge-graph:layout-failed\",\"Attempting to retrieve link geometry from diagram engine failed\");const W=new Map,ae=new Map,ie=new Map,ue=new Set;for(let s=0;s<n.length;s++){const l=[],r=n[s],I=r.feature.attributes[Y],v=r.feature.attributes[q];let C=I+\"-\"+v;if(e===\"CHRONOLOGICAL_SINGLE\"||e===\"CHRONOLOGICAL_MULTIPLE\"){const h=t?.timeInfoByTypeName?.get(r.typeName),_=t?.timeInfoByTypeName?h?.startField:null,G=_?r.feature.attributes[_]:null,F=h?.endField;C+=\"-\"+G+\"-\"+(F?r.feature.attributes[F]:null)}const D=ee.get(C).get(r.typeName),O=D===0?0:N?.vertexEndIndex[D-1];if(!ue.has(D)){if(ue.add(D),N.types[D]===me.Recursive){const h=[N.vertices[2*O],N.vertices[2*O+1]],_=[N.vertices[2*(O+1)],N.vertices[2*(O+1)+1]],G=[.5*(h[0]+_[0]),.5*(h[1]+_[1])],F=[G[0]-h[0],G[1]-h[1]],we=[G[0]+F[1],G[1]-F[0]],ke=[G[0]-F[1],G[1]+F[0]];l.push(h),l.push(we),l.push(_),l.push(ke),l.push(h)}else{if(N.types[D]!==me.Regular){R.getLogger(this).warn(\"A relationship generated an unsupported link geometry type.  It will not be rendered\");continue}for(let h=O;h<N.vertexEndIndex[D];h++)l.push([N.vertices[2*h],N.vertices[2*h+1]])}if(e!==\"CHRONOLOGICAL_SINGLE\"&&e!==\"CHRONOLOGICAL_MULTIPLE\"){const h=y[L.get(I)]?.feature.attributes[w],_=y[L.get(v)]?.feature.attributes[w];l[0][0]===h.x&&l[0][1]===h.y||(l[0]=[h.x,h.y]),l[l.length-1][0]===_.x&&l[l.length-1][1]===_.y||(l[l.length-1]=[_.x,_.y])}for(let h=1;h<l.length-1;h++)l[h][1]>85.5?l[h][1]=85.5:l[h][1]<-85.5&&(l[h][1]=-85.5),l[h][0]>179.9999?l[h][0]=179.9999:l[h][0]<-179.9999&&(l[h][0]=-179.9999);W.has(C)?W.get(C).push(l):W.set(C,[l])}const Q=W.get(C);ae.has(C)||(ae.set(C,new Map),ie.set(C,new Map));const H=ae.get(C),S=ie.get(C);H.has(r.typeName)||(H.set(r.typeName,Q.shift()),S.set(r.typeName,0));const U=H.get(r.typeName);S.set(r.typeName,S.get(r.typeName)+1);const Me=new ge({paths:[U]});if(r.feature.attributes[w]=Me,u.has(r.typeName))u.get(r.typeName)?.set(r.feature.attributes[T],r.feature);else{const h=new Map;h.set(r.feature.attributes[T],r.feature),u.set(r.typeName,h)}c.set(r.feature.attributes[T],r.feature);const be=B(r.feature.attributes[w]);this.relationshipLinkChartDiagramLookup.set(r.feature.attributes[T],r.feature.attributes[w]?be:null)}for(const s of n)s.feature.attributes[Be]=ie.get(s.feature.attributes[Y]+\"-\"+s.feature.attributes[q])?.get(s.typeName)??null;return this._currentLinkChartConfig={layoutMode:e,layoutOptions:de},{nodes:o,links:u,idMap:c}}async applyNewLinkChartLayout(e=\"RADIAL_TREE\",t){const i=[];await this._calculateLayoutWithSublayerTimeInfo(e,t),this.layers.forEach(a=>{i.push(a.refreshCachedQueryEngine())}),await Promise.all(i),this._refreshNamedTypes()}getCurrentNodeLocations(){const e=new Map;return this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach(t=>{t?.members?.forEach(i=>{const a=i.linkChartLocation;let n;const o=i.id;a&&(n=\"x\"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]},e.set(o,new ne({x:n.x,y:n.y})))})}),e}async synchronizeInclusionListWithCache(){return new Promise(e=>{this.dataManager.inclusionModeDefinition?.namedTypeDefinitions.forEach((t,i)=>{if(t.useAllData=!1,t.members&&t.members.size>0){if(!this.dataManager.sublayerCaches.get(i))return;const a=new Set(Array.from(this.dataManager.sublayerCaches.get(i).keys()));Array.from(t.members.keys()).filter(n=>!a.has(n)).forEach(n=>{t.members?.delete(n)})}}),e()})}async refreshLinkChartCache(e){await this.dataManager.refreshCacheContent(e);const t=[];this.layers.forEach(i=>{t.push(i.refreshCachedQueryEngine())}),await Promise.all(t),this._refreshNamedTypes()}async connectBetweenEntities(e){let t=[];for(const a of this.dataManager.relationshipTypeNames){const n=this.sublayerIdsCache.get(a);n&&(t=t.concat(Array.from(n.keys())))}const i=await this.dataManager.getRelationshipsBetweenNodes(e,t);return await this._handleNewRecords(i),{records:i}}async connectFromEntities(e){let t=[];for(const n of this.dataManager.relationshipTypeNames){const o=this.sublayerIdsCache.get(n);o&&(t=t.concat(Array.from(o.keys())))}let i=[];for(const n of this.dataManager.entityTypeNames){const o=this.sublayerIdsCache.get(n);o&&(i=i.concat(Array.from(o)))}const a=await this.dataManager.getRelationshipsFromNodes(e,i,t);return await this._handleNewRecords(a),{records:a}}getCurrentLayout(){return this._currentLinkChartConfig.layoutMode}async _calculateLayoutWithSublayerTimeInfo(e=\"RADIAL_TREE\",t){const i=new Map;this.layers.forEach(a=>{i.set(a.objectType.name,a.timeInfo)}),await this.calculateLinkChartLayout(e,{timeInfoByTypeName:i,...t})}async _handleNewRecords(e){const t=[];this.dataManager.addToLayer(e);for(const a of e)this.sublayerIdsCache.has(a.typeName)||(this.sublayerIdsCache.set(a.typeName,new Set),t.push(a.typeName)),this.sublayerIdsCache.get(a.typeName).add(a.id);for(const a of t){const n=this._graphTypeLookup.get(a);if(n){const o=this._createSublayer(n);n.type===\"entity\"?this.dataManager.entityTypeNames.add(a):this.dataManager.relationshipTypeNames.add(a),o.geometryType?this.layers.push(o):this.tables.push(o),this.dataManager.sublayerCaches.set(a,new Map)}}await fe(this,t),await this.dataManager.refreshCacheContent(e.map(a=>a.id));const i=Object.assign({},this._currentLinkChartConfig.layoutOptions);i.lockedNodeLocations=new Map;for(const[a,n]of this.entityLinkChartDiagramLookup.entries())n&&i.lockedNodeLocations.set(a,new ne(n.coords[0],n.coords[1]));await this.applyNewLinkChartLayout(this._currentLinkChartConfig.layoutMode,i)}_createSublayers(e,t,i){e.forEach(a=>{const n=this._createSublayer(a);i(n)&&t.push(n),this._updateSublayerCaches(a)})}_updateSublayers(e,t){t.forEach(i=>{i.parentCompositeLayer=this;const a=e.find(n=>n.type===i.graphType&&n.name===i.graphTypeName);a&&(i.objectType=a,i.read({title:a.name},{origin:\"service\"}),this._updateSublayerCaches(a))})}_updateSublayerCaches(e){const t=this.dataManager.sublayerCaches;t.has(e.name)||t.set(e.name,new Map)}async _initializeDiagram(){this.defaultLinkChartConfig?this.defaultLinkChartConfig.doNotRecalculateLayout?(this.dataManager.inclusionModeDefinition?.namedTypeDefinitions?.forEach((e,t)=>{e?.members?.forEach(i=>{const a=i.linkChartLocation;let n;const o=i.id;if(!a)return;n=\"x\"in a?{x:a.x,y:a.y}:{x:a.coords[0],y:a.coords[1]};const u=B(n);this.dataManager.relationshipTypeNames.has(t)?this.relationshipLinkChartDiagramLookup.set(o,u):this.entityLinkChartDiagramLookup.set(o,u),this.linkChartExtent.xmin>n.x&&(this.linkChartExtent.xmin=n.x),this.linkChartExtent.xmax<n.x&&(this.linkChartExtent.xmax=n.x),this.linkChartExtent.ymin>n.y&&(this.linkChartExtent.ymin=n.y),this.linkChartExtent.ymax<n.y&&(this.linkChartExtent.ymax=n.y)})}),this.memberRelationshipTypes.forEach(e=>{e.name&&this.dataManager.sublayerCaches.get(e.name)?.forEach(t=>{const i=this.relationshipLinkChartDiagramLookup.get(t.attributes[Y]),a=this.relationshipLinkChartDiagramLookup.get(t.attributes[q]);if(i&&a){const n=B(new ge({paths:[[[i.coords[0],i.coords[1]],[a.coords[0],a.coords[1]]]]}));this.relationshipLinkChartDiagramLookup.set(t.attributes[T],n)}else this.relationshipLinkChartDiagramLookup.set(t.attributes[T],null)})})):await this._calculateLayoutWithSublayerTimeInfo(this.defaultLinkChartConfig.layoutMode,{lockedNodeLocations:this.getCurrentNodeLocations(),...this.defaultLinkChartConfig.layoutOptions||{}}):await this._calculateLayoutWithSublayerTimeInfo(\"RADIAL_TREE\",{lockedNodeLocations:this.getCurrentNodeLocations()})}_refreshNamedTypes(){for(const e of this.layers)e.emit(\"refresh\",{dataChanged:!0});for(const e of this.tables)e.emit(\"refresh\",{dataChanged:!0})}_validateLayoutSettings(e,t){const i=m=>typeof m==\"number\"&&!isNaN(m),a=m=>i(m)&&m>=1,n=m=>i(m)&&m>=1,o=m=>Object.values(J).includes(m),u=m=>i(m)&&m>=0,c={organicLayoutSettings:{},chronologicalLayoutSettings:{}};if(!new Set([\"FORCE_DIRECTED\",\"COMMUNITY\",\"GEOGRAPHIC\",\"CHRONOLOGICAL_MULTIPLE\",\"CHRONOLOGICAL_SINGLE\"]).has(e)||!t)return c;t.organicLayoutSettings??={};const{computationBudgetTime:L,repulsionRadiusMultiplier:k,idealEdgeLength:p,idealEdgeLengthType:g}=t.organicLayoutSettings;if(n(L)?c.organicLayoutSettings.computationBudgetTime=L:L!==void 0&&R.getLogger(this).warn(\"Invalid layout computationBudgetTime setting, will revert to default setting\"),a(k)?c.organicLayoutSettings.repulsionRadiusMultiplier=k:k!==void 0&&R.getLogger(this).warn(\"Invalid layout repulsionRadiusMultiplier setting, will revert to default setting\"),e===\"GEOGRAPHIC\"&&(p!==void 0||g!==void 0)&&(o(g)?c.organicLayoutSettings.idealEdgeLengthType=g:g!==void 0&&R.getLogger(this).warn('Invalid layout idealEdgeLengthType setting, will revert to \"multiplier\" setting'),u(p)?c.organicLayoutSettings.idealEdgeLength=p:p!==void 0&&R.getLogger(this).warn(\"Invalid layout idealEdgeLength setting, will revert to default setting\")),(e===\"CHRONOLOGICAL_MULTIPLE\"||e===\"CHRONOLOGICAL_SINGLE\")&&t.chronologicalLayoutSettings){const m=t.chronologicalLayoutSettings;m.durationLineWidth&&m.durationLineWidth<0&&R.getLogger(this).warn(\"Invalid layout durationLineWidth setting, will revert to default setting\")}return c}_convertLayoutSettingsToCalculationSettings(e){e.organicLayoutSettings??={};let t=e.organicLayoutSettings.idealEdgeLength;return e.organicLayoutSettings.idealEdgeLengthType===J.ABSOLUTE&&(t===void 0?t=-1:t*=-1),{computationBudgetTime:e.organicLayoutSettings.computationBudgetTime,repulsionRadiusMultiplier:e.organicLayoutSettings.repulsionRadiusMultiplier,idealEdgeLengthMultiplier:t}}_createSublayer(e){return new z({objectType:e,parentCompositeLayer:this,graphType:e.type})}_handleSublayersChange(e,t){t&&(t.forEach(i=>{i.parent=null}),this.removeHandles(\"sublayers-owner\")),e&&(e.forEach(i=>{i.parent=this}),this.addHandles([e.on(\"after-add\",({item:i})=>{i.parent=this}),e.on(\"after-remove\",({item:i})=>{i.parent=null})],\"sublayers-owner\"))}};M([b()],f.prototype,\"dataPreloadedInLocalCache\",void 0),M([b()],f.prototype,\"defaultLinkChartConfig\",void 0),M([b()],f.prototype,\"dataManager\",void 0),M([b()],f.prototype,\"inclusionModeDefinition\",null),M([b()],f.prototype,\"knowledgeGraph\",void 0),M([b({type:$.ofType(z),json:{write:{ignoreOrigin:!0}}})],f.prototype,\"layers\",void 0),M([b()],f.prototype,\"entityLinkChartDiagramLookup\",void 0),M([b()],f.prototype,\"relationshipLinkChartDiagramLookup\",void 0),M([b()],f.prototype,\"linkChartExtent\",void 0),M([b()],f.prototype,\"memberEntityTypes\",void 0),M([b()],f.prototype,\"memberRelationshipTypes\",void 0),M([b({type:[\"LinkChartLayer\"]})],f.prototype,\"operationalLayerType\",void 0),M([b()],f.prototype,\"sublayerIdsCache\",void 0),M([b({type:$.ofType(z),json:{write:{ignoreOrigin:!0}}})],f.prototype,\"tables\",void 0),M([b({json:{read:!1}})],f.prototype,\"type\",void 0),M([b({json:{read:!1}})],f.prototype,\"chronologicalAuxiliaryGraphics\",void 0),f=M([Ie(\"esri.layers.LinkChartLayer\")],f);const Ve=f;export{Ve as default};\n"],"names":["J","e","MULTIPLIER","ABSOLUTE","f","constructor","super","this","dataPreloadedInLocalCache","defaultLinkChartConfig","_currentLinkChartConfig","layoutMode","_graphTypeLookup","Map","dataManager","knowledgeGraph","layers","ofType","entityLinkChartDiagramLookup","relationshipLinkChartDiagramLookup","linkChartExtent","xmin","ymin","xmax","ymax","memberEntityTypes","memberRelationshipTypes","operationalLayerType","sublayerIdsCache","tables","type","chronologicalAuxiliaryGraphics","_originalInclusionList","inclusionModeDefinition","addHandles","concat","t","i","_handleSublayersChange","normalizeCtorArgs","url","title","a","n","_initializeLayerProperties","o","split","length","Set","namedTypeDefinitions","size","dataModel","entityTypes","forEach","name","set","relationshipTypes","generateAllSublayers","u","c","get","getLogger","warn","delete","has","add","push","load","async","loadLayerAssumingLocalCache","useAllData","_initializeDiagram","refreshCachedQueryEngine","Promise","on","all","addResolvingPromise","then","getInstance","members","values","L","readFromStoreById","id","sublayerCaches","refreshCacheContent","resolve","loadStatus","_set","error","addRecords","cascadeAddRelationshipEndNodes","filter","typeName","_handleNewRecords","removeRecords","cascadeRemoveRelationships","recalculateLayout","nodeConnectionsLookup","memberIdTypeLookup","relationshipTypeNames","removeFromLayer","_calculateLayoutWithSublayerTimeInfo","layoutOptions","_refreshNamedTypes","expand","getConnectedRecordIds","records","originIdOf","DEFAULTS","_createSublayers","geometryType","_updateSublayers","linkChartLocation","calculateLinkChartLayout","s","l","entityTypeNames","r","feature","k","Uint8Array","p","Float64Array","g","m","se","K","Uint32Array","X","oe","re","y","Le","x","P","le","d","E","Ce","apply","v","Z","lockedNodeLocations","attributes","geographicLookup","IsGeographic","None","I","centroid","IsMovable","extent","center","Number","isNaN","timeInfoByTypeName","startField","Date","getTime","NaN","C","endField","D","he","ee","O","Q","H","S","U","de","_validateLayoutSettings","te","_convertLayoutSettingsToCalculationSettings","j","N","success","links","graphics","subarray","chronologicalLayoutSettings","computationBudgetTime","idealEdgeLengthMultiplier","repulsionRadiusMultiplier","W","ae","ie","ue","h","_","G","F","vertexEndIndex","types","Recursive","vertices","we","ke","Regular","shift","Me","paths","be","nodes","idMap","applyNewLinkChartLayout","getCurrentNodeLocations","coords","synchronizeInclusionListWithCache","Array","from","keys","refreshLinkChartCache","connectBetweenEntities","getRelationshipsBetweenNodes","connectFromEntities","getRelationshipsFromNodes","getCurrentLayout","objectType","timeInfo","addToLayer","_createSublayer","map","Object","assign","entries","_updateSublayerCaches","parentCompositeLayer","find","graphType","graphTypeName","read","origin","doNotRecalculateLayout","emit","dataChanged","includes","organicLayoutSettings","idealEdgeLength","idealEdgeLengthType","durationLineWidth","parent","removeHandles","item","prototype","json","write","ignoreOrigin","Ve"],"sourceRoot":""}