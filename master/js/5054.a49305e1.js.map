{"version":3,"file":"js/5054.a49305e1.js","mappings":"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","sources":["webpack://ramp-website/./node_modules/ramp-pcar/dist/esDynamic/index-CSG8vxfr.js"],"sourcesContent":["import{F as p,fL as a,g6 as y,g7 as s,g8 as u,g9 as g,ga as m,dM as v,dN as L,e2 as f,dR as b,dV as I,dW as x,e0 as A,dU as $,dX as h,f6 as w,f7 as _,f8 as C}from\"./main-I34c1W55.js\";class S extends p{_parseConfig(e){const l=e?.headerControls?.slice()??[\"wizard\",\"layerReorder\",\"groupToggle\",\"visibilityToggle\"];if(a(this.$vApp.$pinia).headerControls=l,!e||!e.root.children)return;a(this.$vApp.$pinia).multilineItems=e.multilineItems?.enabled??!0;const t=[1,2,3,4,5,6];!e.multilineItems?.maxLines||!t.includes(e.multilineItems?.maxLines)?a(this.$vApp.$pinia).maxLines=3:a(this.$vApp.$pinia).maxLines=e.multilineItems.maxLines,this.handlePanelWidths([\"legend\"]),this.handlePanelTeleports([\"legend\"]);const i=this.getLayerFixtureConfigs();e.root.children.forEach(r=>{r.layerLegendConfigs=i,this.addItem(r)}),this.$iApi.geo.layer.allLayers().forEach(r=>{this.updateLegend(r)})}createItem(e,l){let t;e.layerId===void 0?t=new y(this.$iApi,e,l):(e.sublayerIndex!==void 0&&(e.layerId=`${e.layerId}-${e.sublayerIndex}`),t=new s(this.$iApi,e,l));const i=e.children;return i&&i.forEach(r=>{e.layerLegendConfigs!==void 0&&(r.layerLegendConfigs=e.layerLegendConfigs),t.children.push(this.createItem(r,t))}),t}addItem(e,l){const t=e instanceof u?e:this.createItem(e,l);return this._insertItem(t,l),t}async addLayerItem(e,l){const t=new s(this.$iApi,{layerId:e.id,sublayerIndex:e.isSublayer?e.layerIdx:void 0,name:e.name},l);return this._insertItem(t,l),this.updateLegend(e),t}get config(){return super.config}getLegend(){return a(this.$vApp.$pinia).children||[]}getLegendConfig(){return{root:{children:this.getLegend().map(e=>e.getConfig())}}}getItem(e){const l=this.getLegend();let t;return l.some(i=>(t=this.searchTreeFirst(i,r=>r.uid===e),t!==void 0)),t}getLayerItem(e){let l,t,i;return typeof e==\"string\"?(t=e,l=e):(t=e.id,l=e.uid),this.getLegend().some(r=>(i=this.searchTreeFirst(r,n=>n instanceof s&&(n.layerId===t||n.uid===l)),i!==void 0)),i}getAllExpanded(e){const l=e??!0;return this.searchLegend(t=>t.children.length>0&&t.expanded===l)}getAllVisible(e){const l=e??!0;return this.searchLegend(t=>t.visibility===l)}getLayerBoundItems(e){let l=\"\";const t=e instanceof g?e:this.$iApi.geo.layer.getLayer(e);if(t)l=t.isSublayer?t.parentLayer?.id||\"\":t.id;else return[];return this.searchLegend(i=>i instanceof s&&(i.layerId===l||i.parentLayerId===l))}updateLegend(e){const l=(t,i)=>{const r=this.getLayerItem(t);i?(r&&t instanceof g&&(r.layer=t),r?.error()):r?.load(t instanceof g?t:void 0)};e.loadPromise().then(()=>{let t=this.getLayerItem(e);if(e.layerType===m.MAPIMAGE){const i=r=>{if(r.isLayerRoot&&!r.isLogicalLayer)t=this.getLayerItem(e),l(e,!1),t&&!t.treeGrown&&(r.children.map(n=>this._treeWalker(e,n)).map(n=>this.addItem(n,t)),t.treeGrown=!0),r.children.forEach(n=>i(n));else if(!r.isLayerRoot&&!r.isLogicalLayer){if(t=this.getLayerItem(`${e.id}-${r.layerIdx}`),t){const n=t.getConfig();delete n.layerId,delete n.sublayerIndex,delete n.children,n.name||delete n.name;const o={...this._treeWalker(e,r),...n},d=this.createItem(o);this._replaceItem(t,d)}r.children.forEach(n=>i(n))}else r.isLogicalLayer&&l(this._treeWalker(e,r).layer,!1)};i(e.getLayerTree())}else l(e,!1)}).catch(()=>{l(e,!0),e.supportsSublayers&&e.config.sublayers.forEach(t=>{l(`${e.id}-${t.index}`,!0)})})}expandItems(e,l){const t=this.getLegend(),i=l===void 0?t:l.children;l!==void 0&&this._toggleState(l,{expanded:e}),i.forEach(r=>{this._toggleState(r,{expanded:e})})}showItems(e,l){const t=this.getLegend(),i=l===void 0?t:l.children;l!==void 0&&this._toggleState(l,{visibility:e}),i.forEach(r=>{this._toggleState(r,{visibility:e})})}reloadLayerItem(e){const l=this.getLayerBoundItems(e);return l.forEach(t=>t.reload()),l.length>0}removeItem(e){const l=typeof e==\"string\"?this.getItem(e):e;return l!==void 0?this._deleteItem(l):!1}removeLayerItem(e){const l=this.getLayerItem(e);return l!==void 0?this._deleteItem(l):!1}searchTreeFirst(e,l){if(l(e))return e;{let t;return e.children.some(i=>(t=this.searchTreeFirst(i,l),t!==void 0)),t}}searchTreeAll(e,l){const t=[],i=[e];for(;i.length>0;){const r=i.shift();r&&l(r)&&t.push(r),r&&i.push(...r.children)}return t}searchLegend(e){return this.getLegend().map(l=>this.searchTreeAll(l,e)).flat()}_toggleState(e,l){const t=l.visibility,i=l.expanded;t!==void 0&&e.toggleVisibility(t),i!==void 0&&e.children.length>0&&e.toggleExpanded(i),e.children&&e.children.length>0&&e.children.forEach(r=>{this._toggleState(r,l)})}_insertItem(e,l){a(this.$vApp.$pinia).addItem({item:e,parent:l})}_deleteItem(e){const l=a(this.$vApp.$pinia),t=i=>{i.children.length>0&&i.children.forEach(r=>{t(r)}),i instanceof s&&i.handlers.forEach(r=>this.$iApi.event.off(r)),l.removeItem(i)};return t(e),!0}_replaceItem(e,l){a(this.$vApp.$pinia).replaceItem({oldItem:e,newItem:l})}_treeWalker(e,l,t){const i=(n=>{const o=[e];for(;o.length>0;){const d=o.shift();if(d&&d.uid===n)return d;d&&o.push(...d.sublayers)}})(l.uid),r={};return l.isLayerRoot&&!l.isLogicalLayer?(r.layer=i,r.name=i.name,r.children=l.children.map(n=>this._treeWalker(e,n,t))):!l.isLayerRoot&&!l.isLogicalLayer?(r.name=l.name,r.children=l.children.map(n=>this._treeWalker(e,n,t))):l.isLogicalLayer&&(r.layer=i,r.name=i.name,r.layerId=i.id,r.sublayerIndex=e.isSublayer?e.layerIdx:void 0),{...r,...t}}}const E=v({__name:\"nav-button\",setup(c){const{t:e}=L(),l=f(\"iApi\"),t=()=>{l.panel.toggle(\"legend\")};return(i,r)=>{const n=b(\"mapnav-button\");return $(),I(n,{onClickFunction:t,tooltip:A(e)(\"legend.title\")},{default:x(()=>r[0]||(r[0]=[h(\"svg\",{class:\"fill-current w-32 h-20\",xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\"},[h(\"path\",{d:\"M0 0h24v24H0z\",fill:\"none\"}),h(\"path\",{d:\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z\"})],-1)])),_:1},8,[\"tooltip\"])}}}),M={en:{\"legend.title\":\"Legend\",\"legend.header.addlayer\":\"Add Layer\",\"legend.header.reorderlayers\":\"Reorder Layers\",\"legend.header.groups\":\"Toggle Groups\",\"legend.header.groups.expand\":\"Expand All\",\"legend.header.groups.collapse\":\"Collapse All\",\"legend.header.visible\":\"Toggle Visibility\",\"legend.header.visible.show\":\"Show All\",\"legend.header.visible.hide\":\"Hide All\",\"legend.group.expand\":\"Expand Group\",\"legend.group.collapse\":\"Collapse Group\",\"legend.visibility.showLayer\":\"Show layer\",\"legend.visibility.hideLayer\":\"Hide layer\",\"legend.visibility.showSymbol\":\"Show symbol\",\"legend.visibility.hideSymbol\":\"Hide symbol\",\"legend.visibility.showGroup\":\"Show group\",\"legend.visibility.hideGroup\":\"Hide group\",\"legend.symbology.expand\":\"Expand legend\",\"legend.symbology.hide\":\"Hide legend\",\"legend.symbology.loading\":\"Loading...\",\"legend.layer.data\":\"Show more data\",\"legend.layer.data.only\":\"Layer not on map\",\"legend.layer.offscale\":\"Layer out of scale\",\"legend.layer.zoomToVisible\":\"Zoom to visible scale\",\"legend.layer.options\":\"More options\",\"legend.layer.controls.metadata\":\"Metadata\",\"legend.layer.controls.settings\":\"Settings\",\"legend.layer.controls.datatable\":\"Datatable\",\"legend.layer.controls.symbology\":\"Legend\",\"legend.layer.controls.boundaryzoom\":\"Zoom to Layer Boundary\",\"legend.layer.controls.cancel\":\"Cancel\",\"legend.layer.controls.remove\":\"Remove\",\"legend.layer.controls.reload\":\"Reload\",\"legend.layer.controls.reloadDisabled\":\"Layer cannot be reloaded\",\"legend.alert.symbologyExpanded\":\"Layer legend expanded\",\"legend.alert.symbologyCollapsed\":\"Layer legend collapsed\",\"legend.alert.groupExpanded\":\"Legend group expanded\",\"legend.alert.groupCollapsed\":\"Legend group collapsed\",\"legend.alert.layerAdded\":\"{name} layer added to legend\",\"legend.alert.layerRemoved\":\"{name} layer removed from legend\"},fr:{\"legend.title\":\"L\\xE9gende\",\"legend.header.addlayer\":\"Ajouter une couche\",\"legend.header.reorderlayers\":\"R\\xE9organiser les couches\",\"legend.header.groups\":\"Basculer les Groupes\",\"legend.header.groups.expand\":\"\\xC9largir les groupes\",\"legend.header.groups.collapse\":\"R\\xE9duire les groupes\",\"legend.header.visible\":\"Basculer la Visibilit\\xE9\",\"legend.header.visible.show\":\"Montrer tout\",\"legend.header.visible.hide\":\"Cacher tout\",\"legend.group.expand\":\"D\\xE9velopper un groupe\",\"legend.group.collapse\":\"R\\xE9duire un groupe\",\"legend.visibility.showLayer\":\"Afficher la couche\",\"legend.visibility.hideLayer\":\"Masquer la couche\",\"legend.visibility.showSymbol\":\"Afficher le symbole\",\"legend.visibility.hideSymbol\":\"Masquer le symbole\",\"legend.visibility.showGroup\":\"Afficher le groupe\",\"legend.visibility.hideGroup\":\"Masquer le groupe\",\"legend.symbology.expand\":\"D\\xE9velopper la l\\xE9gende\",\"legend.symbology.hide\":\"Masquer la l\\xE9gende\",\"legend.symbology.loading\":\"Chargement en cours...\",\"legend.layer.data\":\"Afficher plus de donn\\xE9es\",\"legend.layer.data.only\":\"Couche non visualisable\",\"legend.layer.offscale\":\"Couche hors de port\\xE9e\",\"legend.layer.zoomToVisible\":\"Zoom sur l'\\xE9chelle visible\",\"legend.layer.options\":\"Plus d'options\",\"legend.layer.controls.metadata\":\"M\\xE9tadonn\\xE9es\",\"legend.layer.controls.settings\":\"Param\\xE8tres\",\"legend.layer.controls.datatable\":\"Tableau de donn\\xE9es\",\"legend.layer.controls.symbology\":\"L\\xE9gende\",\"legend.layer.controls.boundaryzoom\":\"Zoomer \\xE0 la limite\",\"legend.layer.controls.cancel\":\"Annuler\",\"legend.layer.controls.remove\":\"Retirer\",\"legend.layer.controls.reload\":\"Recharger\",\"legend.layer.controls.reloadDisabled\":\"Le calque ne peut pas \\xEAtre recharg\\xE9\",\"legend.alert.symbologyExpanded\":\"L\\xE9gende de la couche d\\xE9velopp\\xE9e\",\"legend.alert.symbologyCollapsed\":\"L\\xE9gende de la couche r\\xE9duite\",\"legend.alert.groupExpanded\":\"Groupe de l\\xE9gende d\\xE9velopp\\xE9\",\"legend.alert.groupCollapsed\":\"Groupe de l\\xE9gende r\\xE9duit\",\"legend.alert.layerAdded\":\"{name} couche ajout\\xE9e \\xE0 la l\\xE9gende\",\"legend.alert.layerRemoved\":\"Couche {name} retir\\xE9 de la l\\xE9gende\"}};class R extends S{added(){this.$iApi.component(\"legend-nav-button\",E),this.$iApi.panel.register({legend:{screens:{\"legend-screen\":()=>w(import(\"./screen-BzpCZpUE.js\"))},style:{width:\"350px\"},alertName:\"legend.title\",button:{tooltip:\"legend.title\",icon:'<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M11.99 18.54l-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27-7.38 5.74zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27L12 16z\" /></svg>'}}},{i18n:{messages:M}}),this._parseConfig(this.config!==void 0?JSON.parse(JSON.stringify(this.config)):void 0);const e=this.$vApp.$watch(()=>this.config,l=>this._parseConfig(l!==void 0?JSON.parse(JSON.stringify(l)):void 0));this.removed=()=>{e(),this.$iApi.fixture.exists(\"appbar\")&&_(this.$vApp.$pinia).removeButton(\"legend\"),this.$iApi.fixture.exists(\"mapnav\")&&C(this.$vApp.$pinia).removeItem(\"legend\"),a().$reset(),this.$iApi.panel.remove(\"legend\")}}}export{R as default};\n"],"names":["S","_parseConfig","e","l","headerControls","slice","this","$vApp","$pinia","root","children","multilineItems","enabled","t","maxLines","includes","handlePanelWidths","handlePanelTeleports","i","getLayerFixtureConfigs","forEach","r","layerLegendConfigs","addItem","$iApi","geo","layer","allLayers","updateLegend","createItem","layerId","sublayerIndex","push","_insertItem","addLayerItem","id","isSublayer","layerIdx","name","config","super","getLegend","getLegendConfig","map","getConfig","getItem","some","searchTreeFirst","uid","getLayerItem","n","getAllExpanded","searchLegend","length","expanded","getAllVisible","visibility","getLayerBoundItems","getLayer","parentLayer","parentLayerId","error","load","loadPromise","then","layerType","MAPIMAGE","isLayerRoot","isLogicalLayer","treeGrown","_treeWalker","o","d","_replaceItem","getLayerTree","catch","supportsSublayers","sublayers","index","expandItems","_toggleState","showItems","reloadLayerItem","reload","removeItem","_deleteItem","removeLayerItem","searchTreeAll","shift","flat","toggleVisibility","toggleExpanded","item","parent","handlers","event","off","replaceItem","oldItem","newItem","E","__name","setup","c","panel","toggle","onClickFunction","tooltip","default","class","xmlns","viewBox","fill","_","M","en","fr","R","added","component","register","legend","screens","style","width","alertName","button","icon","i18n","messages","JSON","parse","stringify","$watch","removed","fixture","exists","removeButton","$reset","remove"],"sourceRoot":""}