"use strict";(self["webpackChunkramp_website"]=self["webpackChunkramp_website"]||[]).push([[9005],{42403:function(e,t,n){n.d(t,{a:function(){return m},b:function(){return s},c:function(){return c},d:function(){return v},e:function(){return d},f:function(){return f},g:function(){return u},h:function(){return l},l:function(){return a},n:function(){return g},o:function(){return y},t:function(){return h}});var r=n(98503),o=n(82691),i=n(41470);function s(e,t){u(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function u(e,t,n=2,o=n){const i=t.length/2;let s=0,u=0;if((0,r.b$)(t)||(0,r.hh)(t)){for(let r=0;r<i;++r)e[s]=t[u],e[s+1]=t[u+1],s+=n,u+=o;return}const a=(0,r.hi)(t);if((0,r.hj)(t))for(let r=0;r<i;++r)e[s]=Math.max(t[u]/a,-1),e[s+1]=Math.max(t[u+1]/a,-1),s+=n,u+=o;else for(let r=0;r<i;++r)e[s]=t[u]/a,e[s+1]=t[u+1]/a,s+=n,u+=o}function a(e,t,n,r){const o=e.typedBuffer,i=e.typedBufferStride,s=r?.count??e.count;let u=(r?.dstIndex??0)*i;for(let a=0;a<s;++a)o[u]=t,o[u+1]=n,u+=i}function c(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t,n=3,r=n){const o=t.length/r;let i=0,s=0;for(let u=0;u<o;++u)e[i]=t[s],e[i+1]=t[s+1],e[i+2]=t[s+2],i+=n,s+=r}function f(e,t,n,r,o){const i=e.typedBuffer,s=e.typedBufferStride,u=o?.count??e.count;let a=(o?.dstIndex??0)*s;for(let c=0;c<u;++c)i[a]=t,i[a+1]=n,i[a+2]=r,a+=s}function d(e,t){h(e.typedBuffer,t,e.typedBufferStride)}function h(e,t,n=4){const r=t.typedBuffer,o=t.typedBufferStride,i=t.count;let s=0,u=0;for(let a=0;a<i;++a)e[s]=r[u],e[s+1]=r[u+1],e[s+2]=r[u+2],e[s+3]=r[u+3],s+=n,u+=o}function m(e,t,n,r,o,i){const s=e.typedBuffer,u=e.typedBufferStride,a=i?.count??e.count;let c=(i?.dstIndex??0)*u;for(let l=0;l<a;++l)s[c]=t,s[c+1]=n,s[c+2]=r,s[c+3]=o,c+=u}Object.freeze(Object.defineProperty({__proto__:null,fill:a,normalizeIntegerBuffer:u,normalizeIntegerBufferView:s},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:l,copyView:c,fill:f},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:h,copyView:d,fill:m},Symbol.toStringTag,{value:"Module"}));class g{constructor(e){this._streamDataRequester=e}async loadJSON(e,t){return this._load("json",e,t)}async loadBinary(e,t){return(0,r.fd)(e)?((0,r.D)(t),(0,r.hk)(e)):this._load("binary",e,t)}async loadImage(e,t){return this._load("image",e,t)}async _load(e,t,n){if(null==this._streamDataRequester)return(await(0,r.U)(t,{responseType:p[e]})).data;const o=await(0,r._)(this._streamDataRequester.request(t,e,n));if(!0===o.ok)return o.value;throw(0,r.G)(o.error),new r.s("glt-loader-request-error",`Request for resource failed: ${o.error}`)}}const p={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function y(e,t){switch(t){case i.E.TRIANGLES:return b(e);case i.E.TRIANGLE_STRIP:return x(e);case i.E.TRIANGLE_FAN:return w(e)}}function b(e){return"number"==typeof e?(0,o.l)(e):(0,r.cj)(e)?new Uint16Array(e):e}function x(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const n=t-2,r=(0,o.i)(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;t+=1)t%2==0?(r[e++]=t,r[e++]=t+1,r[e++]=t+2):(r[e++]=t+1,r[e++]=t,r[e++]=t+2)}else{let t=0;for(let o=0;o<n;o+=1)o%2==0?(r[t++]=e[o],r[t++]=e[o+1],r[t++]=e[o+2]):(r[t++]=e[o+1],r[t++]=e[o],r[t++]=e[o+2])}return r}function w(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const n=t-2,r=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;++t)r[e++]=0,r[e++]=t+1,r[e++]=t+2;return r}const o=e[0];let i=e[1],s=0;for(let u=0;u<n;++u){const t=e[u+2];r[s++]=o,r[s++]=i,r[s++]=t,i=t}return r}const v=2.1},22676:function(e,t,n){n.d(t,{r:function(){return o}});var r=n(98503);let o=class e{constructor(e,t,n=""){this.major=e,this.minor=t,this._context=n}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}greaterEqual(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major){const t=this._context&&this._context+":",n=this._context&&this._context+" ";throw new r.s(t+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new e(this.major,this.minor,this._context)}static parse(t,n=""){const[o,i]=t.split("."),s=/^\s*\d+\s*$/;if(!o?.match||!s.test(o))throw new r.s((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!i?.match||!s.test(i))throw new r.s((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const u=parseInt(o,10),a=parseInt(i,10);return new e(u,a,n)}}},22889:function(e,t,n){function r(e){return e=e||globalThis.location.hostname,c.some((t=>null!=e?.match(t)))}function o(e,t){return e?(t=t||globalThis.location.hostname)?null!=t.match(i)||null!=t.match(u)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(s)||null!=t.match(a)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}n.d(t,{a:function(){return o},c:function(){return r}});const i=/^devext\.arcgis\.com$/,s=/^qaext\.arcgis\.com$/,u=/^[\w-]*\.mapsdevext\.arcgis\.com$/,a=/^[\w-]*\.mapsqa\.arcgis\.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,i,s,/^jsapps\.esri\.com$/,u,a]},39005:function(e,t,n){n.d(t,{fetch:function(){return te}});var r=n(22889),o=n(98503),i=n(69852),s=n(10769),u=n(74362),a=n(77703),c=n(39967),l=n(92157),f=n(45160),d=n(98256),h=n(91710),m=n(87437),g=n(42403),p=n(76637),y=n(85047),b=n(77485),x=n(22676),w=n(82691),v=n(50306),T=n(77678),_=n(36012),B=n(7132),I=n(93942),A=n(71807),S=n(41470),M=n(38097);function O(e,t){if(!e)return!1;const{size:n,data:r,indices:o}=e;(0,l.o)(t,0,0,0),(0,l.o)(L,0,0,0);let i=0,s=0;for(let u=0;u<o.length-2;u+=3){const e=o[u]*n,a=o[u+1]*n,c=o[u+2]*n;(0,l.o)(C,r[e],r[e+1],r[e+2]),(0,l.o)(P,r[a],r[a+1],r[a+2]),(0,l.o)(j,r[c],r[c+1],r[c+2]);const f=(0,B.S)(C,P,j);f?((0,l.u)(C,C,P),(0,l.u)(C,C,j),(0,l.g)(C,C,1/3*f),(0,l.u)(t,t,C),i+=f):((0,l.u)(L,L,C),(0,l.u)(L,L,P),(0,l.u)(L,L,j),s+=3)}return(0!==s||0!==i)&&(0!==i?((0,l.g)(t,t,1/i),!0):0!==s&&((0,l.g)(t,L,1/s),!0))}function R(e,t){if(!e)return!1;const{size:n,data:r,indices:o}=e;(0,l.o)(t,0,0,0);let i=-1,s=0;for(let u=0;u<o.length;u++){const e=o[u]*n;i!==e&&(t[0]+=r[e],t[1]+=r[e+1],t[2]+=r[e+2],s++),i=e}return s>1&&(0,l.g)(t,t,1/s),s>0}function E(e,t,n){if(!e)return!1;(0,l.o)(n,0,0,0),(0,l.o)(L,0,0,0);let r=0,o=0;const{size:i,data:s,indices:u}=e,a=u.length-1,c=a+(t?2:0);for(let f=0;f<c;f+=2){const e=f<a?f+1:0,t=u[f<a?f:a]*i,c=u[e]*i;C[0]=s[t],C[1]=s[t+1],C[2]=s[t+2],P[0]=s[c],P[1]=s[c+1],P[2]=s[c+2],(0,l.g)(C,(0,l.u)(C,C,P),.5);const d=(0,l.W)(C,P);d>0?((0,l.u)(n,n,(0,l.g)(C,C,d)),r+=d):0===r&&((0,l.u)(L,L,C),o++)}return 0!==r?((0,l.g)(n,n,1/r),!0):0!==o&&((0,l.g)(n,L,1/o),!0)}const C=(0,o.aA)(),P=(0,o.aA)(),j=(0,o.aA)(),L=(0,o.aA)();class N{constructor(){this.uid=(0,o.fH)()}}class G extends N{constructor(e){super(),this.highlightGroupName=e,this.channel=_.t.Highlight}}class U extends f.r{constructor(e,t,n=null,r=f.e.Mesh,o=null,i=-1){super(),this.material=e,this.mapPositions=n,this.type=r,this.objectAndLayerIdColor=o,this.edgeIndicesLength=i,this.highlights=new Set,this._highlightGroupCounts=new Map,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[s,u]of t)this._attributes.set(s,{...u,indices:(0,w.t)(u.indices)}),s===A.e.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(s).indices.length:this.edgeIndicesLength)}instantiate(e={}){const t=new U(e.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((e,n)=>{e.exclusive=!1,t._attributes.set(n,e)})),t._boundingInfo=this._boundingInfo,t.transformation=e.transformation||this.transformation,t}get attributes(){return this._attributes}getMutableAttribute(e){let t=this._attributes.get(e);return t&&!t.exclusive&&(t={...t,exclusive:!0,data:(0,f.o)(t.data)},this._attributes.set(e,t)),t}setAttributeData(e,t){const n=this._attributes.get(e);n&&this._attributes.set(e,{...n,exclusive:!0,data:t})}get indexCount(){return this._attributes.values().next().value.indices?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return!!(this.type===f.e.Mesh?this._computeAttachmentOriginTriangles(e):this.type===f.e.Line?this._computeAttachmentOriginLines(e):this._computeAttachmentOriginPoints(e))&&(null!=this._transformation&&(0,l.E)(e,e,this._transformation),!0)}_computeAttachmentOriginTriangles(e){const t=this.attributes.get(A.e.POSITION);return O(t,e)}_computeAttachmentOriginLines(e){const t=this.attributes.get(A.e.POSITION);return E(t,F(this.material.parameters,t),e)}_computeAttachmentOriginPoints(e){const t=this.attributes.get(A.e.POSITION);return R(t,e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const e=this.attributes.get(A.e.POSITION);if(!e||0===e.indices.length)return null;const t=this.type===f.e.Mesh?3:1;(0,I.s)(e.indices.length%t==0,"Indexing error: "+e.indices.length+" not divisible by "+t);const n=(0,w.l)(e.indices.length/t);return new f.a(n,t,e)}get transformation(){return this._transformation??a.o}set transformation(e){this._transformation=e&&e!==a.o?(0,a.r)(e):null}get highlightGroups(){return this._highlightGroupCounts}get hasHighlights(){return this._highlightGroupCounts.size>0}foreachHighlightGroup(e){this._highlightGroupCounts.forEach(((t,n)=>e(n)))}allocateIdAndHighlight(e){const t=new G(e);return this.addHighlight(t)}addHighlight(e){this.highlights.add(e);const{highlightGroupName:t}=e,n=(this._highlightGroupCounts.get(t)??0)+1;return this._highlightGroupCounts.set(t,n),e}removeHighlight(e){if(this.highlights.delete(e)){const{highlightGroupName:t}=e,n=this._highlightGroupCounts.get(t)??0;n<=1?this._highlightGroupCounts.delete(t):this._highlightGroupCounts.set(t,n-1)}}}function F(e,t){return!(!("isClosed"in e)||!e.isClosed)&&t.indices.length>2}function $(e){if(null==e)return null;const t=null!=e.offset?e.offset:y.i,n=null!=e.rotation?e.rotation:0,r=null!=e.scale?e.scale:y.f,o=(0,s.t)(1,0,0,0,1,0,t[0],t[1],1),u=(0,s.t)(Math.cos(n),-Math.sin(n),0,Math.sin(n),Math.cos(n),0,0,0,1),a=(0,s.t)(r[0],0,0,0,r[1],0,0,0,1),c=(0,s.e)();return(0,i.i)(c,u,a),(0,i.i)(c,o,c),c}class k{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class q{constructor(e,t,n){this.name=e,this.lodThreshold=t,this.pivotOffset=n,this.stageResources=new k,this.numberOfVertices=0}}const z=()=>o.n.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");async function D(e,t){const n=await V(e,t),r=await Y(n.textureDefinitions??{},t);let i=0;for(const o in r)if(r.hasOwnProperty(o)){const e=r[o];i+=e?.image?e.image.width*e.image.height*4:0}return{resource:n,textures:r,size:i+(0,o.hu)(n)}}async function V(e,t){const n=t?.streamDataRequester;if(n)return H(e,n,t);const r=await(0,o._)((0,o.U)(e,t));if(!0===r.ok)return r.value.data;(0,o.G)(r.error),W(r.error)}async function H(e,t,n){const r=await(0,o._)(t.request(e,"json",n));if(!0===r.ok)return r.value;(0,o.G)(r.error),W(r.error.details.url)}function W(e){throw new o.s("",`Request for object resource failed: ${e}`)}function X(e){const t=e.params,n=t.topology;let r=!0;switch(t.vertexAttributes||(z().warn("Geometry must specify vertex attributes"),r=!1),t.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const n in t.vertexAttributes){const t=e[n];t?.values?(null!=t.valueType&&"UInt32"!==t.valueType&&(z().warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),r=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(z().warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),r=!1)):(z().warn(`Indexed geometry does not specify face indices for '${n}' attribute`),r=!1)}}else z().warn("Indexed geometries must specify faces"),r=!1;break}default:z().warn(`Unsupported topology '${n}'`),r=!1}e.params.material||(z().warn("Geometry requires material"),r=!1);const o=e.params.vertexAttributes;for(const i in o)o[i].values||(z().warn("Geometries with externally defined attributes are not yet supported"),r=!1);return r}function K(e,t){const n=new Array,r=new Array,i=new Array,s=new b.t,u=e.resource,a=x.r.parse(u.version||"1.0","wosr");ee.validate(a);const c=u.model.name,l=u.model.geometries,d=u.materialDefinitions??{},h=e.textures;let m=0;const g=new Map;for(let p=0;p<l.length;p++){const e=l[p];if(!X(e))continue;const u=Z(e),a=e.params.vertexAttributes,c=[],y=t=>{if("PerAttributeArray"===e.params.topology)return null;const n=e.params.faces;for(const e in n)if(e===t)return n[e].values;return null},b=a[A.e.POSITION],x=b.values.length/b.valuesPerElement;for(const t in a){const e=a[t],n=e.values,r=y(t)??(0,w.l)(x);c.push([t,new T.t(n,r,e.valuesPerElement,!0)])}const v=u.texture,B=h&&h[v];if(B&&!g.has(v)){const{image:e,parameters:t}=B,n=new f.C(e,t);r.push(n),g.set(v,n)}const I=g.get(v),S=I?I.id:void 0,M=u.material;let O=s.get(M,v);if(null==O){const e=d[M.slice(M.lastIndexOf("/")+1)].params;1===e.transparency&&(e.transparency=0);const n=B&&B.alphaChannelUsage,r=e.transparency>0||"transparency"===n||"maskAndTransparency"===n,i=B?Q(B.alphaChannelUsage):void 0,u={ambient:(0,o.e$)(e.diffuse),diffuse:(0,o.e$)(e.diffuse),opacity:1-(e.transparency||0),transparent:r,textureAlphaMode:i,textureAlphaCutoff:.33,textureId:S,initTextureTransparent:!0,doubleSided:!0,cullFace:_.e.None,colorMixMode:e.externalColorMixMode||"tint",textureAlphaPremultiplied:B?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(u,t.materialParameters),O=new f.B(u,t),s.set(M,v,O)}i.push(O);const R=new U(O,c);m+=c.find((e=>e[0]===A.e.POSITION))?.[1]?.indices.length??0,n.push(R)}return{engineResources:[{name:c,stageResources:{textures:r,materials:i,geometries:n},pivotOffset:u.model.pivotOffset,numberOfVertices:m,lodThreshold:null}],referenceBoundingBox:J(n)}}function J(e){const t=(0,o.hv)();return e.forEach((e=>{const n=e.boundingInfo;null!=n&&((0,o.gG)(t,n.bbMin),(0,o.gG)(t,n.bbMax))})),t}async function Y(e,t){const n=new Array;for(const i in e){const r=e[i],o=r.images[0].data;if(!o){z().warn("Externally referenced texture data is not yet supported");continue}const s=r.encoding+";base64,"+o,u="/textureDefinitions/"+i,a="rgba"===r.channels?r.alphaChannelUsage||"transparency":"none",c={noUnpackFlip:!0,wrap:{s:S.D.REPEAT,t:S.D.REPEAT},preMultiplyAlpha:Q(a)!==_.i.Opaque},l=t?.disableTextures?Promise.resolve(null):(0,v.t)(s,t);n.push(l.then((e=>({refId:u,image:e,parameters:c,alphaChannelUsage:a}))))}const r=await Promise.all(n),o={};for(const i of r)o[i.refId]=i;return o}function Q(e){switch(e){case"mask":return _.i.Mask;case"maskAndTransparency":return _.i.MaskBlend;case"none":return _.i.Opaque;default:return _.i.Blend}}function Z(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const ee=new x.r(1,2,"wosr");async function te(e,t){const o=ne((0,r.a)(e));if("wosr"===o.fileType){const e=await(t.cache?t.cache.loadWOSR(o.url,t):D(o.url,t)),{engineResources:n,referenceBoundingBox:r}=K(e,t);return{lods:n,referenceBoundingBox:r,isEsriSymbolResource:!1,isWosr:!0}}let i;if(t.cache)i=await t.cache.loadGLTF(o.url,t,!!t.usePBR);else{const{loadGLTF:e}=await n.e(622).then(n.bind(n,8241));i=await e(new g.n(t.streamDataRequester),o.url,t,t.usePBR)}const s=i.model.meta?.ESRI_proxyEllipsoid,u=i.meta.isEsriSymbolResource&&null!=s&&"EsriRealisticTreesStyle"===i.meta.ESRI_webstyle;u&&!i.customMeta.esriTreeRendering&&(i.customMeta.esriTreeRendering=!0,ae(i,s));const a=!!t.usePBR,c=i.meta.isEsriSymbolResource?{usePBR:a,isSchematic:!1,treeRendering:u,mrrFactors:f.s}:{usePBR:a,isSchematic:!1,treeRendering:!1,mrrFactors:f.t},l={...t.materialParameters,treeRendering:u},{engineResources:d,referenceBoundingBox:h}=re(i,c,l,t,o.specifiedLodIndex);return{lods:d,referenceBoundingBox:h,isEsriSymbolResource:i.meta.isEsriSymbolResource,isWosr:!1}}function ne(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}function re(e,t,n,r,i){const s=e.model,u=new Array,a=new Map,c=new Map,l=s.lods.length,d=(0,o.hv)();return s.lods.forEach(((e,h)=>{const m=!0===r.skipHighLods&&(l>1&&0===h||l>3&&1===h)||!1===r.skipHighLods&&null!=i&&h!==i;if(m&&0!==h)return;const g=new q(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const i=m?new f.B({},r):oe(s,e,g,t,n,a,c,r),{geometry:u,vertexCount:l}=ie(e,i??new f.B({},r)),p=u.boundingInfo;null!=p&&0===h&&((0,o.gG)(d,p.bbMin),(0,o.gG)(d,p.bbMax)),null!=i&&(g.stageResources.geometries.push(u),g.numberOfVertices+=l)})),m||u.push(g)})),{engineResources:u,referenceBoundingBox:d}}function oe(e,t,n,r,o,i,s,u){const a=t.material+(t.attributes.normal?"_normal":"")+(t.attributes.color?"_color":"")+(t.attributes.texCoord0?"_texCoord0":"")+(t.attributes.tangent?"_tangent":""),l=e.materials.get(t.material),d=null!=t.attributes.texCoord0,h=null!=t.attributes.normal;if(null==l)return null;const m=ue(l.alphaMode);if(!i.has(a)){if(d){const t=(t,n=!1)=>{if(null!=t&&!s.has(t)){const r=e.textures.get(t);if(null!=r){const e=r.data;s.set(t,new f.C((0,p.r)(e)?e.data:e,{...r.parameters,preMultiplyAlpha:!(0,p.r)(e)&&n,encoding:(0,p.r)(e)&&null!=e.encoding?e.encoding:void 0}))}}};t(l.textureColor,m!==_.i.Opaque),t(l.textureNormal),t(l.textureOcclusion),t(l.textureEmissive),t(l.textureMetallicRoughness)}const n=l.color[0]**(1/g.d),y=l.color[1]**(1/g.d),b=l.color[2]**(1/g.d),x=l.emissiveFactor[0]**(1/g.d),w=l.emissiveFactor[1]**(1/g.d),v=l.emissiveFactor[2]**(1/g.d),T=null!=l.textureColor&&d?s.get(l.textureColor):null,B=(0,f.n)({normalTexture:l.textureNormal,metallicRoughnessTexture:l.textureMetallicRoughness,metallicFactor:l.metallicFactor,roughnessFactor:l.roughnessFactor,emissiveTexture:l.textureEmissive,emissiveFactor:l.emissiveFactor,occlusionTexture:l.textureOcclusion}),I=null!=l.normalTextureTransform?.scale?l.normalTextureTransform?.scale:c.l;i.set(a,new f.B({...r,transparent:m===_.i.Blend,customDepthTest:_.n.Lequal,textureAlphaMode:m,textureAlphaCutoff:l.alphaCutoff,diffuse:[n,y,b],ambient:[n,y,b],opacity:l.opacity,doubleSided:l.doubleSided,doubleSidedType:"winding-order",cullFace:l.doubleSided?_.e.None:_.e.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:h?M.a.Attribute:M.a.ScreenDerivative,castShadows:!0,receiveShadows:l.receiveShadows,receiveAmbientOcclusion:l.receiveAmbientOcclustion,textureId:T?.id,colorMixMode:l.colorMixMode,normalTextureId:null!=l.textureNormal&&d?s.get(l.textureNormal).id:void 0,textureAlphaPremultiplied:null!=T&&!!T.parameters.preMultiplyAlpha,occlusionTextureId:null!=l.textureOcclusion&&d?s.get(l.textureOcclusion).id:void 0,emissiveTextureId:null!=l.textureEmissive&&d?s.get(l.textureEmissive).id:void 0,metallicRoughnessTextureId:null!=l.textureMetallicRoughness&&d?s.get(l.textureMetallicRoughness).id:void 0,emissiveFactor:[x,w,v],mrrFactors:B?f.b:[l.metallicFactor,l.roughnessFactor,r.mrrFactors[2]],isSchematic:B,colorTextureTransformMatrix:$(l.colorTextureTransform),normalTextureTransformMatrix:$(l.normalTextureTransform),scale:[I[0],I[1]],occlusionTextureTransformMatrix:$(l.occlusionTextureTransform),emissiveTextureTransformMatrix:$(l.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:$(l.metallicRoughnessTextureTransform),...o},u))}const y=i.get(a);if(n.stageResources.materials.push(y),d){const e=e=>{null!=e&&n.stageResources.textures.push(s.get(e))};e(l.textureColor),e(l.textureNormal),e(l.textureOcclusion),e(l.textureEmissive),e(l.textureMetallicRoughness)}return y}function ie(e,t){const n=e.attributes.position.count,r=(0,g.o)(e.indices||n,e.primitiveType),s=(0,f.c)(3*n),{typedBuffer:u,typedBufferStride:a}=e.attributes.position;(0,h.e)(s,u,e.transform,3,a);const c=[[A.e.POSITION,new T.t(s,r,3,!0)]];if(null!=e.attributes.normal){const t=(0,f.c)(3*n),{typedBuffer:s,typedBufferStride:u}=e.attributes.normal;(0,i.j)(se,e.transform),(0,h.f)(t,s,se,3,u),(0,o.eA)(se)&&(0,h.l)(t,t),c.push([A.e.NORMAL,new T.t(t,r,3,!0)])}if(null!=e.attributes.tangent){const t=(0,f.c)(4*n),{typedBuffer:s,typedBufferStride:u}=e.attributes.tangent;(0,i.n)(se,e.transform),(0,m.n)(t,s,se,4,u),(0,o.eA)(se)&&(0,h.l)(t,t,4),c.push([A.e.TANGENT,new T.t(t,r,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,f.c)(2*n),{typedBuffer:o,typedBufferStride:i}=e.attributes.texCoord0;(0,g.g)(t,o,2,i),c.push([A.e.UV0,new T.t(t,r,2,!0)])}const l=e.attributes.color;if(null!=l){const t=new Uint8Array(4*n);4===l.elementCount?l instanceof d.c?(0,m.s)(t,l,255):l instanceof d.x?(0,g.t)(t,l):l instanceof d.L&&(0,m.s)(t,l,1/256):(t.fill(255),l instanceof d.i?(0,h.o)(t,l.typedBuffer,255,4,l.typedBufferStride):e.attributes.color instanceof d.O?(0,g.h)(t,l.typedBuffer,4,e.attributes.color.typedBufferStride):e.attributes.color instanceof d.E&&(0,h.o)(t,l.typedBuffer,1/256,4,l.typedBufferStride)),c.push([A.e.COLOR,new T.t(t,r,4,!0)])}return{geometry:new U(t,c),vertexCount:n}}const se=(0,s.e)();function ue(e){switch(e){case"BLEND":return _.i.Blend;case"MASK":return _.i.Mask;case"OPAQUE":case null:case void 0:return _.i.Opaque}}function ae(e,t){for(let n=0;n<e.model.lods.length;++n){const r=e.model.lods[n];for(const i of r.parts){const r=i.attributes.normal;if(null==r)return;const s=i.attributes.position,c=s.count,f=(0,o.aA)(),h=(0,o.aA)(),m=(0,o.aA)(),g=new Uint8Array(4*c),p=new Float64Array(3*c),y=(0,u.h)((0,a.e)(),i.transform);let b=0,x=0;for(let o=0;o<c;o++){s.getVec(o,h),r.getVec(o,f),(0,l.E)(h,h,i.transform),(0,l.c)(m,h,t.center),(0,l.i)(m,m,t.radius);const u=m[2],a=(0,l.r)(m),c=Math.min(.45+.55*a*a,1);(0,l.i)(m,m,t.radius),null!==y&&(0,l.E)(m,m,y),(0,l.A)(m,m),n+1!==e.model.lods.length&&e.model.lods.length>1&&(0,l.I)(m,m,f,u>-1?.2:Math.min(-4*u-3.8,1)),p[b]=m[0],p[b+1]=m[1],p[b+2]=m[2],b+=3,g[x]=255*c,g[x+1]=255*c,g[x+2]=255*c,g[x+3]=255,x+=4}i.attributes.normal=new d.i(p),i.attributes.color=new d.x(g)}}}},76637:function(e,t,n){n.d(t,{n:function(){return u},o:function(){return a},r:function(){return s},t:function(){return i}});var r=n(98503),o=n(36012);class i{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.u.KTX2_ENCODING}}function s(e){return"encoded-mesh-texture"===e?.type}async function u(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function a(e,t){if(t===o.u.KTX2_ENCODING)return new i(e);const n=new Blob([e],{type:t}),s=URL.createObjectURL(n),u=new Image;if((0,r.a$)("esri-iPhone"))return new Promise(((e,t)=>{const n=()=>{o(),e(u)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(s),u.removeEventListener("load",n),u.removeEventListener("error",r)};u.addEventListener("load",n),u.addEventListener("error",r),u.src=s}));try{u.src=s,await u.decode()}catch{console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(s),u}},85047:function(e,t,n){function r(){return new Float32Array(2)}function o(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function i(e,t){const n=new Float32Array(2);return n[0]=e,n[1]=t,n}function s(e,t){return new Float32Array(e,t,2)}function u(){return r()}function a(){return i(1,1)}function c(){return i(1,0)}function l(){return i(0,1)}n.d(t,{f:function(){return d},i:function(){return f},n:function(){return r},t:function(){return i}});const f=u(),d=a(),h=c(),m=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_X:h,UNIT_Y:m,ZEROS:f,clone:o,create:r,createView:s,fromValues:i,ones:a,unitX:c,unitY:l,zeros:u},Symbol.toStringTag,{value:"Module"}))},91710:function(e,t,n){n.d(t,{e:function(){return o},f:function(){return s},i:function(){return c},l:function(){return f},n:function(){return u},o:function(){return a},r:function(){return i},t:function(){return r},u:function(){return l}});n(98503);function r(e,t,n){o(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function o(e,t,n,r=3,o=r){if(e.length/r!==Math.ceil(t.length/o))return e;const i=e.length/r,s=n[0],u=n[1],a=n[2],c=n[4],l=n[5],f=n[6],d=n[8],h=n[9],m=n[10],g=n[12],p=n[13],y=n[14];let b=0,x=0;for(let w=0;w<i;w++){const n=t[b],i=t[b+1],w=t[b+2];e[x]=s*n+c*i+d*w+g,e[x+1]=u*n+l*i+h*w+p,e[x+2]=a*n+f*i+m*w+y,b+=o,x+=r}return e}function i(e,t,n){s(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function s(e,t,n,r=3,o=r){if(e.length/r!==Math.ceil(t.length/o))return;const i=e.length/r,s=n[0],u=n[1],a=n[2],c=n[3],l=n[4],f=n[5],d=n[6],h=n[7],m=n[8];let g=0,p=0;for(let y=0;y<i;y++){const n=t[g],i=t[g+1],y=t[g+2];e[p]=s*n+c*i+d*y,e[p+1]=u*n+l*i+h*y,e[p+2]=a*n+f*i+m*y,g+=o,p+=r}}function u(e,t,n){a(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function a(e,t,n,r=3,o=r){const i=Math.min(e.length/r,t.length/o);let s=0,u=0;for(let a=0;a<i;a++)e[u]=n*t[s],e[u+1]=n*t[s+1],e[u+2]=n*t[s+2],s+=o,u+=r;return e}function c(e,t,n,r=3,o=r){const i=e.length/r;if(i!==Math.ceil(t.length/o))return e;let s=0,u=0;for(let a=0;a<i;a++)e[u]=t[s]+n[0],e[u+1]=t[s+1]+n[1],e[u+2]=t[s+2]+n[2],s+=o,u+=r;return e}function l(e,t){f(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function f(e,t,n=3,r=n){const o=Math.min(e.length/n,t.length/r);let i=0,s=0;for(let u=0;u<o;u++){const o=t[i],u=t[i+1],a=t[i+2],c=o*o+u*u+a*a;if(c>0){const t=1/Math.sqrt(c);e[s]=t*o,e[s+1]=t*u,e[s+2]=t*a}i+=r,s+=n}}function d(e,t,n){const r=Math.min(e.count,t.count),o=e.typedBuffer,i=e.typedBufferStride,s=t.typedBuffer,u=t.typedBufferStride;let a=0,c=0;for(let l=0;l<r;l++)o[c]=s[a]>>n,o[c+1]=s[a+1]>>n,o[c+2]=s[a+2]>>n,a+=u,c+=i}Object.freeze(Object.defineProperty({__proto__:null,normalize:f,normalizeView:l,scale:a,scaleView:u,shiftRight:d,transformMat3:s,transformMat3View:i,transformMat4:o,transformMat4View:r,translate:c},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=9005.dcd7d017.js.map